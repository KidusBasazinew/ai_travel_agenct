"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2414],{1195:function(t,e,i){i.d(e,{N:function(){return g},V:function(){return f}});var s,l=i(4173),n=i(1897),o=i(5694),a=i(7786),r=i(2214),h=i(5411),u=i(9694),p=i(502),c=i(2575),d=(s=function(t,e){return(s=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),m=function(t,e,i,s){var l,n=arguments.length,o=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(l=t[a])&&(o=(n<3?l(o):n>3?l(e,i,o):l(e,i))||o);return n>3&&o&&Object.defineProperty(e,i,o),o},f={root:"e-dropdownlist",hover:u.AA.hover,selected:u.AA.selected,rtl:u.AA.rtl,li:u.AA.li,disable:u.AA.disabled,base:u.AA.root,focus:u.AA.focus,content:u.AA.content,input:"e-input-group",inputFocus:"e-input-focus",icon:"e-input-group-icon e-ddl-icon",iconAnimation:"e-icon-anim",value:"e-input-value",device:"e-ddl-device",backIcon:"e-input-group-icon e-back-icon e-icons",filterBarClearIcon:"e-input-group-icon e-clear-icon e-icons",filterInput:"e-input-filter",resizeIcon:"e-resizer-right e-icons",filterParent:"e-filter-parent",mobileFilter:"e-ddl-device-filter",footer:"e-ddl-footer",header:"e-ddl-header",clearIcon:"e-clear-icon",clearIconHide:"e-clear-icon-hide",popupFullScreen:"e-popup-full-page",disableIcon:"e-ddl-disable-icon",hiddenElement:"e-ddl-hidden",virtualList:"e-list-item e-virtual-list"},v={container:null,buttons:[]},g=function(t){function e(e,i){var s=t.call(this,e,i)||this;return s.isListSearched=!1,s.preventChange=!1,s.isTouched=!1,s.isFocused=!1,s.autoFill=!1,s.isUpdateHeaderHeight=!1,s.isUpdateFooterHeight=!1,s.isReactTemplateUpdate=!1,s}return d(e,t),e.prototype.preRender=function(){this.valueTempElement=null,this.element.style.opacity="0",this.initializeData(),t.prototype.preRender.call(this),this.activeIndex=this.index,this.queryString=""},e.prototype.initializeData=function(){this.isPopupOpen=!1,this.isDocumentClick=!1,this.isInteracted=!1,this.isFilterFocus=!1,this.beforePopupOpen=!1,this.initial=!0,this.initialRemoteRender=!1,this.isNotSearchList=!1,this.isTyped=!1,this.isSelected=!1,this.preventFocus=!1,this.preventAutoFill=!1,this.isValidKey=!1,this.typedString="",this.isEscapeKey=!1,this.isPreventBlur=!1,this.isTabKey=!1,this.actionCompleteData={isUpdated:!1},this.actionData={isUpdated:!1},this.prevSelectPoints={},this.isSelectCustom=!1,this.isDropDownClick=!1,this.preventAltUp=!1,this.isCustomFilter=!1,this.isSecondClick=!1,this.previousValue=null,this.keyConfigure={tab:"tab",enter:"13",escape:"27",end:"35",home:"36",down:"40",up:"38",pageUp:"33",pageDown:"34",open:"alt+40",close:"shift+tab",hide:"alt+38",space:"32"},this.viewPortInfo={currentPageNumber:null,direction:null,sentinelInfo:{},offsets:{},startIndex:0,endIndex:this.itemCount}},e.prototype.setZIndex=function(){this.popupObj&&this.popupObj.setProperties({zIndex:this.zIndex})},e.prototype.requiredModules=function(){var t=[];return this.enableVirtualization&&t.push({args:[this],member:"VirtualScroll"}),t},e.prototype.renderList=function(e,i){t.prototype.render.call(this,e,i),this.dataSource instanceof p.h||(this.totalItemCount=this.dataSource&&this.dataSource.length?this.dataSource.length:0),this.enableVirtualization&&this.isFiltering()&&"combobox"===this.getModuleName()&&(this.UpdateSkeleton(),this.liCollections=this.list.querySelectorAll("."+u.AA.li),this.ulElement=this.list.querySelector("ul")),this.unWireListEvents(),this.wireListEvents()},e.prototype.floatLabelChange=function(){if("dropdownlist"===this.getModuleName()&&"Auto"===this.floatLabelType){var t=this.inputWrapper.container.querySelector(".e-float-text");""!==this.inputElement.value||this.isInteracted?(0,l.s1)(t,["e-label-top"],["e-label-bottom"]):(0,l.s1)(t,["e-label-bottom"],["e-label-top"])}},e.prototype.resetHandler=function(t){t.preventDefault(),this.clearAll(t),this.enableVirtualization&&(this.list.scrollTop=0,this.virtualListInfo=null,this.previousStartIndex=0,this.previousEndIndex=0)},e.prototype.resetFocusElement=function(){if(this.removeHover(),this.removeSelection(),this.removeFocus(),this.list.scrollTop=0,"autocomplete"!==this.getModuleName()&&!(0,l.le)(this.ulElement)){var t=this.fields.disabled?this.ulElement.querySelector("."+f.li+":not(.e-disabled)"):this.ulElement.querySelector("."+f.li);this.enableVirtualization&&(t=this.liCollections[this.skeletonCount]),t&&t.classList.add(f.focus)}},e.prototype.clearAll=function(t,e){this.previousItemData=(0,l.le)(this.itemData)?null:this.itemData,((0,l.le)(e)||!(0,l.le)(e)&&((0,l.le)(e.dataSource)||!(e.dataSource instanceof p.h)&&0===e.dataSource.length))&&(this.isActive=!0,this.resetSelection(e));var i=this.getItemData();if(!this.allowObjectBinding&&this.previousValue===i.value||this.allowObjectBinding&&this.previousValue&&this.isObjectInArray(this.previousValue,[this.allowCustom?this.value?this.value:i:i.value?this.getDataByValue(i.value):i])){this.checkAndResetCache(),this.enableVirtualization&&this.list&&this.updateInitialData();return}this.onChangeEvent(t),this.checkAndResetCache(),this.enableVirtualization&&this.updateInitialData()},e.prototype.resetSelection=function(t){this.list&&(!(0,l.le)(t)&&((0,l.le)(t.dataSource)||!(t.dataSource instanceof p.h)&&0===t.dataSource.length)?(this.selectedLI=null,this.actionCompleteData.isUpdated=!1,this.actionCompleteData.ulElement=null,this.actionCompleteData.list=null,this.resetList(t.dataSource)):(this.allowFiltering&&"autocomplete"!==this.getModuleName()&&!(0,l.le)(this.actionCompleteData.ulElement)&&!(0,l.le)(this.actionCompleteData.list)&&this.actionCompleteData.list.length>0&&this.onActionComplete(this.actionCompleteData.ulElement.cloneNode(!0),this.actionCompleteData.list),this.resetFocusElement())),(0,l.le)(this.hiddenElement)||(this.hiddenElement.innerHTML=""),(0,l.le)(this.inputElement)||(this.inputElement.value=""),this.value=null,this.itemData=null,this.text=null,this.index=null,this.activeIndex=null,this.item=null,this.queryString="",this.valueTempElement&&((0,l.og)(this.valueTempElement),this.inputElement.style.display="block",this.valueTempElement=null),this.setSelection(null,null),this.isSelectCustom=!1,this.updateIconState(),this.cloneElements()},e.prototype.setHTMLAttributes=function(){if(Object.keys(this.htmlAttributes).length)for(var t=0,e=Object.keys(this.htmlAttributes);t<e.length;t++){var i=e[t];if("class"===i){var s=this.htmlAttributes[""+i].replace(/\s+/g," ").trim();""!==s&&(0,l.cn)([this.inputWrapper.container],s.split(" "))}else if("disabled"===i&&"disabled"===this.htmlAttributes[""+i])this.enabled=!1,this.setEnable();else if("readonly"!==i||(0,l.le)(this.htmlAttributes[""+i])){if("style"===i)this.inputWrapper.container.setAttribute("style",this.htmlAttributes[""+i]);else if("aria-label"===i)"autocomplete"!==this.getModuleName()&&"combobox"!==this.getModuleName()||this.readonly?"dropdownlist"===this.getModuleName()&&this.inputWrapper.container.setAttribute("aria-label",this.htmlAttributes[""+i]):this.inputElement.setAttribute("aria-label",this.htmlAttributes[""+i]);else{var n=["title","id","placeholder","role","autocomplete","autocapitalize","spellcheck","minlength","maxlength"],o=["name","required"];("autocomplete"===this.getModuleName()||"combobox"===this.getModuleName())&&n.push("tabindex"),o.indexOf(i)>-1||0===i.indexOf("data")?this.hiddenElement.setAttribute(i,this.htmlAttributes[""+i]):n.indexOf(i)>-1?"placeholder"===i?r.II.setPlaceholder(this.htmlAttributes[""+i],this.inputElement):this.inputElement.setAttribute(i,this.htmlAttributes[""+i]):this.inputWrapper.container.setAttribute(i,this.htmlAttributes[""+i])}}else this.readonly=!0,this.dataBind()}("autocomplete"===this.getModuleName()||"combobox"===this.getModuleName())&&this.inputWrapper.container.removeAttribute("tabindex")},e.prototype.getAriaAttributes=function(){return{"aria-disabled":"false",role:"combobox","aria-expanded":"false","aria-live":"polite","aria-labelledby":this.hiddenElement.id}},e.prototype.setEnableRtl=function(){(0,l.le)(this.inputElement)||(0,l.le)(this.inputElement.parentElement)||r.II.setEnableRtl(this.enableRtl,[this.inputElement.parentElement]),this.popupObj&&(this.popupObj.enableRtl=this.enableRtl,this.popupObj.dataBind())},e.prototype.setEnable=function(){r.II.setEnabled(this.enabled,this.inputElement),this.enabled?((0,l.IV)([this.inputWrapper.container],f.disable),this.inputElement.setAttribute("aria-disabled","false"),this.targetElement().setAttribute("tabindex",this.tabIndex),this.inputWrapper&&this.inputWrapper.container&&(this.inputWrapper.container.setAttribute("aria-disabled","false"),this.inputWrapper.container.removeAttribute("disabled"))):(this.hidePopup(),(0,l.cn)([this.inputWrapper.container],f.disable),this.inputElement.setAttribute("aria-disabled","true"),this.targetElement().tabIndex=-1,this.inputWrapper&&this.inputWrapper.container&&(this.inputWrapper.container.setAttribute("aria-disabled","true"),this.inputWrapper.container.setAttribute("disabled","")))},e.prototype.getPersistData=function(){return this.addOnPersist(["value"])},e.prototype.getLocaleName=function(){return"drop-down-list"},e.prototype.preventTabIndex=function(t){"dropdownlist"===this.getModuleName()&&(t.tabIndex=-1)},e.prototype.targetElement=function(){return(0,l.le)(this.inputWrapper)?null:this.inputWrapper.container},e.prototype.getNgDirective=function(){return"EJS-DROPDOWNLIST"},e.prototype.getElementByText=function(t){return this.getElementByValue(this.getValueByText(t))},e.prototype.getElementByValue=function(t){for(var e,i=this.getItems(),s=0;s<i.length;s++){var l=i[s];if(this.getFormattedValue(l.getAttribute("data-value"))===t){e=l;break}}return e},e.prototype.initValue=function(){this.viewPortInfo.startIndex=this.virtualItemStartIndex=0,this.viewPortInfo.endIndex=this.virtualItemEndIndex=this.itemCount,this.renderList(),this.dataSource instanceof p.h?this.initialRemoteRender=!0:this.updateValues()},e.prototype.isDisableItemValue=function(t){if("object"==typeof t){var e=JSON.parse(JSON.stringify(t))[this.fields.value];return this.isDisabledItemByIndex(this.getIndexByValue(e))}return this.isDisabledItemByIndex(this.getIndexByValue(t))},e.prototype.updateValues=function(){if(this.fields.disabled&&(null!=this.value&&(this.value=this.isDisableItemValue(this.value)?null:this.value),null!=this.text&&(this.text=this.isDisabledItemByIndex(this.getIndexByValue(this.getValueByText(this.text)))?null:this.text),null!=this.index&&(this.index=this.isDisabledItemByIndex(this.index)?null:this.index,this.activeIndex=this.index)),this.selectedValueInfo=this.viewPortInfo,(0,l.le)(this.value)){if(this.text&&(0,l.le)(this.value)){var t=this.getElementByText(this.text);if((0,l.le)(t)){this.setProperties({text:null});return}this.setSelection(t,null)}else this.setSelection(this.liCollections[this.activeIndex],null)}else{var e=this.allowObjectBinding&&!(0,l.le)(this.value)?(0,l.NA)(this.fields.value?this.fields.value:"",this.value):this.value;this.setSelection(this.getElementByValue(e),null)}this.setHiddenValue(),r.II.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton)},e.prototype.onBlurHandler=function(t){if(this.enabled){var e=t.relatedTarget,i=t.target,s=this.isPreventBlur;if(this.isPreventBlur=!1,s&&!this.isDocumentClick&&this.isPopupOpen&&(!(0,l.le)(i)||!this.isFilterLayout()&&(0,l.le)(e))){"dropdownlist"===this.getModuleName()&&this.allowFiltering&&this.isPopupOpen?this.filterInput.focus():this.targetElement().focus();return}if(this.isDocumentClick||!(0,l.le)(this.popupObj)&&document.body.contains(this.popupObj.element)&&this.popupObj.element.classList.contains(f.mobileFilter)){this.beforePopupOpen||(this.isDocumentClick=!1);return}("dropdownlist"===this.getModuleName()&&!this.isFilterFocus&&e!==this.inputElement&&(document.activeElement!==e||document.activeElement===e&&i.classList.contains(f.inputFocus))||(0,l.le)(e)&&"dropdownlist"===this.getModuleName()&&this.allowFiltering&&i!==this.inputWrapper.container||"dropdownlist"!==this.getModuleName()&&!this.inputWrapper.container.contains(e)||this.isTabKey)&&(this.isDocumentClick=!!this.isPopupOpen,this.focusOutAction(t),this.isTabKey=!1),!this.isRequested||this.isPopupOpen||this.isPreventBlur||(this.isActive=!1,this.beforePopupOpen=!1),this.isFocused=!1}},e.prototype.focusOutAction=function(t){this.isInteracted=!1,this.focusOut(t),this.onFocusOut(t)},e.prototype.onFocusOut=function(t){this.enabled&&(this.isSelected&&(this.isSelectCustom=!1,this.onChangeEvent(t)),this.floatLabelChange(),this.dispatchEvent(this.hiddenElement,"change"),"dropdownlist"===this.getModuleName()&&"INPUT"!==this.element.tagName&&this.dispatchEvent(this.inputElement,"blur"),this.inputWrapper.clearButton&&(0,l.cn)([this.inputWrapper.clearButton],f.clearIconHide),this.trigger("blur"))},e.prototype.onFocus=function(t){this.isInteracted||(this.isInteracted=!0,this.trigger("focus",{isInteracted:!!t,event:t})),this.updateIconState(),this.isFocused=!0},e.prototype.resizingWireEvent=function(){l.bi.add(document,"mousemove",this.resizePopup,this),l.bi.add(document,"mouseup",this.stopResizing,this),l.bi.add(document,"touchmove",this.resizePopup,this),l.bi.add(document,"touchend",this.stopResizing,this)},e.prototype.resizingUnWireEvent=function(){l.bi.remove(document,"mousemove",this.resizePopup),l.bi.remove(document,"mouseup",this.stopResizing),l.bi.remove(document,"touchmove",this.resizePopup),l.bi.remove(document,"touchend",this.stopResizing)},e.prototype.resetValueHandler=function(t){var e=(0,l.oq)(this.inputElement,"form");if(e&&t.target===e){var i=this.element.tagName===this.getNgDirective()?null:this.inputElement.getAttribute("value");this.text=i}},e.prototype.wireEvent=function(){l.bi.add(this.inputWrapper.container,"mousedown",this.dropDownClick,this),l.bi.add(this.inputWrapper.container,"focus",this.focusIn,this),l.bi.add(this.inputWrapper.container,"keypress",this.onSearch,this),l.bi.add(window,"resize",this.windowResize,this),this.bindCommonEvent()},e.prototype.bindCommonEvent=function(){l.bi.add(this.targetElement(),"blur",this.onBlurHandler,this);var t=(0,l.oq)(this.inputElement,"form");t&&l.bi.add(t,"reset",this.resetValueHandler,this),l.AR.isDevice?this.keyboardModule=new l.nv(this.targetElement(),{keyAction:this.mobileKeyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}):this.keyboardModule=new l.nv(this.targetElement(),{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}),this.bindClearEvent()},e.prototype.windowResize=function(){this.isPopupOpen&&this.popupObj.refreshPosition(this.inputWrapper.container)},e.prototype.bindClearEvent=function(){this.showClearButton&&l.bi.add(this.inputWrapper.clearButton,"mousedown",this.resetHandler,this)},e.prototype.unBindCommonEvent=function(){!(0,l.le)(this.inputWrapper)&&this.targetElement()&&l.bi.remove(this.targetElement(),"blur",this.onBlurHandler);var t=this.inputElement&&(0,l.oq)(this.inputElement,"form");t&&l.bi.remove(t,"reset",this.resetValueHandler),l.AR.isDevice||this.keyboardModule.destroy(),this.showClearButton&&l.bi.remove(this.inputWrapper.clearButton,"mousedown",this.resetHandler)},e.prototype.updateIconState=function(){this.showClearButton&&(""===this.inputElement.value||this.readonly?(0,l.cn)([this.inputWrapper.clearButton],f.clearIconHide):(0,l.IV)([this.inputWrapper.clearButton],f.clearIconHide))},e.prototype.wireListEvents=function(){(0,l.le)(this.list)||(l.bi.add(this.list,"click",this.onMouseClick,this),l.bi.add(this.list,"mouseover",this.onMouseOver,this),l.bi.add(this.list,"mouseout",this.onMouseLeave,this))},e.prototype.onSearch=function(t){32!==t.charCode&&13!==t.charCode&&(void 0===this.list&&this.renderList(),this.searchKeyEvent=t,this.onServerIncrementalSearch(t))},e.prototype.onServerIncrementalSearch=function(t){this.isRequested||(0,l.le)(this.list)||(0,l.le)(this.list.querySelector("li"))||!this.enabled||this.readonly||this.incrementalSearch(t)},e.prototype.startResizing=function(t){this.isResizing=!0,this.trigger("resizeStart",t);var e=t instanceof MouseEvent?t.clientX:t.touches[0].clientX,i=t instanceof MouseEvent?t.clientY:t.touches[0].clientY;this.list&&this.list.parentElement&&(this.originalWidth=this.list.parentElement.offsetWidth,this.originalHeight=this.list.parentElement.offsetHeight,this.originalMouseX=e,this.originalMouseY=i),this.resizingWireEvent(),t&&t.preventDefault()},e.prototype.resizePopup=function(t){if(this.isResizing){this.trigger("resizing",t);var e=t instanceof MouseEvent?t.clientX:t.touches[0].clientX,i=t instanceof MouseEvent?t.clientY:t.touches[0].clientY,s=e-this.originalMouseX,l=i-this.originalMouseY;if(this.list&&this.list.parentElement){var n=parseInt(window.getComputedStyle(this.list.parentElement).minWidth,10),o=parseInt(window.getComputedStyle(this.list.parentElement).minHeight,10);n=n||100,o=o||120,this.resizeWidth=Math.max(this.originalWidth+s,n),this.resizeHeight=Math.max(this.originalHeight+l,o),this.list.parentElement.style.width=this.resizeWidth+"px",this.list.parentElement.style.height=this.resizeHeight+"px",this.list.parentElement.style.maxHeight=this.resizeHeight+"px",this.list.style.maxHeight=this.resizeHeight+"px",this.fixedHeaderElement&&this.ulElement&&(this.fixedHeaderElement.style.width=this.ulElement.offsetWidth+"px")}t&&t.preventDefault()}},e.prototype.stopResizing=function(t){this.isResizing&&(this.isResizing=!1,this.trigger("resizeStop",t),this.resizingUnWireEvent()),t&&t.preventDefault()},e.prototype.onMouseClick=function(t){var e=t.target;this.keyboardEvent=null;var i=(0,l.oq)(e,"."+u.AA.li);!this.isValidLI(i)||this.isDisabledElement(i)||(this.setSelection(i,t),l.AR.isDevice&&this.isFilterLayout()?history.back():this.closePopup(100,t))},e.prototype.onMouseOver=function(t){var e=(0,l.oq)(t.target,"."+u.AA.li);this.setHover(e)},e.prototype.setHover=function(t){this.enabled&&this.isValidLI(t)&&!t.classList.contains(u.AA.hover)&&(this.removeHover(),(0,l.cn)([t],u.AA.hover))},e.prototype.onMouseLeave=function(){this.removeHover()},e.prototype.removeHover=function(){if(this.list){var t=this.list.querySelectorAll("."+u.AA.hover);t&&t.length&&(0,l.IV)(t,u.AA.hover)}},e.prototype.isValidLI=function(t){return t&&t.hasAttribute("role")&&"option"===t.getAttribute("role")},e.prototype.updateIncrementalItemIndex=function(t,e){this.incrementalStartIndex=t,this.incrementalEndIndex=e},e.prototype.incrementalSearch=function(t){if(this.liCollections.length>0){if(this.enableVirtualization){var e=!1,i=!1,s=this.ulElement.getElementsByClassName("e-active")[0],n=s?s.textContent:null;""===this.incrementalQueryString?(this.incrementalQueryString=String.fromCharCode(t.charCode),this.incrementalPreQueryString=this.incrementalQueryString):String.fromCharCode(t.charCode).toLocaleLowerCase()===this.incrementalPreQueryString.toLocaleLowerCase()?i=!0:this.incrementalQueryString=String.fromCharCode(t.charCode),(this.viewPortInfo.endIndex>=this.incrementalEndIndex&&this.incrementalEndIndex<=this.totalItemCount||0===this.incrementalEndIndex)&&(e=!0,this.incrementalStartIndex=this.incrementalEndIndex,0===this.incrementalEndIndex?this.incrementalEndIndex=100>this.totalItemCount?this.totalItemCount:100:this.incrementalEndIndex=this.incrementalEndIndex+100>this.totalItemCount?this.totalItemCount:this.incrementalEndIndex+100,this.updateIncrementalInfo(this.incrementalStartIndex,this.incrementalEndIndex),e=!0),(0!==this.viewPortInfo.startIndex||e)&&this.updateIncrementalView(0,this.itemCount);for(var o=(0,h.Gk)(t.charCode,this.incrementalLiCollections,this.activeIndex,!0,this.element.id,i,n,!0);(0,l.le)(o)&&this.incrementalEndIndex<this.totalItemCount&&(this.updateIncrementalItemIndex(this.incrementalEndIndex,this.incrementalEndIndex+100>this.totalItemCount?this.totalItemCount:this.incrementalEndIndex+100),this.updateIncrementalInfo(this.incrementalStartIndex,this.incrementalEndIndex),e=!0,(0!==this.viewPortInfo.startIndex||e)&&this.updateIncrementalView(0,this.itemCount),o=(0,h.Gk)(t.charCode,this.incrementalLiCollections,0,!0,this.element.id,i,n,!0,!0),(0,l.le)(o));)if((0,l.le)(o)&&this.incrementalEndIndex>=this.totalItemCount){this.updateIncrementalItemIndex(0,100>this.totalItemCount?this.totalItemCount:100);break}(0,l.le)(o)&&this.incrementalEndIndex>=this.totalItemCount&&(this.updateIncrementalItemIndex(0,100>this.totalItemCount?this.totalItemCount:100),this.updateIncrementalInfo(this.incrementalStartIndex,this.incrementalEndIndex),e=!0,(0!==this.viewPortInfo.startIndex||e)&&this.updateIncrementalView(0,this.itemCount),o=(0,h.Gk)(t.charCode,this.incrementalLiCollections,0,!0,this.element.id,i,n,!0,!0));var a=o&&this.getIndexByValue(o.getAttribute("data-value"));if(a)a-=this.skeletonCount;else for(var r=0;r<this.incrementalLiCollections.length;r++)if(!(0,l.le)(o)&&!(0,l.le)(o.getAttribute("data-value"))&&this.incrementalLiCollections[r].getAttribute("data-value")===o.getAttribute("data-value").toString()){a=r,a=this.incrementalStartIndex+a;break}if(a&&(!(this.viewPortInfo.startIndex>=a)||!(a>=this.viewPortInfo.endIndex))){var p=a-(this.itemCount/2-2)>0?a-(this.itemCount/2-2):0,c=this.viewPortInfo.startIndex+this.itemCount>this.totalItemCount?this.totalItemCount:this.viewPortInfo.startIndex+this.itemCount;this.updateIncrementalView(p,c)}if((0,l.le)(o))this.updateIncrementalView(0,this.itemCount),this.list.getElementsByClassName("e-virtual-ddl-content")[0].style=this.getTransformValues(),this.list.scrollTop=0;else{if(this.getIndexByValue(o.getAttribute("data-value"))-this.skeletonCount>this.itemCount/2){var p=this.viewPortInfo.startIndex+(this.itemCount/2-2)<this.totalItemCount?this.viewPortInfo.startIndex+(this.itemCount/2-2):this.totalItemCount,c=this.viewPortInfo.startIndex+this.itemCount>this.totalItemCount?this.totalItemCount:this.viewPortInfo.startIndex+this.itemCount;this.updateIncrementalView(p,c)}if(o=this.getElementByValue(o.getAttribute("data-value")),this.setSelection(o,t),this.setScrollPosition(),this.list.getElementsByClassName("e-virtual-ddl-content")[0].style=this.getTransformValues(),this.enableVirtualization&&!this.fields.groupBy){var d=this.virtualListInfo&&this.virtualListInfo.startIndex?this.selectedLI.offsetTop+this.virtualListInfo.startIndex*this.selectedLI.offsetHeight:this.selectedLI.offsetTop;this.list.scrollTop=d-this.list.querySelectorAll(".e-virtual-list").length*this.selectedLI.offsetHeight}this.incrementalPreQueryString=this.incrementalQueryString}}else{var o=void 0;if(this.fields.disabled){var m=this.list.querySelectorAll("."+u.AA.li+":not(.e-disabled)");o=(0,h.Gk)(t.charCode,m,this.activeIndex,!0,this.element.id)}else o=(0,h.Gk)(t.charCode,this.liCollections,this.activeIndex,!0,this.element.id);(0,l.le)(o)||(this.setSelection(o,t),this.setScrollPosition())}}},e.prototype.hideSpinner=function(){(0,l.le)(this.spinnerElement)||((0,n.v3)(this.spinnerElement),(0,l.IV)([this.spinnerElement],f.disableIcon),this.spinnerElement.innerHTML="",this.spinnerElement=null)},e.prototype.showSpinner=function(){(0,l.le)(this.spinnerElement)&&(this.spinnerElement=l.AR.isDevice&&!(0,l.le)(this.filterInputObj)&&this.filterInputObj.buttons[1]||!(0,l.le)(this.filterInputObj)&&this.filterInputObj.buttons[0]||this.inputWrapper.buttons[0],(0,l.cn)([this.spinnerElement],f.disableIcon),(0,n.rj)({target:this.spinnerElement,width:l.AR.isDevice?"16px":"14px"},this.createElement),(0,n.yh)(this.spinnerElement))},e.prototype.keyActionHandler=function(t){if(this.enabled){this.keyboardEvent=t,this.isPreventKeyAction&&this.enableVirtualization&&t.preventDefault();var e="pageUp"===t.action||"pageDown"===t.action,i="dropdownlist"!==this.getModuleName()&&("home"===t.action||"end"===t.action);this.isEscapeKey="escape"===t.action,this.isTabKey=!this.isPopupOpen&&"tab"===t.action;var s="down"===t.action||"up"===t.action||"pageUp"===t.action||"pageDown"===t.action||"home"===t.action||"end"===t.action;if((!this.isEditTextBox()&&!e&&!i||this.isPopupOpen)&&!this.readonly){var n="tab"===t.action||"close"===t.action;if(!(0,l.le)(this.list)||this.isRequested||n||"escape"===t.action||(this.searchKeyEvent=t,(!this.enableVirtualization||this.enableVirtualization&&"autocomplete"!==this.getModuleName()&&"mousedown"!==t.type&&(40===t.keyCode||38===t.keyCode))&&(this.renderList(t),this.UpdateSkeleton(),this.liCollections=this.list.querySelectorAll("."+u.AA.li),this.ulElement=this.list.querySelector("ul"))),(0,l.le)(this.list)||!(0,l.le)(this.liCollections)&&s&&0===this.liCollections.length||this.isRequested)return;switch((n&&"autocomplete"!==this.getModuleName()&&this.isPopupOpen||"escape"===t.action)&&t.preventDefault(),this.isSelected="escape"!==t.action&&this.isSelected,this.isTyped=!s&&"escape"!==t.action&&this.isTyped,t.action){case"down":case"up":this.updateUpDownAction(t);break;case"pageUp":this.pageUpSelection(this.activeIndex-this.getPageCount(),t),t.preventDefault();break;case"pageDown":this.pageDownSelection(this.activeIndex+this.getPageCount(),t),t.preventDefault();break;case"home":case"end":this.isMouseScrollAction=!0,this.updateHomeEndAction(t);break;case"space":"dropdownlist"!==this.getModuleName()||this.beforePopupOpen||(this.showPopup(),t.preventDefault());break;case"open":this.showPopup(t);break;case"hide":this.preventAltUp=this.isPopupOpen,this.hidePopup(t),this.focusDropDown(t);break;case"enter":this.selectCurrentItem(t);break;case"tab":this.selectCurrentValueOnTab(t);break;case"escape":case"close":this.isPopupOpen&&(this.hidePopup(t),this.focusDropDown(t))}}}},e.prototype.updateUpDownAction=function(t,e){if(!this.fields.disabled||!this.list||0!==this.list.querySelectorAll(".e-list-item:not(.e-disabled)").length){if(this.allowFiltering&&!this.enableVirtualization&&"autocomplete"!==this.getModuleName()){var i,s=this.getItemData().value;(0,l.le)(s)&&(s="null");var n=this.getIndexByValue(s);(0,l.le)(n)||(this.activeIndex=n)}var o=this.list.querySelector("."+f.focus);if(this.isSelectFocusItem(o)&&!e){if(this.setSelection(o,t),this.enableVirtualization){var a=this.virtualListInfo&&this.virtualListInfo.startIndex?this.selectedLI.offsetTop+this.virtualListInfo.startIndex*this.selectedLI.offsetHeight:this.selectedLI.offsetTop;this.fields.groupBy&&(a=this.virtualListInfo&&0===this.virtualListInfo.startIndex?this.selectedLI.offsetHeight-a:a-this.selectedLI.offsetHeight),this.list.scrollTop=a-this.list.querySelectorAll(".e-virtual-list").length*this.selectedLI.offsetHeight}}else if(!(0,l.le)(this.liCollections)){var r=this.activeIndex,h="down"===t.action?this.activeIndex+1:this.activeIndex-1;h=e?r:h;var p=0;"autocomplete"===this.getModuleName()&&(p="down"===t.action&&(0,l.le)(this.activeIndex)?0:this.liCollections.length-1,h=h<0?this.liCollections.length-1:h===this.liCollections.length?0:h);var c=void 0;if("autocomplete"!==this.getModuleName()||"autocomplete"===this.getModuleName()&&this.isPopupOpen){if(this.enableVirtualization){if(e){if("autocomplete"===this.getModuleName()){var s=this.getFormattedValue(this.selectedLI.getAttribute("data-value"));c=this.getElementByValue(s)}else c=this.getElementByValue(this.getItemData().value)}else c=(0,l.le)(this.activeIndex)?this.liCollections[this.skeletonCount]:this.liCollections[h],c=(0,l.le)(c)||c.classList.contains("e-virtual-list")?null:c}else c=(0,l.le)(this.activeIndex)?this.liCollections[p]:this.liCollections[h]}if((0,l.le)(c)){if(this.enableVirtualization&&!this.isPopupOpen&&"autocomplete"!==this.getModuleName()&&(this.viewPortInfo.endIndex!==this.totalItemCount&&"down"===t.action||0!==this.viewPortInfo.startIndex&&"up"===t.action)){if("down"===t.action){this.viewPortInfo.startIndex=this.viewPortInfo.startIndex+this.itemCount<this.totalItemCount-this.itemCount?this.viewPortInfo.startIndex+this.itemCount:this.totalItemCount-this.itemCount,this.viewPortInfo.endIndex=this.viewPortInfo.startIndex+this.itemCount,this.updateVirtualItemIndex(),this.isCustomFilter="combobox"===this.getModuleName()||this.isCustomFilter,this.resetList(this.dataSource,this.fields,this.query),this.isCustomFilter="combobox"!==this.getModuleName()&&this.isCustomFilter;var s="null"!==this.liCollections[0].getAttribute("data-value")?this.getFormattedValue(this.liCollections[0].getAttribute("data-value")):null,d=this.getDataByValue(s);d&&(this.itemData=d)}else if("up"===t.action){this.viewPortInfo.startIndex=this.viewPortInfo.startIndex-this.itemCount>0?this.viewPortInfo.startIndex-this.itemCount:0,this.viewPortInfo.endIndex=this.viewPortInfo.startIndex+this.itemCount,this.updateVirtualItemIndex(),this.isCustomFilter="combobox"===this.getModuleName()||this.isCustomFilter,this.resetList(this.dataSource,this.fields,this.query),this.isCustomFilter="combobox"!==this.getModuleName()&&this.isCustomFilter;var s="null"!==this.liCollections[this.liCollections.length-1].getAttribute("data-value")?this.getFormattedValue(this.liCollections[this.liCollections.length-1].getAttribute("data-value")):null,d=this.getDataByValue(s);d&&(this.itemData=d)}this.UpdateSkeleton(),this.liCollections=this.list.querySelectorAll("."+u.AA.li),this.ulElement=this.list.querySelector("ul"),this.handleVirtualKeyboardActions(t,this.pageCount)}}else{var m=this.liCollections[this.skeletonCount]&&this.liCollections[this.skeletonCount].classList.contains("e-item-focus");if(this.setSelection(c,t),m&&this.enableVirtualization&&"autocomplete"===this.getModuleName()&&!e){var a=this.virtualListInfo&&this.virtualListInfo.startIndex?this.selectedLI.offsetTop+this.virtualListInfo.startIndex*this.selectedLI.offsetHeight:this.selectedLI.offsetTop;a=this.virtualListInfo&&0===this.virtualListInfo.startIndex&&this.fields.groupBy?this.selectedLI.offsetHeight-a:a-this.selectedLI.offsetHeight,this.list.scrollTop=a-this.list.querySelectorAll(".e-virtual-list").length*this.selectedLI.offsetHeight}}}if(this.allowFiltering&&!this.enableVirtualization&&"autocomplete"!==this.getModuleName()){var s=this.getItemData().value,n=this.getIndexByValueFilter(s,this.actionCompleteData.ulElement);(0,l.le)(n)||(this.activeIndex=n)}this.allowFiltering&&"dropdownlist"===this.getModuleName()&&this.filterInput&&((0,l.le)(this.ulElement)||(0,l.le)(this.ulElement.getElementsByClassName("e-item-focus")[0])?(0,l.le)(this.ulElement)||(0,l.le)(this.ulElement.getElementsByClassName("e-active")[0])||(0,l.Y4)(this.filterInput,{"aria-activedescendant":this.ulElement.getElementsByClassName("e-active")[0].id}):(0,l.Y4)(this.filterInput,{"aria-activedescendant":this.ulElement.getElementsByClassName("e-item-focus")[0].id}));for(var h=0;h<this.liCollections.length;h++)if(this.liCollections[h].classList.contains(f.focus)||this.liCollections[h].classList.contains(f.selected)){i=h;break}null!=i&&this.isDisabledElement(this.liCollections[i])&&("autocomplete"!==this.getModuleName()&&(this.liCollections.length-1===i&&"down"===t.action&&(t.action="up"),0===i&&"up"===t.action&&(t.action="down")),this.updateUpDownAction(t)),t.preventDefault()}},e.prototype.updateHomeEndAction=function(t,e){if("dropdownlist"===this.getModuleName()){var i=0;if("home"===t.action?(i=0,this.enableVirtualization&&this.isPopupOpen?i=this.skeletonCount:this.enableVirtualization&&!this.isPopupOpen&&0!==this.viewPortInfo.startIndex&&(this.viewPortInfo.startIndex=0,this.viewPortInfo.endIndex=this.itemCount,this.updateVirtualItemIndex(),this.resetList(this.dataSource,this.fields,this.query))):(this.enableVirtualization&&!this.isPopupOpen&&this.viewPortInfo.endIndex!==this.totalItemCount&&(this.viewPortInfo.startIndex=this.totalItemCount-this.itemCount,this.viewPortInfo.endIndex=this.totalItemCount,this.updateVirtualItemIndex(),this.resetList(this.dataSource,this.fields,this.query)),i=this.getItems().length-1),t.preventDefault(),this.activeIndex===i){e&&this.setSelection(this.liCollections[i],t);return}!this.enableVirtualization&&this.liCollections[i]&&this.liCollections[i].classList.contains("e-disabled")||this.setSelection(this.liCollections[i],t)}},e.prototype.selectCurrentValueOnTab=function(t){"autocomplete"===this.getModuleName()?this.selectCurrentItem(t):this.isPopupOpen&&(this.hidePopup(t),this.focusDropDown(t))},e.prototype.mobileKeyActionHandler=function(t){!(!this.enabled||this.isEditTextBox()&&!this.isPopupOpen)&&!this.readonly&&(void 0!==this.list||this.isRequested||(this.searchKeyEvent=t,this.renderList()),!(0,l.le)(this.list)&&((0,l.le)(this.liCollections)||0!==this.liCollections.length)&&!this.isRequested&&"enter"===t.action&&this.selectCurrentItem(t))},e.prototype.handleVirtualKeyboardActions=function(t,e){switch(t.action){case"down":case"up":(null!=this.itemData||"autocomplete"===this.getModuleName())&&this.updateUpDownAction(t,!0);break;case"pageUp":this.activeIndex="autocomplete"===this.getModuleName()?this.getIndexByValue(this.selectedLI.getAttribute("data-value"))+this.getPageCount()-1:this.getIndexByValue(this.previousValue),this.pageUpSelection(this.activeIndex-this.getPageCount(),t,!0),t.preventDefault();break;case"pageDown":this.activeIndex="autocomplete"===this.getModuleName()?this.getIndexByValue(this.selectedLI.getAttribute("data-value"))-this.getPageCount():this.getIndexByValue(this.previousValue),this.pageDownSelection((0,l.le)(this.activeIndex)?2*this.getPageCount():this.activeIndex+this.getPageCount(),t,!0),t.preventDefault();break;case"home":case"end":this.isMouseScrollAction=!0,this.updateHomeEndAction(t,!0)}this.keyboardEvent=null},e.prototype.selectCurrentItem=function(t){if(this.isPopupOpen){var e=this.list.querySelector("."+f.focus);this.isDisabledElement(e)||(e&&(this.setSelection(e,t),this.isTyped=!1),this.isSelected&&(this.isSelectCustom=!1,this.onChangeEvent(t)),this.hidePopup(t),this.focusDropDown(t))}else this.showPopup()},e.prototype.isSelectFocusItem=function(t){return!(0,l.le)(t)},e.prototype.pageUpSelection=function(t,e,i){var s=t>=0?this.liCollections[t+1]:this.liCollections[0];if(!this.enableVirtualization&&s&&s.classList.contains("e-disabled")){for(var n=t>=0?t+1:0;n<this.liCollections.length&&(!(s=this.liCollections[n])||s.classList.contains("e-disabled"));)if(--n<0)return}this.enableVirtualization&&null==this.activeIndex&&(s=this.liCollections.length>=t&&t>=0?this.liCollections[t+this.skeletonCount+1]:this.liCollections[0]),!(0,l.le)(s)&&s.classList.contains("e-virtual-list")&&(s=this.liCollections[this.skeletonCount]),this.PageUpDownSelection(s,e),!this.allowFiltering||"dropdownlist"!==this.getModuleName()||((0,l.le)(this.ulElement)||(0,l.le)(this.ulElement.getElementsByClassName("e-item-focus")[0])?(0,l.le)(this.ulElement)||(0,l.le)(this.ulElement.getElementsByClassName("e-active")[0])||(0,l.Y4)(this.filterInput,{"aria-activedescendant":this.ulElement.getElementsByClassName("e-active")[0].id}):(0,l.Y4)(this.filterInput,{"aria-activedescendant":this.ulElement.getElementsByClassName("e-item-focus")[0].id}))},e.prototype.PageUpDownSelection=function(t,e){this.enableVirtualization&&((0,l.le)(t)||("autocomplete"===this.getModuleName()||t.classList.contains("e-active"))&&("autocomplete"!==this.getModuleName()||t.classList.contains("e-item-focus")))||this.setSelection(t,e)},e.prototype.pageDownSelection=function(t,e,i){var s=this.getItems(),n=t<=s.length?this.liCollections[t-1]:this.liCollections[s.length-1];if(!this.enableVirtualization&&n&&n.classList.contains("e-disabled"))for(;t>=0&&t<this.liCollections.length&&(!(n=t<=s.length?this.liCollections[t-1]:this.liCollections[s.length-1])||n.classList.contains("e-disabled"));)t++;this.enableVirtualization&&this.skeletonCount>0&&(n=(t="dropdownlist"===this.getModuleName()&&this.allowFiltering?t+1:t)<s.length?this.liCollections[t]:this.liCollections[s.length-1]),this.enableVirtualization&&null==this.activeIndex&&(n=t<=s.length?this.liCollections[t+this.skeletonCount-1]:this.liCollections[s.length-1]),this.PageUpDownSelection(n,e),!this.allowFiltering||"dropdownlist"!==this.getModuleName()||((0,l.le)(this.ulElement)||(0,l.le)(this.ulElement.getElementsByClassName("e-item-focus")[0])?(0,l.le)(this.ulElement)||(0,l.le)(this.ulElement.getElementsByClassName("e-active")[0])||(0,l.Y4)(this.filterInput,{"aria-activedescendant":this.ulElement.getElementsByClassName("e-active")[0].id}):(0,l.Y4)(this.filterInput,{"aria-activedescendant":this.ulElement.getElementsByClassName("e-item-focus")[0].id}))},e.prototype.unWireEvent=function(){(0,l.le)(this.inputWrapper)||(l.bi.remove(this.inputWrapper.container,"mousedown",this.dropDownClick),l.bi.remove(this.inputWrapper.container,"keypress",this.onSearch),l.bi.remove(this.inputWrapper.container,"focus",this.focusIn),l.bi.remove(window,"resize",this.windowResize)),this.unBindCommonEvent()},e.prototype.unWireListEvents=function(){this.list&&(l.bi.remove(this.list,"click",this.onMouseClick),l.bi.remove(this.list,"mouseover",this.onMouseOver),l.bi.remove(this.list,"mouseout",this.onMouseLeave))},e.prototype.checkSelector=function(t){return'[id="'+t.replace(/(:|\.|\[|\]|,|=|@|\\|\/|#)/g,"\\$1")+'"]'},e.prototype.onDocumentClick=function(t){var e=t.target;if(!(0,l.le)(this.popupObj)&&(0,l.oq)(e,this.checkSelector(this.popupObj.element.id))||(0,l.le)(this.inputWrapper)||this.inputWrapper.container.contains(t.target))e===this.inputElement||this.allowFiltering&&e===this.filterInput||"combobox"===this.getModuleName()&&!this.allowFiltering&&l.AR.isDevice&&e===this.inputWrapper.buttons[0]||(this.isPreventBlur=(l.AR.isIE||"edge"===l.AR.info.name)&&(document.activeElement===this.targetElement()||document.activeElement===this.filterInput),t.preventDefault());else if(this.inputWrapper.container.classList.contains(f.inputFocus)||this.isPopupOpen){this.isDocumentClick=!0;var i=this.isRequested;"combobox"===this.getModuleName()&&this.isTyped&&(this.isInteracted=!1),this.hidePopup(t),this.isInteracted=!1,i||(this.onFocusOut(t),this.inputWrapper.container.classList.remove(f.inputFocus))}},e.prototype.activeStateChange=function(){this.isDocumentClick&&(this.hidePopup(),this.onFocusOut(),this.inputWrapper.container.classList.remove(f.inputFocus))},e.prototype.focusDropDown=function(t){!this.initial&&this.isFilterLayout()&&this.focusIn(t)},e.prototype.dropDownClick=function(t){if(3!==t.which&&2!==t.button&&(this.keyboardEvent=null,!this.targetElement().classList.contains(f.disable)&&this.inputWrapper.clearButton!==t.target)){var e=t.target;if(e===this.inputElement||this.allowFiltering&&e===this.filterInput||"combobox"===this.getModuleName()||t.preventDefault(),this.readonly)this.focusIn(t);else{this.isPopupOpen?(this.hidePopup(t),this.isFilterLayout()&&this.focusDropDown(t)):(this.focusIn(t),this.floatLabelChange(),this.queryString=""===this.inputElement.value.trim()?null:this.inputElement.value,this.isDropDownClick=!0,this.showPopup(t));var i=this,s=this.element.tagName===this.getNgDirective()&&this.itemTemplate?500:100;this.isSecondClick||setTimeout(function(){i.cloneElements(),i.isSecondClick=!0,i.isSecondClick=!(i.isReact&&i.isFiltering())||!(i.dataSource instanceof p.h)||!!i.list.querySelector("ul")},s)}}},e.prototype.cloneElements=function(){if(this.list){var t=this.list.querySelector("ul");t&&(t=t.cloneNode?t.cloneNode(!0):t,this.actionCompleteData.ulElement=t)}},e.prototype.updateSelectedItem=function(t,e,i,s){var n=this;this.removeSelection(),t.classList.add(u.AA.selected),this.removeHover();var o=null!==t.getAttribute("data-value")?this.getFormattedValue(t.getAttribute("data-value")):null,a=this.getDataByValue(o);if(this.initial||i||(0,l.le)(e))this.selectEventCallback(t,e,i,a,o),s&&this.setSelectOptions(t,e);else{var r=this.detachChanges(a);this.isSelected=!0,this.trigger("select",{e:e,item:t,itemData:r,isInteracted:!!e,cancel:!1},function(l){l.cancel?t.classList.remove(u.AA.selected):(n.selectEventCallback(t,e,i,a,o),s&&n.setSelectOptions(t,e))})}},e.prototype.selectEventCallback=function(t,e,i,s,n){this.previousItemData=(0,l.le)(this.itemData)?null:this.itemData,this.itemData!==s&&(this.previousValue=(0,l.le)(this.itemData)?null:"object"!=typeof this.itemData||this.allowObjectBinding?this.itemData:this.checkFieldValue(this.itemData,this.fields.value.split("."))),this.item=t,this.itemData=s;var o=this.list.querySelector("."+u.AA.focus);if(o&&(0,l.IV)([o],u.AA.focus),t.setAttribute("aria-selected","true"),(0,l.le)(n)&&(n="null"),this.allowFiltering&&!this.enableVirtualization&&"autocomplete"!==this.getModuleName()){var a=this.getIndexByValueFilter(n,this.actionCompleteData.ulElement);(0,l.le)(a)?this.activeIndex=this.getIndexByValue(n):this.activeIndex=a}else this.enableVirtualization&&null==this.activeIndex&&this.dataSource instanceof p.h&&(this.UpdateSkeleton(),this.liCollections=this.list.querySelectorAll("."+u.AA.li),this.ulElement=this.list.querySelector("ul")),this.activeIndex=this.getIndexByValue(n)},e.prototype.activeItem=function(t){this.isValidLI(t)&&!t.classList.contains(u.AA.selected)&&(this.removeSelection(),t.classList.add(u.AA.selected),this.removeHover(),t.setAttribute("aria-selected","true"))},e.prototype.setValue=function(t){var e=this.getItemData();this.isTouched=!(0,l.le)(t),null===e.value?r.II.setValue(null,this.inputElement,this.floatLabelType,this.showClearButton):r.II.setValue(e.text,this.inputElement,this.floatLabelType,this.showClearButton),this.valueTemplate&&null!==this.itemData?this.setValueTemplate():(0,l.le)(this.valueTempElement)||this.inputElement.previousSibling!==this.valueTempElement||((0,l.og)(this.valueTempElement),this.inputElement.style.display="block"),(0,l.le)(e.value)||this.enableVirtualization||!this.allowFiltering||(this.activeIndex=this.getIndexByValueFilter(e.value,this.actionCompleteData.ulElement));var i=f.clearIcon,s=this.isFiltering()&&this.filterInput&&"combobox"===this.getModuleName()&&this.filterInput.parentElement.querySelector("."+i);return(this.isFiltering()&&s&&s.style.removeProperty("visibility"),!this.allowObjectBinding&&this.previousValue===e.value||this.allowObjectBinding&&null!=this.previousValue&&this.isObjectInArray(this.previousValue,[this.allowCustom&&this.isObjectCustomValue?this.value?this.value:e:e.value?this.getDataByValue(e.value):e]))?(this.isSelected=!1,!0):(this.isSelected=!this.initial,this.isSelectCustom=!1,"dropdownlist"===this.getModuleName()&&this.updateIconState(),!1)},e.prototype.setSelection=function(t,e){if(this.isValidLI(t)&&(!t.classList.contains(u.AA.selected)||this.isPopupOpen&&this.isSelected&&t.classList.contains(u.AA.selected)))this.updateSelectedItem(t,e,!1,!0);else if(this.setSelectOptions(t,e),this.enableVirtualization&&this.value){var i=this.isPrimitiveData?"":this.fields.value,s=this.allowObjectBinding&&!(0,l.le)(this.value)?(0,l.NA)(this.fields.value?this.fields.value:"",this.value):this.value;if(this.dataSource instanceof p.h){var n=new p.h(this.virtualGroupDataSource).executeLocal(new c.A().where(new c.$(i,"equal",s)));if(n&&n.length>0){this.itemData=n[0];var o=this.getItemData(),a=this.allowObjectBinding?this.getDataByValue(o.value):o.value;(this.value===o.value&&this.text!==o.text||this.value!==o.value&&this.text===o.text)&&this.setProperties({text:o.text?o.text.toString():o.text,value:a})}}else{var n=new p.h(this.dataSource).executeLocal(new c.A().where(new c.$(i,"equal",s)));if(n&&n.length>0){this.itemData=n[0];var o=this.getItemData(),a=this.allowObjectBinding?this.getDataByValue(o.value):o.value;(this.value===o.value&&this.text!==o.text||this.value!==o.value&&this.text===o.text)&&(this.setProperties({text:o.text?o.text.toString():o.text,value:a}),(0,l.le)(t)&&(this.previousValue=this.value))}}}},e.prototype.setSelectOptions=function(t,e){this.list&&this.removeHover(),this.previousSelectedLI=(0,l.le)(this.selectedLI)?null:this.selectedLI,this.selectedLI=t,!this.setValue(e)&&((this.isPopupOpen||(0,l.le)(t))&&(!this.isPopupOpen||(0,l.le)(e)||"keydown"===e.type&&("keydown"!==e.type||"enter"!==e.action))||(this.isSelectCustom=!1,this.onChangeEvent(e)),!this.isPopupOpen||(0,l.le)(this.selectedLI)||null===this.itemData||e&&"click"===e.type||this.setScrollPosition(e),"mozilla"!==l.AR.info.name&&this.targetElement()&&((0,l.Y4)(this.targetElement(),{"aria-describedby":""!==this.inputElement.id?this.inputElement.id:this.element.id}),this.targetElement().removeAttribute("aria-live")),!this.isPopupOpen||(0,l.le)(this.ulElement)||(0,l.le)(this.ulElement.getElementsByClassName("e-item-focus")[0])?!this.isPopupOpen||(0,l.le)(this.ulElement)||(0,l.le)(this.ulElement.getElementsByClassName("e-active")[0])||(0,l.Y4)(this.targetElement(),{"aria-activedescendant":this.ulElement.getElementsByClassName("e-active")[0].id}):(0,l.Y4)(this.targetElement(),{"aria-activedescendant":this.ulElement.getElementsByClassName("e-item-focus")[0].id}))},e.prototype.dropdownCompiler=function(t){var e=!1;if("function"!=typeof t&&t)try{e=!!document.querySelectorAll(t).length}catch(t){e=!1}return e},e.prototype.setValueTemplate=function(){this.isReact&&(this.clearTemplate(["valueTemplate"]),this.valueTempElement&&((0,l.og)(this.valueTempElement),this.inputElement.style.display="block",this.valueTempElement=null)),this.valueTempElement||(this.valueTempElement=this.createElement("span",{className:f.value}),this.inputElement.parentElement.insertBefore(this.valueTempElement,this.inputElement),this.inputElement.style.display="none"),this.isReact||(this.valueTempElement.innerHTML="");var t=this.dropdownCompiler(this.valueTemplate),e=("function"!=typeof this.valueTemplate&&t?(0,l.MY)(document.querySelector(this.valueTemplate).innerHTML.trim()):(0,l.MY)(this.valueTemplate))(this.itemData,this,"valueTemplate",this.valueTemplateId,this.isStringTemplate,null,this.valueTempElement);e&&e.length>0&&(0,l.R3)(e,this.valueTempElement),this.renderReactTemplates()},e.prototype.removeSelection=function(){if(this.list){var t=this.list.querySelectorAll("."+u.AA.selected);t.length&&((0,l.IV)(t,u.AA.selected),t[0].removeAttribute("aria-selected"))}},e.prototype.getItemData=function(){var t,e,i=this.fields,s=null;return s=this.itemData,(0,l.le)(s)||(t=(0,l.NA)(i.value,s),e=(0,l.NA)(i.text,s)),{value:(0,l.le)(s)||(0,l.o8)(t)?s:t,text:(0,l.le)(s)||(0,l.o8)(t)?s:e}},e.prototype.onChangeEvent=function(t,e){var i=this,s=this.getItemData(),n=this.isSelectCustom?null:this.activeIndex;if(this.enableVirtualization){var o=this.dataSource instanceof p.h?this.virtualGroupDataSource:this.dataSource;if(s.value&&o&&o.length>0){var a=o.findIndex(function(t){return!(0,l.le)(s.value)&&(0,l.NA)(i.fields.value,t)===s.value});-1!==a&&(n=a)}}var r=this.allowObjectBinding?e?this.value:this.getDataByValue(s.value):s.value;this.setProperties({index:n,text:s.text?s.text.toString():s.text,value:r},!0),this.detachChangeEvent(t)},e.prototype.detachChanges=function(t){return"string"==typeof t||"boolean"==typeof t||"number"==typeof t?Object.defineProperties({},{value:{value:t,enumerable:!0},text:{value:t,enumerable:!0}}):t},e.prototype.detachChangeEvent=function(t){if(this.isSelected=!1,this.previousValue=this.value,this.activeIndex=this.enableVirtualization?this.getIndexByValue(this.value):this.index,this.typedString=(0,l.le)(this.text)?"":this.text,!this.initial){var e=this.detachChanges(this.itemData),i=void 0;i="string"==typeof this.previousItemData||"boolean"==typeof this.previousItemData||"number"==typeof this.previousItemData?Object.defineProperties({},{value:{value:this.previousItemData,enumerable:!0},text:{value:this.previousItemData,enumerable:!0}}):this.previousItemData,this.setHiddenValue();var s={e:t,item:this.item,itemData:e,previousItem:this.previousSelectedLI,previousItemData:i,isInteracted:!!t,value:this.value,element:this.element,event:t};this.isAngular&&this.preventChange?this.preventChange=!1:this.trigger("change",s)}((0,l.le)(this.value)||""===this.value)&&"Always"!==this.floatLabelType&&(0,l.IV)([this.inputWrapper.container],"e-valid-input")},e.prototype.setHiddenValue=function(){if((0,l.le)(this.value))this.hiddenElement.innerHTML="";else{var t=this.allowObjectBinding&&!(0,l.le)(this.value)?(0,l.NA)(this.fields.value?this.fields.value:"",this.value):this.value;if(this.hiddenElement.querySelector("option")){var e=this.hiddenElement.querySelector("option");e.textContent=this.text,e.setAttribute("value",t.toString())}else if(!(0,l.le)(this.hiddenElement)){var i=document.createElement("option");i.text=this.text,i.setAttribute("selected",""),this.hiddenElement.appendChild(i);var e=this.hiddenElement.querySelector("option");e.setAttribute("value",t.toString())}}},e.prototype.onFilterUp=function(t){if(!(t.ctrlKey&&86===t.keyCode)&&(this.isValidKey||40===t.keyCode||38===t.keyCode))switch(this.isValidKey=!1,this.filterArgs=t,this.firstItem=this.dataSource&&this.dataSource.length>0?this.dataSource[0]:null,t.keyCode){case 38:case 40:"autocomplete"!==this.getModuleName()||this.isPopupOpen||this.preventAltUp||this.isRequested?this.preventAutoFill=!1:(this.preventAutoFill=!0,this.searchLists(t)),this.preventAltUp=!1,"autocomplete"!==this.getModuleName()||(0,l.le)(this.ulElement)||(0,l.le)(this.ulElement.getElementsByClassName("e-item-focus")[0])||(0,l.Y4)(this.targetElement(),{"aria-activedescendant":this.ulElement.getElementsByClassName("e-item-focus")[0].id}),t.preventDefault();break;case 46:case 8:this.typedString=this.filterInput.value,!this.isPopupOpen&&""!==this.typedString||this.isPopupOpen&&this.queryString.length>0?(this.preventAutoFill=!0,this.searchLists(t)):""===this.typedString&&""===this.queryString&&"autocomplete"!==this.getModuleName()?(this.preventAutoFill=!0,this.searchLists(t)):""===this.typedString&&(this.list&&this.resetFocusElement(),this.activeIndex=null,"dropdownlist"!==this.getModuleName()&&(this.preventAutoFill=!0,this.searchLists(t),"autocomplete"===this.getModuleName()&&this.hidePopup())),t.preventDefault();break;default:this.isFiltering()&&"combobox"===this.getModuleName()&&(0,l.le)(this.list)&&(this.getInitialData=!0,this.renderList(),this.isSecondClick||this.isDropDownClick||this.executeCloneElements()),this.typedString=this.filterInput.value,this.preventAutoFill=!1,this.getInitialData||this.searchLists(t),(this.enableVirtualization&&"autocomplete"!==this.getModuleName()||"autocomplete"===this.getModuleName()&&!(this.dataSource instanceof p.h)||"autocomplete"===this.getModuleName()&&this.dataSource instanceof p.h&&0!==this.totalItemCount)&&this.getFilteringSkeletonCount()}else this.isValidKey=!1},e.prototype.onFilterDown=function(t){switch(t.keyCode){case 13:break;case 40:case 38:this.queryString=this.filterInput.value,t.preventDefault();break;case 9:this.isPopupOpen&&"autocomplete"!==this.getModuleName()&&t.preventDefault();break;default:this.prevSelectPoints=this.getSelectionPoints(),this.queryString=this.filterInput.value}},e.prototype.removeFillSelection=function(){if(this.isInteracted){var t=this.getSelectionPoints();this.inputElement.setSelectionRange(t.end,t.end)}},e.prototype.getQuery=function(t){var e;if(!this.isCustomFilter&&this.allowFiltering&&this.filterInput){e=t?t.clone():this.query?this.query.clone():new c.A;var i=""===this.typedString?"contains":this.filterType,s=this.typeOfData(this.dataSource).typeof;if((this.dataSource instanceof p.h||"string"!==s)&&"number"!==s){if("combobox"!==this.getModuleName()||this.isFiltering()&&"combobox"===this.getModuleName()&&""!==this.typedString){var n=this.fields.text?this.fields.text:"";e.where(n,i,this.typedString,this.ignoreCase,this.ignoreAccent)}}else e.where("",i,this.typedString,this.ignoreCase,this.ignoreAccent)}else e=this.enableVirtualization&&!(0,l.le)(this.customFilterQuery)?this.customFilterQuery.clone():t?t.clone():this.query?this.query.clone():new c.A;if(this.enableVirtualization&&0!==this.viewPortInfo.endIndex){var o=this.getTakeValue(),a=!1;if(e){for(var r=0;r<e.queries.length;r++)if("onSkip"===e.queries[r].fn){a=!0;break}}var h=0,u=0;if(e&&e.queries.length>0)for(var r=0;r<e.queries.length;r++)"onSkip"===e.queries[r].fn&&(u=e.queries[r].e.nos),"onTake"===e.queries[r].fn&&(h=o<=e.queries[r].e.nos?e.queries[r].e.nos:o);if(h<=0&&this.query&&this.query.queries.length>0)for(var r=0;r<this.query.queries.length;r++)"onTake"===this.query.queries[r].fn&&(h=o<=this.query.queries[r].e.nos?this.query.queries[r].e.nos:o);if(e&&e.queries.length>0)for(var r=0;r<e.queries.length;r++){if("onSkip"===e.queries[r].fn){u=e.queries[r].e.nos,e.queries.splice(r,1),a=!1,--r;continue}"onTake"===e.queries[r].fn&&(h=e.queries[r].e.nos<=h?h:e.queries[r].e.nos,e.queries.splice(r,1),--r)}!this.allowFiltering&&this.isPopupOpen&&a||(u>0?e.skip(u):e.skip(this.virtualItemStartIndex)),this.isIncrementalRequest?e.take(this.incrementalEndIndex):h>0?e.take(h):e.take(o),e.requiresCount()}return e},e.prototype.getSelectionPoints=function(){var t=this.inputElement;return{start:Math.abs(t.selectionStart),end:Math.abs(t.selectionEnd)}},e.prototype.searchLists=function(t){var e=this;if(this.isTyped=!0,this.activeIndex=null,this.isListSearched=!0,this.filterInput.parentElement.querySelector("."+f.clearIcon)&&(this.filterInput.parentElement.querySelector("."+f.clearIcon).style.visibility=""===this.filterInput.value?"hidden":"visible"),this.isDataFetched=!1,this.isFiltering()){this.checkAndResetCache(),this.isRequesting=!1;var i={preventDefaultAction:!1,text:this.filterInput.value,updateData:function(t,s,l){i.cancel||(e.isCustomFilter=!0,e.customFilterQuery=s?s.clone():s,e.filteringAction(t,s,l))},baseEventArgs:t,cancel:!1};this.trigger("filtering",i,function(t){t.cancel||e.isCustomFilter||t.preventDefaultAction||e.filteringAction(e.dataSource,null,e.fields)})}},e.prototype.filter=function(t,e,i){this.isCustomFilter=!0,this.filteringAction(t,e,i)},e.prototype.filteringAction=function(t,e,i){if(!(0,l.le)(this.filterInput)){this.beforePopupOpen=(!!this.isPopupOpen||"combobox"!==this.getModuleName()||""!==this.filterInput.value)&&!this.getInitialData;var s=this.list.classList.contains(u.AA.noData);if(""!==this.filterInput.value.trim()||this.itemTemplate){if(this.isNotSearchList=!1,e=""===this.filterInput.value.trim()?null:e,this.enableVirtualization&&this.isFiltering()&&this.isTyped&&(this.isPreventScrollAction=!0,this.list.scrollTop=0,this.previousStartIndex=0,this.virtualListInfo=null),this.resetList(t,i,e),"dropdownlist"===this.getModuleName()&&this.list.classList.contains(u.AA.noData)&&(this.popupContentElement.setAttribute("role","status"),this.popupContentElement.setAttribute("id","no-record"),(0,l.Y4)(this.filterInputObj.container,{"aria-activedescendant":"no-record"})),this.enableVirtualization&&s&&!this.list.classList.contains(u.AA.noData)){if(!this.list.querySelector(".e-virtual-ddl-content")){var n=this.createElement("div",{className:"e-virtual-ddl-content"});n.style.cssText=this.getTransformValues(),this.list.appendChild(n).appendChild(this.list.querySelector(".e-list-parent"))}if(!this.list.querySelector(".e-virtual-ddl")){var o=this.createElement("div",{id:this.element.id+"_popup",className:"e-virtual-ddl"});o.style.cssText=this.GetVirtualTrackHeight(),this.list.parentElement.querySelector(".e-dropdownbase").appendChild(o)}}}else{if(this.actionCompleteData.isUpdated=!1,this.isTyped=!1,!(0,l.le)(this.actionCompleteData.ulElement)&&!(0,l.le)(this.actionCompleteData.list)){if(this.enableVirtualization&&(this.isFiltering()&&(this.isPreventScrollAction=!0,this.list.scrollTop=0,this.previousStartIndex=0,this.virtualListInfo=null),this.totalItemCount=this.dataSource&&this.dataSource.length?this.dataSource.length:0,this.resetList(t,i,e),s&&!this.list.classList.contains(u.AA.noData))){if(!this.list.querySelector(".e-virtual-ddl-content")){var n=this.createElement("div",{className:"e-virtual-ddl-content"});n.style.cssText=this.getTransformValues(),this.list.appendChild(n).appendChild(this.list.querySelector(".e-list-parent"))}if(!this.list.querySelector(".e-virtual-ddl")){var o=this.createElement("div",{id:this.element.id+"_popup",className:"e-virtual-ddl"});o.style.cssText=this.GetVirtualTrackHeight(),this.list.parentElement.querySelector(".e-dropdownbase").appendChild(o)}}this.onActionComplete(this.actionCompleteData.ulElement,this.actionCompleteData.list)}this.isTyped=!0,(0,l.le)(this.itemData)||"dropdownlist"!==this.getModuleName()||(this.focusIndexItem(),this.setScrollPosition()),this.isNotSearchList=!0}this.enableVirtualization&&this.getFilteringSkeletonCount(),this.renderReactTemplates(),this.filterInput&&""===this.filterInput.value&&"combobox"===this.getModuleName()&&this.executeCloneElements()}},e.prototype.setSearchBox=function(t){if(!this.isFiltering())return v;var e=t.querySelector("."+f.filterParent)?t.querySelector("."+f.filterParent):this.createElement("span",{className:f.filterParent});this.filterInput=this.createElement("input",{attrs:{type:"text"},className:f.filterInput}),this.element.parentNode.insertBefore(this.filterInput,this.element);var i=!1;return l.AR.isDevice&&this.isDeviceFullScreen&&(i=!0),this.filterInputObj=r.II.createInput({element:this.filterInput,buttons:i?[f.backIcon,f.filterBarClearIcon]:[f.filterBarClearIcon],properties:{placeholder:this.filterBarPlaceholder}},this.createElement),(0,l.le)(this.cssClass)||(-1!==this.cssClass.split(" ").indexOf("e-outline")?(0,l.cn)([this.filterInputObj.container],"e-outline"):-1!==this.cssClass.split(" ").indexOf("e-filled")&&(0,l.cn)([this.filterInputObj.container],"e-filled")),(0,l.R3)([this.filterInputObj.container],e),(0,l.Ce)([e],t),(0,l.Y4)(this.filterInput,{"aria-disabled":"false",role:"combobox",autocomplete:"off",autocapitalize:"off",spellcheck:"false"}),this.clearIconElement=this.filterInput.parentElement.querySelector("."+f.clearIcon),!l.AR.isDevice&&this.clearIconElement&&(l.bi.add(this.clearIconElement,"click",this.clearText,this),this.clearIconElement.style.visibility="hidden"),l.AR.isDevice?this.searchKeyModule=new l.nv(this.filterInput,{keyAction:this.mobileKeyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}):this.searchKeyModule=new l.nv(this.filterInput,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}),l.bi.add(this.filterInput,"input",this.onInput,this),l.bi.add(this.filterInput,"keyup",this.onFilterUp,this),l.bi.add(this.filterInput,"keydown",this.onFilterDown,this),l.bi.add(this.filterInput,"blur",this.onBlurHandler,this),l.bi.add(this.filterInput,"paste",this.pasteHandler,this),this.filterInputObj},e.prototype.onInput=function(t){!(0,l.le)(t)&&!(0,l.le)(t.data)&&t.data.length>1&&this.autoFill&&("combobox"===this.getModuleName()||"autocomplete"===this.getModuleName())&&(this.inputElement.value=t.data),this.isValidKey=!0,"combobox"===this.getModuleName()&&this.updateIconState(),l.AR.isDevice&&"mozilla"===l.AR.info.name&&(this.typedString=this.filterInput.value,this.preventAutoFill=!0,this.searchLists(t))},e.prototype.pasteHandler=function(t){var e=this;setTimeout(function(){e.typedString=e.filterInput.value,"combobox"===e.getModuleName()&&e.isFiltering()&&(0,l.le)(e.list)&&e.renderList(),e.searchLists(t)})},e.prototype.onActionFailure=function(e){t.prototype.onActionFailure.call(this,e),this.beforePopupOpen&&this.renderPopup()},e.prototype.getTakeValue=function(){return this.allowFiltering&&"dropdownlist"===this.getModuleName()&&l.AR.isDevice?Math.round(window.outerHeight/this.listItemHeight):this.itemCount},e.prototype.onActionComplete=function(e,i,s,n){var o=this;if(this.dataSource instanceof p.h&&!(0,l.le)(s)&&!this.virtualGroupDataSource&&(this.totalItemCount=s.count),this.isNotSearchList&&!this.enableVirtualization){this.isNotSearchList=!1;return}if(this.getInitialData){this.updateActionCompleteDataValues(e,i),this.getInitialData=!1,this.isReactTemplateUpdate=!0,this.searchLists(this.filterArgs);return}var a=this.itemCount;if(this.isActive||!(0,l.le)(e)){var r=this.selectedLI?this.selectedLI.cloneNode(!0):null;if(t.prototype.onActionComplete.call(this,e,i,s),this.skeletonCount=0!==this.totalItemCount&&this.totalItemCount<2*this.itemCount&&(!(this.dataSource instanceof p.h)||this.dataSource instanceof p.h&&this.totalItemCount<=this.itemCount)?0:this.skeletonCount,this.updateSelectElementData(this.allowFiltering),this.isRequested&&!(0,l.le)(this.searchKeyEvent)&&"keydown"===this.searchKeyEvent.type&&(this.isRequested=!1,this.keyActionHandler(this.searchKeyEvent),this.searchKeyEvent=null),this.isRequested&&!(0,l.le)(this.searchKeyEvent)&&(this.incrementalSearch(this.searchKeyEvent),this.searchKeyEvent=null),this.enableVirtualization||(this.list.scrollTop=0),(0,l.le)(e)||(0,l.Y4)(e,{id:this.element.id+"_options",role:"listbox","aria-hidden":"false","aria-label":"listbox"}),this.initialRemoteRender){if(this.initial=!0,this.activeIndex=this.index,this.initialRemoteRender=!1,this.value&&this.dataSource instanceof p.h){var h=(0,l.le)(this.fields.value)?this.fields.text:this.fields.value,u=this.allowObjectBinding&&!(0,l.le)(this.value)?(0,l.NA)(h,this.value):this.value,d=this.fields.value.split("."),m=i.some(function(t){return(0,l.le)(t[h])&&d.length>1?o.checkFieldValue(t,d)===u:t[h]===u});this.enableVirtualization&&this.virtualGroupDataSource&&(m=this.virtualGroupDataSource.some(function(t){return(0,l.le)(t[h])&&d.length>1?o.checkFieldValue(t,d)===u:t[h]===u})),m?this.updateValues():this.dataSource.executeQuery(this.getQuery(this.query).where(new c.$(h,"equal",u))).then(function(t){t.result.length>0&&o.addItem(t.result,i.length),o.updateValues()})}else this.updateValues();this.initial=!1}else"autocomplete"===this.getModuleName()&&this.value&&this.setInputValue();if("autocomplete"!==this.getModuleName()&&this.isFiltering()&&!this.isTyped){if((!this.actionCompleteData.isUpdated||!this.isCustomFilter&&!this.isFilterFocus||(0,l.le)(this.itemData)&&this.allowFiltering&&(this.dataSource instanceof p.h||!(0,l.le)(this.dataSource)&&!(0,l.le)(this.dataSource.length)&&0!==this.dataSource.length))&&(this.itemTemplate&&("EJS-COMBOBOX"===this.element.tagName||this.isReact)&&this.allowFiltering?setTimeout(function(){o.updateActionCompleteDataValues(e,i)},0):this.updateActionCompleteDataValues(e,i)),this.isDynamicData){var f=this.allowObjectBinding&&!(0,l.le)(this.value)?(0,l.NA)(this.fields.value?this.fields.value:"",this.value):this.value;this.itemData=this.getDataByValue(f),this.selectedLI=this.getElementByValue(f),this.isDynamicData=!1}if((this.allowCustom||this.allowFiltering&&!this.isValueInList(i,this.value)&&this.dataSource instanceof p.h)&&!this.enableVirtualization)this.addNewItem(i,r);else if((this.allowCustom||this.allowFiltering&&this.isValueInList(i,this.value))&&!this.enableVirtualization){var v=this.allowObjectBinding&&!(0,l.le)(this.value)?(0,l.NA)(this.fields.value?this.fields.value:"",this.value):this.value;!(0,l.le)(this.value)&&r&&r.getAttribute("data-value")===v.toString()&&this.addNewItem(i,r)}(!(0,l.le)(this.itemData)||(0,l.le)(this.itemData)&&this.enableVirtualization)&&(this.getSkeletonCount(),this.skeletonCount=0!==this.totalItemCount&&this.totalItemCount<2*this.itemCount&&(!(this.dataSource instanceof p.h)||this.dataSource instanceof p.h&&this.totalItemCount<=this.itemCount)?0:this.skeletonCount,this.UpdateSkeleton(),this.focusIndexItem()),this.enableVirtualization&&this.updateActionCompleteDataValues(e,i)}else if(this.enableVirtualization&&"autocomplete"!==this.getModuleName()&&!this.isFiltering()){var v=this.getItemData().value;this.activeIndex=this.getIndexByValue(v);var g=this.findListElement(this.list,"li","data-value",v);this.selectedLI=g}else this.enableVirtualization&&"autocomplete"===this.getModuleName()&&(this.activeIndex=this.skeletonCount);this.beforePopupOpen&&(this.renderPopup(s),this.enableVirtualization&&!this.list.querySelector(".e-virtual-list")&&(this.UpdateSkeleton(),this.liCollections=this.list.querySelectorAll(".e-list-item")),this.enableVirtualization&&a!==this.itemCount&&this.resetList(this.dataSource,this.fields))}},e.prototype.isValueInList=function(t,e){if(Array.isArray(t)){for(var i=0;i<t.length;i++)if(t[i]===e)return!0}else if("object"==typeof t&&null!==t){for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)&&t[s]===e)return!0}return!1},e.prototype.checkFieldValue=function(t,e){var i=t;return e.forEach(function(t){i=i[t]}),i},e.prototype.updateActionCompleteDataValues=function(t,e){this.actionCompleteData={ulElement:t.cloneNode(!0),list:e,isUpdated:!0},this.actionData.list!==this.actionCompleteData.list&&this.actionCompleteData.ulElement&&this.actionCompleteData.list&&(this.actionData=this.actionCompleteData)},e.prototype.addNewItem=function(t,e){var i=this;if(!(0,l.le)(this.itemData)&&!(0,l.le)(e)){var s=this.getItemData().value;t.some(function(t){return("string"==typeof t||"number"==typeof t||"boolean"==typeof t)&&t===s||(0,l.NA)(i.fields.value,t)===s})||this.addItem(this.itemData)}},e.prototype.updateActionCompleteData=function(t,e,i){var s=this;"autocomplete"!==this.getModuleName()&&this.actionCompleteData.ulElement&&(this.itemTemplate&&"EJS-COMBOBOX"===this.element.tagName&&this.allowFiltering?setTimeout(function(){s.actionCompleteDataUpdate(t,e,i)},0):this.actionCompleteDataUpdate(t,e,i))},e.prototype.actionCompleteDataUpdate=function(t,e,i){null!==i?this.actionCompleteData.ulElement.insertBefore(t.cloneNode(!0),this.actionCompleteData.ulElement.childNodes[i]):this.actionCompleteData.ulElement.appendChild(t.cloneNode(!0)),this.isFiltering()&&this.actionCompleteData.list&&0>this.actionCompleteData.list.indexOf(e)&&this.actionCompleteData.list.push(e)},e.prototype.focusIndexItem=function(){var t=this.getItemData().value;this.activeIndex=(!this.enableVirtualization||(0,l.le)(t))&&this.enableVirtualization?this.activeIndex:this.getIndexByValue(t);var e=this.findListElement(this.list,"li","data-value",t);this.selectedLI=e,this.activeItem(e),this.enableVirtualization&&(0,l.le)(e)||this.removeFocus()},e.prototype.updateSelection=function(){var t=this.list.querySelector("."+u.AA.selected);t?(this.setProperties({index:this.getIndexByValue(t.getAttribute("data-value"))}),this.activeIndex=this.index):(this.removeFocus(),this.list.querySelector("."+u.AA.li).classList.add(f.focus))},e.prototype.updateSelectionList=function(){if(!(this.list&&this.list.querySelector(".e-active"))&&!(0,l.le)(this.value)&&"autocomplete"!==this.getModuleName()){var t=this.allowObjectBinding?(0,l.NA)(this.fields.value?this.fields.value:"",this.value):this.value,e=this.findListElement(this.list,"li","data-value",t);e&&e.classList.add("e-active")}},e.prototype.removeFocus=function(){var t=this.list.querySelectorAll("."+f.focus);t&&t.length&&(0,l.IV)(t,f.focus)},e.prototype.renderPopup=function(t){var e=this;if(this.popupObj&&document.body.contains(this.popupObj.element)){this.refreshPopup();return}this.trigger("beforeOpen",{cancel:!1},function(i){var s;if(i.cancel)e.beforePopupOpen=!1;else{var n=e.createElement("div",{id:e.element.id+"_popup",className:"e-ddl e-popup "+(null!==e.cssClass?e.cssClass:"")});n.setAttribute("aria-label",e.element.id),n.setAttribute("role","dialog");var o=e.setSearchBox(n);if(e.listContainerHeight=e.allowFiltering&&"dropdownlist"===e.getModuleName()&&l.AR.isDevice?(0,l.Ac)(Math.round(window.outerHeight).toString()+"px"):(0,l.Ac)(e.popupHeight),e.headerTemplate&&(e.setHeaderTemplate(n),e.isUpdateHeaderHeight=0!==e.header.offsetHeight),(0,l.R3)([e.list],n),e.footerTemplate&&(e.setFooterTemplate(n),e.isUpdateFooterHeight=0!==e.footer.offsetHeight),document.body.appendChild(n),n.style.top="0px",s=n.clientHeight,e.enableVirtualization&&e.itemTemplate){var a=n.querySelectorAll("li.e-list-item:not(.e-virtual-list)");e.listItemHeight=a.length>0?Math.ceil(a[0].getBoundingClientRect().height)+parseInt(window.getComputedStyle(a[0]).marginBottom,10):0}if(e.enableVirtualization&&!e.list.classList.contains(u.AA.noData)){if(e.getSkeletonCount(),e.skeletonCount=e.totalItemCount<2*e.itemCount&&(!(e.dataSource instanceof p.h)||e.dataSource instanceof p.h&&e.totalItemCount<=e.itemCount)?0:e.skeletonCount,e.list.querySelector(".e-virtual-ddl-content"))e.list.getElementsByClassName("e-virtual-ddl-content")[0].style=e.getTransformValues();else{var r=e.createElement("div",{className:"e-virtual-ddl-content"});r.style.cssText=e.getTransformValues(),e.list.appendChild(r).appendChild(e.list.querySelector(".e-list-parent"))}if(e.UpdateSkeleton(),e.liCollections=e.list.querySelectorAll("."+u.AA.li),e.virtualItemCount=e.itemCount,e.list.querySelector(".e-virtual-ddl"))e.list.getElementsByClassName("e-virtual-ddl")[0].style=e.GetVirtualTrackHeight();else{var h=e.createElement("div",{id:e.element.id+"_popup",className:"e-virtual-ddl"});h.style.cssText=e.GetVirtualTrackHeight(),n.querySelector(".e-dropdownbase").appendChild(h)}}if(n.style.visibility="hidden","auto"!==e.popupHeight){if(e.searchBoxHeight=0,(0,l.le)(o.container)||"combobox"===e.getModuleName()||"autocomplete"===e.getModuleName()||(e.searchBoxHeight=o.container.parentElement.getBoundingClientRect().height,e.listContainerHeight=(parseInt(e.listContainerHeight,10)-e.searchBoxHeight).toString()+"px"),e.headerTemplate){e.header=e.header?e.header:n.querySelector(".e-ddl-header");var c=Math.round(e.header.getBoundingClientRect().height);e.listContainerHeight=(parseInt(e.listContainerHeight,10)-(c+e.searchBoxHeight)).toString()+"px"}if(e.footerTemplate){e.footer=e.footer?e.footer:n.querySelector(".e-ddl-footer");var c=Math.round(e.footer.getBoundingClientRect().height);e.listContainerHeight=(parseInt(e.listContainerHeight,10)-(c+e.searchBoxHeight)).toString()+"px"}e.list.style.maxHeight=(parseInt(e.listContainerHeight,10)-2).toString()+"px",n.style.maxHeight=(0,l.Ac)(e.popupHeight)}else n.style.height="auto";var d=0,m=void 0;if(e.isPreventScrollAction=!0,(0,l.le)(e.selectedLI)||(0,l.le)(e.activeIndex)||!(e.activeIndex>=0)?e.enableVirtualization?e.setScrollPosition():e.list.scrollTop=0:e.setScrollPosition(),l.AR.isDevice&&e.isDeviceFullScreen&&!e.allowFiltering&&("dropdownlist"===e.getModuleName()||e.isDropDownClick&&"combobox"===e.getModuleName())){d=e.getOffsetValue(n);var v=e.isEmptyList()?e.list:e.liCollections[0];(0,l.le)(e.inputElement)||(m=-(parseInt(getComputedStyle(v).textIndent,10)-parseInt(getComputedStyle(e.inputElement).paddingLeft,10)+parseInt(getComputedStyle(e.inputElement.parentElement).borderLeftWidth,10)))}e.createPopup(n,d,m),e.popupContentElement=e.popupObj.element.querySelector(".e-content"),e.getFocusElement(),e.checkCollision(n),l.AR.isDevice&&(parseInt(e.popupWidth.toString(),10)>window.outerWidth&&!("dropdownlist"===e.getModuleName()&&e.allowFiltering)&&e.popupObj.element.classList.add("e-wide-popup"),e.popupObj.element.classList.add(f.device),("dropdownlist"===e.getModuleName()||"combobox"===e.getModuleName()&&!e.allowFiltering&&e.isDropDownClick)&&(e.popupObj.collision={X:"fit",Y:"fit"}),e.isFilterLayout()&&e.isDeviceFullScreen&&(e.popupObj.element.classList.add(f.mobileFilter),e.popupObj.position={X:0,Y:0},e.popupObj.dataBind(),(0,l.Y4)(e.popupObj.element,{style:"left:0px;right:0px;top:0px;bottom:0px;"}),(0,l.cn)([document.body,e.popupObj.element],f.popupFullScreen),e.setSearchBoxPosition(),e.backIconElement=o.container.querySelector(".e-back-icon"),e.clearIconElement=o.container.querySelector("."+f.clearIcon),l.bi.add(e.backIconElement,"click",e.clickOnBackIcon,e),l.bi.add(e.clearIconElement,"click",e.clearText,e))),n.style.visibility="visible",(0,l.cn)([n],"e-popup-close");for(var g=e.popupObj.getScrollableParent(e.inputWrapper.container),y=0;y<g.length;y++){var I=g[y];l.bi.add(I,"scroll",e.scrollHandler,e)}(0,l.le)(e.list)||(e.unWireListEvents(),e.wireListEvents()),e.selectedElementID=e.selectedLI?e.selectedLI.id:null,e.enableVirtualization&&(e.notify("bindScrollEvent",{module:"VirtualScroll",component:e.getModuleName(),enable:e.enableVirtualization}),setTimeout(function(){(e.value||e.list.querySelector(".e-active"))&&(e.updateSelectionList(),e.selectedValueInfo&&e.viewPortInfo&&e.viewPortInfo.offsets.top?e.list.scrollTop=e.viewPortInfo.offsets.top:e.scrollBottom(!0,!0))},5)),(0,l.Y4)(e.targetElement(),{"aria-expanded":"true","aria-owns":e.element.id+"_popup","aria-controls":e.element.id}),"dropdownlist"!==e.getModuleName()&&e.list.classList.contains("e-nodata")&&((0,l.Y4)(e.targetElement(),{"aria-activedescendant":"no-record"}),e.popupContentElement.setAttribute("role","status"),e.popupContentElement.setAttribute("id","no-record")),e.inputElement.setAttribute("aria-expanded","true"),e.inputElement.setAttribute("aria-controls",e.element.id+"_popup");var b=e.isFiltering()?e.filterInput.parentElement:e.inputWrapper.container;(0,l.cn)([b],[f.inputFocus]),e.beforePopupOpen=!0;var C=e.popupObj;e.trigger("open",{popup:C,event:t,cancel:!1,animation:{name:"FadeIn",duration:100}},function(t){t.cancel?(e.beforePopupOpen=!1,e.destroyPopup()):((0,l.le)(e.inputWrapper)||(0,l.cn)([e.inputWrapper.container],[f.iconAnimation]),e.renderReactTemplates(),e.isReact&&e.isFiltering()&&e.dataSource instanceof p.h&&e.list.querySelector("ul")&&!e.isSecondClick&&e.executeCloneElements(),(0,l.le)(e.popupObj)||e.popupObj.show(new l.fw(t.animation),1e3===e.zIndex?e.element:null),e.isReact&&setTimeout(function(){if(e.popupHeight&&e.list&&"auto"!==e.popupHeight&&!("dropdownlist"===e.getModuleName()&&e.allowFiltering)){var t="string"==typeof e.popupHeight?parseInt(e.popupHeight,10):e.popupHeight;if(!e.isUpdateHeaderHeight&&e.headerTemplate&&e.header){var i=""===e.list.style.maxHeight?t:parseInt(e.list.style.maxHeight,10);e.list.style.maxHeight=(i-e.header.offsetHeight).toString()+"px",e.isUpdateHeaderHeight=!0}if(!e.isUpdateFooterHeight&&e.footerTemplate&&e.footer){var i=""===e.list.style.maxHeight?t:parseInt(e.list.style.maxHeight,10);e.list.style.maxHeight=(i-e.footer.offsetHeight).toString()+"px",e.isUpdateFooterHeight=!0}}},15))}),e.allowResize&&("dropdownlist"!==e.getModuleName()||!(l.AR.isDevice&&e.isDeviceFullScreen&&e.allowFiltering))&&(e.resizer=e.createElement("div",{id:e.element.id+"_resize-popup",className:f.resizeIcon}),e.list&&e.list.parentElement&&(e.list.parentElement.classList.add("e-resize"),"auto"!==e.popupHeight.toString().toLowerCase()&&s>=parseInt(e.popupHeight.toString(),10)-2&&(e.list.parentElement.style.height="100%"),e.list.parentElement.style.paddingBottom="dropdownlist"===e.getModuleName()&&e.allowFiltering&&e.searchBoxHeight?(e.searchBoxHeight+16).toString()+"px":"16px",(e.header||e.footer||e.itemTemplate)&&(e.list.parentElement.style.paddingBottom=(parseInt(e.list.parentElement.style.maxHeight,10)-parseInt(e.list.style.maxHeight,10)+16).toString()+"px"),e.list.parentElement.appendChild(e.resizer),e.list.parentElement.style.width=e.resizeWidth+"px",e.list.parentElement.style.height=e.resizeHeight+"px",e.list.parentElement.style.maxHeight=e.resizeHeight+"px",e.list.style.maxHeight=e.resizeHeight+"px"),l.bi.add(e.resizer,"mousedown",e.startResizing,e),l.bi.add(e.resizer,"touchstart",e.startResizing,e))}})},e.prototype.checkCollision=function(t){l.AR.isDevice&&(!l.AR.isDevice||"dropdownlist"===this.getModuleName()||this.isDropDownClick)||((0,o.vF)(t).length>0&&(t.style.marginTop=-parseInt(getComputedStyle(t).marginTop,10)+"px"),this.popupObj.resolveCollision())},e.prototype.getOffsetValue=function(t){var e=getComputedStyle(t),i=parseInt(e.borderTopWidth,10),s=parseInt(e.borderBottomWidth,10);return this.setPopupPosition(i+s)},e.prototype.createPopup=function(t,e,i){var s=this;this.popupObj=new a.GI(t,{width:this.setWidth(),targetType:"relative",relateTo:this.inputWrapper.container,collision:this.enableRtl?{X:"fit",Y:"flip"}:{X:"flip",Y:"flip"},offsetY:e,enableRtl:this.enableRtl,offsetX:i,position:this.enableRtl?{X:"right",Y:"bottom"}:{X:"left",Y:"bottom"},zIndex:this.zIndex,close:function(){s.isDocumentClick||s.focusDropDown(),s.isReact&&s.clearTemplate(["headerTemplate","footerTemplate"]),s.isNotSearchList=!1,s.isDocumentClick=!1,s.destroyPopup(),s.isFiltering()&&s.actionCompleteData.list&&s.actionCompleteData.list.length>0?(s.isActive=!0,s.isReactTemplateUpdate&&s.isReact&&s.itemTemplate&&!s.enableVirtualization&&(s.actionCompleteData.ulElement=s.renderItems(s.actionCompleteData.list,s.fields),s.isReactTemplateUpdate=!1),s.enableVirtualization?s.onActionComplete(s.ulElement,s.listData,null,!0):s.onActionComplete(s.actionCompleteData.ulElement,s.actionCompleteData.list,null,!0)):s.enableVirtualization&&s.focusIndexItem()},open:function(){l.bi.add(document,"mousedown",s.onDocumentClick,s),s.isPopupOpen=!0;var t=s.actionCompleteData&&s.actionCompleteData.ulElement&&s.actionCompleteData.ulElement.querySelector("li"),e=s.list.querySelector("ul li");(0,l.le)(s.ulElement)||(0,l.le)(s.ulElement.getElementsByClassName("e-item-focus")[0])?(0,l.le)(s.ulElement)||(0,l.le)(s.ulElement.getElementsByClassName("e-active")[0])||(0,l.Y4)(s.targetElement(),{"aria-activedescendant":s.ulElement.getElementsByClassName("e-active")[0].id}):(0,l.Y4)(s.targetElement(),{"aria-activedescendant":s.ulElement.getElementsByClassName("e-item-focus")[0].id}),s.isFiltering()&&s.itemTemplate&&s.element.tagName===s.getNgDirective()&&t&&e&&t.textContent!==e.textContent&&"EJS-COMBOBOX"!==s.element.tagName&&s.cloneElements(),s.isFilterLayout()&&((0,l.IV)([s.inputWrapper.container],[f.inputFocus]),s.isFilterFocus=!0,s.filterInput.focus(),s.inputWrapper.clearButton&&(0,l.cn)([s.inputWrapper.clearButton],f.clearIconHide)),s.activeStateChange()},targetExitViewport:function(){l.AR.isDevice||s.hidePopup()}})},e.prototype.isEmptyList=function(){return!(0,l.le)(this.liCollections)&&0===this.liCollections.length},e.prototype.getFocusElement=function(){},e.prototype.isFilterLayout=function(){return"dropdownlist"===this.getModuleName()&&this.allowFiltering},e.prototype.scrollHandler=function(){l.AR.isDevice&&("dropdownlist"===this.getModuleName()&&!this.isFilterLayout()||"combobox"===this.getModuleName()&&!this.allowFiltering&&this.isDropDownClick)&&this.element&&!this.isElementInViewport(this.element)&&this.hidePopup()},e.prototype.isElementInViewport=function(t){var e=t.getBoundingClientRect();return e.top>=0&&e.left>=0&&e.bottom<=window.innerHeight&&e.right<=window.innerWidth},e.prototype.setSearchBoxPosition=function(){var t=this.filterInput.parentElement.getBoundingClientRect().height;this.popupObj.element.style.maxHeight="100%",this.popupObj.element.style.width="100%",this.list.style.maxHeight=window.innerHeight-t+"px",this.list.style.height=window.innerHeight-t+"px";var e=this.filterInput.parentElement.querySelector("."+f.clearIcon);(0,l.og)(this.filterInput),e.parentElement.insertBefore(this.filterInput,e)},e.prototype.setPopupPosition=function(t){var e,i=this.list.querySelector("."+f.focus)||this.selectedLI,s=this.isEmptyList()?this.list:this.liCollections[0],n=this.isEmptyList()?this.list:this.liCollections[this.getItems().length-1],o=s.getBoundingClientRect().height;this.listItemHeight=o+parseInt(window.getComputedStyle(s).marginBottom,10);var a=this.list.offsetHeight/2,r=(0,l.le)(i)?s.offsetTop:i.offsetTop;if(n.offsetTop-a<r&&!(0,l.le)(this.liCollections)&&this.liCollections.length>0&&!(0,l.le)(i)){var h=this.list.offsetHeight/o,u=parseInt(getComputedStyle(this.list).paddingBottom,10);e=(h-(this.liCollections.length-this.activeIndex))*o-t+u,this.list.scrollTop=i.offsetTop}else r>a&&!this.enableVirtualization?(e=a-o/2,this.list.scrollTop=r-a+o/2):e=r;return-(e=e+o+t-(o-this.inputWrapper.container.offsetHeight)/2)},e.prototype.setWidth=function(){var t=(0,l.Ac)(this.popupWidth);if(t.indexOf("%")>-1&&(t=(this.inputWrapper.container.offsetWidth*parseFloat(t)/100).toString()+"px"),l.AR.isDevice&&t.indexOf("px")>-1&&!this.allowFiltering&&("dropdownlist"===this.getModuleName()||this.isDropDownClick&&"combobox"===this.getModuleName())){var e=this.isEmptyList()?this.list:this.liCollections[0];t=parseInt(t,10)+(parseInt(getComputedStyle(e).textIndent,10)-parseInt(getComputedStyle(this.inputElement).paddingLeft,10)+parseInt(getComputedStyle(this.inputElement.parentElement).borderLeftWidth,10))*2+"px"}return t},e.prototype.scrollBottom=function(t,e,i){var s=this;if(void 0===e&&(e=!1),void 0===i&&(i=null),(0,l.le)(this.selectedLI)&&this.enableVirtualization&&(this.selectedLI=this.list.querySelector("."+u.AA.li),!(0,l.le)(this.selectedLI)&&this.selectedLI.classList.contains("e-virtual-list")&&(this.selectedLI=this.liCollections[this.skeletonCount])),!(0,l.le)(this.selectedLI)){var n=this.selectedLI&&!isNaN(parseInt(window.getComputedStyle(this.selectedLI).marginBottom,10))?parseInt(window.getComputedStyle(this.selectedLI).marginBottom,10):0;this.isUpwardScrolling=!1;var o=this.list.querySelectorAll(".e-virtual-list").length,a=this.list.querySelector("li:last-of-type")?this.list.querySelector("li:last-of-type").getAttribute("data-value"):null,r=this.virtualListInfo&&this.virtualListInfo.startIndex?this.selectedLI.offsetTop+this.virtualListInfo.startIndex*(this.selectedLI.offsetHeight+n):this.selectedLI.offsetTop,h=this.list.offsetHeight,p=r-o*(this.selectedLI.offsetHeight+n)+(this.selectedLI.offsetHeight+n)-this.list.scrollTop,c=this.list.scrollTop+p-h,d=!1;c=t?c+2*parseInt(getComputedStyle(this.list).paddingTop,10):c+parseInt(getComputedStyle(this.list).paddingTop,10);var m=r-o*(this.selectedLI.offsetHeight+n)+(this.selectedLI.offsetHeight+n)-this.list.scrollTop;if(m=this.fields.groupBy&&!(0,l.le)(this.fixedHeaderElement)?m-this.fixedHeaderElement.offsetHeight:m,0!==this.activeIndex||this.enableVirtualization){if(p>h||!(m>0&&this.list.offsetHeight>m)){var f=this.selectedLI?this.selectedLI.getAttribute("data-value"):null,v="pageDown"===i?this.getPageCount()-2:1;!this.enableVirtualization||this.isKeyBoardAction||e?this.isKeyBoardAction&&this.enableVirtualization&&a&&f===a&&"end"!==i&&!this.isVirtualScrolling?(this.isPreventKeyAction=!0,this.enableVirtualization&&this.itemTemplate?this.list.scrollTop+=c:(this.enableVirtualization&&(v="pageDown"===i?this.getPageCount()+1:v),this.list.scrollTop+=(this.selectedLI.offsetHeight+n)*v),this.isPreventKeyAction=!this.IsScrollerAtEnd()&&this.isPreventKeyAction,this.isKeyBoardAction=!1,this.isPreventScrollAction=!1):this.enableVirtualization&&"end"===i?(this.isPreventKeyAction=!1,this.isKeyBoardAction=!1,this.isPreventScrollAction=!1,this.list.scrollTop=this.list.scrollHeight):("pageDown"===i&&this.enableVirtualization&&!this.isVirtualScrolling&&(this.isPreventKeyAction=!1,this.isKeyBoardAction=!1,this.isPreventScrollAction=!1),this.list.scrollTop=c):this.list.scrollTop=this.virtualListInfo&&this.virtualListInfo.startIndex?t&&this.virtualListInfo.startIndex?this.virtualListInfo.startIndex*this.listItemHeight+2*this.listItemHeight:this.virtualListInfo.startIndex*this.listItemHeight:0,d=this.isKeyBoardAction}}else this.list.scrollTop=0,d=this.isKeyBoardAction;this.isKeyBoardAction=d,this.enableVirtualization&&this.fields.groupBy&&this.fixedHeaderElement&&"down"===i&&setTimeout(function(){s.scrollStop(null,!0)},100)}},e.prototype.scrollTop=function(t){if(void 0===t&&(t=null),!(0,l.le)(this.selectedLI)){var e=this.selectedLI&&!isNaN(parseInt(window.getComputedStyle(this.selectedLI).marginBottom,10))?parseInt(window.getComputedStyle(this.selectedLI).marginBottom,10):0,i=this.list.querySelectorAll(".e-virtual-list").length,s=this.virtualListInfo&&this.virtualListInfo.startIndex?this.selectedLI.offsetTop+this.virtualListInfo.startIndex*(this.selectedLI.offsetHeight+e):this.selectedLI.offsetTop,n=s-i*(this.selectedLI.offsetHeight+e)-this.list.scrollTop,o=this.list.querySelector("li.e-list-item:not(.e-virtual-list)")?this.list.querySelector("li.e-list-item:not(.e-virtual-list)").getAttribute("data-value"):null;n=this.fields.groupBy&&!(0,l.le)(this.fixedHeaderElement)?n-this.fixedHeaderElement.offsetHeight:n;var a=s-i*(this.selectedLI.offsetHeight+e)+(this.selectedLI.offsetHeight+e)-this.list.scrollTop,r=this.enableVirtualization&&"autocomplete"===this.getModuleName()&&n<=0;if(0!==this.activeIndex||this.enableVirtualization){if(n<0||r){var h=this.selectedLI?this.selectedLI.getAttribute("data-value"):null,u="pageUp"===t?this.getPageCount()-2:1;this.enableVirtualization&&(u="pageUp"===t?this.getPageCount():u),this.enableVirtualization&&this.isKeyBoardAction&&o&&h===o&&"home"!==t&&!this.isVirtualScrolling?(this.isUpwardScrolling=!0,this.isPreventKeyAction=!0,this.list.scrollTop-=(this.selectedLI.offsetHeight+e)*u,this.isPreventKeyAction=0!==this.list.scrollTop&&this.isPreventKeyAction,this.isKeyBoardAction=!1,this.isPreventScrollAction=!1):this.enableVirtualization&&"home"===t?(this.isPreventScrollAction=!1,this.isPreventKeyAction=!0,this.isKeyBoardAction=!1,this.list.scrollTo(0,0)):("pageUp"===t&&this.enableVirtualization&&!this.isVirtualScrolling&&(this.isPreventKeyAction=!1,this.isKeyBoardAction=!1,this.isPreventScrollAction=!1),this.list.scrollTop=this.list.scrollTop+n)}else a>0&&this.list.offsetHeight>a||(this.list.scrollTop=this.selectedLI.offsetTop-(this.fields.groupBy&&!(0,l.le)(this.fixedHeaderElement)?this.fixedHeaderElement.offsetHeight:0))}else this.list.scrollTop=0}},e.prototype.IsScrollerAtEnd=function(){return this.list&&this.list.scrollTop+this.list.clientHeight>=this.list.scrollHeight},e.prototype.isEditTextBox=function(){return!1},e.prototype.isFiltering=function(){return this.allowFiltering},e.prototype.isPopupButton=function(){return!0},e.prototype.setScrollPosition=function(t){if(this.isPreventScrollAction=!0,(0,l.le)(t))this.scrollBottom(!0);else switch(t.action){case"pageDown":case"down":case"end":this.isKeyBoardAction=!0,this.scrollBottom(!1,!1,t.action);break;default:this.isKeyBoardAction="up"===t.action||"pageUp"===t.action||"open"===t.action,this.scrollTop(t.action)}this.isKeyBoardAction=!1},e.prototype.clearText=function(){this.filterInput.value=this.typedString="",this.searchLists(null),this.enableVirtualization&&(this.list.scrollTop=0,this.totalItemCount=this.dataCount=this.dataSource&&this.dataSource.length?this.dataSource.length:0,this.list.getElementsByClassName("e-virtual-ddl")[0]&&(this.list.getElementsByClassName("e-virtual-ddl")[0].style=this.GetVirtualTrackHeight()),this.getSkeletonCount(),this.UpdateSkeleton(),this.liCollections=this.list.querySelectorAll(".e-list-item"),this.list.getElementsByClassName("e-virtual-ddl-content")[0]&&(this.list.getElementsByClassName("e-virtual-ddl-content")[0].style=this.getTransformValues()))},e.prototype.setEleWidth=function(t){(0,l.le)(t)||("number"==typeof t?this.inputWrapper.container.style.width=(0,l.Ac)(t):"string"==typeof t&&(this.inputWrapper.container.style.width=t.match(/px|%|em/)?t:(0,l.Ac)(t)))},e.prototype.closePopup=function(t,e){var i,s=this,n=!(0,l.le)(this.filterInput)&&!(0,l.le)(this.filterInput.value)&&""!==this.filterInput.value;if("combobox"===this.getModuleName()&&this.typedString,this.isTyped=!1,this.isVirtualTrackHeight=!1,this.popupObj&&document.body.contains(this.popupObj.element)&&this.beforePopupOpen){this.keyboardEvent=null,l.bi.remove(document,"mousedown",this.onDocumentClick),this.isActive=!1,this.isDropDownClick=!1,this.preventAutoFill=!1;for(var o=this.popupObj.getScrollableParent(this.inputWrapper.container),a=0;a<o.length;a++){var h=o[a];l.bi.remove(h,"scroll",this.scrollHandler)}l.AR.isDevice&&this.isFilterLayout()&&this.isDeviceFullScreen&&(0,l.IV)([document.body,this.popupObj.element],f.popupFullScreen),this.isFilterLayout()&&(!l.AR.isDevice&&(this.searchKeyModule.destroy(),this.clearIconElement&&l.bi.remove(this.clearIconElement,"click",this.clearText)),this.backIconElement&&(l.bi.remove(this.backIconElement,"click",this.clickOnBackIcon),l.bi.remove(this.clearIconElement,"click",this.clearText)),(0,l.le)(this.filterInput)||(l.bi.remove(this.filterInput,"input",this.onInput),l.bi.remove(this.filterInput,"keyup",this.onFilterUp),l.bi.remove(this.filterInput,"keydown",this.onFilterDown),l.bi.remove(this.filterInput,"blur",this.onBlurHandler),l.bi.remove(this.filterInput,"paste",this.pasteHandler)),this.allowFiltering&&"dropdownlist"===this.getModuleName()&&(this.filterInput.removeAttribute("aria-activedescendant"),this.filterInput.removeAttribute("aria-disabled"),this.filterInput.removeAttribute("role"),this.filterInput.removeAttribute("autocomplete"),this.filterInput.removeAttribute("autocapitalize"),this.filterInput.removeAttribute("spellcheck")),this.filterInput=null),(0,l.Y4)(this.targetElement(),{"aria-expanded":"false"}),this.inputElement.setAttribute("aria-expanded","false"),this.targetElement().removeAttribute("aria-owns"),this.targetElement().removeAttribute("aria-activedescendant"),this.inputWrapper.container.classList.remove(f.iconAnimation),this.isFiltering()&&(this.actionCompleteData.isUpdated=!1),this.enableVirtualization&&(null==this.value||this.isTyped?(this.viewPortInfo.endIndex=this.viewPortInfo&&this.viewPortInfo.endIndex>0?this.viewPortInfo.endIndex:this.itemCount,"autocomplete"!==this.getModuleName()&&("dropdownlist"!==this.getModuleName()||(0,l.le)(this.typedString)||""===this.typedString)&&("combobox"!==this.getModuleName()||!this.allowFiltering||(0,l.le)(this.typedString)||""===this.typedString)||this.checkAndResetCache()):"autocomplete"===this.getModuleName()&&this.checkAndResetCache(),("dropdownlist"===this.getModuleName()||"combobox"===this.getModuleName())&&0!==this.skeletonCount&&this.getSkeletonCount(!0)),this.beforePopupOpen=!1;var u={popup:this.popupObj,cancel:!1,animation:{name:"FadeOut",duration:100,delay:t||0},event:e||null};this.trigger("close",u,function(t){if("dropdownlist"===s.getModuleName()&&r.II.destroy({element:s.filterInput,floatLabelType:s.floatLabelType,properties:{placeholder:s.filterBarPlaceholder},buttons:s.clearIconElement},s.clearIconElement),s.filterInputObj=null,!(0,l.le)(s.popupObj)&&!(0,l.le)(s.popupObj.element.querySelector(".e-fixed-head"))){var e=s.popupObj.element.querySelector(".e-fixed-head");e.parentNode.removeChild(e),s.fixedHeaderElement=null}t.cancel||("autocomplete"===s.getModuleName()&&s.rippleFun(),s.isPopupOpen?s.popupObj.hide(new l.fw(t.animation)):s.destroyPopup())}),l.AR.isDevice&&!u.cancel&&this.popupObj.element.classList.contains("e-wide-popup")&&this.popupObj.element.classList.remove("e-wide-popup"),i=this.dataSource instanceof p.h?this.virtualGroupDataSource&&this.virtualGroupDataSource.length?this.virtualGroupDataSource.length:0:this.dataSource&&this.dataSource.length?this.dataSource.length:0,this.enableVirtualization&&this.isFiltering()&&n&&this.totalItemCount!==i&&(this.updateInitialData(),this.checkAndResetCache())}},e.prototype.updateInitialData=function(){var t=this.selectData;if(!(0,l.le)(t)){var e=this.renderItems(t,this.fields);if(this.list.scrollTop=0,this.virtualListInfo={currentPageNumber:null,direction:null,sentinelInfo:{},offsets:{},startIndex:0,endIndex:this.itemCount},"combobox"===this.getModuleName()&&(this.typedString=""),this.previousStartIndex=0,this.previousEndIndex=0,this.dataSource instanceof p.h?this.remoteDataCount>=0?this.totalItemCount=this.dataCount=this.remoteDataCount:this.resetList(this.dataSource):this.totalItemCount=this.dataCount=this.dataSource&&this.dataSource.length?this.dataSource.length:0,this.list.getElementsByClassName("e-virtual-ddl")[0])this.list.getElementsByClassName("e-virtual-ddl")[0].style=this.GetVirtualTrackHeight();else if(!this.list.querySelector(".e-virtual-ddl")&&this.list.parentElement){var i=this.createElement("div",{id:this.element.id+"_popup",className:"e-virtual-ddl"});i.style.cssText=this.GetVirtualTrackHeight(),this.list.parentElement.querySelector(".e-dropdownbase").appendChild(i)}"autocomplete"!==this.getModuleName()&&0!==this.totalItemCount&&this.totalItemCount>2*this.itemCount&&this.getSkeletonCount(),this.UpdateSkeleton(),this.listData=t,this.updateActionCompleteDataValues(e,t),this.liCollections=this.list.querySelectorAll(".e-list-item"),this.list.getElementsByClassName("e-virtual-ddl-content")[0]&&(this.list.getElementsByClassName("e-virtual-ddl-content")[0].style=this.getTransformValues())}},e.prototype.destroyPopup=function(){this.isPopupOpen=!1,this.isFilterFocus=!1,this.inputElement.removeAttribute("aria-controls"),this.popupObj&&(this.resizer&&(l.bi.remove(this.resizer,"mousedown",this.startResizing),l.bi.remove(this.resizer,"touchstart",this.startResizing)),this.popupObj.destroy(),(0,l.og)(this.popupObj.element))},e.prototype.clickOnBackIcon=function(){this.hidePopup(),this.focusIn()},e.prototype.render=function(){this.preselectedIndex=(0,l.le)(this.index)?null:this.index,"INPUT"===this.element.tagName?(this.inputElement=this.element,(0,l.le)(this.inputElement.getAttribute("role"))&&this.inputElement.setAttribute("role","combobox"),(0,l.le)(this.inputElement.getAttribute("type"))&&this.inputElement.setAttribute("type","text"),this.inputElement.setAttribute("aria-expanded","false")):(this.inputElement=this.createElement("input",{attrs:{role:"combobox",type:"text"}}),this.element.tagName!==this.getNgDirective()&&(this.element.style.display="none"),this.element.parentElement.insertBefore(this.inputElement,this.element),this.preventTabIndex(this.inputElement));var t=this.cssClass;(0,l.le)(this.cssClass)||""===this.cssClass||(t=this.cssClass.replace(/\s+/g," ").trim()),!(0,l.le)((0,l.oq)(this.element,"fieldset"))&&(0,l.oq)(this.element,"fieldset").disabled&&(this.enabled=!1),this.inputWrapper=r.II.createInput({element:this.inputElement,buttons:this.isPopupButton()?[f.icon]:null,floatLabelType:this.floatLabelType,properties:{readonly:"dropdownlist"===this.getModuleName()||this.readonly,placeholder:this.placeholder,cssClass:t,enabled:this.enabled,enableRtl:this.enableRtl,showClearButton:this.showClearButton}},this.createElement),this.element.tagName===this.getNgDirective()?this.element.appendChild(this.inputWrapper.container):this.inputElement.parentElement.insertBefore(this.element,this.inputElement),this.hiddenElement=this.createElement("select",{attrs:{"aria-hidden":"true",tabindex:"-1",class:f.hiddenElement}}),(0,l.Ce)([this.hiddenElement],this.inputWrapper.container),this.hiddenElement.hasAttribute("aria-label")||this.hiddenElement.setAttribute("aria-label",this.getModuleName()),this.validationAttribute(this.element,this.hiddenElement),this.setReadOnly(),this.setFields(),this.inputWrapper.container.style.width=(0,l.Ac)(this.width),this.inputWrapper.container.classList.add("e-ddl"),"Never"!==this.floatLabelType&&r.II.calculateWidth(this.inputElement,this.inputWrapper.container),!(0,l.le)(this.inputWrapper.buttons[0])&&this.inputWrapper.container.getElementsByClassName("e-float-text-content")[0]&&"Never"!==this.floatLabelType&&this.inputWrapper.container.getElementsByClassName("e-float-text-content")[0].classList.add("e-icon"),this.wireEvent(),this.tabIndex=this.element.hasAttribute("tabindex")?this.element.getAttribute("tabindex"):"0",this.element.removeAttribute("tabindex");var e=this.element.getAttribute("id")?this.element.getAttribute("id"):(0,l.QI)("ej2_dropdownlist");if(this.element.id=e,this.hiddenElement.id=e+"_hidden",this.targetElement().setAttribute("tabindex",this.tabIndex),"autocomplete"!==this.getModuleName()&&"combobox"!==this.getModuleName()||this.readonly?"dropdownlist"===this.getModuleName()&&(this.targetElement().hasAttribute("aria-label")||(0,l.Y4)(this.targetElement(),{"aria-label":this.getModuleName()}),this.inputElement.hasAttribute("aria-label")||this.inputElement.setAttribute("aria-label",this.getModuleName()),this.inputElement.setAttribute("aria-expanded","false")):this.inputElement.hasAttribute("aria-label")||this.inputElement.setAttribute("aria-label",this.getModuleName()),(0,l.Y4)(this.targetElement(),this.getAriaAttributes()),this.updateDataAttribute(this.htmlAttributes),this.setHTMLAttributes(),this.targetElement()===this.inputElement&&this.inputElement.removeAttribute("aria-labelledby"),null!==this.value||null!==this.activeIndex||null!==this.text)this.enableVirtualization&&(this.listItemHeight=this.getListHeight(),this.getSkeletonCount(),this.updateVirtualizationProperties(this.itemCount,this.allowFiltering),null!==this.index&&(this.activeIndex=this.index+this.skeletonCount)),this.initValue(),this.selectedValueInfo=this.viewPortInfo,this.enableVirtualization&&(this.activeIndex=this.activeIndex+this.skeletonCount);else if("SELECT"===this.element.tagName&&this.element.options[0]){var i=this.element;this.value=this.allowObjectBinding?this.getDataByValue(i.options[i.selectedIndex].value):i.options[i.selectedIndex].value,this.text=(0,l.le)(this.value)?null:i.options[i.selectedIndex].textContent,this.initValue()}this.setEnabled(),this.preventTabIndex(this.element),this.enabled||(this.targetElement().tabIndex=-1),this.initial=!1,this.element.style.opacity="",this.inputElement.onselect=function(t){t.stopImmediatePropagation()},this.inputElement.onchange=function(t){t.stopImmediatePropagation()},this.element.hasAttribute("autofocus")&&this.focusIn(),(0,l.le)(this.text)||this.inputElement.setAttribute("value",this.text),this.element.hasAttribute("data-val")&&this.element.setAttribute("data-val","false");var s=this.inputWrapper.container.getElementsByClassName("e-float-text")[0];(0,l.le)(this.element.id)||""===this.element.id||(0,l.le)(s)||(s.id="label_"+this.element.id.replace(/ /g,"_"),(0,l.Y4)(this.inputElement,{"aria-labelledby":s.id})),this.renderComplete(),this.listItemHeight=this.getListHeight(),this.getSkeletonCount(),this.enableVirtualization&&this.updateVirtualizationProperties(this.itemCount,this.allowFiltering),this.viewPortInfo.startIndex=this.virtualItemStartIndex=0,this.viewPortInfo.endIndex=this.virtualItemEndIndex=this.viewPortInfo.startIndex>0?this.viewPortInfo.endIndex:this.itemCount},e.prototype.getListHeight=function(){var t=this.createElement("div",{className:"e-dropdownbase"}),e=this.createElement("li",{className:"e-list-item"}),i=(0,l.Ac)(this.popupHeight);t.style.height=parseInt(i,10).toString()+"px",t.appendChild(e),document.body.appendChild(t),this.virtualListHeight=t.getBoundingClientRect().height;var s=Math.ceil(e.getBoundingClientRect().height)+parseInt(window.getComputedStyle(e).marginBottom,10);return t.remove(),s},e.prototype.setFooterTemplate=function(t){this.footer?this.isReact&&"function"==typeof this.footerTemplate?this.clearTemplate(["footerTemplate"]):this.footer.innerHTML="":(this.footer=this.createElement("div"),(0,l.cn)([this.footer],f.footer));var e=this.dropdownCompiler(this.footerTemplate),i=("function"!=typeof this.footerTemplate&&e?(0,l.MY)((0,l.Ys)(this.footerTemplate,document).innerHTML.trim()):(0,l.MY)(this.footerTemplate))({},this,"footerTemplate",this.footerTemplateId,this.isStringTemplate,null,this.footer);i&&i.length>0&&(0,l.R3)(i,this.footer),(0,l.R3)([this.footer],t)},e.prototype.setHeaderTemplate=function(t){this.header?this.header.innerHTML="":(this.header=this.createElement("div"),(0,l.cn)([this.header],f.header));var e=this.dropdownCompiler(this.headerTemplate),i=("function"!=typeof this.headerTemplate&&e?(0,l.MY)((0,l.Ys)(this.headerTemplate,document).innerHTML.trim()):(0,l.MY)(this.headerTemplate))({},this,"headerTemplate",this.headerTemplateId,this.isStringTemplate,null,this.header);i&&i.length&&(0,l.R3)(i,this.header);var s=t.querySelector("div.e-content");t.insertBefore(this.header,s)},e.prototype.setEnabled=function(){this.element.setAttribute("aria-disabled",this.enabled?"false":"true")},e.prototype.setOldText=function(t){this.text=t},e.prototype.setOldValue=function(t){this.value=t},e.prototype.refreshPopup=function(){!(0,l.le)(this.popupObj)&&document.body.contains(this.popupObj.element)&&(this.allowFiltering&&!(l.AR.isDevice&&this.isFilterLayout())||"autocomplete"===this.getModuleName())&&((0,l.IV)([this.popupObj.element],"e-popup-close"),this.popupObj.refreshPosition(this.inputWrapper.container),this.popupObj.resolveCollision())},e.prototype.checkData=function(t){t.dataSource&&!(0,l.le)(Object.keys(t.dataSource))&&this.itemTemplate&&this.allowFiltering&&!(this.isListSearched&&t.dataSource instanceof p.h)&&(this.list&&!this.isReact?this.list.innerHTML="":this.list=null,this.actionCompleteData={ulElement:null,list:null,isUpdated:!1}),this.isListSearched=!1;var e=-1!==Object.keys(t).indexOf("value")&&(0,l.le)(t.value),i=-1!==Object.keys(t).indexOf("text")&&(0,l.le)(t.text);"autocomplete"!==this.getModuleName()&&this.allowFiltering&&(e||i)&&(this.itemData=null),this.allowFiltering&&t.dataSource&&!(0,l.le)(Object.keys(t.dataSource))?(this.actionCompleteData={ulElement:null,list:null,isUpdated:!1},this.actionData=this.actionCompleteData):this.allowFiltering&&t.query&&!(0,l.le)(Object.keys(t.query))&&(this.actionCompleteData="combobox"===this.getModuleName()?{ulElement:null,list:null,isUpdated:!1}:this.actionCompleteData,this.actionData=this.actionCompleteData)},e.prototype.updateDataSource=function(t,e){(""!==this.inputElement.value||!(0,l.le)(t)&&((0,l.le)(t.dataSource)||!(t.dataSource instanceof p.h)&&0===t.dataSource.length))&&this.clearAll(null,t),this.fields.groupBy&&t.fields&&!this.isGroupChecking&&this.list&&(l.bi.remove(this.list,"scroll",this.setFloatingHeader),l.bi.add(this.list,"scroll",this.setFloatingHeader,this)),(!(!(0,l.le)(t)&&((0,l.le)(t.dataSource)||!(t.dataSource instanceof p.h)&&0===t.dataSource.length))||t.dataSource instanceof p.h||!(0,l.le)(t)&&Array.isArray(t.dataSource)&&!(0,l.le)(e)&&Array.isArray(e.dataSource)&&t.dataSource.length!==e.dataSource.length)&&(this.typedString="",this.resetList(this.dataSource)),this.isCustomFilter||this.isFilterFocus||document.activeElement===this.filterInput||this.checkCustomValue()},e.prototype.checkCustomValue=function(){var t=this.allowObjectBinding&&!(0,l.le)(this.value)?(0,l.NA)(this.fields.value?this.fields.value:"",this.value):this.value;this.itemData=this.getDataByValue(t);var e=this.getItemData(),i=this.allowObjectBinding?this.itemData:e.value,s=(0,l.le)(i)?null:this.index;(0,l.le)(s)&&t===i||this.isAngular?this.setProperties({text:e.text?e.text.toString():e.text,value:i}):this.setProperties({text:e.text?e.text.toString():e.text,index:s,value:i})},e.prototype.updateInputFields=function(){"dropdownlist"===this.getModuleName()&&r.II.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton)},e.prototype.onPropertyChanged=function(e,i){var s=this;!(0,l.le)(e.dataSource)&&!this.isTouched&&(0,l.le)(e.value)&&(0,l.le)(e.index)&&!(0,l.le)(this.preselectedIndex)&&!(0,l.le)(this.index)&&(e.index=this.index),(0,l.le)(e.value)&&(0,l.le)(e.index)||(this.isTouched=!0),"dropdownlist"===this.getModuleName()&&(this.checkData(e),this.setUpdateInitial(["fields","query","dataSource"],e));for(var n=this,o=0,a=Object.keys(e);o<a.length;o++){var h=function(o){switch(o){case"query":case"dataSource":n.getSkeletonCount(),n.checkAndResetCache();break;case"htmlAttributes":n.setHTMLAttributes();break;case"width":n.setEleWidth(e.width),r.II.calculateWidth(n.inputElement,n.inputWrapper.container);break;case"placeholder":r.II.setPlaceholder(e.placeholder,n.inputElement);break;case"filterBarPlaceholder":n.filterInput&&r.II.setPlaceholder(e.filterBarPlaceholder,n.filterInput);break;case"readonly":"dropdownlist"!==n.getModuleName()&&r.II.setReadonly(e.readonly,n.inputElement),n.setReadOnly();break;case"cssClass":n.setCssClass(e.cssClass,i.cssClass),r.II.calculateWidth(n.inputElement,n.inputWrapper.container);break;case"enableRtl":n.setEnableRtl();break;case"enabled":n.setEnable();break;case"text":if(n.fields.disabled&&(e.text=e.text&&!n.isDisabledItemByIndex(n.getIndexByValue(n.getValueByText(e.text)))?e.text:null),null===e.text){n.clearAll();break}if(n.enableVirtualization){n.updateValues(),n.updateInputFields(),n.notify("setCurrentViewDataAsync",{module:"VirtualScroll"});break}if(n.list||(n.dataSource instanceof p.h&&(n.initialRemoteRender=!0),n.renderList()),!n.initialRemoteRender){var a=n.getElementByText(e.text);if(!n.checkValidLi(a)){if(n.liCollections&&100===n.liCollections.length&&"autocomplete"===n.getModuleName()&&n.listData.length>100)n.setSelectionData(e.text,i.text,"text");else if(e.text&&n.dataSource instanceof p.h){var h=n.getItems().length,u=(0,l.le)(n.fields.text)?n.fields.value:n.fields.text;n.typedString="",n.dataSource.executeQuery(n.getQuery(n.query).where(new c.$(u,"equal",e.text))).then(function(t){t.result.length>0?(s.addItem(t.result,h),s.updateValues()):s.setOldText(i.text)})}else"autocomplete"===n.getModuleName()?n.setInputValue(e,i):n.setOldText(i.text)}n.updateInputFields()}break;case"value":if(n.fields.disabled&&(e.value=null==e.value||n.isDisableItemValue(e.value)?null:e.value),null===e.value){n.clearAll();break}if(n.allowObjectBinding&&!(0,l.le)(e.value)&&!(0,l.le)(i.value)&&n.isObjectInArray(e.value,[i.value]))return{value:void 0};if(n.enableVirtualization){n.updateValues(),n.updateInputFields(),n.notify("setCurrentViewDataAsync",{module:"VirtualScroll"}),n.preventChange=n.isAngular&&n.preventChange?!n.preventChange:n.preventChange;break}if(n.notify("beforeValueChange",{newProp:e}),n.list||(n.dataSource instanceof p.h&&(n.initialRemoteRender=!0),n.renderList()),!n.initialRemoteRender){var d=n.allowObjectBinding&&!(0,l.le)(e.value)?(0,l.NA)(n.fields.value?n.fields.value:"",e.value):e.value,m=n.getElementByValue(d);if(!n.checkValidLi(m)){if(n.liCollections&&100===n.liCollections.length&&"autocomplete"===n.getModuleName()&&n.listData.length>100)n.setSelectionData(e.value,i.value,"value");else if(e.value&&n.dataSource instanceof p.h){var f=n.getItems().length,u=(0,l.le)(n.fields.value)?n.fields.text:n.fields.value;n.typedString="";var v=n.allowObjectBinding&&!(0,l.le)(e.value)?(0,l.NA)(u,e.value):e.value;n.dataSource.executeQuery(n.getQuery(n.query).where(new c.$(u,"equal",v))).then(function(t){t.result.length>0?(s.addItem(t.result,f),s.updateValues()):s.setOldValue(i.value)})}else"autocomplete"===n.getModuleName()?n.setInputValue(e,i):n.setOldValue(i.value)}n.updateInputFields(),n.preventChange=n.isAngular&&n.preventChange?!n.preventChange:n.preventChange}break;case"index":if(n.fields.disabled&&(e.index=null==e.index||n.isDisabledItemByIndex(e.index)?null:e.index),null===e.index){n.clearAll();break}if(n.list||(n.dataSource instanceof p.h&&(n.initialRemoteRender=!0),n.renderList()),!n.initialRemoteRender&&n.liCollections){var g=n.liCollections[e.index];n.checkValidLi(g)||(n.liCollections&&100===n.liCollections.length&&"autocomplete"===n.getModuleName()&&n.listData.length>100?n.setSelectionData(e.index,i.index,"index"):n.index=i.index),n.updateInputFields()}break;case"footerTemplate":n.popupObj&&n.setFooterTemplate(n.popupObj.element);break;case"headerTemplate":n.popupObj&&n.setHeaderTemplate(n.popupObj.element);break;case"valueTemplate":(0,l.le)(n.itemData)||null===n.valueTemplate||n.setValueTemplate();break;case"allowFiltering":n.allowFiltering&&(n.actionCompleteData={ulElement:n.ulElement,list:n.listData,isUpdated:!0},n.actionData=n.actionCompleteData,n.updateSelectElementData(n.allowFiltering));break;case"floatLabelType":r.II.removeFloating(n.inputWrapper),r.II.addFloating(n.inputElement,e.floatLabelType,n.placeholder,n.createElement),!(0,l.le)(n.inputWrapper.buttons[0])&&n.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0]&&"Never"!==n.floatLabelType&&n.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-icon");break;case"showClearButton":n.inputWrapper.clearButton||(r.II.setClearButton(e.showClearButton,n.inputElement,n.inputWrapper,null,n.createElement),n.bindClearEvent());break;default:var y=n.getPropObject(o,e,i);t.prototype.onPropertyChanged.call(n,y.newProperty,y.oldProperty)}}(a[o]);if("object"==typeof h)return h.value}},e.prototype.checkValidLi=function(t){return!!this.isValidLI(t)&&(this.setSelection(t,null),!0)},e.prototype.setSelectionData=function(t,e,i){var s,n=this;this.updateListValues=function(){if("text"===i)s=n.getElementByText(t),n.checkValidLi(s)||n.setOldText(e);else if("value"===i){var o=n.fields.value?n.fields.value:"";n.allowObjectBinding&&!(0,l.le)(t)&&(0,l.NA)(o,t),s=n.getElementByValue(t),n.checkValidLi(s)||n.setOldValue(e)}else"index"!==i||(s=n.liCollections[t],n.checkValidLi(s)||(n.index=e))}},e.prototype.updatePopupState=function(){this.beforePopupOpen&&(this.beforePopupOpen=!1,this.showPopup())},e.prototype.setReadOnly=function(){this.readonly?(0,l.cn)([this.inputWrapper.container],["e-readonly"]):(0,l.IV)([this.inputWrapper.container],["e-readonly"])},e.prototype.setInputValue=function(t,e){},e.prototype.setCssClass=function(t,e){(0,l.le)(e)||(e=e.replace(/\s+/g," ").trim()),(0,l.le)(t)||(t=t.replace(/\s+/g," ").trim()),r.II.setCssClass(t,[this.inputWrapper.container],e),this.popupObj&&r.II.setCssClass(t,[this.popupObj.element],e)},e.prototype.getModuleName=function(){return"dropdownlist"},e.prototype.showPopup=function(t){if(this.enabled){if(this.firstItem=this.dataSource&&this.dataSource.length>0?this.dataSource[0]:null,this.isReact&&"combobox"===this.getModuleName()&&this.itemTemplate&&this.isCustomFilter&&this.isAddNewItemTemplate&&(this.renderList(),this.isAddNewItemTemplate=!1),this.isFiltering()&&this.dataSource instanceof p.h&&this.actionData.list!==this.actionCompleteData.list&&this.actionData.list&&this.actionData.ulElement&&(this.actionCompleteData=this.actionData,this.onActionComplete(this.actionCompleteData.ulElement,this.actionCompleteData.list,null,!0)),this.beforePopupOpen){this.refreshPopup();return}this.beforePopupOpen=!0,this.isFiltering()&&!this.isActive&&this.actionCompleteData.list&&this.actionCompleteData.list[0]?(this.isActive=!0,this.onActionComplete(this.actionCompleteData.ulElement,this.actionCompleteData.list,null,!0)):((0,l.le)(this.list)||!(0,l.o8)(this.list)&&(this.list.classList.contains(u.AA.noData)||this.list.querySelectorAll("."+u.AA.li).length<=0))&&(this.isReact&&this.isFiltering()&&null!=this.itemTemplate&&(this.isSecondClick=!1),this.renderList(t)),this.enableVirtualization&&this.listData&&this.listData.length&&((0,l.le)(this.value)||"dropdownlist"!==this.getModuleName()&&"combobox"!==this.getModuleName()||this.removeHover(),this.beforePopupOpen||this.notify("setCurrentViewDataAsync",{module:"VirtualScroll"})),this.beforePopupOpen&&this.invokeRenderPopup(t),this.enableVirtualization&&!this.allowFiltering&&null!=this.selectedValueInfo&&this.selectedValueInfo.startIndex>0&&null!=this.value&&this.notify("dataProcessAsync",{module:"VirtualScroll",isOpen:!0}),this.isSecondClick||this.isDropDownClick||this.executeCloneElements()}},e.prototype.executeCloneElements=function(){var t=this,e=this.element.tagName===this.getNgDirective()&&this.itemTemplate?500:100;this.isReact&&this.isFiltering()&&null!=this.itemTemplate&&setTimeout(function(){t.cloneElements(),t.isSecondClick=!(t.isReact&&t.isFiltering())||!(t.dataSource instanceof p.h)||!!t.list.querySelector("ul")},e)},e.prototype.invokeRenderPopup=function(t){if(l.AR.isDevice&&this.isFilterLayout()){var e=this;window.onpopstate=function(){e.hidePopup()},history.pushState({},"")}!(0,l.le)(this.list)&&(!(0,l.le)(this.list.children[0])||this.list.classList.contains(u.AA.noData))&&this.renderPopup(t)},e.prototype.renderHightSearch=function(){},e.prototype.hidePopup=function(t){if(this.isEscapeKey&&"dropdownlist"===this.getModuleName()){if((0,l.le)(this.inputElement)||r.II.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton),this.isEscapeKey=!1,(0,l.le)(this.index))this.resetSelection();else{var e=this.allowObjectBinding?(0,l.NA)(this.fields.value?this.fields.value:"",this.value):this.value,i=this.findListElement(this.ulElement,"li","data-value",e);this.selectedLI=this.liCollections[this.index]||i,this.selectedLI&&(this.updateSelectedItem(this.selectedLI,null,!0),this.valueTemplate&&null!==this.itemData&&this.setValueTemplate())}}this.isVirtualTrackHeight=!1,this.customFilterQuery=null,this.closePopup(0,t);var s=this.getItemData(),n=!(0,l.le)(this.selectedLI);n&&this.enableVirtualization&&this.selectedLI.classList&&(n=this.selectedLI.classList.contains("e-active")),this.inputElement&&""===this.inputElement.value&&!this.isInteracted&&(this.isSelectCustom||n&&this.inputElement.value!==s.text)&&(this.isSelectCustom=!1,this.clearAll(t))},e.prototype.focusIn=function(t){if(!(!this.enabled||this.targetElement().classList.contains(f.disable))){var e=!1;this.preventFocus&&l.AR.isDevice&&(this.inputWrapper.container.tabIndex=1,this.inputWrapper.container.focus(),this.preventFocus=!1,e=!0),e||this.targetElement().focus(),(0,l.cn)([this.inputWrapper.container],[f.inputFocus]),this.onFocus(t),"Never"!==this.floatLabelType&&r.II.calculateWidth(this.inputElement,this.inputWrapper.container)}},e.prototype.focusOut=function(t){this.enabled&&(this.enableVirtualization||"combobox"!==this.getModuleName()&&"autocomplete"!==this.getModuleName()||(this.isTyped=!0),this.hidePopup(t),this.targetElement()&&this.targetElement().blur(),(0,l.IV)([this.inputWrapper.container],[f.inputFocus]),"Never"!==this.floatLabelType&&r.II.calculateWidth(this.inputElement,this.inputWrapper.container))},e.prototype.disableItem=function(t){if(this.fields.disabled){this.list||this.renderList();var e=-1;if(this.liCollections&&this.liCollections.length>0&&this.listData&&this.fields.disabled){if("string"==typeof t)e=this.getIndexByValue(t);else if("object"==typeof t){if(t instanceof HTMLLIElement){for(var i=0;i<this.liCollections.length;i++)if(this.liCollections[i]===t){e=this.getIndexByValue(t.getAttribute("data-value"));break}}else for(var s=JSON.parse(JSON.stringify(t))[this.fields.value],i=0;i<this.listData.length;i++)if(JSON.parse(JSON.stringify(this.listData[i]))[this.fields.value]===s){e=this.getIndexByValue(s);break}}else e=t;if(e<this.liCollections.length&&e>-1&&!JSON.parse(JSON.stringify(this.listData[e]))[this.fields.disabled]){var l=this.liCollections[e];if(l){this.disableListItem(l);var n=JSON.parse(JSON.stringify(this.listData[e]));n[this.fields.disabled]=!0,this.listData[e]=n,this.dataSource=this.listData,l.classList.contains(f.focus)&&this.removeFocus(),l.classList.contains(f.selected)&&this.clear()}}}}},e.prototype.destroy=function(){if(this.isActive=!1,this.showClearButton&&(this.clearButton=document.getElementsByClassName("e-clear-icon")[0]),(0,h.Z)(this.element.id),this.isReact&&this.clearTemplate(),this.hidePopup(),this.popupObj&&this.popupObj.hide(),this.unWireEvent(),this.list&&this.unWireListEvents(),!this.element||this.element.classList.contains("e-"+this.getModuleName())){if(this.inputElement){for(var e=["readonly","aria-disabled","placeholder","aria-labelledby","aria-expanded","autocomplete","aria-readonly","autocapitalize","spellcheck","aria-autocomplete","aria-live","aria-describedby","aria-label"],i=0;i<e.length;i++)this.inputElement.removeAttribute(e[i]);this.inputElement.setAttribute("tabindex",this.tabIndex),this.inputElement.classList.remove("e-input"),r.II.setValue("",this.inputElement,this.floatLabelType,this.showClearButton)}this.element.style.display="block",this.inputWrapper.container&&this.inputWrapper.container.parentElement&&(this.inputWrapper.container.parentElement.tagName===this.getNgDirective()||this.inputWrapper.container.parentElement.insertBefore(this.element,this.inputWrapper.container),(0,l.og)(this.inputWrapper.container)),delete this.hiddenElement,this.filterInput=null,this.keyboardModule=null,this.ulElement=null,this.list=null,this.clearIconElement=null,this.popupObj=null,this.popupContentElement=null,this.rippleFun=null,this.selectedLI=null,this.liCollections=null,this.item=null,this.footer=null,this.header=null,this.previousSelectedLI=null,this.valueTempElement=null,this.actionData.ulElement=null,this.inputElement&&!(0,l.le)(this.inputElement.onchange)&&(this.inputElement.onchange=null),this.inputElement&&!(0,l.le)(this.inputElement.onselect)&&(this.inputElement.onselect=null),r.II.destroy({element:this.inputElement,floatLabelType:this.floatLabelType,properties:this.properties,buttons:this.inputWrapper.container.querySelectorAll(".e-input-group-icon")[0]},this.clearButton),this.clearButton=null,this.inputElement=null,this.inputWrapper=null,t.prototype.destroy.call(this)}},e.prototype.getItems=function(){return this.list||(this.dataSource instanceof p.h&&(this.initialRemoteRender=!0),this.renderList()),this.ulElement?t.prototype.getItems.call(this):[]},e.prototype.getDataByValue=function(e){return t.prototype.getDataByValue.call(this,e)},e.prototype.clear=function(){this.value=null},m([(0,l.Z9)(null)],e.prototype,"cssClass",void 0),m([(0,l.Z9)("100%")],e.prototype,"width",void 0),m([(0,l.Z9)(!0)],e.prototype,"enabled",void 0),m([(0,l.Z9)(!1)],e.prototype,"enablePersistence",void 0),m([(0,l.Z9)("300px")],e.prototype,"popupHeight",void 0),m([(0,l.Z9)("100%")],e.prototype,"popupWidth",void 0),m([(0,l.Z9)(null)],e.prototype,"placeholder",void 0),m([(0,l.Z9)(null)],e.prototype,"filterBarPlaceholder",void 0),m([(0,l.Z9)({})],e.prototype,"htmlAttributes",void 0),m([(0,l.Z9)(null)],e.prototype,"query",void 0),m([(0,l.Z9)(null)],e.prototype,"valueTemplate",void 0),m([(0,l.Z9)(null)],e.prototype,"headerTemplate",void 0),m([(0,l.Z9)(null)],e.prototype,"footerTemplate",void 0),m([(0,l.Z9)(!1)],e.prototype,"allowFiltering",void 0),m([(0,l.Z9)(!0)],e.prototype,"isDeviceFullScreen",void 0),m([(0,l.Z9)(!1)],e.prototype,"readonly",void 0),m([(0,l.Z9)(!1)],e.prototype,"enableVirtualization",void 0),m([(0,l.Z9)(!1)],e.prototype,"allowResize",void 0),m([(0,l.Z9)(null)],e.prototype,"text",void 0),m([(0,l.Z9)(null)],e.prototype,"value",void 0),m([(0,l.Z9)(!1)],e.prototype,"allowObjectBinding",void 0),m([(0,l.Z9)(null)],e.prototype,"index",void 0),m([(0,l.Z9)("Never")],e.prototype,"floatLabelType",void 0),m([(0,l.Z9)(!1)],e.prototype,"showClearButton",void 0),m([(0,l.ju)()],e.prototype,"filtering",void 0),m([(0,l.ju)()],e.prototype,"change",void 0),m([(0,l.ju)()],e.prototype,"beforeOpen",void 0),m([(0,l.ju)()],e.prototype,"open",void 0),m([(0,l.ju)()],e.prototype,"close",void 0),m([(0,l.ju)()],e.prototype,"blur",void 0),m([(0,l.ju)()],e.prototype,"focus",void 0),m([(0,l.ju)()],e.prototype,"resizeStop",void 0),m([(0,l.ju)()],e.prototype,"resizing",void 0),m([(0,l.ju)()],e.prototype,"resizeStart",void 0),e=m([l.Zl],e)}(u.fM)}}]);