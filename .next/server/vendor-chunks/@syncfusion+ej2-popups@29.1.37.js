"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@syncfusion+ej2-popups@29.1.37";
exports.ids = ["vendor-chunks/@syncfusion+ej2-popups@29.1.37"];
exports.modules = {

/***/ "(ssr)/./node_modules/.pnpm/@syncfusion+ej2-popups@29.1.37/node_modules/@syncfusion/ej2-popups/src/common/collision.js":
/*!***********************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@syncfusion+ej2-popups@29.1.37/node_modules/@syncfusion/ej2-popups/src/common/collision.js ***!
  \***********************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   destroy: () => (/* binding */ destroy),\n/* harmony export */   fit: () => (/* binding */ fit),\n/* harmony export */   flip: () => (/* binding */ flip),\n/* harmony export */   getTransformElement: () => (/* binding */ getTransformElement),\n/* harmony export */   getZoomValue: () => (/* binding */ getZoomValue),\n/* harmony export */   isCollide: () => (/* binding */ isCollide)\n/* harmony export */ });\n/* harmony import */ var _position__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./position */ \"(ssr)/./node_modules/.pnpm/@syncfusion+ej2-popups@29.1.37/node_modules/@syncfusion/ej2-popups/src/common/position.js\");\n/* harmony import */ var _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @syncfusion/ej2-base */ \"(ssr)/./node_modules/.pnpm/@syncfusion+ej2-base@29.1.36/node_modules/@syncfusion/ej2-base/index.js\");\n/**\n * Collision module.\n */\n\n\nvar parentDocument;\nvar targetContainer;\n/**\n *\n * @param {HTMLElement} element - specifies the element\n * @param {HTMLElement} viewPortElement - specifies the element\n * @param {CollisionCoordinates} axis - specifies the collision coordinates\n * @param {OffsetPosition} position - specifies the position\n * @returns {void}\n */\nfunction fit(element, viewPortElement, axis, position) {\n    if (viewPortElement === void 0) { viewPortElement = null; }\n    if (axis === void 0) { axis = { X: false, Y: false }; }\n    if (!axis.Y && !axis.X) {\n        return { left: 0, top: 0 };\n    }\n    var elemData = element.getBoundingClientRect();\n    targetContainer = viewPortElement;\n    parentDocument = element.ownerDocument;\n    if (!position) {\n        position = (0,_position__WEBPACK_IMPORTED_MODULE_1__.calculatePosition)(element, 'left', 'top');\n    }\n    if (axis.X) {\n        var containerWidth = targetContainer ? getTargetContainerWidth() : getViewPortWidth();\n        var containerLeft = ContainerLeft();\n        var containerRight = ContainerRight();\n        var overLeft = containerLeft - position.left;\n        var overRight = position.left + elemData.width - containerRight;\n        if (elemData.width > containerWidth) {\n            if (overLeft > 0 && overRight <= 0) {\n                position.left = containerRight - elemData.width;\n            }\n            else if (overRight > 0 && overLeft <= 0) {\n                position.left = containerLeft;\n            }\n            else {\n                position.left = overLeft > overRight ? (containerRight - elemData.width) : containerLeft;\n            }\n        }\n        else if (overLeft > 0) {\n            position.left += overLeft;\n        }\n        else if (overRight > 0) {\n            position.left -= overRight;\n        }\n    }\n    if (axis.Y) {\n        var containerHeight = targetContainer ? getTargetContainerHeight() : getViewPortHeight();\n        var containerTop = ContainerTop();\n        var containerBottom = ContainerBottom();\n        var overTop = containerTop - position.top;\n        var overBottom = position.top + elemData.height - containerBottom;\n        if (elemData.height > containerHeight) {\n            if (overTop > 0 && overBottom <= 0) {\n                position.top = containerBottom - elemData.height;\n            }\n            else if (overBottom > 0 && overTop <= 0) {\n                position.top = containerTop;\n            }\n            else {\n                position.top = overTop > overBottom ? (containerBottom - elemData.height) : containerTop;\n            }\n        }\n        else if (overTop > 0) {\n            position.top += overTop;\n        }\n        else if (overBottom > 0) {\n            position.top -= overBottom;\n        }\n    }\n    return position;\n}\n/**\n *\n * @param {HTMLElement} element - specifies the html element\n * @param {HTMLElement} viewPortElement - specifies the html element\n * @param {number} x - specifies the number\n * @param {number} y - specifies the number\n * @returns {string[]} - returns the string value\n */\nfunction isCollide(element, viewPortElement, x, y) {\n    if (viewPortElement === void 0) { viewPortElement = null; }\n    var elemOffset = (0,_position__WEBPACK_IMPORTED_MODULE_1__.calculatePosition)(element, 'left', 'top');\n    if (x) {\n        elemOffset.left = x;\n    }\n    if (y) {\n        elemOffset.top = y;\n    }\n    var data = [];\n    targetContainer = viewPortElement;\n    parentDocument = element.ownerDocument;\n    var elementRect = element.getBoundingClientRect();\n    var top = elemOffset.top;\n    var left = elemOffset.left;\n    var right = elemOffset.left + elementRect.width;\n    var bottom = elemOffset.top + elementRect.height;\n    var yAxis = topCollideCheck(top, bottom);\n    var xAxis = leftCollideCheck(left, right);\n    if (yAxis.topSide) {\n        data.push('top');\n    }\n    if (xAxis.rightSide) {\n        data.push('right');\n    }\n    if (xAxis.leftSide) {\n        data.push('left');\n    }\n    if (yAxis.bottomSide) {\n        data.push('bottom');\n    }\n    return data;\n}\n/**\n *\n * @param {HTMLElement} element - specifies the element\n * @param {HTMLElement} target - specifies the element\n * @param {number} offsetX - specifies the number\n * @param {number} offsetY - specifies the number\n * @param {string} positionX - specifies the string value\n * @param {string} positionY - specifies the string value\n * @param {HTMLElement} viewPortElement - specifies the element\n * @param {CollisionCoordinates} axis - specifies the collision axis\n * @param {boolean} fixedParent - specifies the boolean\n * @returns {void}\n */\nfunction flip(element, target, offsetX, offsetY, positionX, positionY, viewPortElement, \n/* eslint-disable */\naxis, fixedParent) {\n    if (viewPortElement === void 0) { viewPortElement = null; }\n    if (axis === void 0) { axis = { X: true, Y: true }; }\n    if (!target || !element || !positionX || !positionY || (!axis.X && !axis.Y)) {\n        return;\n    }\n    var tEdge = { TL: null,\n        TR: null,\n        BL: null,\n        BR: null\n    }, eEdge = {\n        TL: null,\n        TR: null,\n        BL: null,\n        BR: null\n        /* eslint-enable */\n    };\n    var elementRect;\n    if (window.getComputedStyle(element).display === 'none') {\n        var oldVisibility = element.style.visibility;\n        element.style.visibility = 'hidden';\n        element.style.display = 'block';\n        elementRect = element.getBoundingClientRect();\n        element.style.removeProperty('display');\n        element.style.visibility = oldVisibility;\n    }\n    else {\n        elementRect = element.getBoundingClientRect();\n    }\n    var pos = {\n        posX: positionX, posY: positionY, offsetX: offsetX, offsetY: offsetY, position: { left: 0, top: 0 }\n    };\n    targetContainer = viewPortElement;\n    parentDocument = target.ownerDocument;\n    updateElementData(target, tEdge, pos, fixedParent, elementRect);\n    setPosition(eEdge, pos, elementRect);\n    if (axis.X) {\n        leftFlip(target, eEdge, tEdge, pos, elementRect, true);\n    }\n    if (axis.Y && tEdge.TL.top > -1) {\n        topFlip(target, eEdge, tEdge, pos, elementRect, true);\n    }\n    setPopup(element, pos, elementRect);\n}\n/**\n *\n * @param {HTMLElement} element - specifies the element\n * @param {PositionLocation} pos - specifies the location\n * @param {ClientRect} elementRect - specifies the client rect\n * @returns {void}\n */\nfunction setPopup(element, pos, elementRect) {\n    var left = 0;\n    var top = 0;\n    if (element.offsetParent != null\n        && (getComputedStyle(element.offsetParent).position === 'absolute' ||\n            getComputedStyle(element.offsetParent).position === 'relative')) {\n        var data = (0,_position__WEBPACK_IMPORTED_MODULE_1__.calculatePosition)(element.offsetParent, 'left', 'top', false, elementRect);\n        left = data.left;\n        top = data.top;\n    }\n    var scaleX = 1;\n    var scaleY = 1;\n    var tranformElement = getTransformElement(element);\n    if (tranformElement) {\n        var transformStyle = getComputedStyle(tranformElement).transform;\n        if (transformStyle !== 'none') {\n            var matrix = new DOMMatrix(transformStyle);\n            scaleX = matrix.a;\n            scaleY = matrix.d;\n        }\n        var zoomStyle = getComputedStyle(tranformElement).zoom;\n        if (zoomStyle !== 'none') {\n            var bodyZoom = getZoomValue(document.body);\n            scaleX = bodyZoom * scaleX;\n            scaleY = bodyZoom * scaleY;\n        }\n    }\n    element.style.top = ((pos.position.top / scaleY) + pos.offsetY - (top / scaleY)) + 'px';\n    element.style.left = ((pos.position.left / scaleX) + pos.offsetX - (left / scaleX)) + 'px';\n}\nfunction getZoomValue(element) {\n    var zoomValue = getComputedStyle(element).zoom;\n    return parseFloat(zoomValue) || 1; // Default zoom value is 1 (no zoom)\n}\n/**\n *\n * @param {HTMLElement} element - specifies the element\n * @returns {HTMLElement} The modified element.\n */\nfunction getTransformElement(element) {\n    while (element) {\n        var transform = window.getComputedStyle(element).transform;\n        var zoom = getZoomValue(document.body);\n        if ((transform && transform !== 'none') || (zoom && zoom !== 1)) {\n            return element;\n        }\n        if (element === document.body) {\n            return null;\n        }\n        element = (element.offsetParent || element.parentElement);\n    }\n    return null;\n}\n/**\n *\n * @param {HTMLElement} target - specifies the element\n * @param {EdgeOffset} edge - specifies the offset\n * @param {PositionLocation} pos - specifies theloaction\n * @param {boolean} fixedParent - specifies the boolean\n * @param {ClientRect} elementRect - specifies the client rect\n * @returns {void}\n */\nfunction updateElementData(target, edge, pos, fixedParent, elementRect) {\n    pos.position = (0,_position__WEBPACK_IMPORTED_MODULE_1__.calculatePosition)(target, pos.posX, pos.posY, fixedParent, elementRect);\n    edge.TL = (0,_position__WEBPACK_IMPORTED_MODULE_1__.calculatePosition)(target, 'left', 'top', fixedParent, elementRect);\n    edge.TR = (0,_position__WEBPACK_IMPORTED_MODULE_1__.calculatePosition)(target, 'right', 'top', fixedParent, elementRect);\n    edge.BR = (0,_position__WEBPACK_IMPORTED_MODULE_1__.calculatePosition)(target, 'left', 'bottom', fixedParent, elementRect);\n    edge.BL = (0,_position__WEBPACK_IMPORTED_MODULE_1__.calculatePosition)(target, 'right', 'bottom', fixedParent, elementRect);\n}\n/**\n *\n * @param {EdgeOffset} eStatus - specifies the status\n * @param {PositionLocation} pos - specifies the location\n * @param {ClientRect} elementRect - specifies the client\n * @returns {void}\n */\nfunction setPosition(eStatus, pos, elementRect) {\n    eStatus.TL = { top: pos.position.top + pos.offsetY, left: pos.position.left + pos.offsetX };\n    eStatus.TR = { top: eStatus.TL.top, left: eStatus.TL.left + elementRect.width };\n    eStatus.BL = { top: eStatus.TL.top + elementRect.height,\n        left: eStatus.TL.left };\n    eStatus.BR = { top: eStatus.TL.top + elementRect.height,\n        left: eStatus.TL.left + elementRect.width };\n}\n/**\n *\n * @param {number} left - specifies the  number\n * @param {number} right - specifies the number\n * @returns {LeftCorners} - returns the value\n */\nfunction leftCollideCheck(left, right) {\n    //eslint-disable-next-line\n    var leftSide = false, rightSide = false;\n    if (((left - getBodyScrollLeft()) < ContainerLeft())) {\n        leftSide = true;\n    }\n    if (right > ContainerRight()) {\n        rightSide = true;\n    }\n    return { leftSide: leftSide, rightSide: rightSide };\n}\n/**\n *\n * @param {HTMLElement} target - specifies the element\n * @param {EdgeOffset} edge - specifes the element\n * @param {EdgeOffset} tEdge - specifies the edge offset\n * @param {PositionLocation} pos - specifes the location\n * @param {ClientRect} elementRect - specifies the client\n * @param {boolean} deepCheck - specifies the boolean value\n * @returns {void}\n */\nfunction leftFlip(target, edge, tEdge, pos, elementRect, deepCheck) {\n    var collideSide = leftCollideCheck(edge.TL.left, edge.TR.left);\n    if ((tEdge.TL.left - getBodyScrollLeft()) <= ContainerLeft()) {\n        collideSide.leftSide = false;\n    }\n    if (tEdge.TR.left > ContainerRight()) {\n        collideSide.rightSide = false;\n    }\n    if ((collideSide.leftSide && !collideSide.rightSide) || (!collideSide.leftSide && collideSide.rightSide)) {\n        if (pos.posX === 'right') {\n            pos.posX = 'left';\n        }\n        else {\n            pos.posX = 'right';\n        }\n        pos.offsetX = pos.offsetX + elementRect.width;\n        pos.offsetX = -1 * pos.offsetX;\n        pos.position = (0,_position__WEBPACK_IMPORTED_MODULE_1__.calculatePosition)(target, pos.posX, pos.posY, false);\n        setPosition(edge, pos, elementRect);\n        if (deepCheck) {\n            leftFlip(target, edge, tEdge, pos, elementRect, false);\n        }\n    }\n}\n/**\n *\n * @param {HTMLElement} target - specifies the element\n * @param {EdgeOffset} edge - specifies the offset\n * @param {EdgeOffset} tEdge - specifies the offset\n * @param {PositionLocation} pos - specifies the location\n * @param {ClientRect} elementRect - specifies the client rect\n * @param {boolean} deepCheck - specifies the boolean\n * @returns {void}\n */\nfunction topFlip(target, edge, tEdge, pos, elementRect, deepCheck) {\n    var collideSide = topCollideCheck(edge.TL.top, edge.BL.top);\n    if ((tEdge.TL.top - getBodyScrollTop()) <= ContainerTop()) {\n        collideSide.topSide = false;\n    }\n    if (tEdge.BL.top >= ContainerBottom() && target.getBoundingClientRect().bottom < window.innerHeight) {\n        collideSide.bottomSide = false;\n    }\n    if ((collideSide.topSide && !collideSide.bottomSide) || (!collideSide.topSide && collideSide.bottomSide)) {\n        if (pos.posY === 'top') {\n            pos.posY = 'bottom';\n        }\n        else {\n            pos.posY = 'top';\n        }\n        pos.offsetY = pos.offsetY + elementRect.height;\n        pos.offsetY = -1 * pos.offsetY;\n        pos.position = (0,_position__WEBPACK_IMPORTED_MODULE_1__.calculatePosition)(target, pos.posX, pos.posY, false, elementRect);\n        setPosition(edge, pos, elementRect);\n        if (deepCheck) {\n            topFlip(target, edge, tEdge, pos, elementRect, false);\n        }\n    }\n}\n/**\n *\n * @param {number} top - specifies the number\n * @param {number} bottom - specifies the number\n * @returns {TopCorners} - retyrns the value\n */\nfunction topCollideCheck(top, bottom) {\n    //eslint-disable-next-line\n    var topSide = false, bottomSide = false;\n    if ((top - getBodyScrollTop()) < ContainerTop()) {\n        topSide = true;\n    }\n    if (bottom > ContainerBottom()) {\n        bottomSide = true;\n    }\n    return { topSide: topSide, bottomSide: bottomSide };\n}\n/**\n * @returns {void}\n */\nfunction getTargetContainerWidth() {\n    return targetContainer.getBoundingClientRect().width;\n}\n/**\n * @returns {void}\n */\nfunction getTargetContainerHeight() {\n    return targetContainer.getBoundingClientRect().height;\n}\n/**\n * @returns {void}\n */\nfunction getTargetContainerLeft() {\n    return targetContainer.getBoundingClientRect().left;\n}\n/**\n * @returns {void}\n */\nfunction getTargetContainerTop() {\n    return targetContainer.getBoundingClientRect().top;\n}\n//eslint-disable-next-line\nfunction ContainerTop() {\n    if (targetContainer) {\n        return getTargetContainerTop();\n    }\n    return 0;\n}\n//eslint-disable-next-line\nfunction ContainerLeft() {\n    if (targetContainer) {\n        return getTargetContainerLeft();\n    }\n    return 0;\n}\n//eslint-disable-next-line\nfunction ContainerRight() {\n    if (targetContainer) {\n        return (getBodyScrollLeft() + getTargetContainerLeft() + getTargetContainerWidth());\n    }\n    return (getBodyScrollLeft() + getViewPortWidth());\n}\n//eslint-disable-next-line\nfunction ContainerBottom() {\n    if (targetContainer) {\n        return (getBodyScrollTop() + getTargetContainerTop() + getTargetContainerHeight());\n    }\n    return (getBodyScrollTop() + getViewPortHeight());\n}\n/**\n * @returns {number} - returns the scroll top value\n */\nfunction getBodyScrollTop() {\n    // if(targetContainer)\n    //     return targetContainer.scrollTop;\n    return parentDocument.documentElement.scrollTop || parentDocument.body.scrollTop;\n}\n/**\n * @returns {number} - returns the scroll left value\n */\nfunction getBodyScrollLeft() {\n    // if(targetContainer)\n    //     return targetContainer.scrollLeft;\n    return parentDocument.documentElement.scrollLeft || parentDocument.body.scrollLeft;\n}\n/**\n * @returns {number} - returns the viewport height\n */\nfunction getViewPortHeight() {\n    return window.innerHeight;\n}\n/**\n * @returns {number} - returns the viewport width\n */\nfunction getViewPortWidth() {\n    var windowWidth = window.innerWidth;\n    var documentReact = document.documentElement.getBoundingClientRect();\n    var offsetWidth = ((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(document.documentElement)) ? 0 : documentReact.width;\n    return windowWidth - (windowWidth - offsetWidth);\n}\n/**\n * @returns {void}\n */\nfunction destroy() {\n    targetContainer = null;\n    parentDocument = null;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHN5bmNmdXNpb24rZWoyLXBvcHVwc0AyOS4xLjM3L25vZGVfbW9kdWxlcy9Ac3luY2Z1c2lvbi9lajItcG9wdXBzL3NyYy9jb21tb24vY29sbGlzaW9uLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQytDO0FBQ1U7QUFDekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLGFBQWE7QUFDeEIsV0FBVyxhQUFhO0FBQ3hCLFdBQVcsc0JBQXNCO0FBQ2pDLFdBQVcsZ0JBQWdCO0FBQzNCLGFBQWE7QUFDYjtBQUNPO0FBQ1Asc0NBQXNDO0FBQ3RDLDJCQUEyQixTQUFTO0FBQ3BDO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsNERBQWlCO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLGFBQWE7QUFDeEIsV0FBVyxhQUFhO0FBQ3hCLFdBQVcsUUFBUTtBQUNuQixXQUFXLFFBQVE7QUFDbkIsYUFBYSxVQUFVO0FBQ3ZCO0FBQ087QUFDUCxzQ0FBc0M7QUFDdEMscUJBQXFCLDREQUFpQjtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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Q0E7QUFDQSx1QkFBdUIsNERBQWlCO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkIsV0FBVyxRQUFRO0FBQ25CLGFBQWEsWUFBWTtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsUUFBUTtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsUUFBUTtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsUUFBUTtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxRQUFRO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLHVFQUFpQjtBQUN4QztBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDTztBQUNQO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2FpX3RyYXZlbC8uL25vZGVfbW9kdWxlcy8ucG5wbS9Ac3luY2Z1c2lvbitlajItcG9wdXBzQDI5LjEuMzcvbm9kZV9tb2R1bGVzL0BzeW5jZnVzaW9uL2VqMi1wb3B1cHMvc3JjL2NvbW1vbi9jb2xsaXNpb24uanM/YjcyMiJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvbGxpc2lvbiBtb2R1bGUuXG4gKi9cbmltcG9ydCB7IGNhbGN1bGF0ZVBvc2l0aW9uIH0gZnJvbSAnLi9wb3NpdGlvbic7XG5pbXBvcnQgeyBpc051bGxPclVuZGVmaW5lZCB9IGZyb20gJ0BzeW5jZnVzaW9uL2VqMi1iYXNlJztcbnZhciBwYXJlbnREb2N1bWVudDtcbnZhciB0YXJnZXRDb250YWluZXI7XG4vKipcbiAqXG4gKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbGVtZW50IC0gc3BlY2lmaWVzIHRoZSBlbGVtZW50XG4gKiBAcGFyYW0ge0hUTUxFbGVtZW50fSB2aWV3UG9ydEVsZW1lbnQgLSBzcGVjaWZpZXMgdGhlIGVsZW1lbnRcbiAqIEBwYXJhbSB7Q29sbGlzaW9uQ29vcmRpbmF0ZXN9IGF4aXMgLSBzcGVjaWZpZXMgdGhlIGNvbGxpc2lvbiBjb29yZGluYXRlc1xuICogQHBhcmFtIHtPZmZzZXRQb3NpdGlvbn0gcG9zaXRpb24gLSBzcGVjaWZpZXMgdGhlIHBvc2l0aW9uXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZpdChlbGVtZW50LCB2aWV3UG9ydEVsZW1lbnQsIGF4aXMsIHBvc2l0aW9uKSB7XG4gICAgaWYgKHZpZXdQb3J0RWxlbWVudCA9PT0gdm9pZCAwKSB7IHZpZXdQb3J0RWxlbWVudCA9IG51bGw7IH1cbiAgICBpZiAoYXhpcyA9PT0gdm9pZCAwKSB7IGF4aXMgPSB7IFg6IGZhbHNlLCBZOiBmYWxzZSB9OyB9XG4gICAgaWYgKCFheGlzLlkgJiYgIWF4aXMuWCkge1xuICAgICAgICByZXR1cm4geyBsZWZ0OiAwLCB0b3A6IDAgfTtcbiAgICB9XG4gICAgdmFyIGVsZW1EYXRhID0gZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICB0YXJnZXRDb250YWluZXIgPSB2aWV3UG9ydEVsZW1lbnQ7XG4gICAgcGFyZW50RG9jdW1lbnQgPSBlbGVtZW50Lm93bmVyRG9jdW1lbnQ7XG4gICAgaWYgKCFwb3NpdGlvbikge1xuICAgICAgICBwb3NpdGlvbiA9IGNhbGN1bGF0ZVBvc2l0aW9uKGVsZW1lbnQsICdsZWZ0JywgJ3RvcCcpO1xuICAgIH1cbiAgICBpZiAoYXhpcy5YKSB7XG4gICAgICAgIHZhciBjb250YWluZXJXaWR0aCA9IHRhcmdldENvbnRhaW5lciA/IGdldFRhcmdldENvbnRhaW5lcldpZHRoKCkgOiBnZXRWaWV3UG9ydFdpZHRoKCk7XG4gICAgICAgIHZhciBjb250YWluZXJMZWZ0ID0gQ29udGFpbmVyTGVmdCgpO1xuICAgICAgICB2YXIgY29udGFpbmVyUmlnaHQgPSBDb250YWluZXJSaWdodCgpO1xuICAgICAgICB2YXIgb3ZlckxlZnQgPSBjb250YWluZXJMZWZ0IC0gcG9zaXRpb24ubGVmdDtcbiAgICAgICAgdmFyIG92ZXJSaWdodCA9IHBvc2l0aW9uLmxlZnQgKyBlbGVtRGF0YS53aWR0aCAtIGNvbnRhaW5lclJpZ2h0O1xuICAgICAgICBpZiAoZWxlbURhdGEud2lkdGggPiBjb250YWluZXJXaWR0aCkge1xuICAgICAgICAgICAgaWYgKG92ZXJMZWZ0ID4gMCAmJiBvdmVyUmlnaHQgPD0gMCkge1xuICAgICAgICAgICAgICAgIHBvc2l0aW9uLmxlZnQgPSBjb250YWluZXJSaWdodCAtIGVsZW1EYXRhLndpZHRoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAob3ZlclJpZ2h0ID4gMCAmJiBvdmVyTGVmdCA8PSAwKSB7XG4gICAgICAgICAgICAgICAgcG9zaXRpb24ubGVmdCA9IGNvbnRhaW5lckxlZnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBwb3NpdGlvbi5sZWZ0ID0gb3ZlckxlZnQgPiBvdmVyUmlnaHQgPyAoY29udGFpbmVyUmlnaHQgLSBlbGVtRGF0YS53aWR0aCkgOiBjb250YWluZXJMZWZ0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG92ZXJMZWZ0ID4gMCkge1xuICAgICAgICAgICAgcG9zaXRpb24ubGVmdCArPSBvdmVyTGVmdDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChvdmVyUmlnaHQgPiAwKSB7XG4gICAgICAgICAgICBwb3NpdGlvbi5sZWZ0IC09IG92ZXJSaWdodDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoYXhpcy5ZKSB7XG4gICAgICAgIHZhciBjb250YWluZXJIZWlnaHQgPSB0YXJnZXRDb250YWluZXIgPyBnZXRUYXJnZXRDb250YWluZXJIZWlnaHQoKSA6IGdldFZpZXdQb3J0SGVpZ2h0KCk7XG4gICAgICAgIHZhciBjb250YWluZXJUb3AgPSBDb250YWluZXJUb3AoKTtcbiAgICAgICAgdmFyIGNvbnRhaW5lckJvdHRvbSA9IENvbnRhaW5lckJvdHRvbSgpO1xuICAgICAgICB2YXIgb3ZlclRvcCA9IGNvbnRhaW5lclRvcCAtIHBvc2l0aW9uLnRvcDtcbiAgICAgICAgdmFyIG92ZXJCb3R0b20gPSBwb3NpdGlvbi50b3AgKyBlbGVtRGF0YS5oZWlnaHQgLSBjb250YWluZXJCb3R0b207XG4gICAgICAgIGlmIChlbGVtRGF0YS5oZWlnaHQgPiBjb250YWluZXJIZWlnaHQpIHtcbiAgICAgICAgICAgIGlmIChvdmVyVG9wID4gMCAmJiBvdmVyQm90dG9tIDw9IDApIHtcbiAgICAgICAgICAgICAgICBwb3NpdGlvbi50b3AgPSBjb250YWluZXJCb3R0b20gLSBlbGVtRGF0YS5oZWlnaHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChvdmVyQm90dG9tID4gMCAmJiBvdmVyVG9wIDw9IDApIHtcbiAgICAgICAgICAgICAgICBwb3NpdGlvbi50b3AgPSBjb250YWluZXJUb3A7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBwb3NpdGlvbi50b3AgPSBvdmVyVG9wID4gb3ZlckJvdHRvbSA/IChjb250YWluZXJCb3R0b20gLSBlbGVtRGF0YS5oZWlnaHQpIDogY29udGFpbmVyVG9wO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG92ZXJUb3AgPiAwKSB7XG4gICAgICAgICAgICBwb3NpdGlvbi50b3AgKz0gb3ZlclRvcDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChvdmVyQm90dG9tID4gMCkge1xuICAgICAgICAgICAgcG9zaXRpb24udG9wIC09IG92ZXJCb3R0b207XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHBvc2l0aW9uO1xufVxuLyoqXG4gKlxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWxlbWVudCAtIHNwZWNpZmllcyB0aGUgaHRtbCBlbGVtZW50XG4gKiBAcGFyYW0ge0hUTUxFbGVtZW50fSB2aWV3UG9ydEVsZW1lbnQgLSBzcGVjaWZpZXMgdGhlIGh0bWwgZWxlbWVudFxuICogQHBhcmFtIHtudW1iZXJ9IHggLSBzcGVjaWZpZXMgdGhlIG51bWJlclxuICogQHBhcmFtIHtudW1iZXJ9IHkgLSBzcGVjaWZpZXMgdGhlIG51bWJlclxuICogQHJldHVybnMge3N0cmluZ1tdfSAtIHJldHVybnMgdGhlIHN0cmluZyB2YWx1ZVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNDb2xsaWRlKGVsZW1lbnQsIHZpZXdQb3J0RWxlbWVudCwgeCwgeSkge1xuICAgIGlmICh2aWV3UG9ydEVsZW1lbnQgPT09IHZvaWQgMCkgeyB2aWV3UG9ydEVsZW1lbnQgPSBudWxsOyB9XG4gICAgdmFyIGVsZW1PZmZzZXQgPSBjYWxjdWxhdGVQb3NpdGlvbihlbGVtZW50LCAnbGVmdCcsICd0b3AnKTtcbiAgICBpZiAoeCkge1xuICAgICAgICBlbGVtT2Zmc2V0LmxlZnQgPSB4O1xuICAgIH1cbiAgICBpZiAoeSkge1xuICAgICAgICBlbGVtT2Zmc2V0LnRvcCA9IHk7XG4gICAgfVxuICAgIHZhciBkYXRhID0gW107XG4gICAgdGFyZ2V0Q29udGFpbmVyID0gdmlld1BvcnRFbGVtZW50O1xuICAgIHBhcmVudERvY3VtZW50ID0gZWxlbWVudC5vd25lckRvY3VtZW50O1xuICAgIHZhciBlbGVtZW50UmVjdCA9IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgdmFyIHRvcCA9IGVsZW1PZmZzZXQudG9wO1xuICAgIHZhciBsZWZ0ID0gZWxlbU9mZnNldC5sZWZ0O1xuICAgIHZhciByaWdodCA9IGVsZW1PZmZzZXQubGVmdCArIGVsZW1lbnRSZWN0LndpZHRoO1xuICAgIHZhciBib3R0b20gPSBlbGVtT2Zmc2V0LnRvcCArIGVsZW1lbnRSZWN0LmhlaWdodDtcbiAgICB2YXIgeUF4aXMgPSB0b3BDb2xsaWRlQ2hlY2sodG9wLCBib3R0b20pO1xuICAgIHZhciB4QXhpcyA9IGxlZnRDb2xsaWRlQ2hlY2sobGVmdCwgcmlnaHQpO1xuICAgIGlmICh5QXhpcy50b3BTaWRlKSB7XG4gICAgICAgIGRhdGEucHVzaCgndG9wJyk7XG4gICAgfVxuICAgIGlmICh4QXhpcy5yaWdodFNpZGUpIHtcbiAgICAgICAgZGF0YS5wdXNoKCdyaWdodCcpO1xuICAgIH1cbiAgICBpZiAoeEF4aXMubGVmdFNpZGUpIHtcbiAgICAgICAgZGF0YS5wdXNoKCdsZWZ0Jyk7XG4gICAgfVxuICAgIGlmICh5QXhpcy5ib3R0b21TaWRlKSB7XG4gICAgICAgIGRhdGEucHVzaCgnYm90dG9tJyk7XG4gICAgfVxuICAgIHJldHVybiBkYXRhO1xufVxuLyoqXG4gKlxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWxlbWVudCAtIHNwZWNpZmllcyB0aGUgZWxlbWVudFxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gdGFyZ2V0IC0gc3BlY2lmaWVzIHRoZSBlbGVtZW50XG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0WCAtIHNwZWNpZmllcyB0aGUgbnVtYmVyXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0WSAtIHNwZWNpZmllcyB0aGUgbnVtYmVyXG4gKiBAcGFyYW0ge3N0cmluZ30gcG9zaXRpb25YIC0gc3BlY2lmaWVzIHRoZSBzdHJpbmcgdmFsdWVcbiAqIEBwYXJhbSB7c3RyaW5nfSBwb3NpdGlvblkgLSBzcGVjaWZpZXMgdGhlIHN0cmluZyB2YWx1ZVxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gdmlld1BvcnRFbGVtZW50IC0gc3BlY2lmaWVzIHRoZSBlbGVtZW50XG4gKiBAcGFyYW0ge0NvbGxpc2lvbkNvb3JkaW5hdGVzfSBheGlzIC0gc3BlY2lmaWVzIHRoZSBjb2xsaXNpb24gYXhpc1xuICogQHBhcmFtIHtib29sZWFufSBmaXhlZFBhcmVudCAtIHNwZWNpZmllcyB0aGUgYm9vbGVhblxuICogQHJldHVybnMge3ZvaWR9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmbGlwKGVsZW1lbnQsIHRhcmdldCwgb2Zmc2V0WCwgb2Zmc2V0WSwgcG9zaXRpb25YLCBwb3NpdGlvblksIHZpZXdQb3J0RWxlbWVudCwgXG4vKiBlc2xpbnQtZGlzYWJsZSAqL1xuYXhpcywgZml4ZWRQYXJlbnQpIHtcbiAgICBpZiAodmlld1BvcnRFbGVtZW50ID09PSB2b2lkIDApIHsgdmlld1BvcnRFbGVtZW50ID0gbnVsbDsgfVxuICAgIGlmIChheGlzID09PSB2b2lkIDApIHsgYXhpcyA9IHsgWDogdHJ1ZSwgWTogdHJ1ZSB9OyB9XG4gICAgaWYgKCF0YXJnZXQgfHwgIWVsZW1lbnQgfHwgIXBvc2l0aW9uWCB8fCAhcG9zaXRpb25ZIHx8ICghYXhpcy5YICYmICFheGlzLlkpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHRFZGdlID0geyBUTDogbnVsbCxcbiAgICAgICAgVFI6IG51bGwsXG4gICAgICAgIEJMOiBudWxsLFxuICAgICAgICBCUjogbnVsbFxuICAgIH0sIGVFZGdlID0ge1xuICAgICAgICBUTDogbnVsbCxcbiAgICAgICAgVFI6IG51bGwsXG4gICAgICAgIEJMOiBudWxsLFxuICAgICAgICBCUjogbnVsbFxuICAgICAgICAvKiBlc2xpbnQtZW5hYmxlICovXG4gICAgfTtcbiAgICB2YXIgZWxlbWVudFJlY3Q7XG4gICAgaWYgKHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQpLmRpc3BsYXkgPT09ICdub25lJykge1xuICAgICAgICB2YXIgb2xkVmlzaWJpbGl0eSA9IGVsZW1lbnQuc3R5bGUudmlzaWJpbGl0eTtcbiAgICAgICAgZWxlbWVudC5zdHlsZS52aXNpYmlsaXR5ID0gJ2hpZGRlbic7XG4gICAgICAgIGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgIGVsZW1lbnRSZWN0ID0gZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgZWxlbWVudC5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnZGlzcGxheScpO1xuICAgICAgICBlbGVtZW50LnN0eWxlLnZpc2liaWxpdHkgPSBvbGRWaXNpYmlsaXR5O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgZWxlbWVudFJlY3QgPSBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIH1cbiAgICB2YXIgcG9zID0ge1xuICAgICAgICBwb3NYOiBwb3NpdGlvblgsIHBvc1k6IHBvc2l0aW9uWSwgb2Zmc2V0WDogb2Zmc2V0WCwgb2Zmc2V0WTogb2Zmc2V0WSwgcG9zaXRpb246IHsgbGVmdDogMCwgdG9wOiAwIH1cbiAgICB9O1xuICAgIHRhcmdldENvbnRhaW5lciA9IHZpZXdQb3J0RWxlbWVudDtcbiAgICBwYXJlbnREb2N1bWVudCA9IHRhcmdldC5vd25lckRvY3VtZW50O1xuICAgIHVwZGF0ZUVsZW1lbnREYXRhKHRhcmdldCwgdEVkZ2UsIHBvcywgZml4ZWRQYXJlbnQsIGVsZW1lbnRSZWN0KTtcbiAgICBzZXRQb3NpdGlvbihlRWRnZSwgcG9zLCBlbGVtZW50UmVjdCk7XG4gICAgaWYgKGF4aXMuWCkge1xuICAgICAgICBsZWZ0RmxpcCh0YXJnZXQsIGVFZGdlLCB0RWRnZSwgcG9zLCBlbGVtZW50UmVjdCwgdHJ1ZSk7XG4gICAgfVxuICAgIGlmIChheGlzLlkgJiYgdEVkZ2UuVEwudG9wID4gLTEpIHtcbiAgICAgICAgdG9wRmxpcCh0YXJnZXQsIGVFZGdlLCB0RWRnZSwgcG9zLCBlbGVtZW50UmVjdCwgdHJ1ZSk7XG4gICAgfVxuICAgIHNldFBvcHVwKGVsZW1lbnQsIHBvcywgZWxlbWVudFJlY3QpO1xufVxuLyoqXG4gKlxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWxlbWVudCAtIHNwZWNpZmllcyB0aGUgZWxlbWVudFxuICogQHBhcmFtIHtQb3NpdGlvbkxvY2F0aW9ufSBwb3MgLSBzcGVjaWZpZXMgdGhlIGxvY2F0aW9uXG4gKiBAcGFyYW0ge0NsaWVudFJlY3R9IGVsZW1lbnRSZWN0IC0gc3BlY2lmaWVzIHRoZSBjbGllbnQgcmVjdFxuICogQHJldHVybnMge3ZvaWR9XG4gKi9cbmZ1bmN0aW9uIHNldFBvcHVwKGVsZW1lbnQsIHBvcywgZWxlbWVudFJlY3QpIHtcbiAgICB2YXIgbGVmdCA9IDA7XG4gICAgdmFyIHRvcCA9IDA7XG4gICAgaWYgKGVsZW1lbnQub2Zmc2V0UGFyZW50ICE9IG51bGxcbiAgICAgICAgJiYgKGdldENvbXB1dGVkU3R5bGUoZWxlbWVudC5vZmZzZXRQYXJlbnQpLnBvc2l0aW9uID09PSAnYWJzb2x1dGUnIHx8XG4gICAgICAgICAgICBnZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQub2Zmc2V0UGFyZW50KS5wb3NpdGlvbiA9PT0gJ3JlbGF0aXZlJykpIHtcbiAgICAgICAgdmFyIGRhdGEgPSBjYWxjdWxhdGVQb3NpdGlvbihlbGVtZW50Lm9mZnNldFBhcmVudCwgJ2xlZnQnLCAndG9wJywgZmFsc2UsIGVsZW1lbnRSZWN0KTtcbiAgICAgICAgbGVmdCA9IGRhdGEubGVmdDtcbiAgICAgICAgdG9wID0gZGF0YS50b3A7XG4gICAgfVxuICAgIHZhciBzY2FsZVggPSAxO1xuICAgIHZhciBzY2FsZVkgPSAxO1xuICAgIHZhciB0cmFuZm9ybUVsZW1lbnQgPSBnZXRUcmFuc2Zvcm1FbGVtZW50KGVsZW1lbnQpO1xuICAgIGlmICh0cmFuZm9ybUVsZW1lbnQpIHtcbiAgICAgICAgdmFyIHRyYW5zZm9ybVN0eWxlID0gZ2V0Q29tcHV0ZWRTdHlsZSh0cmFuZm9ybUVsZW1lbnQpLnRyYW5zZm9ybTtcbiAgICAgICAgaWYgKHRyYW5zZm9ybVN0eWxlICE9PSAnbm9uZScpIHtcbiAgICAgICAgICAgIHZhciBtYXRyaXggPSBuZXcgRE9NTWF0cml4KHRyYW5zZm9ybVN0eWxlKTtcbiAgICAgICAgICAgIHNjYWxlWCA9IG1hdHJpeC5hO1xuICAgICAgICAgICAgc2NhbGVZID0gbWF0cml4LmQ7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHpvb21TdHlsZSA9IGdldENvbXB1dGVkU3R5bGUodHJhbmZvcm1FbGVtZW50KS56b29tO1xuICAgICAgICBpZiAoem9vbVN0eWxlICE9PSAnbm9uZScpIHtcbiAgICAgICAgICAgIHZhciBib2R5Wm9vbSA9IGdldFpvb21WYWx1ZShkb2N1bWVudC5ib2R5KTtcbiAgICAgICAgICAgIHNjYWxlWCA9IGJvZHlab29tICogc2NhbGVYO1xuICAgICAgICAgICAgc2NhbGVZID0gYm9keVpvb20gKiBzY2FsZVk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxlbWVudC5zdHlsZS50b3AgPSAoKHBvcy5wb3NpdGlvbi50b3AgLyBzY2FsZVkpICsgcG9zLm9mZnNldFkgLSAodG9wIC8gc2NhbGVZKSkgKyAncHgnO1xuICAgIGVsZW1lbnQuc3R5bGUubGVmdCA9ICgocG9zLnBvc2l0aW9uLmxlZnQgLyBzY2FsZVgpICsgcG9zLm9mZnNldFggLSAobGVmdCAvIHNjYWxlWCkpICsgJ3B4Jztcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRab29tVmFsdWUoZWxlbWVudCkge1xuICAgIHZhciB6b29tVmFsdWUgPSBnZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQpLnpvb207XG4gICAgcmV0dXJuIHBhcnNlRmxvYXQoem9vbVZhbHVlKSB8fCAxOyAvLyBEZWZhdWx0IHpvb20gdmFsdWUgaXMgMSAobm8gem9vbSlcbn1cbi8qKlxuICpcbiAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGVsZW1lbnQgLSBzcGVjaWZpZXMgdGhlIGVsZW1lbnRcbiAqIEByZXR1cm5zIHtIVE1MRWxlbWVudH0gVGhlIG1vZGlmaWVkIGVsZW1lbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRUcmFuc2Zvcm1FbGVtZW50KGVsZW1lbnQpIHtcbiAgICB3aGlsZSAoZWxlbWVudCkge1xuICAgICAgICB2YXIgdHJhbnNmb3JtID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoZWxlbWVudCkudHJhbnNmb3JtO1xuICAgICAgICB2YXIgem9vbSA9IGdldFpvb21WYWx1ZShkb2N1bWVudC5ib2R5KTtcbiAgICAgICAgaWYgKCh0cmFuc2Zvcm0gJiYgdHJhbnNmb3JtICE9PSAnbm9uZScpIHx8ICh6b29tICYmIHpvb20gIT09IDEpKSB7XG4gICAgICAgICAgICByZXR1cm4gZWxlbWVudDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZWxlbWVudCA9PT0gZG9jdW1lbnQuYm9keSkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgZWxlbWVudCA9IChlbGVtZW50Lm9mZnNldFBhcmVudCB8fCBlbGVtZW50LnBhcmVudEVsZW1lbnQpO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn1cbi8qKlxuICpcbiAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IHRhcmdldCAtIHNwZWNpZmllcyB0aGUgZWxlbWVudFxuICogQHBhcmFtIHtFZGdlT2Zmc2V0fSBlZGdlIC0gc3BlY2lmaWVzIHRoZSBvZmZzZXRcbiAqIEBwYXJhbSB7UG9zaXRpb25Mb2NhdGlvbn0gcG9zIC0gc3BlY2lmaWVzIHRoZWxvYWN0aW9uXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGZpeGVkUGFyZW50IC0gc3BlY2lmaWVzIHRoZSBib29sZWFuXG4gKiBAcGFyYW0ge0NsaWVudFJlY3R9IGVsZW1lbnRSZWN0IC0gc3BlY2lmaWVzIHRoZSBjbGllbnQgcmVjdFxuICogQHJldHVybnMge3ZvaWR9XG4gKi9cbmZ1bmN0aW9uIHVwZGF0ZUVsZW1lbnREYXRhKHRhcmdldCwgZWRnZSwgcG9zLCBmaXhlZFBhcmVudCwgZWxlbWVudFJlY3QpIHtcbiAgICBwb3MucG9zaXRpb24gPSBjYWxjdWxhdGVQb3NpdGlvbih0YXJnZXQsIHBvcy5wb3NYLCBwb3MucG9zWSwgZml4ZWRQYXJlbnQsIGVsZW1lbnRSZWN0KTtcbiAgICBlZGdlLlRMID0gY2FsY3VsYXRlUG9zaXRpb24odGFyZ2V0LCAnbGVmdCcsICd0b3AnLCBmaXhlZFBhcmVudCwgZWxlbWVudFJlY3QpO1xuICAgIGVkZ2UuVFIgPSBjYWxjdWxhdGVQb3NpdGlvbih0YXJnZXQsICdyaWdodCcsICd0b3AnLCBmaXhlZFBhcmVudCwgZWxlbWVudFJlY3QpO1xuICAgIGVkZ2UuQlIgPSBjYWxjdWxhdGVQb3NpdGlvbih0YXJnZXQsICdsZWZ0JywgJ2JvdHRvbScsIGZpeGVkUGFyZW50LCBlbGVtZW50UmVjdCk7XG4gICAgZWRnZS5CTCA9IGNhbGN1bGF0ZVBvc2l0aW9uKHRhcmdldCwgJ3JpZ2h0JywgJ2JvdHRvbScsIGZpeGVkUGFyZW50LCBlbGVtZW50UmVjdCk7XG59XG4vKipcbiAqXG4gKiBAcGFyYW0ge0VkZ2VPZmZzZXR9IGVTdGF0dXMgLSBzcGVjaWZpZXMgdGhlIHN0YXR1c1xuICogQHBhcmFtIHtQb3NpdGlvbkxvY2F0aW9ufSBwb3MgLSBzcGVjaWZpZXMgdGhlIGxvY2F0aW9uXG4gKiBAcGFyYW0ge0NsaWVudFJlY3R9IGVsZW1lbnRSZWN0IC0gc3BlY2lmaWVzIHRoZSBjbGllbnRcbiAqIEByZXR1cm5zIHt2b2lkfVxuICovXG5mdW5jdGlvbiBzZXRQb3NpdGlvbihlU3RhdHVzLCBwb3MsIGVsZW1lbnRSZWN0KSB7XG4gICAgZVN0YXR1cy5UTCA9IHsgdG9wOiBwb3MucG9zaXRpb24udG9wICsgcG9zLm9mZnNldFksIGxlZnQ6IHBvcy5wb3NpdGlvbi5sZWZ0ICsgcG9zLm9mZnNldFggfTtcbiAgICBlU3RhdHVzLlRSID0geyB0b3A6IGVTdGF0dXMuVEwudG9wLCBsZWZ0OiBlU3RhdHVzLlRMLmxlZnQgKyBlbGVtZW50UmVjdC53aWR0aCB9O1xuICAgIGVTdGF0dXMuQkwgPSB7IHRvcDogZVN0YXR1cy5UTC50b3AgKyBlbGVtZW50UmVjdC5oZWlnaHQsXG4gICAgICAgIGxlZnQ6IGVTdGF0dXMuVEwubGVmdCB9O1xuICAgIGVTdGF0dXMuQlIgPSB7IHRvcDogZVN0YXR1cy5UTC50b3AgKyBlbGVtZW50UmVjdC5oZWlnaHQsXG4gICAgICAgIGxlZnQ6IGVTdGF0dXMuVEwubGVmdCArIGVsZW1lbnRSZWN0LndpZHRoIH07XG59XG4vKipcbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gbGVmdCAtIHNwZWNpZmllcyB0aGUgIG51bWJlclxuICogQHBhcmFtIHtudW1iZXJ9IHJpZ2h0IC0gc3BlY2lmaWVzIHRoZSBudW1iZXJcbiAqIEByZXR1cm5zIHtMZWZ0Q29ybmVyc30gLSByZXR1cm5zIHRoZSB2YWx1ZVxuICovXG5mdW5jdGlvbiBsZWZ0Q29sbGlkZUNoZWNrKGxlZnQsIHJpZ2h0KSB7XG4gICAgLy9lc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcbiAgICB2YXIgbGVmdFNpZGUgPSBmYWxzZSwgcmlnaHRTaWRlID0gZmFsc2U7XG4gICAgaWYgKCgobGVmdCAtIGdldEJvZHlTY3JvbGxMZWZ0KCkpIDwgQ29udGFpbmVyTGVmdCgpKSkge1xuICAgICAgICBsZWZ0U2lkZSA9IHRydWU7XG4gICAgfVxuICAgIGlmIChyaWdodCA+IENvbnRhaW5lclJpZ2h0KCkpIHtcbiAgICAgICAgcmlnaHRTaWRlID0gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIHsgbGVmdFNpZGU6IGxlZnRTaWRlLCByaWdodFNpZGU6IHJpZ2h0U2lkZSB9O1xufVxuLyoqXG4gKlxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gdGFyZ2V0IC0gc3BlY2lmaWVzIHRoZSBlbGVtZW50XG4gKiBAcGFyYW0ge0VkZ2VPZmZzZXR9IGVkZ2UgLSBzcGVjaWZlcyB0aGUgZWxlbWVudFxuICogQHBhcmFtIHtFZGdlT2Zmc2V0fSB0RWRnZSAtIHNwZWNpZmllcyB0aGUgZWRnZSBvZmZzZXRcbiAqIEBwYXJhbSB7UG9zaXRpb25Mb2NhdGlvbn0gcG9zIC0gc3BlY2lmZXMgdGhlIGxvY2F0aW9uXG4gKiBAcGFyYW0ge0NsaWVudFJlY3R9IGVsZW1lbnRSZWN0IC0gc3BlY2lmaWVzIHRoZSBjbGllbnRcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gZGVlcENoZWNrIC0gc3BlY2lmaWVzIHRoZSBib29sZWFuIHZhbHVlXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuZnVuY3Rpb24gbGVmdEZsaXAodGFyZ2V0LCBlZGdlLCB0RWRnZSwgcG9zLCBlbGVtZW50UmVjdCwgZGVlcENoZWNrKSB7XG4gICAgdmFyIGNvbGxpZGVTaWRlID0gbGVmdENvbGxpZGVDaGVjayhlZGdlLlRMLmxlZnQsIGVkZ2UuVFIubGVmdCk7XG4gICAgaWYgKCh0RWRnZS5UTC5sZWZ0IC0gZ2V0Qm9keVNjcm9sbExlZnQoKSkgPD0gQ29udGFpbmVyTGVmdCgpKSB7XG4gICAgICAgIGNvbGxpZGVTaWRlLmxlZnRTaWRlID0gZmFsc2U7XG4gICAgfVxuICAgIGlmICh0RWRnZS5UUi5sZWZ0ID4gQ29udGFpbmVyUmlnaHQoKSkge1xuICAgICAgICBjb2xsaWRlU2lkZS5yaWdodFNpZGUgPSBmYWxzZTtcbiAgICB9XG4gICAgaWYgKChjb2xsaWRlU2lkZS5sZWZ0U2lkZSAmJiAhY29sbGlkZVNpZGUucmlnaHRTaWRlKSB8fCAoIWNvbGxpZGVTaWRlLmxlZnRTaWRlICYmIGNvbGxpZGVTaWRlLnJpZ2h0U2lkZSkpIHtcbiAgICAgICAgaWYgKHBvcy5wb3NYID09PSAncmlnaHQnKSB7XG4gICAgICAgICAgICBwb3MucG9zWCA9ICdsZWZ0JztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHBvcy5wb3NYID0gJ3JpZ2h0JztcbiAgICAgICAgfVxuICAgICAgICBwb3Mub2Zmc2V0WCA9IHBvcy5vZmZzZXRYICsgZWxlbWVudFJlY3Qud2lkdGg7XG4gICAgICAgIHBvcy5vZmZzZXRYID0gLTEgKiBwb3Mub2Zmc2V0WDtcbiAgICAgICAgcG9zLnBvc2l0aW9uID0gY2FsY3VsYXRlUG9zaXRpb24odGFyZ2V0LCBwb3MucG9zWCwgcG9zLnBvc1ksIGZhbHNlKTtcbiAgICAgICAgc2V0UG9zaXRpb24oZWRnZSwgcG9zLCBlbGVtZW50UmVjdCk7XG4gICAgICAgIGlmIChkZWVwQ2hlY2spIHtcbiAgICAgICAgICAgIGxlZnRGbGlwKHRhcmdldCwgZWRnZSwgdEVkZ2UsIHBvcywgZWxlbWVudFJlY3QsIGZhbHNlKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8qKlxuICpcbiAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IHRhcmdldCAtIHNwZWNpZmllcyB0aGUgZWxlbWVudFxuICogQHBhcmFtIHtFZGdlT2Zmc2V0fSBlZGdlIC0gc3BlY2lmaWVzIHRoZSBvZmZzZXRcbiAqIEBwYXJhbSB7RWRnZU9mZnNldH0gdEVkZ2UgLSBzcGVjaWZpZXMgdGhlIG9mZnNldFxuICogQHBhcmFtIHtQb3NpdGlvbkxvY2F0aW9ufSBwb3MgLSBzcGVjaWZpZXMgdGhlIGxvY2F0aW9uXG4gKiBAcGFyYW0ge0NsaWVudFJlY3R9IGVsZW1lbnRSZWN0IC0gc3BlY2lmaWVzIHRoZSBjbGllbnQgcmVjdFxuICogQHBhcmFtIHtib29sZWFufSBkZWVwQ2hlY2sgLSBzcGVjaWZpZXMgdGhlIGJvb2xlYW5cbiAqIEByZXR1cm5zIHt2b2lkfVxuICovXG5mdW5jdGlvbiB0b3BGbGlwKHRhcmdldCwgZWRnZSwgdEVkZ2UsIHBvcywgZWxlbWVudFJlY3QsIGRlZXBDaGVjaykge1xuICAgIHZhciBjb2xsaWRlU2lkZSA9IHRvcENvbGxpZGVDaGVjayhlZGdlLlRMLnRvcCwgZWRnZS5CTC50b3ApO1xuICAgIGlmICgodEVkZ2UuVEwudG9wIC0gZ2V0Qm9keVNjcm9sbFRvcCgpKSA8PSBDb250YWluZXJUb3AoKSkge1xuICAgICAgICBjb2xsaWRlU2lkZS50b3BTaWRlID0gZmFsc2U7XG4gICAgfVxuICAgIGlmICh0RWRnZS5CTC50b3AgPj0gQ29udGFpbmVyQm90dG9tKCkgJiYgdGFyZ2V0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmJvdHRvbSA8IHdpbmRvdy5pbm5lckhlaWdodCkge1xuICAgICAgICBjb2xsaWRlU2lkZS5ib3R0b21TaWRlID0gZmFsc2U7XG4gICAgfVxuICAgIGlmICgoY29sbGlkZVNpZGUudG9wU2lkZSAmJiAhY29sbGlkZVNpZGUuYm90dG9tU2lkZSkgfHwgKCFjb2xsaWRlU2lkZS50b3BTaWRlICYmIGNvbGxpZGVTaWRlLmJvdHRvbVNpZGUpKSB7XG4gICAgICAgIGlmIChwb3MucG9zWSA9PT0gJ3RvcCcpIHtcbiAgICAgICAgICAgIHBvcy5wb3NZID0gJ2JvdHRvbSc7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBwb3MucG9zWSA9ICd0b3AnO1xuICAgICAgICB9XG4gICAgICAgIHBvcy5vZmZzZXRZID0gcG9zLm9mZnNldFkgKyBlbGVtZW50UmVjdC5oZWlnaHQ7XG4gICAgICAgIHBvcy5vZmZzZXRZID0gLTEgKiBwb3Mub2Zmc2V0WTtcbiAgICAgICAgcG9zLnBvc2l0aW9uID0gY2FsY3VsYXRlUG9zaXRpb24odGFyZ2V0LCBwb3MucG9zWCwgcG9zLnBvc1ksIGZhbHNlLCBlbGVtZW50UmVjdCk7XG4gICAgICAgIHNldFBvc2l0aW9uKGVkZ2UsIHBvcywgZWxlbWVudFJlY3QpO1xuICAgICAgICBpZiAoZGVlcENoZWNrKSB7XG4gICAgICAgICAgICB0b3BGbGlwKHRhcmdldCwgZWRnZSwgdEVkZ2UsIHBvcywgZWxlbWVudFJlY3QsIGZhbHNlKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8qKlxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSB0b3AgLSBzcGVjaWZpZXMgdGhlIG51bWJlclxuICogQHBhcmFtIHtudW1iZXJ9IGJvdHRvbSAtIHNwZWNpZmllcyB0aGUgbnVtYmVyXG4gKiBAcmV0dXJucyB7VG9wQ29ybmVyc30gLSByZXR5cm5zIHRoZSB2YWx1ZVxuICovXG5mdW5jdGlvbiB0b3BDb2xsaWRlQ2hlY2sodG9wLCBib3R0b20pIHtcbiAgICAvL2VzbGludC1kaXNhYmxlLW5leHQtbGluZVxuICAgIHZhciB0b3BTaWRlID0gZmFsc2UsIGJvdHRvbVNpZGUgPSBmYWxzZTtcbiAgICBpZiAoKHRvcCAtIGdldEJvZHlTY3JvbGxUb3AoKSkgPCBDb250YWluZXJUb3AoKSkge1xuICAgICAgICB0b3BTaWRlID0gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKGJvdHRvbSA+IENvbnRhaW5lckJvdHRvbSgpKSB7XG4gICAgICAgIGJvdHRvbVNpZGUgPSB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4geyB0b3BTaWRlOiB0b3BTaWRlLCBib3R0b21TaWRlOiBib3R0b21TaWRlIH07XG59XG4vKipcbiAqIEByZXR1cm5zIHt2b2lkfVxuICovXG5mdW5jdGlvbiBnZXRUYXJnZXRDb250YWluZXJXaWR0aCgpIHtcbiAgICByZXR1cm4gdGFyZ2V0Q29udGFpbmVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoO1xufVxuLyoqXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuZnVuY3Rpb24gZ2V0VGFyZ2V0Q29udGFpbmVySGVpZ2h0KCkge1xuICAgIHJldHVybiB0YXJnZXRDb250YWluZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0O1xufVxuLyoqXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuZnVuY3Rpb24gZ2V0VGFyZ2V0Q29udGFpbmVyTGVmdCgpIHtcbiAgICByZXR1cm4gdGFyZ2V0Q29udGFpbmVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQ7XG59XG4vKipcbiAqIEByZXR1cm5zIHt2b2lkfVxuICovXG5mdW5jdGlvbiBnZXRUYXJnZXRDb250YWluZXJUb3AoKSB7XG4gICAgcmV0dXJuIHRhcmdldENvbnRhaW5lci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3A7XG59XG4vL2VzbGludC1kaXNhYmxlLW5leHQtbGluZVxuZnVuY3Rpb24gQ29udGFpbmVyVG9wKCkge1xuICAgIGlmICh0YXJnZXRDb250YWluZXIpIHtcbiAgICAgICAgcmV0dXJuIGdldFRhcmdldENvbnRhaW5lclRvcCgpO1xuICAgIH1cbiAgICByZXR1cm4gMDtcbn1cbi8vZXNsaW50LWRpc2FibGUtbmV4dC1saW5lXG5mdW5jdGlvbiBDb250YWluZXJMZWZ0KCkge1xuICAgIGlmICh0YXJnZXRDb250YWluZXIpIHtcbiAgICAgICAgcmV0dXJuIGdldFRhcmdldENvbnRhaW5lckxlZnQoKTtcbiAgICB9XG4gICAgcmV0dXJuIDA7XG59XG4vL2VzbGludC1kaXNhYmxlLW5leHQtbGluZVxuZnVuY3Rpb24gQ29udGFpbmVyUmlnaHQoKSB7XG4gICAgaWYgKHRhcmdldENvbnRhaW5lcikge1xuICAgICAgICByZXR1cm4gKGdldEJvZHlTY3JvbGxMZWZ0KCkgKyBnZXRUYXJnZXRDb250YWluZXJMZWZ0KCkgKyBnZXRUYXJnZXRDb250YWluZXJXaWR0aCgpKTtcbiAgICB9XG4gICAgcmV0dXJuIChnZXRCb2R5U2Nyb2xsTGVmdCgpICsgZ2V0Vmlld1BvcnRXaWR0aCgpKTtcbn1cbi8vZXNsaW50LWRpc2FibGUtbmV4dC1saW5lXG5mdW5jdGlvbiBDb250YWluZXJCb3R0b20oKSB7XG4gICAgaWYgKHRhcmdldENvbnRhaW5lcikge1xuICAgICAgICByZXR1cm4gKGdldEJvZHlTY3JvbGxUb3AoKSArIGdldFRhcmdldENvbnRhaW5lclRvcCgpICsgZ2V0VGFyZ2V0Q29udGFpbmVySGVpZ2h0KCkpO1xuICAgIH1cbiAgICByZXR1cm4gKGdldEJvZHlTY3JvbGxUb3AoKSArIGdldFZpZXdQb3J0SGVpZ2h0KCkpO1xufVxuLyoqXG4gKiBAcmV0dXJucyB7bnVtYmVyfSAtIHJldHVybnMgdGhlIHNjcm9sbCB0b3AgdmFsdWVcbiAqL1xuZnVuY3Rpb24gZ2V0Qm9keVNjcm9sbFRvcCgpIHtcbiAgICAvLyBpZih0YXJnZXRDb250YWluZXIpXG4gICAgLy8gICAgIHJldHVybiB0YXJnZXRDb250YWluZXIuc2Nyb2xsVG9wO1xuICAgIHJldHVybiBwYXJlbnREb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wIHx8IHBhcmVudERvY3VtZW50LmJvZHkuc2Nyb2xsVG9wO1xufVxuLyoqXG4gKiBAcmV0dXJucyB7bnVtYmVyfSAtIHJldHVybnMgdGhlIHNjcm9sbCBsZWZ0IHZhbHVlXG4gKi9cbmZ1bmN0aW9uIGdldEJvZHlTY3JvbGxMZWZ0KCkge1xuICAgIC8vIGlmKHRhcmdldENvbnRhaW5lcilcbiAgICAvLyAgICAgcmV0dXJuIHRhcmdldENvbnRhaW5lci5zY3JvbGxMZWZ0O1xuICAgIHJldHVybiBwYXJlbnREb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsTGVmdCB8fCBwYXJlbnREb2N1bWVudC5ib2R5LnNjcm9sbExlZnQ7XG59XG4vKipcbiAqIEByZXR1cm5zIHtudW1iZXJ9IC0gcmV0dXJucyB0aGUgdmlld3BvcnQgaGVpZ2h0XG4gKi9cbmZ1bmN0aW9uIGdldFZpZXdQb3J0SGVpZ2h0KCkge1xuICAgIHJldHVybiB3aW5kb3cuaW5uZXJIZWlnaHQ7XG59XG4vKipcbiAqIEByZXR1cm5zIHtudW1iZXJ9IC0gcmV0dXJucyB0aGUgdmlld3BvcnQgd2lkdGhcbiAqL1xuZnVuY3Rpb24gZ2V0Vmlld1BvcnRXaWR0aCgpIHtcbiAgICB2YXIgd2luZG93V2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcbiAgICB2YXIgZG9jdW1lbnRSZWFjdCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICB2YXIgb2Zmc2V0V2lkdGggPSAoaXNOdWxsT3JVbmRlZmluZWQoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KSkgPyAwIDogZG9jdW1lbnRSZWFjdC53aWR0aDtcbiAgICByZXR1cm4gd2luZG93V2lkdGggLSAod2luZG93V2lkdGggLSBvZmZzZXRXaWR0aCk7XG59XG4vKipcbiAqIEByZXR1cm5zIHt2b2lkfVxuICovXG5leHBvcnQgZnVuY3Rpb24gZGVzdHJveSgpIHtcbiAgICB0YXJnZXRDb250YWluZXIgPSBudWxsO1xuICAgIHBhcmVudERvY3VtZW50ID0gbnVsbDtcbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@syncfusion+ej2-popups@29.1.37/node_modules/@syncfusion/ej2-popups/src/common/collision.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@syncfusion+ej2-popups@29.1.37/node_modules/@syncfusion/ej2-popups/src/common/position.js":
/*!**********************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@syncfusion+ej2-popups@29.1.37/node_modules/@syncfusion/ej2-popups/src/common/position.js ***!
  \**********************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   calculatePosition: () => (/* binding */ calculatePosition),\n/* harmony export */   calculateRelativeBasedPosition: () => (/* binding */ calculateRelativeBasedPosition)\n/* harmony export */ });\n/* harmony import */ var _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @syncfusion/ej2-base */ \"(ssr)/./node_modules/.pnpm/@syncfusion+ej2-base@29.1.36/node_modules/@syncfusion/ej2-base/index.js\");\n/**\n * Position library\n */\n\nvar elementRect;\nvar popupRect;\nvar element;\nvar parentDocument;\nvar fixedParent = false;\n/**\n *\n * @param {HTMLElement} anchor - specifies the element\n * @param {HTMLElement} element - specifies the element\n * @returns {OffsetPosition} - returns the value\n */\nfunction calculateRelativeBasedPosition(anchor, element) {\n    var fixedElement = false;\n    var anchorPos = { left: 0, top: 0 };\n    var tempAnchor = anchor;\n    if (!anchor || !element) {\n        return anchorPos;\n    }\n    if ((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(element.offsetParent) && element.style.position === 'fixed') {\n        fixedElement = true;\n    }\n    while ((element.offsetParent || fixedElement) && anchor && element.offsetParent !== anchor) {\n        anchorPos.left += anchor.offsetLeft;\n        anchorPos.top += anchor.offsetTop;\n        anchor = anchor.offsetParent;\n    }\n    anchor = tempAnchor;\n    while ((element.offsetParent || fixedElement) && anchor && element.offsetParent !== anchor) {\n        anchorPos.left -= anchor.scrollLeft;\n        anchorPos.top -= anchor.scrollTop;\n        anchor = anchor.parentElement;\n    }\n    return anchorPos;\n}\n/**\n *\n * @param {Element} currentElement - specifies the element\n * @param {string} positionX - specifies the position\n * @param {string} positionY - specifies the position\n * @param {boolean} parentElement - specifies the boolean\n * @param {ClientRect} targetValues - specifies the client\n * @returns {OffsetPosition} - returns the position\n */\nfunction calculatePosition(currentElement, positionX, positionY, parentElement, targetValues) {\n    popupRect = undefined;\n    popupRect = targetValues;\n    fixedParent = parentElement ? true : false;\n    if (!currentElement) {\n        return { left: 0, top: 0 };\n    }\n    if (!positionX) {\n        positionX = 'left';\n    }\n    if (!positionY) {\n        positionY = 'top';\n    }\n    parentDocument = currentElement.ownerDocument;\n    element = currentElement;\n    var pos = { left: 0, top: 0 };\n    return updatePosition(positionX.toLowerCase(), positionY.toLowerCase(), pos);\n}\n/**\n *\n * @param {number} value - specifies the number\n * @param {OffsetPosition} pos - specifies the position\n * @returns {void}\n */\nfunction setPosx(value, pos) {\n    pos.left = value;\n}\n/**\n *\n * @param {number} value - specifies the number\n * @param {OffsetPosition} pos - specifies the position\n * @returns {void}\n */\nfunction setPosy(value, pos) {\n    pos.top = value;\n}\n/**\n *\n * @param {string} posX - specifies the position\n * @param {string} posY - specifies the position\n * @param {OffsetPosition} pos - specifies the position\n * @returns {OffsetPosition} - returns the postion\n */\nfunction updatePosition(posX, posY, pos) {\n    elementRect = element.getBoundingClientRect();\n    switch (posY + posX) {\n        case 'topcenter':\n            setPosx(getElementHCenter(), pos);\n            setPosy(getElementTop(), pos);\n            break;\n        case 'topright':\n            setPosx(getElementRight(), pos);\n            setPosy(getElementTop(), pos);\n            break;\n        case 'centercenter':\n            setPosx(getElementHCenter(), pos);\n            setPosy(getElementVCenter(), pos);\n            break;\n        case 'centerright':\n            setPosx(getElementRight(), pos);\n            setPosy(getElementVCenter(), pos);\n            break;\n        case 'centerleft':\n            setPosx(getElementLeft(), pos);\n            setPosy(getElementVCenter(), pos);\n            break;\n        case 'bottomcenter':\n            setPosx(getElementHCenter(), pos);\n            setPosy(getElementBottom(), pos);\n            break;\n        case 'bottomright':\n            setPosx(getElementRight(), pos);\n            setPosy(getElementBottom(), pos);\n            break;\n        case 'bottomleft':\n            setPosx(getElementLeft(), pos);\n            setPosy(getElementBottom(), pos);\n            break;\n        default:\n        case 'topleft':\n            setPosx(getElementLeft(), pos);\n            setPosy(getElementTop(), pos);\n            break;\n    }\n    element = null;\n    return pos;\n}\n/**\n * @returns {number} - specifies the number value\n */\nfunction getBodyScrollTop() {\n    return parentDocument.documentElement.scrollTop || parentDocument.body.scrollTop;\n}\n/**\n * @returns {number} - specifies the number value\n */\nfunction getBodyScrollLeft() {\n    return parentDocument.documentElement.scrollLeft || parentDocument.body.scrollLeft;\n}\n/**\n * @returns {number} - specifies the number value\n */\nfunction getElementBottom() {\n    return fixedParent ? elementRect.bottom : elementRect.bottom + getBodyScrollTop();\n}\n/**\n * @returns {number} - specifies the number value\n */\nfunction getElementVCenter() {\n    return getElementTop() + (elementRect.height / 2);\n}\n/**\n * @returns {number} - specifies the number value\n */\nfunction getElementTop() {\n    return fixedParent ? elementRect.top : elementRect.top + getBodyScrollTop();\n}\n/**\n * @returns {number} - specifies the number value\n */\nfunction getElementLeft() {\n    return elementRect.left + getBodyScrollLeft();\n}\n/**\n * @returns {number} - specifies the number value\n */\nfunction getElementRight() {\n    var popupWidth = (element && (((element.classList.contains('e-date-wrapper') || element.classList.contains('e-datetime-wrapper')) && element.classList.contains('e-rtl')) || (element.classList.contains('e-ddl') && element.classList.contains('e-rtl')) || element.classList.contains('e-date-range-wrapper'))) ? (popupRect ? popupRect.width : 0) :\n        (popupRect && (elementRect.width >= popupRect.width) ? popupRect.width : 0);\n    if (element && element.classList.contains('e-rtl') && element.classList.contains('e-multiselect')) {\n        popupWidth = popupRect.width;\n    }\n    return elementRect.right + getBodyScrollLeft() - popupWidth;\n}\n/**\n * @returns {number} - specifies the number value\n */\nfunction getElementHCenter() {\n    return getElementLeft() + (elementRect.width / 2);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHN5bmNmdXNpb24rZWoyLXBvcHVwc0AyOS4xLjM3L25vZGVfbW9kdWxlcy9Ac3luY2Z1c2lvbi9lajItcG9wdXBzL3NyYy9jb21tb24vcG9zaXRpb24uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ3lEO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxhQUFhO0FBQ3hCLFdBQVcsYUFBYTtBQUN4QixhQUFhLGdCQUFnQjtBQUM3QjtBQUNPO0FBQ1A7QUFDQSxzQkFBc0I7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLHVFQUFpQjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxTQUFTO0FBQ3BCLFdBQVcsUUFBUTtBQUNuQixXQUFXLFFBQVE7QUFDbkIsV0FBVyxTQUFTO0FBQ3BCLFdBQVcsWUFBWTtBQUN2QixhQUFhLGdCQUFnQjtBQUM3QjtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CLFdBQVcsZ0JBQWdCO0FBQzNCLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkIsV0FBVyxnQkFBZ0I7QUFDM0IsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsUUFBUTtBQUNuQixXQUFXLFFBQVE7QUFDbkIsV0FBVyxnQkFBZ0I7QUFDM0IsYUFBYSxnQkFBZ0I7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLFFBQVE7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsUUFBUTtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxRQUFRO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLFFBQVE7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsUUFBUTtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxRQUFRO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLFFBQVE7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLFFBQVE7QUFDckI7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haV90cmF2ZWwvLi9ub2RlX21vZHVsZXMvLnBucG0vQHN5bmNmdXNpb24rZWoyLXBvcHVwc0AyOS4xLjM3L25vZGVfbW9kdWxlcy9Ac3luY2Z1c2lvbi9lajItcG9wdXBzL3NyYy9jb21tb24vcG9zaXRpb24uanM/MmZiZCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFBvc2l0aW9uIGxpYnJhcnlcbiAqL1xuaW1wb3J0IHsgaXNOdWxsT3JVbmRlZmluZWQgfSBmcm9tICdAc3luY2Z1c2lvbi9lajItYmFzZSc7XG52YXIgZWxlbWVudFJlY3Q7XG52YXIgcG9wdXBSZWN0O1xudmFyIGVsZW1lbnQ7XG52YXIgcGFyZW50RG9jdW1lbnQ7XG52YXIgZml4ZWRQYXJlbnQgPSBmYWxzZTtcbi8qKlxuICpcbiAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGFuY2hvciAtIHNwZWNpZmllcyB0aGUgZWxlbWVudFxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWxlbWVudCAtIHNwZWNpZmllcyB0aGUgZWxlbWVudFxuICogQHJldHVybnMge09mZnNldFBvc2l0aW9ufSAtIHJldHVybnMgdGhlIHZhbHVlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjYWxjdWxhdGVSZWxhdGl2ZUJhc2VkUG9zaXRpb24oYW5jaG9yLCBlbGVtZW50KSB7XG4gICAgdmFyIGZpeGVkRWxlbWVudCA9IGZhbHNlO1xuICAgIHZhciBhbmNob3JQb3MgPSB7IGxlZnQ6IDAsIHRvcDogMCB9O1xuICAgIHZhciB0ZW1wQW5jaG9yID0gYW5jaG9yO1xuICAgIGlmICghYW5jaG9yIHx8ICFlbGVtZW50KSB7XG4gICAgICAgIHJldHVybiBhbmNob3JQb3M7XG4gICAgfVxuICAgIGlmIChpc051bGxPclVuZGVmaW5lZChlbGVtZW50Lm9mZnNldFBhcmVudCkgJiYgZWxlbWVudC5zdHlsZS5wb3NpdGlvbiA9PT0gJ2ZpeGVkJykge1xuICAgICAgICBmaXhlZEVsZW1lbnQgPSB0cnVlO1xuICAgIH1cbiAgICB3aGlsZSAoKGVsZW1lbnQub2Zmc2V0UGFyZW50IHx8IGZpeGVkRWxlbWVudCkgJiYgYW5jaG9yICYmIGVsZW1lbnQub2Zmc2V0UGFyZW50ICE9PSBhbmNob3IpIHtcbiAgICAgICAgYW5jaG9yUG9zLmxlZnQgKz0gYW5jaG9yLm9mZnNldExlZnQ7XG4gICAgICAgIGFuY2hvclBvcy50b3AgKz0gYW5jaG9yLm9mZnNldFRvcDtcbiAgICAgICAgYW5jaG9yID0gYW5jaG9yLm9mZnNldFBhcmVudDtcbiAgICB9XG4gICAgYW5jaG9yID0gdGVtcEFuY2hvcjtcbiAgICB3aGlsZSAoKGVsZW1lbnQub2Zmc2V0UGFyZW50IHx8IGZpeGVkRWxlbWVudCkgJiYgYW5jaG9yICYmIGVsZW1lbnQub2Zmc2V0UGFyZW50ICE9PSBhbmNob3IpIHtcbiAgICAgICAgYW5jaG9yUG9zLmxlZnQgLT0gYW5jaG9yLnNjcm9sbExlZnQ7XG4gICAgICAgIGFuY2hvclBvcy50b3AgLT0gYW5jaG9yLnNjcm9sbFRvcDtcbiAgICAgICAgYW5jaG9yID0gYW5jaG9yLnBhcmVudEVsZW1lbnQ7XG4gICAgfVxuICAgIHJldHVybiBhbmNob3JQb3M7XG59XG4vKipcbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGN1cnJlbnRFbGVtZW50IC0gc3BlY2lmaWVzIHRoZSBlbGVtZW50XG4gKiBAcGFyYW0ge3N0cmluZ30gcG9zaXRpb25YIC0gc3BlY2lmaWVzIHRoZSBwb3NpdGlvblxuICogQHBhcmFtIHtzdHJpbmd9IHBvc2l0aW9uWSAtIHNwZWNpZmllcyB0aGUgcG9zaXRpb25cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gcGFyZW50RWxlbWVudCAtIHNwZWNpZmllcyB0aGUgYm9vbGVhblxuICogQHBhcmFtIHtDbGllbnRSZWN0fSB0YXJnZXRWYWx1ZXMgLSBzcGVjaWZpZXMgdGhlIGNsaWVudFxuICogQHJldHVybnMge09mZnNldFBvc2l0aW9ufSAtIHJldHVybnMgdGhlIHBvc2l0aW9uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjYWxjdWxhdGVQb3NpdGlvbihjdXJyZW50RWxlbWVudCwgcG9zaXRpb25YLCBwb3NpdGlvblksIHBhcmVudEVsZW1lbnQsIHRhcmdldFZhbHVlcykge1xuICAgIHBvcHVwUmVjdCA9IHVuZGVmaW5lZDtcbiAgICBwb3B1cFJlY3QgPSB0YXJnZXRWYWx1ZXM7XG4gICAgZml4ZWRQYXJlbnQgPSBwYXJlbnRFbGVtZW50ID8gdHJ1ZSA6IGZhbHNlO1xuICAgIGlmICghY3VycmVudEVsZW1lbnQpIHtcbiAgICAgICAgcmV0dXJuIHsgbGVmdDogMCwgdG9wOiAwIH07XG4gICAgfVxuICAgIGlmICghcG9zaXRpb25YKSB7XG4gICAgICAgIHBvc2l0aW9uWCA9ICdsZWZ0JztcbiAgICB9XG4gICAgaWYgKCFwb3NpdGlvblkpIHtcbiAgICAgICAgcG9zaXRpb25ZID0gJ3RvcCc7XG4gICAgfVxuICAgIHBhcmVudERvY3VtZW50ID0gY3VycmVudEVsZW1lbnQub3duZXJEb2N1bWVudDtcbiAgICBlbGVtZW50ID0gY3VycmVudEVsZW1lbnQ7XG4gICAgdmFyIHBvcyA9IHsgbGVmdDogMCwgdG9wOiAwIH07XG4gICAgcmV0dXJuIHVwZGF0ZVBvc2l0aW9uKHBvc2l0aW9uWC50b0xvd2VyQ2FzZSgpLCBwb3NpdGlvblkudG9Mb3dlckNhc2UoKSwgcG9zKTtcbn1cbi8qKlxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZSAtIHNwZWNpZmllcyB0aGUgbnVtYmVyXG4gKiBAcGFyYW0ge09mZnNldFBvc2l0aW9ufSBwb3MgLSBzcGVjaWZpZXMgdGhlIHBvc2l0aW9uXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuZnVuY3Rpb24gc2V0UG9zeCh2YWx1ZSwgcG9zKSB7XG4gICAgcG9zLmxlZnQgPSB2YWx1ZTtcbn1cbi8qKlxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZSAtIHNwZWNpZmllcyB0aGUgbnVtYmVyXG4gKiBAcGFyYW0ge09mZnNldFBvc2l0aW9ufSBwb3MgLSBzcGVjaWZpZXMgdGhlIHBvc2l0aW9uXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuZnVuY3Rpb24gc2V0UG9zeSh2YWx1ZSwgcG9zKSB7XG4gICAgcG9zLnRvcCA9IHZhbHVlO1xufVxuLyoqXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHBvc1ggLSBzcGVjaWZpZXMgdGhlIHBvc2l0aW9uXG4gKiBAcGFyYW0ge3N0cmluZ30gcG9zWSAtIHNwZWNpZmllcyB0aGUgcG9zaXRpb25cbiAqIEBwYXJhbSB7T2Zmc2V0UG9zaXRpb259IHBvcyAtIHNwZWNpZmllcyB0aGUgcG9zaXRpb25cbiAqIEByZXR1cm5zIHtPZmZzZXRQb3NpdGlvbn0gLSByZXR1cm5zIHRoZSBwb3N0aW9uXG4gKi9cbmZ1bmN0aW9uIHVwZGF0ZVBvc2l0aW9uKHBvc1gsIHBvc1ksIHBvcykge1xuICAgIGVsZW1lbnRSZWN0ID0gZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICBzd2l0Y2ggKHBvc1kgKyBwb3NYKSB7XG4gICAgICAgIGNhc2UgJ3RvcGNlbnRlcic6XG4gICAgICAgICAgICBzZXRQb3N4KGdldEVsZW1lbnRIQ2VudGVyKCksIHBvcyk7XG4gICAgICAgICAgICBzZXRQb3N5KGdldEVsZW1lbnRUb3AoKSwgcG9zKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICd0b3ByaWdodCc6XG4gICAgICAgICAgICBzZXRQb3N4KGdldEVsZW1lbnRSaWdodCgpLCBwb3MpO1xuICAgICAgICAgICAgc2V0UG9zeShnZXRFbGVtZW50VG9wKCksIHBvcyk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnY2VudGVyY2VudGVyJzpcbiAgICAgICAgICAgIHNldFBvc3goZ2V0RWxlbWVudEhDZW50ZXIoKSwgcG9zKTtcbiAgICAgICAgICAgIHNldFBvc3koZ2V0RWxlbWVudFZDZW50ZXIoKSwgcG9zKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdjZW50ZXJyaWdodCc6XG4gICAgICAgICAgICBzZXRQb3N4KGdldEVsZW1lbnRSaWdodCgpLCBwb3MpO1xuICAgICAgICAgICAgc2V0UG9zeShnZXRFbGVtZW50VkNlbnRlcigpLCBwb3MpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ2NlbnRlcmxlZnQnOlxuICAgICAgICAgICAgc2V0UG9zeChnZXRFbGVtZW50TGVmdCgpLCBwb3MpO1xuICAgICAgICAgICAgc2V0UG9zeShnZXRFbGVtZW50VkNlbnRlcigpLCBwb3MpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ2JvdHRvbWNlbnRlcic6XG4gICAgICAgICAgICBzZXRQb3N4KGdldEVsZW1lbnRIQ2VudGVyKCksIHBvcyk7XG4gICAgICAgICAgICBzZXRQb3N5KGdldEVsZW1lbnRCb3R0b20oKSwgcG9zKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdib3R0b21yaWdodCc6XG4gICAgICAgICAgICBzZXRQb3N4KGdldEVsZW1lbnRSaWdodCgpLCBwb3MpO1xuICAgICAgICAgICAgc2V0UG9zeShnZXRFbGVtZW50Qm90dG9tKCksIHBvcyk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnYm90dG9tbGVmdCc6XG4gICAgICAgICAgICBzZXRQb3N4KGdldEVsZW1lbnRMZWZ0KCksIHBvcyk7XG4gICAgICAgICAgICBzZXRQb3N5KGdldEVsZW1lbnRCb3R0b20oKSwgcG9zKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICBjYXNlICd0b3BsZWZ0JzpcbiAgICAgICAgICAgIHNldFBvc3goZ2V0RWxlbWVudExlZnQoKSwgcG9zKTtcbiAgICAgICAgICAgIHNldFBvc3koZ2V0RWxlbWVudFRvcCgpLCBwb3MpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgfVxuICAgIGVsZW1lbnQgPSBudWxsO1xuICAgIHJldHVybiBwb3M7XG59XG4vKipcbiAqIEByZXR1cm5zIHtudW1iZXJ9IC0gc3BlY2lmaWVzIHRoZSBudW1iZXIgdmFsdWVcbiAqL1xuZnVuY3Rpb24gZ2V0Qm9keVNjcm9sbFRvcCgpIHtcbiAgICByZXR1cm4gcGFyZW50RG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCB8fCBwYXJlbnREb2N1bWVudC5ib2R5LnNjcm9sbFRvcDtcbn1cbi8qKlxuICogQHJldHVybnMge251bWJlcn0gLSBzcGVjaWZpZXMgdGhlIG51bWJlciB2YWx1ZVxuICovXG5mdW5jdGlvbiBnZXRCb2R5U2Nyb2xsTGVmdCgpIHtcbiAgICByZXR1cm4gcGFyZW50RG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbExlZnQgfHwgcGFyZW50RG9jdW1lbnQuYm9keS5zY3JvbGxMZWZ0O1xufVxuLyoqXG4gKiBAcmV0dXJucyB7bnVtYmVyfSAtIHNwZWNpZmllcyB0aGUgbnVtYmVyIHZhbHVlXG4gKi9cbmZ1bmN0aW9uIGdldEVsZW1lbnRCb3R0b20oKSB7XG4gICAgcmV0dXJuIGZpeGVkUGFyZW50ID8gZWxlbWVudFJlY3QuYm90dG9tIDogZWxlbWVudFJlY3QuYm90dG9tICsgZ2V0Qm9keVNjcm9sbFRvcCgpO1xufVxuLyoqXG4gKiBAcmV0dXJucyB7bnVtYmVyfSAtIHNwZWNpZmllcyB0aGUgbnVtYmVyIHZhbHVlXG4gKi9cbmZ1bmN0aW9uIGdldEVsZW1lbnRWQ2VudGVyKCkge1xuICAgIHJldHVybiBnZXRFbGVtZW50VG9wKCkgKyAoZWxlbWVudFJlY3QuaGVpZ2h0IC8gMik7XG59XG4vKipcbiAqIEByZXR1cm5zIHtudW1iZXJ9IC0gc3BlY2lmaWVzIHRoZSBudW1iZXIgdmFsdWVcbiAqL1xuZnVuY3Rpb24gZ2V0RWxlbWVudFRvcCgpIHtcbiAgICByZXR1cm4gZml4ZWRQYXJlbnQgPyBlbGVtZW50UmVjdC50b3AgOiBlbGVtZW50UmVjdC50b3AgKyBnZXRCb2R5U2Nyb2xsVG9wKCk7XG59XG4vKipcbiAqIEByZXR1cm5zIHtudW1iZXJ9IC0gc3BlY2lmaWVzIHRoZSBudW1iZXIgdmFsdWVcbiAqL1xuZnVuY3Rpb24gZ2V0RWxlbWVudExlZnQoKSB7XG4gICAgcmV0dXJuIGVsZW1lbnRSZWN0LmxlZnQgKyBnZXRCb2R5U2Nyb2xsTGVmdCgpO1xufVxuLyoqXG4gKiBAcmV0dXJucyB7bnVtYmVyfSAtIHNwZWNpZmllcyB0aGUgbnVtYmVyIHZhbHVlXG4gKi9cbmZ1bmN0aW9uIGdldEVsZW1lbnRSaWdodCgpIHtcbiAgICB2YXIgcG9wdXBXaWR0aCA9IChlbGVtZW50ICYmICgoKGVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWRhdGUtd3JhcHBlcicpIHx8IGVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWRhdGV0aW1lLXdyYXBwZXInKSkgJiYgZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtcnRsJykpIHx8IChlbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnZS1kZGwnKSAmJiBlbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnZS1ydGwnKSkgfHwgZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtZGF0ZS1yYW5nZS13cmFwcGVyJykpKSA/IChwb3B1cFJlY3QgPyBwb3B1cFJlY3Qud2lkdGggOiAwKSA6XG4gICAgICAgIChwb3B1cFJlY3QgJiYgKGVsZW1lbnRSZWN0LndpZHRoID49IHBvcHVwUmVjdC53aWR0aCkgPyBwb3B1cFJlY3Qud2lkdGggOiAwKTtcbiAgICBpZiAoZWxlbWVudCAmJiBlbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnZS1ydGwnKSAmJiBlbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnZS1tdWx0aXNlbGVjdCcpKSB7XG4gICAgICAgIHBvcHVwV2lkdGggPSBwb3B1cFJlY3Qud2lkdGg7XG4gICAgfVxuICAgIHJldHVybiBlbGVtZW50UmVjdC5yaWdodCArIGdldEJvZHlTY3JvbGxMZWZ0KCkgLSBwb3B1cFdpZHRoO1xufVxuLyoqXG4gKiBAcmV0dXJucyB7bnVtYmVyfSAtIHNwZWNpZmllcyB0aGUgbnVtYmVyIHZhbHVlXG4gKi9cbmZ1bmN0aW9uIGdldEVsZW1lbnRIQ2VudGVyKCkge1xuICAgIHJldHVybiBnZXRFbGVtZW50TGVmdCgpICsgKGVsZW1lbnRSZWN0LndpZHRoIC8gMik7XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@syncfusion+ej2-popups@29.1.37/node_modules/@syncfusion/ej2-popups/src/common/position.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@syncfusion+ej2-popups@29.1.37/node_modules/@syncfusion/ej2-popups/src/common/resize.js":
/*!********************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@syncfusion+ej2-popups@29.1.37/node_modules/@syncfusion/ej2-popups/src/common/resize.js ***!
  \********************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createResize: () => (/* binding */ createResize),\n/* harmony export */   removeResize: () => (/* binding */ removeResize),\n/* harmony export */   resizeDestroy: () => (/* binding */ resizeDestroy),\n/* harmony export */   setMaxHeight: () => (/* binding */ setMaxHeight),\n/* harmony export */   setMaxWidth: () => (/* binding */ setMaxWidth),\n/* harmony export */   setMinHeight: () => (/* binding */ setMinHeight)\n/* harmony export */ });\n/* harmony import */ var _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @syncfusion/ej2-base */ \"(ssr)/./node_modules/.pnpm/@syncfusion+ej2-base@29.1.36/node_modules/@syncfusion/ej2-base/index.js\");\n/**\n * Resize library\n */\n\nvar elementClass = ['north-west', 'north', 'north-east', 'west', 'east', 'south-west', 'south', 'south-east'];\nvar RESIZE_HANDLER = 'e-resize-handle';\nvar FOCUSED_HANDLER = 'e-focused-handle';\nvar DIALOG_RESIZABLE = 'e-dlg-resizable';\nvar RESTRICT_LEFT = ['e-restrict-left'];\nvar RESIZE_WITHIN_VIEWPORT = 'e-resize-viewport';\nvar dialogBorderResize = ['north', 'west', 'east', 'south'];\nvar targetElement;\nvar selectedHandler;\nvar originalWidth = 0;\nvar originalHeight = 0;\nvar originalX = 0;\nvar originalY = 0;\nvar originalMouseX = 0;\nvar originalMouseY = 0;\nvar minHeight;\nvar maxHeight;\nvar minWidth;\nvar maxWidth;\nvar containerElement;\nvar resizeStart = null;\nvar resize = null;\nvar resizeEnd = null;\nvar resizeWestWidth;\nvar setLeft = true;\nvar previousWidth = 0;\nvar setWidth = true;\n// eslint-disable-next-line\nvar proxy;\n/**\n *\n * @param {ResizeArgs} args - specifies the resize args\n * @returns {void}\n */\nfunction createResize(args) {\n    resizeStart = args.resizeBegin;\n    resize = args.resizing;\n    resizeEnd = args.resizeComplete;\n    targetElement = getDOMElement(args.element);\n    containerElement = getDOMElement(args.boundary);\n    var directions = args.direction.split(' ');\n    for (var i = 0; i < directions.length; i++) {\n        if (dialogBorderResize.indexOf(directions[i]) >= 0 && directions[i]) {\n            setBorderResizeElm(directions[i]);\n        }\n        else if (directions[i].trim() !== '') {\n            var resizeHandler = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.createElement)('div', { className: 'e-icons ' + RESIZE_HANDLER + ' ' + 'e-' + directions[i] });\n            targetElement.appendChild(resizeHandler);\n        }\n    }\n    minHeight = args.minHeight;\n    minWidth = args.minWidth;\n    maxWidth = args.maxWidth;\n    maxHeight = args.maxHeight;\n    if (args.proxy && args.proxy.element && args.proxy.element.classList.contains('e-dialog')) {\n        wireEvents(args.proxy);\n    }\n    else {\n        wireEvents();\n    }\n}\n/**\n *\n * @param {string} direction - specifies the string\n * @returns {void}\n */\nfunction setBorderResizeElm(direction) {\n    calculateValues();\n    var borderBottom = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.createElement)('span', {\n        attrs: {\n            'unselectable': 'on', 'contenteditable': 'false'\n        }\n    });\n    borderBottom.setAttribute('class', 'e-dialog-border-resize e-' + direction);\n    if (direction === 'south') {\n        borderBottom.style.height = '2px';\n        borderBottom.style.width = '100%';\n        borderBottom.style.bottom = '0px';\n        borderBottom.style.left = '0px';\n    }\n    if (direction === 'north') {\n        borderBottom.style.height = '2px';\n        borderBottom.style.width = '100%';\n        borderBottom.style.top = '0px';\n        borderBottom.style.left = '0px';\n    }\n    if (direction === 'east') {\n        borderBottom.style.height = '100%';\n        borderBottom.style.width = '2px';\n        borderBottom.style.right = '0px';\n        borderBottom.style.top = '0px';\n    }\n    if (direction === 'west') {\n        borderBottom.style.height = '100%';\n        borderBottom.style.width = '2px';\n        borderBottom.style.left = '0px';\n        borderBottom.style.top = '0px';\n    }\n    targetElement.appendChild(borderBottom);\n}\n/**\n *\n * @param {string} element - specifies the element\n * @returns {HTMLElement} - returns the element\n */\nfunction getDOMElement(element) {\n    var domElement;\n    if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(element)) {\n        if (typeof (element) === 'string') {\n            domElement = document.querySelector(element);\n        }\n        else {\n            domElement = element;\n        }\n    }\n    return domElement;\n}\n/**\n * Wires up the event handlers for the resizable elements.\n *\n * @param {any} [args] - Optional arguments that provide context for the event handlers.\n * @returns {void}\n */\nfunction wireEvents(args) {\n    var context = args || this;\n    var resizers = targetElement.querySelectorAll('.' + RESIZE_HANDLER);\n    for (var i = 0; i < resizers.length; i++) {\n        selectedHandler = resizers[i];\n        _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.EventHandler.add(selectedHandler, 'mousedown', onMouseDown, context);\n        var eventName = (_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Browser.info.name === 'msie') ? 'pointerdown' : 'touchstart';\n        _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.EventHandler.add(selectedHandler, eventName, onTouchStart, context);\n    }\n    var borderResizers = targetElement.querySelectorAll('.e-dialog-border-resize');\n    if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(borderResizers)) {\n        for (var i = 0; i < borderResizers.length; i++) {\n            selectedHandler = borderResizers[i];\n            _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.EventHandler.add(selectedHandler, 'mousedown', onMouseDown, context);\n            var eventName = (_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Browser.info.name === 'msie') ? 'pointerdown' : 'touchstart';\n            _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.EventHandler.add(selectedHandler, eventName, onTouchStart, context);\n        }\n    }\n}\n/* istanbul ignore next */\n/**\n *\n * @param {string} e - specifies the string\n * @returns {string} - returns the string\n */\nfunction getEventType(e) {\n    return (e.indexOf('mouse') > -1) ? 'mouse' : 'touch';\n}\n/* istanbul ignore next */\n/**\n *\n * @param {MouseEvent} e - specifies the mouse event\n * @returns {void}\n */\nfunction onMouseDown(e) {\n    e.preventDefault();\n    targetElement = e.target.parentElement;\n    calculateValues();\n    originalMouseX = e.pageX;\n    originalMouseY = e.pageY;\n    e.target.classList.add(FOCUSED_HANDLER);\n    if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(resizeStart)) {\n        var proxy_1 =  false || this;\n        if (resizeStart(e, proxy_1) === true) {\n            return;\n        }\n    }\n    if (this.targetEle && targetElement && targetElement.querySelector('.' + DIALOG_RESIZABLE)) {\n        containerElement = this.target === ('body' || 0 || 0) ? null : this.targetEle;\n        maxWidth = this.targetEle.clientWidth;\n        maxHeight = this.targetEle.clientHeight;\n    }\n    var target = ((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(containerElement)) ? document : containerElement;\n    _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.EventHandler.add(target, 'mousemove', onMouseMove, this);\n    _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.EventHandler.add(document, 'mouseup', onMouseUp, this);\n    for (var i = 0; i < RESTRICT_LEFT.length; i++) {\n        if (targetElement.classList.contains(RESTRICT_LEFT[i])) {\n            setLeft = false;\n        }\n        else {\n            setLeft = true;\n        }\n    }\n}\n/* istanbul ignore next */\n/**\n *\n * @param {MouseEvent} e - specifies the event\n * @returns {void}\n */\nfunction onMouseUp(e) {\n    var touchMoveEvent = (_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Browser.info.name === 'msie') ? 'pointermove' : 'touchmove';\n    var touchEndEvent = (_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Browser.info.name === 'msie') ? 'pointerup' : 'touchend';\n    var target = ((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(containerElement)) ? document : containerElement;\n    var eventName = (_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Browser.info.name === 'msie') ? 'pointerdown' : 'touchstart';\n    _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.EventHandler.remove(target, 'mousemove', onMouseMove);\n    _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.EventHandler.remove(target, touchMoveEvent, onMouseMove);\n    _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.EventHandler.remove(target, eventName, onMouseMove);\n    if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(document.body.querySelector('.' + FOCUSED_HANDLER))) {\n        document.body.querySelector('.' + FOCUSED_HANDLER).classList.remove(FOCUSED_HANDLER);\n    }\n    if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(resizeEnd)) {\n        var proxy_2 =  false || this;\n        resizeEnd(e, proxy_2);\n    }\n    _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.EventHandler.remove(document, 'mouseup', onMouseUp);\n    _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.EventHandler.remove(document, touchEndEvent, onMouseUp);\n}\n/* istanbul ignore next */\n/**\n * @returns {void}\n */\nfunction calculateValues() {\n    originalWidth = parseFloat(getComputedStyle(targetElement, null).getPropertyValue('width').replace('px', ''));\n    originalHeight = parseFloat(getComputedStyle(targetElement, null).getPropertyValue('height').replace('px', ''));\n    originalX = targetElement.getBoundingClientRect().left;\n    originalY = targetElement.getBoundingClientRect().top;\n}\n/* istanbul ignore next */\n/**\n *\n * @param {MouseEvent} e - specifies the event\n * @returns {void}\n */\nfunction onTouchStart(e) {\n    targetElement = e.target.parentElement;\n    calculateValues();\n    var dialogResizeElement = targetElement.classList.contains('e-dialog');\n    if ((e.target.classList.contains(RESIZE_HANDLER) || e.target.classList.contains('e-dialog-border-resize')) && dialogResizeElement) {\n        e.target.classList.add(FOCUSED_HANDLER);\n    }\n    var coordinates = e.touches ? e.changedTouches[0] : e;\n    originalMouseX = coordinates.pageX;\n    originalMouseY = coordinates.pageY;\n    if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(resizeStart)) {\n        var proxy_3 =  false || this;\n        if (resizeStart(e, proxy_3) === true) {\n            return;\n        }\n    }\n    var touchMoveEvent = (_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Browser.info.name === 'msie') ? 'pointermove' : 'touchmove';\n    var touchEndEvent = (_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Browser.info.name === 'msie') ? 'pointerup' : 'touchend';\n    var target = ((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(containerElement)) ? document : containerElement;\n    _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.EventHandler.add(target, touchMoveEvent, onMouseMove, this);\n    _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.EventHandler.add(document, touchEndEvent, onMouseUp, this);\n}\n/* istanbul ignore next */\n/**\n *\n * @param {MouseEvent} e - specifies the event\n * @returns {void}\n */\nfunction onMouseMove(e) {\n    if (e.target.classList.contains(RESIZE_HANDLER) && e.target.classList.contains(FOCUSED_HANDLER)) {\n        selectedHandler = e.target;\n    }\n    else if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(document.body.querySelector('.' + FOCUSED_HANDLER))) {\n        selectedHandler = document.body.querySelector('.' + FOCUSED_HANDLER);\n    }\n    if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(selectedHandler)) {\n        var resizeTowards = '';\n        for (var i = 0; i < elementClass.length; i++) {\n            if (selectedHandler.classList.contains('e-' + elementClass[i])) {\n                resizeTowards = elementClass[i];\n            }\n        }\n        if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(resize)) {\n            var proxy_4 =  false || this;\n            resize(e, proxy_4);\n        }\n        switch (resizeTowards) {\n            case 'south':\n                resizeSouth(e);\n                break;\n            case 'north':\n                resizeNorth(e);\n                break;\n            case 'west':\n                resizeWest(e);\n                break;\n            case 'east':\n                resizeEast(e);\n                break;\n            case 'south-east':\n                resizeSouth(e);\n                resizeEast(e);\n                break;\n            case 'south-west':\n                resizeSouth(e);\n                resizeWest(e);\n                break;\n            case 'north-east':\n                resizeNorth(e);\n                resizeEast(e);\n                break;\n            case 'north-west':\n                resizeNorth(e);\n                resizeWest(e);\n                break;\n            default: break;\n        }\n    }\n}\n/* istanbul ignore next */\n/**\n *\n * @param {HTMLElement} element - specifies the eleemnt\n * @returns {ClientRect} - returns the client\n */\nfunction getClientRectValues(element) {\n    return element.getBoundingClientRect();\n}\n/**\n * @param {MouseEvent | TouchEvent} e - specifies the event\n * @returns {void}\n */\nfunction resizeSouth(e) {\n    var documentHeight = document.documentElement.clientHeight;\n    var calculateValue = false;\n    var coordinates = e.touches ? e.changedTouches[0] : e;\n    var currentpageY = coordinates.pageY;\n    var targetRectValues = getClientRectValues(targetElement);\n    var containerRectValues;\n    if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(containerElement)) {\n        containerRectValues = getClientRectValues(containerElement);\n    }\n    if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(containerElement)) {\n        calculateValue = true;\n    }\n    else if ((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(containerElement) && ((documentHeight - currentpageY) >= 0 || (targetRectValues.top < 0))) {\n        calculateValue = true;\n    }\n    var calculatedHeight = originalHeight + (currentpageY - originalMouseY);\n    calculatedHeight = (calculatedHeight > minHeight) ? calculatedHeight : minHeight;\n    var containerTop = 0;\n    if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(containerElement)) {\n        containerTop = containerRectValues.top;\n    }\n    var borderValue = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(containerElement) ? 0 : containerElement.offsetHeight - containerElement.clientHeight;\n    var topWithoutborder = (targetRectValues.top - containerTop) - (borderValue / 2);\n    topWithoutborder = (topWithoutborder < 0) ? 0 : topWithoutborder;\n    if (targetRectValues.top > 0 && (topWithoutborder + calculatedHeight) > maxHeight) {\n        calculateValue = false;\n        if (targetElement.classList.contains(RESIZE_WITHIN_VIEWPORT)) {\n            return;\n        }\n        targetElement.style.height = (maxHeight - parseInt(topWithoutborder.toString(), 10)) + 'px';\n        return;\n    }\n    var targetTop = 0;\n    if (calculateValue) {\n        if (targetRectValues.top < 0 && (documentHeight + (targetRectValues.height + targetRectValues.top) > 0)) {\n            targetTop = targetRectValues.top;\n            if ((calculatedHeight + targetTop) <= 30) {\n                calculatedHeight = (targetRectValues.height - (targetRectValues.height + targetRectValues.top)) + 30;\n            }\n        }\n        if (((calculatedHeight + targetRectValues.top) >= maxHeight)) {\n            targetElement.style.height = targetRectValues.height +\n                (documentHeight - (targetRectValues.height + targetRectValues.top)) + 'px';\n        }\n        var calculatedTop = ((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(containerElement)) ? targetTop : topWithoutborder;\n        if (calculatedHeight >= minHeight && ((calculatedHeight + calculatedTop) <= maxHeight)) {\n            targetElement.style.height = calculatedHeight + 'px';\n        }\n    }\n}\n/**\n * Resizes the element towards the north direction.\n *\n * @param {MouseEvent | TouchEvent} e - The event object.\n * @returns {void}\n */\nfunction resizeNorth(e) {\n    var calculateValue = false;\n    var boundaryRectValues;\n    var pageY = (getEventType(e.type) === 'mouse') ? e.pageY : e.touches[0].pageY;\n    var targetRectValues = getClientRectValues(targetElement);\n    var borderValue = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(containerElement) ? 0 : containerElement.offsetHeight - containerElement.clientHeight;\n    if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(containerElement)) {\n        boundaryRectValues = getClientRectValues(containerElement);\n    }\n    if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(containerElement) && (targetRectValues.top - boundaryRectValues.top) > 0) {\n        calculateValue = true;\n    }\n    else if ((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(containerElement) && pageY > 0) {\n        calculateValue = true;\n    }\n    else if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(containerElement) &&\n        (Math.floor((targetRectValues.top - boundaryRectValues.top) + targetRectValues.height +\n            (boundaryRectValues.bottom - targetRectValues.bottom)) - borderValue) <= maxHeight) {\n        calculateValue = true;\n    }\n    var currentHeight = originalHeight - (pageY - originalMouseY);\n    if (calculateValue) {\n        if (currentHeight >= minHeight && currentHeight <= maxHeight) {\n            var containerTop = 0;\n            if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(containerElement)) {\n                containerTop = boundaryRectValues.top;\n            }\n            var top_1 = (originalY - containerTop) + (pageY - originalMouseY);\n            top_1 = top_1 > 0 ? top_1 : 1;\n            targetElement.style.height = currentHeight + 'px';\n            targetElement.style.top = top_1 + 'px';\n        }\n    }\n}\n/**\n * Resizes the element towards the west direction.\n *\n * @param {MouseEvent | TouchEvent} e - The event object.\n * @returns {void}\n */\nfunction resizeWest(e) {\n    var documentWidth = document.documentElement.clientWidth;\n    var calculateValue = false;\n    var rectValues;\n    if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(containerElement)) {\n        rectValues = getClientRectValues(containerElement);\n    }\n    var pageX = (getEventType(e.type) === 'mouse') ? e.pageX : e.touches[0].pageX;\n    var targetRectValues = getClientRectValues(targetElement);\n    var borderValue = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(containerElement) ? 0 : containerElement.offsetWidth - containerElement.clientWidth;\n    /* eslint-disable */\n    var left = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(containerElement) ? 0 : rectValues.left;\n    var containerWidth = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(containerElement) ? 0 : rectValues.width;\n    /* eslint-enable */\n    if ((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(resizeWestWidth)) {\n        if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(containerElement)) {\n            resizeWestWidth = (((targetRectValues.left - left) - borderValue / 2)) + targetRectValues.width;\n            resizeWestWidth = resizeWestWidth + (containerWidth - borderValue - resizeWestWidth);\n        }\n        else {\n            resizeWestWidth = documentWidth;\n        }\n    }\n    if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(containerElement) &&\n        (Math.floor((targetRectValues.left - rectValues.left) + targetRectValues.width +\n            (rectValues.right - targetRectValues.right)) - borderValue) <= maxWidth) {\n        calculateValue = true;\n    }\n    else if ((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(containerElement) && pageX >= 0) {\n        calculateValue = true;\n    }\n    var calculatedWidth = originalWidth - (pageX - originalMouseX);\n    if (setLeft) {\n        calculatedWidth = (calculatedWidth > resizeWestWidth) ? resizeWestWidth : calculatedWidth;\n    }\n    if (calculateValue) {\n        if (calculatedWidth >= minWidth && calculatedWidth <= maxWidth) {\n            var containerLeft = 0;\n            if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(containerElement)) {\n                containerLeft = rectValues.left;\n            }\n            var left_1 = (originalX - containerLeft) + (pageX - originalMouseX);\n            left_1 = (left_1 > 0) ? left_1 : 1;\n            if (calculatedWidth !== previousWidth && setWidth) {\n                targetElement.style.width = calculatedWidth + 'px';\n            }\n            if (setLeft) {\n                targetElement.style.left = left_1 + 'px';\n                if (left_1 === 1) {\n                    setWidth = false;\n                }\n                else {\n                    setWidth = true;\n                }\n            }\n        }\n    }\n    previousWidth = calculatedWidth;\n}\n/**\n * Resizes the element towards the east direction.\n *\n * @param {MouseEvent | TouchEvent} e - The event object.\n * @returns {void}\n */\nfunction resizeEast(e) {\n    var documentWidth = document.documentElement.clientWidth;\n    var calculateValue = false;\n    var containerRectValues;\n    if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(containerElement)) {\n        containerRectValues = getClientRectValues(containerElement);\n    }\n    var coordinates = e.touches ? e.changedTouches[0] : e;\n    var pageX = coordinates.pageX;\n    var targetRectValues = getClientRectValues(targetElement);\n    if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(containerElement) && (((targetRectValues.left - containerRectValues.left) + targetRectValues.width) <= maxWidth\n        || (targetRectValues.right - containerRectValues.left) >= targetRectValues.width)) {\n        calculateValue = true;\n    }\n    else if ((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(containerElement) && (documentWidth - pageX) > 0) {\n        calculateValue = true;\n    }\n    var calculatedWidth = originalWidth + (pageX - originalMouseX);\n    var containerLeft = 0;\n    if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(containerElement)) {\n        containerLeft = containerRectValues.left;\n    }\n    if (((targetRectValues.left - containerLeft) + calculatedWidth) > maxWidth) {\n        calculateValue = false;\n        if (targetElement.classList.contains(RESIZE_WITHIN_VIEWPORT)) {\n            return;\n        }\n        targetElement.style.width = maxWidth - (targetRectValues.left - containerLeft) + 'px';\n    }\n    if (calculateValue) {\n        if (calculatedWidth >= minWidth && calculatedWidth <= maxWidth) {\n            targetElement.style.width = calculatedWidth + 'px';\n        }\n    }\n}\n/* istanbul ignore next */\n/**\n *\n * @param {number} minimumHeight - specifies the number\n * @returns {void}\n */\nfunction setMinHeight(minimumHeight) {\n    minHeight = minimumHeight;\n}\n/**\n *\n * @param {number} value - specifies the number value\n * @returns {void}\n */\nfunction setMaxWidth(value) {\n    maxWidth = value;\n}\n/**\n *\n * @param {number} value - specifies the number value\n * @returns {void}\n */\nfunction setMaxHeight(value) {\n    maxHeight = value;\n}\n/**\n * @returns {void}\n */\nfunction removeResize() {\n    var handlers = targetElement.querySelectorAll('.' + RESIZE_HANDLER);\n    for (var i = 0; i < handlers.length; i++) {\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.detach)(handlers[i]);\n    }\n    var borderResizers = targetElement.querySelectorAll('.e-dialog-border-resize');\n    if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(borderResizers)) {\n        for (var i = 0; i < borderResizers.length; i++) {\n            (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.detach)(borderResizers[i]);\n        }\n    }\n}\n/**\n * @returns {void}\n */\nfunction resizeDestroy() {\n    targetElement = null;\n    selectedHandler = null;\n    containerElement = null;\n    resizeWestWidth = null;\n    resizeStart = null;\n    resize = null;\n    resizeEnd = null;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHN5bmNmdXNpb24rZWoyLXBvcHVwc0AyOS4xLjM3L25vZGVfbW9kdWxlcy9Ac3luY2Z1c2lvbi9lajItcG9wdXBzL3NyYy9jb21tb24vcmVzaXplLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDZ0g7QUFDaEg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFlBQVk7QUFDdkIsYUFBYTtBQUNiO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsdUJBQXVCO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLG1FQUFhLFVBQVUscUVBQXFFO0FBQzVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsbUVBQWE7QUFDcEM7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkIsYUFBYSxhQUFhO0FBQzFCO0FBQ0E7QUFDQTtBQUNBLFNBQVMsdUVBQUs7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyx5QkFBeUI7QUFDcEMsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLHVFQUFLO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsdUVBQUs7QUFDZDtBQUNBO0FBQ0E7QUFDQSxhQUFhLHVFQUFLO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyx1RUFBSztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsUUFBUTtBQUNuQixhQUFhO0FBQ2I7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CLGFBQWE7QUFDYjtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkIsYUFBYTtBQUNiO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDTztBQUNQO0FBQ0Esb0JBQW9CLHFCQUFxQjtBQUN6QyxRQUFRLDREQUFNO0FBQ2Q7QUFDQTtBQUNBLFNBQVMsdUVBQUs7QUFDZCx3QkFBd0IsMkJBQTJCO0FBQ25ELFlBQVksNERBQU07QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haV90cmF2ZWwvLi9ub2RlX21vZHVsZXMvLnBucG0vQHN5bmNmdXNpb24rZWoyLXBvcHVwc0AyOS4xLjM3L25vZGVfbW9kdWxlcy9Ac3luY2Z1c2lvbi9lajItcG9wdXBzL3NyYy9jb21tb24vcmVzaXplLmpzPzRkMzkiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBSZXNpemUgbGlicmFyeVxuICovXG5pbXBvcnQgeyBpc051bGxPclVuZGVmaW5lZCBhcyBpc05PVSwgY3JlYXRlRWxlbWVudCwgRXZlbnRIYW5kbGVyLCBkZXRhY2gsIEJyb3dzZXIgfSBmcm9tICdAc3luY2Z1c2lvbi9lajItYmFzZSc7XG52YXIgZWxlbWVudENsYXNzID0gWydub3J0aC13ZXN0JywgJ25vcnRoJywgJ25vcnRoLWVhc3QnLCAnd2VzdCcsICdlYXN0JywgJ3NvdXRoLXdlc3QnLCAnc291dGgnLCAnc291dGgtZWFzdCddO1xudmFyIFJFU0laRV9IQU5ETEVSID0gJ2UtcmVzaXplLWhhbmRsZSc7XG52YXIgRk9DVVNFRF9IQU5ETEVSID0gJ2UtZm9jdXNlZC1oYW5kbGUnO1xudmFyIERJQUxPR19SRVNJWkFCTEUgPSAnZS1kbGctcmVzaXphYmxlJztcbnZhciBSRVNUUklDVF9MRUZUID0gWydlLXJlc3RyaWN0LWxlZnQnXTtcbnZhciBSRVNJWkVfV0lUSElOX1ZJRVdQT1JUID0gJ2UtcmVzaXplLXZpZXdwb3J0JztcbnZhciBkaWFsb2dCb3JkZXJSZXNpemUgPSBbJ25vcnRoJywgJ3dlc3QnLCAnZWFzdCcsICdzb3V0aCddO1xudmFyIHRhcmdldEVsZW1lbnQ7XG52YXIgc2VsZWN0ZWRIYW5kbGVyO1xudmFyIG9yaWdpbmFsV2lkdGggPSAwO1xudmFyIG9yaWdpbmFsSGVpZ2h0ID0gMDtcbnZhciBvcmlnaW5hbFggPSAwO1xudmFyIG9yaWdpbmFsWSA9IDA7XG52YXIgb3JpZ2luYWxNb3VzZVggPSAwO1xudmFyIG9yaWdpbmFsTW91c2VZID0gMDtcbnZhciBtaW5IZWlnaHQ7XG52YXIgbWF4SGVpZ2h0O1xudmFyIG1pbldpZHRoO1xudmFyIG1heFdpZHRoO1xudmFyIGNvbnRhaW5lckVsZW1lbnQ7XG52YXIgcmVzaXplU3RhcnQgPSBudWxsO1xudmFyIHJlc2l6ZSA9IG51bGw7XG52YXIgcmVzaXplRW5kID0gbnVsbDtcbnZhciByZXNpemVXZXN0V2lkdGg7XG52YXIgc2V0TGVmdCA9IHRydWU7XG52YXIgcHJldmlvdXNXaWR0aCA9IDA7XG52YXIgc2V0V2lkdGggPSB0cnVlO1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lXG52YXIgcHJveHk7XG4vKipcbiAqXG4gKiBAcGFyYW0ge1Jlc2l6ZUFyZ3N9IGFyZ3MgLSBzcGVjaWZpZXMgdGhlIHJlc2l6ZSBhcmdzXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVJlc2l6ZShhcmdzKSB7XG4gICAgcmVzaXplU3RhcnQgPSBhcmdzLnJlc2l6ZUJlZ2luO1xuICAgIHJlc2l6ZSA9IGFyZ3MucmVzaXppbmc7XG4gICAgcmVzaXplRW5kID0gYXJncy5yZXNpemVDb21wbGV0ZTtcbiAgICB0YXJnZXRFbGVtZW50ID0gZ2V0RE9NRWxlbWVudChhcmdzLmVsZW1lbnQpO1xuICAgIGNvbnRhaW5lckVsZW1lbnQgPSBnZXRET01FbGVtZW50KGFyZ3MuYm91bmRhcnkpO1xuICAgIHZhciBkaXJlY3Rpb25zID0gYXJncy5kaXJlY3Rpb24uc3BsaXQoJyAnKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRpcmVjdGlvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKGRpYWxvZ0JvcmRlclJlc2l6ZS5pbmRleE9mKGRpcmVjdGlvbnNbaV0pID49IDAgJiYgZGlyZWN0aW9uc1tpXSkge1xuICAgICAgICAgICAgc2V0Qm9yZGVyUmVzaXplRWxtKGRpcmVjdGlvbnNbaV0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGRpcmVjdGlvbnNbaV0udHJpbSgpICE9PSAnJykge1xuICAgICAgICAgICAgdmFyIHJlc2l6ZUhhbmRsZXIgPSBjcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ2UtaWNvbnMgJyArIFJFU0laRV9IQU5ETEVSICsgJyAnICsgJ2UtJyArIGRpcmVjdGlvbnNbaV0gfSk7XG4gICAgICAgICAgICB0YXJnZXRFbGVtZW50LmFwcGVuZENoaWxkKHJlc2l6ZUhhbmRsZXIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIG1pbkhlaWdodCA9IGFyZ3MubWluSGVpZ2h0O1xuICAgIG1pbldpZHRoID0gYXJncy5taW5XaWR0aDtcbiAgICBtYXhXaWR0aCA9IGFyZ3MubWF4V2lkdGg7XG4gICAgbWF4SGVpZ2h0ID0gYXJncy5tYXhIZWlnaHQ7XG4gICAgaWYgKGFyZ3MucHJveHkgJiYgYXJncy5wcm94eS5lbGVtZW50ICYmIGFyZ3MucHJveHkuZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtZGlhbG9nJykpIHtcbiAgICAgICAgd2lyZUV2ZW50cyhhcmdzLnByb3h5KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHdpcmVFdmVudHMoKTtcbiAgICB9XG59XG4vKipcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gZGlyZWN0aW9uIC0gc3BlY2lmaWVzIHRoZSBzdHJpbmdcbiAqIEByZXR1cm5zIHt2b2lkfVxuICovXG5mdW5jdGlvbiBzZXRCb3JkZXJSZXNpemVFbG0oZGlyZWN0aW9uKSB7XG4gICAgY2FsY3VsYXRlVmFsdWVzKCk7XG4gICAgdmFyIGJvcmRlckJvdHRvbSA9IGNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7XG4gICAgICAgIGF0dHJzOiB7XG4gICAgICAgICAgICAndW5zZWxlY3RhYmxlJzogJ29uJywgJ2NvbnRlbnRlZGl0YWJsZSc6ICdmYWxzZSdcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIGJvcmRlckJvdHRvbS5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ2UtZGlhbG9nLWJvcmRlci1yZXNpemUgZS0nICsgZGlyZWN0aW9uKTtcbiAgICBpZiAoZGlyZWN0aW9uID09PSAnc291dGgnKSB7XG4gICAgICAgIGJvcmRlckJvdHRvbS5zdHlsZS5oZWlnaHQgPSAnMnB4JztcbiAgICAgICAgYm9yZGVyQm90dG9tLnN0eWxlLndpZHRoID0gJzEwMCUnO1xuICAgICAgICBib3JkZXJCb3R0b20uc3R5bGUuYm90dG9tID0gJzBweCc7XG4gICAgICAgIGJvcmRlckJvdHRvbS5zdHlsZS5sZWZ0ID0gJzBweCc7XG4gICAgfVxuICAgIGlmIChkaXJlY3Rpb24gPT09ICdub3J0aCcpIHtcbiAgICAgICAgYm9yZGVyQm90dG9tLnN0eWxlLmhlaWdodCA9ICcycHgnO1xuICAgICAgICBib3JkZXJCb3R0b20uc3R5bGUud2lkdGggPSAnMTAwJSc7XG4gICAgICAgIGJvcmRlckJvdHRvbS5zdHlsZS50b3AgPSAnMHB4JztcbiAgICAgICAgYm9yZGVyQm90dG9tLnN0eWxlLmxlZnQgPSAnMHB4JztcbiAgICB9XG4gICAgaWYgKGRpcmVjdGlvbiA9PT0gJ2Vhc3QnKSB7XG4gICAgICAgIGJvcmRlckJvdHRvbS5zdHlsZS5oZWlnaHQgPSAnMTAwJSc7XG4gICAgICAgIGJvcmRlckJvdHRvbS5zdHlsZS53aWR0aCA9ICcycHgnO1xuICAgICAgICBib3JkZXJCb3R0b20uc3R5bGUucmlnaHQgPSAnMHB4JztcbiAgICAgICAgYm9yZGVyQm90dG9tLnN0eWxlLnRvcCA9ICcwcHgnO1xuICAgIH1cbiAgICBpZiAoZGlyZWN0aW9uID09PSAnd2VzdCcpIHtcbiAgICAgICAgYm9yZGVyQm90dG9tLnN0eWxlLmhlaWdodCA9ICcxMDAlJztcbiAgICAgICAgYm9yZGVyQm90dG9tLnN0eWxlLndpZHRoID0gJzJweCc7XG4gICAgICAgIGJvcmRlckJvdHRvbS5zdHlsZS5sZWZ0ID0gJzBweCc7XG4gICAgICAgIGJvcmRlckJvdHRvbS5zdHlsZS50b3AgPSAnMHB4JztcbiAgICB9XG4gICAgdGFyZ2V0RWxlbWVudC5hcHBlbmRDaGlsZChib3JkZXJCb3R0b20pO1xufVxuLyoqXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGVsZW1lbnQgLSBzcGVjaWZpZXMgdGhlIGVsZW1lbnRcbiAqIEByZXR1cm5zIHtIVE1MRWxlbWVudH0gLSByZXR1cm5zIHRoZSBlbGVtZW50XG4gKi9cbmZ1bmN0aW9uIGdldERPTUVsZW1lbnQoZWxlbWVudCkge1xuICAgIHZhciBkb21FbGVtZW50O1xuICAgIGlmICghaXNOT1UoZWxlbWVudCkpIHtcbiAgICAgICAgaWYgKHR5cGVvZiAoZWxlbWVudCkgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBkb21FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihlbGVtZW50KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGRvbUVsZW1lbnQgPSBlbGVtZW50O1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBkb21FbGVtZW50O1xufVxuLyoqXG4gKiBXaXJlcyB1cCB0aGUgZXZlbnQgaGFuZGxlcnMgZm9yIHRoZSByZXNpemFibGUgZWxlbWVudHMuXG4gKlxuICogQHBhcmFtIHthbnl9IFthcmdzXSAtIE9wdGlvbmFsIGFyZ3VtZW50cyB0aGF0IHByb3ZpZGUgY29udGV4dCBmb3IgdGhlIGV2ZW50IGhhbmRsZXJzLlxuICogQHJldHVybnMge3ZvaWR9XG4gKi9cbmZ1bmN0aW9uIHdpcmVFdmVudHMoYXJncykge1xuICAgIHZhciBjb250ZXh0ID0gYXJncyB8fCB0aGlzO1xuICAgIHZhciByZXNpemVycyA9IHRhcmdldEVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLicgKyBSRVNJWkVfSEFORExFUik7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZXNpemVycy5sZW5ndGg7IGkrKykge1xuICAgICAgICBzZWxlY3RlZEhhbmRsZXIgPSByZXNpemVyc1tpXTtcbiAgICAgICAgRXZlbnRIYW5kbGVyLmFkZChzZWxlY3RlZEhhbmRsZXIsICdtb3VzZWRvd24nLCBvbk1vdXNlRG93biwgY29udGV4dCk7XG4gICAgICAgIHZhciBldmVudE5hbWUgPSAoQnJvd3Nlci5pbmZvLm5hbWUgPT09ICdtc2llJykgPyAncG9pbnRlcmRvd24nIDogJ3RvdWNoc3RhcnQnO1xuICAgICAgICBFdmVudEhhbmRsZXIuYWRkKHNlbGVjdGVkSGFuZGxlciwgZXZlbnROYW1lLCBvblRvdWNoU3RhcnQsIGNvbnRleHQpO1xuICAgIH1cbiAgICB2YXIgYm9yZGVyUmVzaXplcnMgPSB0YXJnZXRFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5lLWRpYWxvZy1ib3JkZXItcmVzaXplJyk7XG4gICAgaWYgKCFpc05PVShib3JkZXJSZXNpemVycykpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBib3JkZXJSZXNpemVycy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgc2VsZWN0ZWRIYW5kbGVyID0gYm9yZGVyUmVzaXplcnNbaV07XG4gICAgICAgICAgICBFdmVudEhhbmRsZXIuYWRkKHNlbGVjdGVkSGFuZGxlciwgJ21vdXNlZG93bicsIG9uTW91c2VEb3duLCBjb250ZXh0KTtcbiAgICAgICAgICAgIHZhciBldmVudE5hbWUgPSAoQnJvd3Nlci5pbmZvLm5hbWUgPT09ICdtc2llJykgPyAncG9pbnRlcmRvd24nIDogJ3RvdWNoc3RhcnQnO1xuICAgICAgICAgICAgRXZlbnRIYW5kbGVyLmFkZChzZWxlY3RlZEhhbmRsZXIsIGV2ZW50TmFtZSwgb25Ub3VjaFN0YXJ0LCBjb250ZXh0KTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4vKipcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gZSAtIHNwZWNpZmllcyB0aGUgc3RyaW5nXG4gKiBAcmV0dXJucyB7c3RyaW5nfSAtIHJldHVybnMgdGhlIHN0cmluZ1xuICovXG5mdW5jdGlvbiBnZXRFdmVudFR5cGUoZSkge1xuICAgIHJldHVybiAoZS5pbmRleE9mKCdtb3VzZScpID4gLTEpID8gJ21vdXNlJyA6ICd0b3VjaCc7XG59XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuLyoqXG4gKlxuICogQHBhcmFtIHtNb3VzZUV2ZW50fSBlIC0gc3BlY2lmaWVzIHRoZSBtb3VzZSBldmVudFxuICogQHJldHVybnMge3ZvaWR9XG4gKi9cbmZ1bmN0aW9uIG9uTW91c2VEb3duKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgdGFyZ2V0RWxlbWVudCA9IGUudGFyZ2V0LnBhcmVudEVsZW1lbnQ7XG4gICAgY2FsY3VsYXRlVmFsdWVzKCk7XG4gICAgb3JpZ2luYWxNb3VzZVggPSBlLnBhZ2VYO1xuICAgIG9yaWdpbmFsTW91c2VZID0gZS5wYWdlWTtcbiAgICBlLnRhcmdldC5jbGFzc0xpc3QuYWRkKEZPQ1VTRURfSEFORExFUik7XG4gICAgaWYgKCFpc05PVShyZXNpemVTdGFydCkpIHtcbiAgICAgICAgdmFyIHByb3h5XzEgPSBudWxsIHx8IHRoaXM7XG4gICAgICAgIGlmIChyZXNpemVTdGFydChlLCBwcm94eV8xKSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmICh0aGlzLnRhcmdldEVsZSAmJiB0YXJnZXRFbGVtZW50ICYmIHRhcmdldEVsZW1lbnQucXVlcnlTZWxlY3RvcignLicgKyBESUFMT0dfUkVTSVpBQkxFKSkge1xuICAgICAgICBjb250YWluZXJFbGVtZW50ID0gdGhpcy50YXJnZXQgPT09ICgnYm9keScgfHwgJ2RvY3VtZW50LmJvZHknIHx8IGRvY3VtZW50LmJvZHkpID8gbnVsbCA6IHRoaXMudGFyZ2V0RWxlO1xuICAgICAgICBtYXhXaWR0aCA9IHRoaXMudGFyZ2V0RWxlLmNsaWVudFdpZHRoO1xuICAgICAgICBtYXhIZWlnaHQgPSB0aGlzLnRhcmdldEVsZS5jbGllbnRIZWlnaHQ7XG4gICAgfVxuICAgIHZhciB0YXJnZXQgPSAoaXNOT1UoY29udGFpbmVyRWxlbWVudCkpID8gZG9jdW1lbnQgOiBjb250YWluZXJFbGVtZW50O1xuICAgIEV2ZW50SGFuZGxlci5hZGQodGFyZ2V0LCAnbW91c2Vtb3ZlJywgb25Nb3VzZU1vdmUsIHRoaXMpO1xuICAgIEV2ZW50SGFuZGxlci5hZGQoZG9jdW1lbnQsICdtb3VzZXVwJywgb25Nb3VzZVVwLCB0aGlzKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IFJFU1RSSUNUX0xFRlQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKHRhcmdldEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKFJFU1RSSUNUX0xFRlRbaV0pKSB7XG4gICAgICAgICAgICBzZXRMZWZ0ID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzZXRMZWZ0ID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4vKipcbiAqXG4gKiBAcGFyYW0ge01vdXNlRXZlbnR9IGUgLSBzcGVjaWZpZXMgdGhlIGV2ZW50XG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuZnVuY3Rpb24gb25Nb3VzZVVwKGUpIHtcbiAgICB2YXIgdG91Y2hNb3ZlRXZlbnQgPSAoQnJvd3Nlci5pbmZvLm5hbWUgPT09ICdtc2llJykgPyAncG9pbnRlcm1vdmUnIDogJ3RvdWNobW92ZSc7XG4gICAgdmFyIHRvdWNoRW5kRXZlbnQgPSAoQnJvd3Nlci5pbmZvLm5hbWUgPT09ICdtc2llJykgPyAncG9pbnRlcnVwJyA6ICd0b3VjaGVuZCc7XG4gICAgdmFyIHRhcmdldCA9IChpc05PVShjb250YWluZXJFbGVtZW50KSkgPyBkb2N1bWVudCA6IGNvbnRhaW5lckVsZW1lbnQ7XG4gICAgdmFyIGV2ZW50TmFtZSA9IChCcm93c2VyLmluZm8ubmFtZSA9PT0gJ21zaWUnKSA/ICdwb2ludGVyZG93bicgOiAndG91Y2hzdGFydCc7XG4gICAgRXZlbnRIYW5kbGVyLnJlbW92ZSh0YXJnZXQsICdtb3VzZW1vdmUnLCBvbk1vdXNlTW92ZSk7XG4gICAgRXZlbnRIYW5kbGVyLnJlbW92ZSh0YXJnZXQsIHRvdWNoTW92ZUV2ZW50LCBvbk1vdXNlTW92ZSk7XG4gICAgRXZlbnRIYW5kbGVyLnJlbW92ZSh0YXJnZXQsIGV2ZW50TmFtZSwgb25Nb3VzZU1vdmUpO1xuICAgIGlmICghaXNOT1UoZG9jdW1lbnQuYm9keS5xdWVyeVNlbGVjdG9yKCcuJyArIEZPQ1VTRURfSEFORExFUikpKSB7XG4gICAgICAgIGRvY3VtZW50LmJvZHkucXVlcnlTZWxlY3RvcignLicgKyBGT0NVU0VEX0hBTkRMRVIpLmNsYXNzTGlzdC5yZW1vdmUoRk9DVVNFRF9IQU5ETEVSKTtcbiAgICB9XG4gICAgaWYgKCFpc05PVShyZXNpemVFbmQpKSB7XG4gICAgICAgIHZhciBwcm94eV8yID0gbnVsbCB8fCB0aGlzO1xuICAgICAgICByZXNpemVFbmQoZSwgcHJveHlfMik7XG4gICAgfVxuICAgIEV2ZW50SGFuZGxlci5yZW1vdmUoZG9jdW1lbnQsICdtb3VzZXVwJywgb25Nb3VzZVVwKTtcbiAgICBFdmVudEhhbmRsZXIucmVtb3ZlKGRvY3VtZW50LCB0b3VjaEVuZEV2ZW50LCBvbk1vdXNlVXApO1xufVxuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbi8qKlxuICogQHJldHVybnMge3ZvaWR9XG4gKi9cbmZ1bmN0aW9uIGNhbGN1bGF0ZVZhbHVlcygpIHtcbiAgICBvcmlnaW5hbFdpZHRoID0gcGFyc2VGbG9hdChnZXRDb21wdXRlZFN0eWxlKHRhcmdldEVsZW1lbnQsIG51bGwpLmdldFByb3BlcnR5VmFsdWUoJ3dpZHRoJykucmVwbGFjZSgncHgnLCAnJykpO1xuICAgIG9yaWdpbmFsSGVpZ2h0ID0gcGFyc2VGbG9hdChnZXRDb21wdXRlZFN0eWxlKHRhcmdldEVsZW1lbnQsIG51bGwpLmdldFByb3BlcnR5VmFsdWUoJ2hlaWdodCcpLnJlcGxhY2UoJ3B4JywgJycpKTtcbiAgICBvcmlnaW5hbFggPSB0YXJnZXRFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQ7XG4gICAgb3JpZ2luYWxZID0gdGFyZ2V0RWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3A7XG59XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuLyoqXG4gKlxuICogQHBhcmFtIHtNb3VzZUV2ZW50fSBlIC0gc3BlY2lmaWVzIHRoZSBldmVudFxuICogQHJldHVybnMge3ZvaWR9XG4gKi9cbmZ1bmN0aW9uIG9uVG91Y2hTdGFydChlKSB7XG4gICAgdGFyZ2V0RWxlbWVudCA9IGUudGFyZ2V0LnBhcmVudEVsZW1lbnQ7XG4gICAgY2FsY3VsYXRlVmFsdWVzKCk7XG4gICAgdmFyIGRpYWxvZ1Jlc2l6ZUVsZW1lbnQgPSB0YXJnZXRFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnZS1kaWFsb2cnKTtcbiAgICBpZiAoKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhSRVNJWkVfSEFORExFUikgfHwgZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWRpYWxvZy1ib3JkZXItcmVzaXplJykpICYmIGRpYWxvZ1Jlc2l6ZUVsZW1lbnQpIHtcbiAgICAgICAgZS50YXJnZXQuY2xhc3NMaXN0LmFkZChGT0NVU0VEX0hBTkRMRVIpO1xuICAgIH1cbiAgICB2YXIgY29vcmRpbmF0ZXMgPSBlLnRvdWNoZXMgPyBlLmNoYW5nZWRUb3VjaGVzWzBdIDogZTtcbiAgICBvcmlnaW5hbE1vdXNlWCA9IGNvb3JkaW5hdGVzLnBhZ2VYO1xuICAgIG9yaWdpbmFsTW91c2VZID0gY29vcmRpbmF0ZXMucGFnZVk7XG4gICAgaWYgKCFpc05PVShyZXNpemVTdGFydCkpIHtcbiAgICAgICAgdmFyIHByb3h5XzMgPSBudWxsIHx8IHRoaXM7XG4gICAgICAgIGlmIChyZXNpemVTdGFydChlLCBwcm94eV8zKSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgfVxuICAgIHZhciB0b3VjaE1vdmVFdmVudCA9IChCcm93c2VyLmluZm8ubmFtZSA9PT0gJ21zaWUnKSA/ICdwb2ludGVybW92ZScgOiAndG91Y2htb3ZlJztcbiAgICB2YXIgdG91Y2hFbmRFdmVudCA9IChCcm93c2VyLmluZm8ubmFtZSA9PT0gJ21zaWUnKSA/ICdwb2ludGVydXAnIDogJ3RvdWNoZW5kJztcbiAgICB2YXIgdGFyZ2V0ID0gKGlzTk9VKGNvbnRhaW5lckVsZW1lbnQpKSA/IGRvY3VtZW50IDogY29udGFpbmVyRWxlbWVudDtcbiAgICBFdmVudEhhbmRsZXIuYWRkKHRhcmdldCwgdG91Y2hNb3ZlRXZlbnQsIG9uTW91c2VNb3ZlLCB0aGlzKTtcbiAgICBFdmVudEhhbmRsZXIuYWRkKGRvY3VtZW50LCB0b3VjaEVuZEV2ZW50LCBvbk1vdXNlVXAsIHRoaXMpO1xufVxuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbi8qKlxuICpcbiAqIEBwYXJhbSB7TW91c2VFdmVudH0gZSAtIHNwZWNpZmllcyB0aGUgZXZlbnRcbiAqIEByZXR1cm5zIHt2b2lkfVxuICovXG5mdW5jdGlvbiBvbk1vdXNlTW92ZShlKSB7XG4gICAgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhSRVNJWkVfSEFORExFUikgJiYgZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKEZPQ1VTRURfSEFORExFUikpIHtcbiAgICAgICAgc2VsZWN0ZWRIYW5kbGVyID0gZS50YXJnZXQ7XG4gICAgfVxuICAgIGVsc2UgaWYgKCFpc05PVShkb2N1bWVudC5ib2R5LnF1ZXJ5U2VsZWN0b3IoJy4nICsgRk9DVVNFRF9IQU5ETEVSKSkpIHtcbiAgICAgICAgc2VsZWN0ZWRIYW5kbGVyID0gZG9jdW1lbnQuYm9keS5xdWVyeVNlbGVjdG9yKCcuJyArIEZPQ1VTRURfSEFORExFUik7XG4gICAgfVxuICAgIGlmICghaXNOT1Uoc2VsZWN0ZWRIYW5kbGVyKSkge1xuICAgICAgICB2YXIgcmVzaXplVG93YXJkcyA9ICcnO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVsZW1lbnRDbGFzcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKHNlbGVjdGVkSGFuZGxlci5jbGFzc0xpc3QuY29udGFpbnMoJ2UtJyArIGVsZW1lbnRDbGFzc1tpXSkpIHtcbiAgICAgICAgICAgICAgICByZXNpemVUb3dhcmRzID0gZWxlbWVudENsYXNzW2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghaXNOT1UocmVzaXplKSkge1xuICAgICAgICAgICAgdmFyIHByb3h5XzQgPSBudWxsIHx8IHRoaXM7XG4gICAgICAgICAgICByZXNpemUoZSwgcHJveHlfNCk7XG4gICAgICAgIH1cbiAgICAgICAgc3dpdGNoIChyZXNpemVUb3dhcmRzKSB7XG4gICAgICAgICAgICBjYXNlICdzb3V0aCc6XG4gICAgICAgICAgICAgICAgcmVzaXplU291dGgoZSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdub3J0aCc6XG4gICAgICAgICAgICAgICAgcmVzaXplTm9ydGgoZSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICd3ZXN0JzpcbiAgICAgICAgICAgICAgICByZXNpemVXZXN0KGUpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnZWFzdCc6XG4gICAgICAgICAgICAgICAgcmVzaXplRWFzdChlKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ3NvdXRoLWVhc3QnOlxuICAgICAgICAgICAgICAgIHJlc2l6ZVNvdXRoKGUpO1xuICAgICAgICAgICAgICAgIHJlc2l6ZUVhc3QoZSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdzb3V0aC13ZXN0JzpcbiAgICAgICAgICAgICAgICByZXNpemVTb3V0aChlKTtcbiAgICAgICAgICAgICAgICByZXNpemVXZXN0KGUpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnbm9ydGgtZWFzdCc6XG4gICAgICAgICAgICAgICAgcmVzaXplTm9ydGgoZSk7XG4gICAgICAgICAgICAgICAgcmVzaXplRWFzdChlKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ25vcnRoLXdlc3QnOlxuICAgICAgICAgICAgICAgIHJlc2l6ZU5vcnRoKGUpO1xuICAgICAgICAgICAgICAgIHJlc2l6ZVdlc3QoZSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OiBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbn1cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4vKipcbiAqXG4gKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbGVtZW50IC0gc3BlY2lmaWVzIHRoZSBlbGVlbW50XG4gKiBAcmV0dXJucyB7Q2xpZW50UmVjdH0gLSByZXR1cm5zIHRoZSBjbGllbnRcbiAqL1xuZnVuY3Rpb24gZ2V0Q2xpZW50UmVjdFZhbHVlcyhlbGVtZW50KSB7XG4gICAgcmV0dXJuIGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG59XG4vKipcbiAqIEBwYXJhbSB7TW91c2VFdmVudCB8IFRvdWNoRXZlbnR9IGUgLSBzcGVjaWZpZXMgdGhlIGV2ZW50XG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuZnVuY3Rpb24gcmVzaXplU291dGgoZSkge1xuICAgIHZhciBkb2N1bWVudEhlaWdodCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQ7XG4gICAgdmFyIGNhbGN1bGF0ZVZhbHVlID0gZmFsc2U7XG4gICAgdmFyIGNvb3JkaW5hdGVzID0gZS50b3VjaGVzID8gZS5jaGFuZ2VkVG91Y2hlc1swXSA6IGU7XG4gICAgdmFyIGN1cnJlbnRwYWdlWSA9IGNvb3JkaW5hdGVzLnBhZ2VZO1xuICAgIHZhciB0YXJnZXRSZWN0VmFsdWVzID0gZ2V0Q2xpZW50UmVjdFZhbHVlcyh0YXJnZXRFbGVtZW50KTtcbiAgICB2YXIgY29udGFpbmVyUmVjdFZhbHVlcztcbiAgICBpZiAoIWlzTk9VKGNvbnRhaW5lckVsZW1lbnQpKSB7XG4gICAgICAgIGNvbnRhaW5lclJlY3RWYWx1ZXMgPSBnZXRDbGllbnRSZWN0VmFsdWVzKGNvbnRhaW5lckVsZW1lbnQpO1xuICAgIH1cbiAgICBpZiAoIWlzTk9VKGNvbnRhaW5lckVsZW1lbnQpKSB7XG4gICAgICAgIGNhbGN1bGF0ZVZhbHVlID0gdHJ1ZTtcbiAgICB9XG4gICAgZWxzZSBpZiAoaXNOT1UoY29udGFpbmVyRWxlbWVudCkgJiYgKChkb2N1bWVudEhlaWdodCAtIGN1cnJlbnRwYWdlWSkgPj0gMCB8fCAodGFyZ2V0UmVjdFZhbHVlcy50b3AgPCAwKSkpIHtcbiAgICAgICAgY2FsY3VsYXRlVmFsdWUgPSB0cnVlO1xuICAgIH1cbiAgICB2YXIgY2FsY3VsYXRlZEhlaWdodCA9IG9yaWdpbmFsSGVpZ2h0ICsgKGN1cnJlbnRwYWdlWSAtIG9yaWdpbmFsTW91c2VZKTtcbiAgICBjYWxjdWxhdGVkSGVpZ2h0ID0gKGNhbGN1bGF0ZWRIZWlnaHQgPiBtaW5IZWlnaHQpID8gY2FsY3VsYXRlZEhlaWdodCA6IG1pbkhlaWdodDtcbiAgICB2YXIgY29udGFpbmVyVG9wID0gMDtcbiAgICBpZiAoIWlzTk9VKGNvbnRhaW5lckVsZW1lbnQpKSB7XG4gICAgICAgIGNvbnRhaW5lclRvcCA9IGNvbnRhaW5lclJlY3RWYWx1ZXMudG9wO1xuICAgIH1cbiAgICB2YXIgYm9yZGVyVmFsdWUgPSBpc05PVShjb250YWluZXJFbGVtZW50KSA/IDAgOiBjb250YWluZXJFbGVtZW50Lm9mZnNldEhlaWdodCAtIGNvbnRhaW5lckVsZW1lbnQuY2xpZW50SGVpZ2h0O1xuICAgIHZhciB0b3BXaXRob3V0Ym9yZGVyID0gKHRhcmdldFJlY3RWYWx1ZXMudG9wIC0gY29udGFpbmVyVG9wKSAtIChib3JkZXJWYWx1ZSAvIDIpO1xuICAgIHRvcFdpdGhvdXRib3JkZXIgPSAodG9wV2l0aG91dGJvcmRlciA8IDApID8gMCA6IHRvcFdpdGhvdXRib3JkZXI7XG4gICAgaWYgKHRhcmdldFJlY3RWYWx1ZXMudG9wID4gMCAmJiAodG9wV2l0aG91dGJvcmRlciArIGNhbGN1bGF0ZWRIZWlnaHQpID4gbWF4SGVpZ2h0KSB7XG4gICAgICAgIGNhbGN1bGF0ZVZhbHVlID0gZmFsc2U7XG4gICAgICAgIGlmICh0YXJnZXRFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhSRVNJWkVfV0lUSElOX1ZJRVdQT1JUKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRhcmdldEVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gKG1heEhlaWdodCAtIHBhcnNlSW50KHRvcFdpdGhvdXRib3JkZXIudG9TdHJpbmcoKSwgMTApKSArICdweCc7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHRhcmdldFRvcCA9IDA7XG4gICAgaWYgKGNhbGN1bGF0ZVZhbHVlKSB7XG4gICAgICAgIGlmICh0YXJnZXRSZWN0VmFsdWVzLnRvcCA8IDAgJiYgKGRvY3VtZW50SGVpZ2h0ICsgKHRhcmdldFJlY3RWYWx1ZXMuaGVpZ2h0ICsgdGFyZ2V0UmVjdFZhbHVlcy50b3ApID4gMCkpIHtcbiAgICAgICAgICAgIHRhcmdldFRvcCA9IHRhcmdldFJlY3RWYWx1ZXMudG9wO1xuICAgICAgICAgICAgaWYgKChjYWxjdWxhdGVkSGVpZ2h0ICsgdGFyZ2V0VG9wKSA8PSAzMCkge1xuICAgICAgICAgICAgICAgIGNhbGN1bGF0ZWRIZWlnaHQgPSAodGFyZ2V0UmVjdFZhbHVlcy5oZWlnaHQgLSAodGFyZ2V0UmVjdFZhbHVlcy5oZWlnaHQgKyB0YXJnZXRSZWN0VmFsdWVzLnRvcCkpICsgMzA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCgoY2FsY3VsYXRlZEhlaWdodCArIHRhcmdldFJlY3RWYWx1ZXMudG9wKSA+PSBtYXhIZWlnaHQpKSB7XG4gICAgICAgICAgICB0YXJnZXRFbGVtZW50LnN0eWxlLmhlaWdodCA9IHRhcmdldFJlY3RWYWx1ZXMuaGVpZ2h0ICtcbiAgICAgICAgICAgICAgICAoZG9jdW1lbnRIZWlnaHQgLSAodGFyZ2V0UmVjdFZhbHVlcy5oZWlnaHQgKyB0YXJnZXRSZWN0VmFsdWVzLnRvcCkpICsgJ3B4JztcbiAgICAgICAgfVxuICAgICAgICB2YXIgY2FsY3VsYXRlZFRvcCA9IChpc05PVShjb250YWluZXJFbGVtZW50KSkgPyB0YXJnZXRUb3AgOiB0b3BXaXRob3V0Ym9yZGVyO1xuICAgICAgICBpZiAoY2FsY3VsYXRlZEhlaWdodCA+PSBtaW5IZWlnaHQgJiYgKChjYWxjdWxhdGVkSGVpZ2h0ICsgY2FsY3VsYXRlZFRvcCkgPD0gbWF4SGVpZ2h0KSkge1xuICAgICAgICAgICAgdGFyZ2V0RWxlbWVudC5zdHlsZS5oZWlnaHQgPSBjYWxjdWxhdGVkSGVpZ2h0ICsgJ3B4JztcbiAgICAgICAgfVxuICAgIH1cbn1cbi8qKlxuICogUmVzaXplcyB0aGUgZWxlbWVudCB0b3dhcmRzIHRoZSBub3J0aCBkaXJlY3Rpb24uXG4gKlxuICogQHBhcmFtIHtNb3VzZUV2ZW50IHwgVG91Y2hFdmVudH0gZSAtIFRoZSBldmVudCBvYmplY3QuXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuZnVuY3Rpb24gcmVzaXplTm9ydGgoZSkge1xuICAgIHZhciBjYWxjdWxhdGVWYWx1ZSA9IGZhbHNlO1xuICAgIHZhciBib3VuZGFyeVJlY3RWYWx1ZXM7XG4gICAgdmFyIHBhZ2VZID0gKGdldEV2ZW50VHlwZShlLnR5cGUpID09PSAnbW91c2UnKSA/IGUucGFnZVkgOiBlLnRvdWNoZXNbMF0ucGFnZVk7XG4gICAgdmFyIHRhcmdldFJlY3RWYWx1ZXMgPSBnZXRDbGllbnRSZWN0VmFsdWVzKHRhcmdldEVsZW1lbnQpO1xuICAgIHZhciBib3JkZXJWYWx1ZSA9IGlzTk9VKGNvbnRhaW5lckVsZW1lbnQpID8gMCA6IGNvbnRhaW5lckVsZW1lbnQub2Zmc2V0SGVpZ2h0IC0gY29udGFpbmVyRWxlbWVudC5jbGllbnRIZWlnaHQ7XG4gICAgaWYgKCFpc05PVShjb250YWluZXJFbGVtZW50KSkge1xuICAgICAgICBib3VuZGFyeVJlY3RWYWx1ZXMgPSBnZXRDbGllbnRSZWN0VmFsdWVzKGNvbnRhaW5lckVsZW1lbnQpO1xuICAgIH1cbiAgICBpZiAoIWlzTk9VKGNvbnRhaW5lckVsZW1lbnQpICYmICh0YXJnZXRSZWN0VmFsdWVzLnRvcCAtIGJvdW5kYXJ5UmVjdFZhbHVlcy50b3ApID4gMCkge1xuICAgICAgICBjYWxjdWxhdGVWYWx1ZSA9IHRydWU7XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzTk9VKGNvbnRhaW5lckVsZW1lbnQpICYmIHBhZ2VZID4gMCkge1xuICAgICAgICBjYWxjdWxhdGVWYWx1ZSA9IHRydWU7XG4gICAgfVxuICAgIGVsc2UgaWYgKCFpc05PVShjb250YWluZXJFbGVtZW50KSAmJlxuICAgICAgICAoTWF0aC5mbG9vcigodGFyZ2V0UmVjdFZhbHVlcy50b3AgLSBib3VuZGFyeVJlY3RWYWx1ZXMudG9wKSArIHRhcmdldFJlY3RWYWx1ZXMuaGVpZ2h0ICtcbiAgICAgICAgICAgIChib3VuZGFyeVJlY3RWYWx1ZXMuYm90dG9tIC0gdGFyZ2V0UmVjdFZhbHVlcy5ib3R0b20pKSAtIGJvcmRlclZhbHVlKSA8PSBtYXhIZWlnaHQpIHtcbiAgICAgICAgY2FsY3VsYXRlVmFsdWUgPSB0cnVlO1xuICAgIH1cbiAgICB2YXIgY3VycmVudEhlaWdodCA9IG9yaWdpbmFsSGVpZ2h0IC0gKHBhZ2VZIC0gb3JpZ2luYWxNb3VzZVkpO1xuICAgIGlmIChjYWxjdWxhdGVWYWx1ZSkge1xuICAgICAgICBpZiAoY3VycmVudEhlaWdodCA+PSBtaW5IZWlnaHQgJiYgY3VycmVudEhlaWdodCA8PSBtYXhIZWlnaHQpIHtcbiAgICAgICAgICAgIHZhciBjb250YWluZXJUb3AgPSAwO1xuICAgICAgICAgICAgaWYgKCFpc05PVShjb250YWluZXJFbGVtZW50KSkge1xuICAgICAgICAgICAgICAgIGNvbnRhaW5lclRvcCA9IGJvdW5kYXJ5UmVjdFZhbHVlcy50b3A7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgdG9wXzEgPSAob3JpZ2luYWxZIC0gY29udGFpbmVyVG9wKSArIChwYWdlWSAtIG9yaWdpbmFsTW91c2VZKTtcbiAgICAgICAgICAgIHRvcF8xID0gdG9wXzEgPiAwID8gdG9wXzEgOiAxO1xuICAgICAgICAgICAgdGFyZ2V0RWxlbWVudC5zdHlsZS5oZWlnaHQgPSBjdXJyZW50SGVpZ2h0ICsgJ3B4JztcbiAgICAgICAgICAgIHRhcmdldEVsZW1lbnQuc3R5bGUudG9wID0gdG9wXzEgKyAncHgnO1xuICAgICAgICB9XG4gICAgfVxufVxuLyoqXG4gKiBSZXNpemVzIHRoZSBlbGVtZW50IHRvd2FyZHMgdGhlIHdlc3QgZGlyZWN0aW9uLlxuICpcbiAqIEBwYXJhbSB7TW91c2VFdmVudCB8IFRvdWNoRXZlbnR9IGUgLSBUaGUgZXZlbnQgb2JqZWN0LlxuICogQHJldHVybnMge3ZvaWR9XG4gKi9cbmZ1bmN0aW9uIHJlc2l6ZVdlc3QoZSkge1xuICAgIHZhciBkb2N1bWVudFdpZHRoID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoO1xuICAgIHZhciBjYWxjdWxhdGVWYWx1ZSA9IGZhbHNlO1xuICAgIHZhciByZWN0VmFsdWVzO1xuICAgIGlmICghaXNOT1UoY29udGFpbmVyRWxlbWVudCkpIHtcbiAgICAgICAgcmVjdFZhbHVlcyA9IGdldENsaWVudFJlY3RWYWx1ZXMoY29udGFpbmVyRWxlbWVudCk7XG4gICAgfVxuICAgIHZhciBwYWdlWCA9IChnZXRFdmVudFR5cGUoZS50eXBlKSA9PT0gJ21vdXNlJykgPyBlLnBhZ2VYIDogZS50b3VjaGVzWzBdLnBhZ2VYO1xuICAgIHZhciB0YXJnZXRSZWN0VmFsdWVzID0gZ2V0Q2xpZW50UmVjdFZhbHVlcyh0YXJnZXRFbGVtZW50KTtcbiAgICB2YXIgYm9yZGVyVmFsdWUgPSBpc05PVShjb250YWluZXJFbGVtZW50KSA/IDAgOiBjb250YWluZXJFbGVtZW50Lm9mZnNldFdpZHRoIC0gY29udGFpbmVyRWxlbWVudC5jbGllbnRXaWR0aDtcbiAgICAvKiBlc2xpbnQtZGlzYWJsZSAqL1xuICAgIHZhciBsZWZ0ID0gaXNOT1UoY29udGFpbmVyRWxlbWVudCkgPyAwIDogcmVjdFZhbHVlcy5sZWZ0O1xuICAgIHZhciBjb250YWluZXJXaWR0aCA9IGlzTk9VKGNvbnRhaW5lckVsZW1lbnQpID8gMCA6IHJlY3RWYWx1ZXMud2lkdGg7XG4gICAgLyogZXNsaW50LWVuYWJsZSAqL1xuICAgIGlmIChpc05PVShyZXNpemVXZXN0V2lkdGgpKSB7XG4gICAgICAgIGlmICghaXNOT1UoY29udGFpbmVyRWxlbWVudCkpIHtcbiAgICAgICAgICAgIHJlc2l6ZVdlc3RXaWR0aCA9ICgoKHRhcmdldFJlY3RWYWx1ZXMubGVmdCAtIGxlZnQpIC0gYm9yZGVyVmFsdWUgLyAyKSkgKyB0YXJnZXRSZWN0VmFsdWVzLndpZHRoO1xuICAgICAgICAgICAgcmVzaXplV2VzdFdpZHRoID0gcmVzaXplV2VzdFdpZHRoICsgKGNvbnRhaW5lcldpZHRoIC0gYm9yZGVyVmFsdWUgLSByZXNpemVXZXN0V2lkdGgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmVzaXplV2VzdFdpZHRoID0gZG9jdW1lbnRXaWR0aDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoIWlzTk9VKGNvbnRhaW5lckVsZW1lbnQpICYmXG4gICAgICAgIChNYXRoLmZsb29yKCh0YXJnZXRSZWN0VmFsdWVzLmxlZnQgLSByZWN0VmFsdWVzLmxlZnQpICsgdGFyZ2V0UmVjdFZhbHVlcy53aWR0aCArXG4gICAgICAgICAgICAocmVjdFZhbHVlcy5yaWdodCAtIHRhcmdldFJlY3RWYWx1ZXMucmlnaHQpKSAtIGJvcmRlclZhbHVlKSA8PSBtYXhXaWR0aCkge1xuICAgICAgICBjYWxjdWxhdGVWYWx1ZSA9IHRydWU7XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzTk9VKGNvbnRhaW5lckVsZW1lbnQpICYmIHBhZ2VYID49IDApIHtcbiAgICAgICAgY2FsY3VsYXRlVmFsdWUgPSB0cnVlO1xuICAgIH1cbiAgICB2YXIgY2FsY3VsYXRlZFdpZHRoID0gb3JpZ2luYWxXaWR0aCAtIChwYWdlWCAtIG9yaWdpbmFsTW91c2VYKTtcbiAgICBpZiAoc2V0TGVmdCkge1xuICAgICAgICBjYWxjdWxhdGVkV2lkdGggPSAoY2FsY3VsYXRlZFdpZHRoID4gcmVzaXplV2VzdFdpZHRoKSA/IHJlc2l6ZVdlc3RXaWR0aCA6IGNhbGN1bGF0ZWRXaWR0aDtcbiAgICB9XG4gICAgaWYgKGNhbGN1bGF0ZVZhbHVlKSB7XG4gICAgICAgIGlmIChjYWxjdWxhdGVkV2lkdGggPj0gbWluV2lkdGggJiYgY2FsY3VsYXRlZFdpZHRoIDw9IG1heFdpZHRoKSB7XG4gICAgICAgICAgICB2YXIgY29udGFpbmVyTGVmdCA9IDA7XG4gICAgICAgICAgICBpZiAoIWlzTk9VKGNvbnRhaW5lckVsZW1lbnQpKSB7XG4gICAgICAgICAgICAgICAgY29udGFpbmVyTGVmdCA9IHJlY3RWYWx1ZXMubGVmdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBsZWZ0XzEgPSAob3JpZ2luYWxYIC0gY29udGFpbmVyTGVmdCkgKyAocGFnZVggLSBvcmlnaW5hbE1vdXNlWCk7XG4gICAgICAgICAgICBsZWZ0XzEgPSAobGVmdF8xID4gMCkgPyBsZWZ0XzEgOiAxO1xuICAgICAgICAgICAgaWYgKGNhbGN1bGF0ZWRXaWR0aCAhPT0gcHJldmlvdXNXaWR0aCAmJiBzZXRXaWR0aCkge1xuICAgICAgICAgICAgICAgIHRhcmdldEVsZW1lbnQuc3R5bGUud2lkdGggPSBjYWxjdWxhdGVkV2lkdGggKyAncHgnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHNldExlZnQpIHtcbiAgICAgICAgICAgICAgICB0YXJnZXRFbGVtZW50LnN0eWxlLmxlZnQgPSBsZWZ0XzEgKyAncHgnO1xuICAgICAgICAgICAgICAgIGlmIChsZWZ0XzEgPT09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0V2lkdGggPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNldFdpZHRoID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcHJldmlvdXNXaWR0aCA9IGNhbGN1bGF0ZWRXaWR0aDtcbn1cbi8qKlxuICogUmVzaXplcyB0aGUgZWxlbWVudCB0b3dhcmRzIHRoZSBlYXN0IGRpcmVjdGlvbi5cbiAqXG4gKiBAcGFyYW0ge01vdXNlRXZlbnQgfCBUb3VjaEV2ZW50fSBlIC0gVGhlIGV2ZW50IG9iamVjdC5cbiAqIEByZXR1cm5zIHt2b2lkfVxuICovXG5mdW5jdGlvbiByZXNpemVFYXN0KGUpIHtcbiAgICB2YXIgZG9jdW1lbnRXaWR0aCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aDtcbiAgICB2YXIgY2FsY3VsYXRlVmFsdWUgPSBmYWxzZTtcbiAgICB2YXIgY29udGFpbmVyUmVjdFZhbHVlcztcbiAgICBpZiAoIWlzTk9VKGNvbnRhaW5lckVsZW1lbnQpKSB7XG4gICAgICAgIGNvbnRhaW5lclJlY3RWYWx1ZXMgPSBnZXRDbGllbnRSZWN0VmFsdWVzKGNvbnRhaW5lckVsZW1lbnQpO1xuICAgIH1cbiAgICB2YXIgY29vcmRpbmF0ZXMgPSBlLnRvdWNoZXMgPyBlLmNoYW5nZWRUb3VjaGVzWzBdIDogZTtcbiAgICB2YXIgcGFnZVggPSBjb29yZGluYXRlcy5wYWdlWDtcbiAgICB2YXIgdGFyZ2V0UmVjdFZhbHVlcyA9IGdldENsaWVudFJlY3RWYWx1ZXModGFyZ2V0RWxlbWVudCk7XG4gICAgaWYgKCFpc05PVShjb250YWluZXJFbGVtZW50KSAmJiAoKCh0YXJnZXRSZWN0VmFsdWVzLmxlZnQgLSBjb250YWluZXJSZWN0VmFsdWVzLmxlZnQpICsgdGFyZ2V0UmVjdFZhbHVlcy53aWR0aCkgPD0gbWF4V2lkdGhcbiAgICAgICAgfHwgKHRhcmdldFJlY3RWYWx1ZXMucmlnaHQgLSBjb250YWluZXJSZWN0VmFsdWVzLmxlZnQpID49IHRhcmdldFJlY3RWYWx1ZXMud2lkdGgpKSB7XG4gICAgICAgIGNhbGN1bGF0ZVZhbHVlID0gdHJ1ZTtcbiAgICB9XG4gICAgZWxzZSBpZiAoaXNOT1UoY29udGFpbmVyRWxlbWVudCkgJiYgKGRvY3VtZW50V2lkdGggLSBwYWdlWCkgPiAwKSB7XG4gICAgICAgIGNhbGN1bGF0ZVZhbHVlID0gdHJ1ZTtcbiAgICB9XG4gICAgdmFyIGNhbGN1bGF0ZWRXaWR0aCA9IG9yaWdpbmFsV2lkdGggKyAocGFnZVggLSBvcmlnaW5hbE1vdXNlWCk7XG4gICAgdmFyIGNvbnRhaW5lckxlZnQgPSAwO1xuICAgIGlmICghaXNOT1UoY29udGFpbmVyRWxlbWVudCkpIHtcbiAgICAgICAgY29udGFpbmVyTGVmdCA9IGNvbnRhaW5lclJlY3RWYWx1ZXMubGVmdDtcbiAgICB9XG4gICAgaWYgKCgodGFyZ2V0UmVjdFZhbHVlcy5sZWZ0IC0gY29udGFpbmVyTGVmdCkgKyBjYWxjdWxhdGVkV2lkdGgpID4gbWF4V2lkdGgpIHtcbiAgICAgICAgY2FsY3VsYXRlVmFsdWUgPSBmYWxzZTtcbiAgICAgICAgaWYgKHRhcmdldEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKFJFU0laRV9XSVRISU5fVklFV1BPUlQpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGFyZ2V0RWxlbWVudC5zdHlsZS53aWR0aCA9IG1heFdpZHRoIC0gKHRhcmdldFJlY3RWYWx1ZXMubGVmdCAtIGNvbnRhaW5lckxlZnQpICsgJ3B4JztcbiAgICB9XG4gICAgaWYgKGNhbGN1bGF0ZVZhbHVlKSB7XG4gICAgICAgIGlmIChjYWxjdWxhdGVkV2lkdGggPj0gbWluV2lkdGggJiYgY2FsY3VsYXRlZFdpZHRoIDw9IG1heFdpZHRoKSB7XG4gICAgICAgICAgICB0YXJnZXRFbGVtZW50LnN0eWxlLndpZHRoID0gY2FsY3VsYXRlZFdpZHRoICsgJ3B4JztcbiAgICAgICAgfVxuICAgIH1cbn1cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4vKipcbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gbWluaW11bUhlaWdodCAtIHNwZWNpZmllcyB0aGUgbnVtYmVyXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNldE1pbkhlaWdodChtaW5pbXVtSGVpZ2h0KSB7XG4gICAgbWluSGVpZ2h0ID0gbWluaW11bUhlaWdodDtcbn1cbi8qKlxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZSAtIHNwZWNpZmllcyB0aGUgbnVtYmVyIHZhbHVlXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNldE1heFdpZHRoKHZhbHVlKSB7XG4gICAgbWF4V2lkdGggPSB2YWx1ZTtcbn1cbi8qKlxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZSAtIHNwZWNpZmllcyB0aGUgbnVtYmVyIHZhbHVlXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNldE1heEhlaWdodCh2YWx1ZSkge1xuICAgIG1heEhlaWdodCA9IHZhbHVlO1xufVxuLyoqXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZVJlc2l6ZSgpIHtcbiAgICB2YXIgaGFuZGxlcnMgPSB0YXJnZXRFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy4nICsgUkVTSVpFX0hBTkRMRVIpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaGFuZGxlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZGV0YWNoKGhhbmRsZXJzW2ldKTtcbiAgICB9XG4gICAgdmFyIGJvcmRlclJlc2l6ZXJzID0gdGFyZ2V0RWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZS1kaWFsb2ctYm9yZGVyLXJlc2l6ZScpO1xuICAgIGlmICghaXNOT1UoYm9yZGVyUmVzaXplcnMpKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYm9yZGVyUmVzaXplcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGRldGFjaChib3JkZXJSZXNpemVyc1tpXSk7XG4gICAgICAgIH1cbiAgICB9XG59XG4vKipcbiAqIEByZXR1cm5zIHt2b2lkfVxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVzaXplRGVzdHJveSgpIHtcbiAgICB0YXJnZXRFbGVtZW50ID0gbnVsbDtcbiAgICBzZWxlY3RlZEhhbmRsZXIgPSBudWxsO1xuICAgIGNvbnRhaW5lckVsZW1lbnQgPSBudWxsO1xuICAgIHJlc2l6ZVdlc3RXaWR0aCA9IG51bGw7XG4gICAgcmVzaXplU3RhcnQgPSBudWxsO1xuICAgIHJlc2l6ZSA9IG51bGw7XG4gICAgcmVzaXplRW5kID0gbnVsbDtcbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@syncfusion+ej2-popups@29.1.37/node_modules/@syncfusion/ej2-popups/src/common/resize.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@syncfusion+ej2-popups@29.1.37/node_modules/@syncfusion/ej2-popups/src/dialog/dialog.js":
/*!********************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@syncfusion+ej2-popups@29.1.37/node_modules/@syncfusion/ej2-popups/src/dialog/dialog.js ***!
  \********************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AnimationSettings: () => (/* binding */ AnimationSettings),\n/* harmony export */   ButtonProps: () => (/* binding */ ButtonProps),\n/* harmony export */   Dialog: () => (/* binding */ Dialog),\n/* harmony export */   DialogUtility: () => (/* binding */ DialogUtility)\n/* harmony export */ });\n/* harmony import */ var _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @syncfusion/ej2-base */ \"(ssr)/./node_modules/.pnpm/@syncfusion+ej2-base@29.1.36/node_modules/@syncfusion/ej2-base/index.js\");\n/* harmony import */ var _syncfusion_ej2_buttons__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @syncfusion/ej2-buttons */ \"(ssr)/./node_modules/.pnpm/@syncfusion+ej2-buttons@29.1.34/node_modules/@syncfusion/ej2-buttons/src/button/button.js\");\n/* harmony import */ var _popup_popup__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../popup/popup */ \"(ssr)/./node_modules/.pnpm/@syncfusion+ej2-popups@29.1.37/node_modules/@syncfusion/ej2-popups/src/popup/popup.js\");\n/* harmony import */ var _common_resize__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../common/resize */ \"(ssr)/./node_modules/.pnpm/@syncfusion+ej2-popups@29.1.37/node_modules/@syncfusion/ej2-popups/src/common/resize.js\");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\n\n\n\n\n\n\n\nvar ButtonProps = /** @class */ (function (_super) {\n    __extends(ButtonProps, _super);\n    function ButtonProps() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Property)(true)\n    ], ButtonProps.prototype, \"isFlat\", void 0);\n    __decorate([\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Property)()\n    ], ButtonProps.prototype, \"buttonModel\", void 0);\n    __decorate([\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Property)('Button')\n    ], ButtonProps.prototype, \"type\", void 0);\n    __decorate([\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Event)()\n    ], ButtonProps.prototype, \"click\", void 0);\n    return ButtonProps;\n}(_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.ChildProperty));\n\n/**\n * Configures the animation properties for both open and close the dialog.\n */\nvar AnimationSettings = /** @class */ (function (_super) {\n    __extends(AnimationSettings, _super);\n    function AnimationSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Property)('Fade')\n    ], AnimationSettings.prototype, \"effect\", void 0);\n    __decorate([\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Property)(400)\n    ], AnimationSettings.prototype, \"duration\", void 0);\n    __decorate([\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Property)(0)\n    ], AnimationSettings.prototype, \"delay\", void 0);\n    return AnimationSettings;\n}(_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.ChildProperty));\n\nvar ROOT = 'e-dialog';\nvar RTL = 'e-rtl';\nvar DLG_HEADER_CONTENT = 'e-dlg-header-content';\nvar DLG_HEADER = 'e-dlg-header';\nvar DLG_FOOTER_CONTENT = 'e-footer-content';\nvar MODAL_DLG = 'e-dlg-modal';\nvar DLG_CONTENT = 'e-dlg-content';\nvar DLG_CLOSE_ICON = 'e-icon-dlg-close';\nvar DLG_OVERLAY = 'e-dlg-overlay';\nvar DLG_TARGET = 'e-dlg-target';\nvar DLG_CONTAINER = 'e-dlg-container';\nvar SCROLL_DISABLED = 'e-scroll-disabled';\nvar DLG_PRIMARY_BUTTON = 'e-primary';\nvar ICON = 'e-icons';\nvar POPUP_ROOT = 'e-popup';\nvar DEVICE = 'e-device';\nvar FULLSCREEN = 'e-dlg-fullscreen';\nvar DLG_CLOSE_ICON_BTN = 'e-dlg-closeicon-btn';\nvar DLG_HIDE = 'e-popup-close';\nvar DLG_SHOW = 'e-popup-open';\nvar DLG_UTIL_DEFAULT_TITLE = 'Information';\nvar DLG_UTIL_ROOT = 'e-scroll-disabled';\nvar DLG_UTIL_ALERT = 'e-alert-dialog';\nvar DLG_UTIL_CONFIRM = 'e-confirm-dialog';\nvar DLG_RESIZABLE = 'e-dlg-resizable';\nvar DLG_RESTRICT_LEFT_VALUE = 'e-restrict-left';\nvar DLG_RESTRICT_WIDTH_VALUE = 'e-resize-viewport';\nvar DLG_REF_ELEMENT = 'e-dlg-ref-element';\nvar DLG_USER_ACTION_CLOSED = 'user action';\nvar DLG_CLOSE_ICON_CLOSED = 'close icon';\nvar DLG_ESCAPE_CLOSED = 'escape';\nvar DLG_OVERLAYCLICK_CLOSED = 'overlayClick';\nvar DLG_DRAG = 'e-draggable';\n/**\n * Represents the dialog component that displays the information and get input from the user.\n * Two types of dialog components are `Modal and Modeless (non-modal)` depending on its interaction with parent application.\n * ```html\n * <div id=\"dialog\"></div>\n * ```\n * ```typescript\n * <script>\n *   var dialogObj = new Dialog({ header: 'Dialog' });\n *   dialogObj.appendTo(\"#dialog\");\n * </script>\n * ```\n */\nvar Dialog = /** @class */ (function (_super) {\n    __extends(Dialog, _super);\n    /*\n     * * Constructor for creating the widget\n     *\n     * @param\n     * @param\n     * @hidden\n     */\n    function Dialog(options, element) {\n        var _this = _super.call(this, options, element) || this;\n        _this.needsID = true;\n        return _this;\n    }\n    /**\n     *Initialize the control rendering\n     *\n     * @returns {void}\n     * @private\n     */\n    Dialog.prototype.render = function () {\n        this.initialize();\n        this.initRender();\n        this.wireEvents();\n        if (this.width === '100%') {\n            this.element.style.width = '';\n        }\n        if (this.minHeight !== '') {\n            this.element.style.minHeight = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.formatUnit)(this.minHeight);\n        }\n        if (this.enableResize) {\n            this.setResize();\n            if (this.isModal) {\n                this.isModelResize = true;\n            }\n            if (this.animationSettings.effect === 'None') {\n                this.getMinHeight();\n            }\n        }\n        this.renderComplete();\n    };\n    Dialog.prototype.initializeValue = function () {\n        this.dlgClosedBy = DLG_USER_ACTION_CLOSED;\n    };\n    /**\n     *Initialize the event handler\n     *\n     * @returns {void}\n     * @private\n     */\n    Dialog.prototype.preRender = function () {\n        var _this = this;\n        this.initializeValue();\n        this.headerContent = null;\n        this.allowMaxHeight = true;\n        this.preventVisibility = true;\n        this.clonedEle = this.element.cloneNode(true);\n        this.closeIconClickEventHandler = function (event) {\n            _this.dlgClosedBy = DLG_CLOSE_ICON_CLOSED;\n            _this.hide(event);\n        };\n        this.dlgOverlayClickEventHandler = function (event) {\n            _this.dlgClosedBy = DLG_OVERLAYCLICK_CLOSED;\n            event.preventFocus = false;\n            _this.trigger('overlayClick', event, function (overlayClickEventArgs) {\n                if (!overlayClickEventArgs.preventFocus) {\n                    _this.focusContent();\n                }\n                _this.dlgClosedBy = DLG_USER_ACTION_CLOSED;\n            });\n        };\n        var localeText = { close: 'Close' };\n        this.l10n = new _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.L10n('dialog', localeText, this.locale);\n        this.checkPositionData();\n        if ((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(this.target)) {\n            var prevOnChange = this.isProtectedOnChange;\n            this.isProtectedOnChange = true;\n            this.target = document.body;\n            this.isProtectedOnChange = prevOnChange;\n        }\n    };\n    Dialog.prototype.updatePersistData = function () {\n        if (this.enablePersistence) {\n            this.setProperties({ width: parseFloat(this.element.style.width), height: parseFloat(this.element.style.height),\n                position: { X: parseFloat(this.dragObj.element.style.left), Y: parseFloat(this.dragObj.element.style.top) } }, true);\n        }\n    };\n    Dialog.prototype.isNumberValue = function (value) {\n        var isNumber = /^[-+]?\\d*\\.?\\d+$/.test(value);\n        return isNumber;\n    };\n    Dialog.prototype.checkPositionData = function () {\n        if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(this.position)) {\n            if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(this.position.X) && (typeof (this.position.X) !== 'number')) {\n                var isNumber = this.isNumberValue(this.position.X);\n                if (isNumber) {\n                    var prevOnChange = this.isProtectedOnChange;\n                    this.isProtectedOnChange = true;\n                    this.position.X = parseFloat(this.position.X);\n                    this.isProtectedOnChange = prevOnChange;\n                }\n            }\n            if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(this.position.Y) && (typeof (this.position.Y) !== 'number')) {\n                var isNumber = this.isNumberValue(this.position.Y);\n                if (isNumber) {\n                    var prevOnChange = this.isProtectedOnChange;\n                    this.isProtectedOnChange = true;\n                    this.position.Y = parseFloat(this.position.Y);\n                    this.isProtectedOnChange = prevOnChange;\n                }\n            }\n        }\n    };\n    Dialog.prototype.getEle = function (list, selector) {\n        var element = undefined;\n        for (var i = 0; i < list.length; i++) {\n            if (list[i].classList.contains(selector)) {\n                element = list[i];\n                break;\n            }\n        }\n        return element;\n    };\n    /* istanbul ignore next */\n    Dialog.prototype.getMinHeight = function () {\n        var computedHeaderHeight = '0px';\n        var computedFooterHeight = '0px';\n        if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(this.element.querySelector('.' + DLG_HEADER_CONTENT))) {\n            computedHeaderHeight = getComputedStyle(this.headerContent).height;\n        }\n        var footerEle = this.getEle(this.element.children, DLG_FOOTER_CONTENT);\n        if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(footerEle)) {\n            computedFooterHeight = getComputedStyle(footerEle).height;\n        }\n        var headerHeight = parseInt(computedHeaderHeight.slice(0, computedHeaderHeight.indexOf('p')), 10);\n        var footerHeight = parseInt(computedFooterHeight.slice(0, computedFooterHeight.indexOf('p')), 10);\n        (0,_common_resize__WEBPACK_IMPORTED_MODULE_1__.setMinHeight)(headerHeight + 30 + (isNaN(footerHeight) ? 0 : footerHeight));\n        return (headerHeight + 30 + footerHeight);\n    };\n    Dialog.prototype.onResizeStart = function (args, dialogObj) {\n        dialogObj.trigger('resizeStart', args);\n        if (!args.cancel && this.isModelResize && !(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(this.dlgContainer) && this.dlgContainer.classList.contains('e-dlg-' + this.position.X + '-' + this.position.Y)) {\n            this.setPopupPosition();\n            this.dlgContainer.classList.remove('e-dlg-' + this.position.X + '-' + this.position.Y);\n            var targetType = this.getTargetContainer(this.target);\n            if (targetType instanceof Element) {\n                var computedStyle = window.getComputedStyle(targetType);\n                if (computedStyle.getPropertyValue('direction') === 'rtl') {\n                    this.element.style.position = 'absolute';\n                }\n                else {\n                    this.element.style.position = 'relative';\n                }\n            }\n            else {\n                this.element.style.position = 'relative';\n            }\n            if (this.element.classList.contains(DLG_RESTRICT_LEFT_VALUE)) {\n                this.element.classList.remove(DLG_RESTRICT_LEFT_VALUE);\n            }\n            this.isModelResize = false;\n        }\n        return args.cancel;\n    };\n    Dialog.prototype.onResizing = function (args, dialogObj) {\n        dialogObj.trigger('resizing', args);\n    };\n    Dialog.prototype.onResizeComplete = function (args, dialogObj) {\n        dialogObj.trigger('resizeStop', args);\n        this.updatePersistData();\n    };\n    Dialog.prototype.setResize = function () {\n        if (this.enableResize) {\n            this.element.classList.add(DLG_RESIZABLE);\n            var computedHeight = getComputedStyle(this.element).minHeight;\n            var computedWidth = getComputedStyle(this.element).minWidth;\n            var direction = '';\n            for (var i = 0; i < this.resizeHandles.length; i++) {\n                if (this.resizeHandles[i] === 'All') {\n                    direction = 'south north east west north-east north-west south-east south-west';\n                    break;\n                }\n                else {\n                    var directionValue = '';\n                    switch (this.resizeHandles[i].toString()) {\n                        case 'SouthEast':\n                            directionValue = 'south-east';\n                            break;\n                        case 'SouthWest':\n                            directionValue = 'south-west';\n                            break;\n                        case 'NorthEast':\n                            directionValue = 'north-east';\n                            break;\n                        case 'NorthWest':\n                            directionValue = 'north-west';\n                            break;\n                        default:\n                            directionValue = this.resizeHandles[i].toString();\n                            break;\n                    }\n                    direction += directionValue.toLocaleLowerCase() + ' ';\n                }\n            }\n            if (this.enableRtl && direction.trim() === 'south-east') {\n                direction = 'south-west';\n            }\n            else if (this.enableRtl && direction.trim() === 'south-west') {\n                direction = 'south-east';\n            }\n            if (this.isModal && this.enableRtl) {\n                this.element.classList.add(DLG_RESTRICT_LEFT_VALUE);\n            }\n            else if (this.isModal && this.target === document.body) {\n                this.element.classList.add(DLG_RESTRICT_WIDTH_VALUE);\n            }\n            (0,_common_resize__WEBPACK_IMPORTED_MODULE_1__.createResize)({\n                element: this.element,\n                direction: direction,\n                minHeight: parseInt(computedHeight.slice(0, computedWidth.indexOf('p')), 10),\n                maxHeight: this.targetEle.clientHeight,\n                minWidth: parseInt(computedWidth.slice(0, computedWidth.indexOf('p')), 10),\n                maxWidth: this.targetEle.clientWidth,\n                boundary: this.target === document.body ? null : this.targetEle,\n                resizeBegin: this.onResizeStart.bind(this),\n                resizeComplete: this.onResizeComplete.bind(this),\n                resizing: this.onResizing.bind(this),\n                proxy: this\n            });\n            this.wireWindowResizeEvent();\n        }\n        else {\n            (0,_common_resize__WEBPACK_IMPORTED_MODULE_1__.removeResize)();\n            this.unWireWindowResizeEvent();\n            if (this.isModal) {\n                this.element.classList.remove(DLG_RESTRICT_LEFT_VALUE);\n            }\n            else {\n                this.element.classList.remove(DLG_RESTRICT_WIDTH_VALUE);\n            }\n            this.element.classList.remove(DLG_RESIZABLE);\n        }\n    };\n    Dialog.prototype.getFocusElement = function (target) {\n        var value = 'input,select,textarea,button:enabled,a,[contenteditable=\"true\"],[tabindex]';\n        var items = target.querySelectorAll(value);\n        return { element: items[items.length - 1] };\n    };\n    /* istanbul ignore next */\n    Dialog.prototype.keyDown = function (event) {\n        var _this = this;\n        if (event.keyCode === 9) {\n            if (this.isModal) {\n                var buttonObj = void 0;\n                if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(this.btnObj)) {\n                    buttonObj = this.btnObj[this.btnObj.length - 1];\n                }\n                if (((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(this.btnObj)) && (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(this.ftrTemplateContent))) {\n                    buttonObj = this.getFocusElement(this.ftrTemplateContent);\n                }\n                if ((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(this.btnObj) && (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(this.ftrTemplateContent) && !(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(this.contentEle)) {\n                    buttonObj = this.getFocusElement(this.contentEle);\n                }\n                if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(buttonObj) && document.activeElement === buttonObj.element && !event.shiftKey) {\n                    event.preventDefault();\n                    this.focusableElements(this.element).focus();\n                }\n                if (document.activeElement === this.focusableElements(this.element) && event.shiftKey) {\n                    event.preventDefault();\n                    if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(buttonObj)) {\n                        buttonObj.element.focus();\n                    }\n                }\n            }\n        }\n        var element = document.activeElement;\n        var isTagName = (['input', 'textarea'].indexOf(element.tagName.toLowerCase()) > -1);\n        var isContentEdit = false;\n        if (!isTagName) {\n            isContentEdit = element.hasAttribute('contenteditable') && element.getAttribute('contenteditable') === 'true';\n        }\n        if (event.keyCode === 27 && this.closeOnEscape) {\n            this.dlgClosedBy = DLG_ESCAPE_CLOSED;\n            var query = document.querySelector('.e-popup-open:not(.e-dialog)');\n            // 'document.querySelector' is used to find the elements rendered based on body\n            if (!(!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(query) && !query.classList.contains('e-toolbar-pop') && !query.classList.contains('e-slider-tooltip'))) {\n                this.hide(event);\n            }\n        }\n        if ((event.keyCode === 13 && !event.ctrlKey && element.tagName.toLowerCase() !== 'textarea' &&\n            isTagName && !(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(this.primaryButtonEle)) ||\n            (event.keyCode === 13 && event.ctrlKey && (element.tagName.toLowerCase() === 'textarea' ||\n                isContentEdit)) && !(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(this.primaryButtonEle)) {\n            var buttonIndex_1;\n            var firstPrimary = this.buttons.some(function (data, index) {\n                buttonIndex_1 = index;\n                var buttonModel = data.buttonModel;\n                return !(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(buttonModel) && buttonModel.isPrimary === true;\n            });\n            if (firstPrimary && typeof (this.buttons[buttonIndex_1].click) === 'function' && !this.primaryButtonEle.disabled) {\n                setTimeout(function () {\n                    _this.buttons[buttonIndex_1].click.call(_this, event);\n                });\n            }\n        }\n    };\n    /**\n     * Initialize the control rendering\n     *\n     * @returns {void}\n     * @private\n     */\n    Dialog.prototype.initialize = function () {\n        if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(this.target)) {\n            this.targetEle = ((typeof this.target) === 'string') ?\n                document.querySelector(this.target) : this.target;\n        }\n        if (!this.isBlazorServerRender()) {\n            (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.addClass)([this.element], ROOT);\n        }\n        if (_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Browser.isDevice) {\n            (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.addClass)([this.element], DEVICE);\n        }\n        if (!this.isBlazorServerRender()) {\n            this.setCSSClass();\n        }\n        this.setMaxHeight();\n    };\n    /**\n     * Initialize the rendering\n     *\n     * @returns {void}\n     * @private\n     */\n    Dialog.prototype.initRender = function () {\n        var _this = this;\n        this.initialRender = true;\n        if (!this.isBlazorServerRender()) {\n            (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.attributes)(this.element, { role: 'dialog' });\n        }\n        if (this.zIndex === 1000) {\n            this.setzIndex(this.element, false);\n            this.calculatezIndex = true;\n        }\n        else {\n            this.calculatezIndex = false;\n        }\n        this.setTargetContent();\n        if (this.header !== '' && !(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(this.header)) {\n            this.setHeader();\n        }\n        this.renderCloseIcon();\n        this.setContent();\n        if (this.footerTemplate !== '' && !(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(this.footerTemplate)) {\n            this.setFooterTemplate();\n        }\n        else if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(this.buttons[0]) && !(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(this.buttons[0].buttonModel)) {\n            this.setButton();\n        }\n        if (this.allowDragging && (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(this.headerContent))) {\n            this.setAllowDragging();\n        }\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.attributes)(this.element, { 'aria-modal': (this.isModal ? 'true' : 'false') });\n        if (this.isModal) {\n            this.setIsModal();\n        }\n        if (this.element.classList.contains(DLG_UTIL_ALERT) !== true && this.element.classList.contains(DLG_UTIL_CONFIRM) !== true\n            && !(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(this.element.parentElement)) {\n            var parentEle = this.isModal ? this.dlgContainer.parentElement : this.element.parentElement;\n            this.refElement = this.createElement('div', { className: DLG_REF_ELEMENT });\n            parentEle.insertBefore(this.refElement, (this.isModal ? this.dlgContainer : this.element));\n        }\n        if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(this.targetEle)) {\n            if (this.isModal) {\n                this.targetEle.appendChild(this.dlgContainer);\n            }\n            else {\n                this.targetEle.appendChild(this.element);\n            }\n        }\n        this.popupObj = new _popup_popup__WEBPACK_IMPORTED_MODULE_2__.Popup(this.element, {\n            height: this.height,\n            width: this.width,\n            zIndex: this.zIndex,\n            relateTo: this.target,\n            actionOnScroll: 'none',\n            enableRtl: this.enableRtl,\n            // eslint-disable-next-line\n            open: function (event) {\n                var eventArgs = {\n                    container: _this.isModal ? _this.dlgContainer : _this.element,\n                    element: _this.element,\n                    target: _this.target,\n                    preventFocus: false\n                };\n                if (_this.enableResize) {\n                    _this.resetResizeIcon();\n                }\n                _this.trigger('open', eventArgs, function (openEventArgs) {\n                    if (!openEventArgs.preventFocus) {\n                        _this.focusContent();\n                    }\n                });\n            },\n            // eslint-disable-next-line\n            close: function (event) {\n                if (_this.isModal) {\n                    (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.addClass)([_this.dlgOverlay], 'e-fade');\n                }\n                _this.unBindEvent(_this.element);\n                if (_this.isModal) {\n                    _this.dlgContainer.style.display = 'none';\n                }\n                _this.trigger('close', _this.closeArgs);\n                var activeEle = document.activeElement;\n                if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(activeEle) && !(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)((activeEle).blur)) {\n                    activeEle.blur();\n                }\n                if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(_this.storeActiveElement) && !(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(_this.storeActiveElement.focus)) {\n                    _this.storeActiveElement.focus();\n                }\n            }\n        });\n        this.positionChange();\n        this.setEnableRTL();\n        if (!this.isBlazorServerRender()) {\n            (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.addClass)([this.element], DLG_HIDE);\n            if (this.isModal) {\n                this.setOverlayZindex();\n            }\n        }\n        if (this.visible) {\n            this.show();\n            if (this.isModal) {\n                var targetType = this.getTargetContainer(this.target);\n                if (targetType instanceof Element) {\n                    var computedStyle = window.getComputedStyle(targetType);\n                    if (computedStyle.getPropertyValue('direction') === 'rtl') {\n                        this.setPopupPosition();\n                    }\n                }\n            }\n        }\n        else {\n            if (this.isModal) {\n                this.dlgOverlay.style.display = 'none';\n            }\n        }\n        this.initialRender = false;\n    };\n    Dialog.prototype.getTargetContainer = function (targetValue) {\n        var targetElement = null;\n        if (typeof targetValue === 'string') {\n            if (targetValue.startsWith('#')) {\n                targetElement = document.getElementById(targetValue.substring(1));\n            }\n            else if (targetValue.startsWith('.')) {\n                var elements = document.getElementsByClassName(targetValue.substring(1));\n                targetElement = elements.length > 0 ? elements[0] : null;\n            }\n            else {\n                if (!(targetValue instanceof HTMLElement) && targetValue !== document.body) {\n                    targetElement = document.querySelector(targetValue);\n                }\n            }\n        }\n        else if (targetValue instanceof HTMLElement) {\n            targetElement = targetValue;\n        }\n        return targetElement;\n    };\n    Dialog.prototype.resetResizeIcon = function () {\n        var dialogConHeight = this.getMinHeight();\n        if (this.targetEle.offsetHeight < dialogConHeight) {\n            var className = this.enableRtl ? 'e-south-west' : 'e-south-east';\n            var resizeIcon = this.element.querySelector('.' + className);\n            if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(resizeIcon)) {\n                resizeIcon.style.bottom = '-' + dialogConHeight.toString() + 'px';\n            }\n        }\n    };\n    Dialog.prototype.setOverlayZindex = function (zIndexValue) {\n        var zIndex;\n        if ((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(zIndexValue)) {\n            zIndex = parseInt(this.element.style.zIndex, 10) ? parseInt(this.element.style.zIndex, 10) : this.zIndex;\n        }\n        else {\n            zIndex = zIndexValue;\n        }\n        this.dlgOverlay.style.zIndex = (zIndex - 1).toString();\n        this.dlgContainer.style.zIndex = zIndex.toString();\n    };\n    Dialog.prototype.positionChange = function () {\n        if (this.isModal) {\n            if (!isNaN(parseFloat(this.position.X)) && !isNaN(parseFloat(this.position.Y))) {\n                this.setPopupPosition();\n            }\n            else if ((!isNaN(parseFloat(this.position.X)) && isNaN(parseFloat(this.position.Y)))\n                || (isNaN(parseFloat(this.position.X)) && !isNaN(parseFloat(this.position.Y)))) {\n                this.setPopupPosition();\n            }\n            else {\n                this.element.style.top = '0px';\n                this.element.style.left = '0px';\n                this.dlgContainer.classList.add('e-dlg-' + this.position.X + '-' + this.position.Y);\n            }\n        }\n        else {\n            this.setPopupPosition();\n        }\n    };\n    Dialog.prototype.setPopupPosition = function () {\n        this.popupObj.setProperties({\n            position: {\n                X: this.position.X, Y: this.position.Y\n            }\n        });\n    };\n    Dialog.prototype.setAllowDragging = function () {\n        var _this = this;\n        var handleContent = '.' + DLG_HEADER_CONTENT;\n        if (!this.element.classList.contains(DLG_DRAG)) {\n            this.dragObj = new _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Draggable(this.element, {\n                clone: false,\n                isDragScroll: true,\n                abort: '.e-dlg-closeicon-btn',\n                handle: handleContent,\n                dragStart: function (event) {\n                    _this.trigger('dragStart', event, function (dragEventArgs) {\n                        if ((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isBlazor)()) {\n                            dragEventArgs.bindEvents(event.dragElement);\n                        }\n                    });\n                },\n                dragStop: function (event) {\n                    if (_this.isModal) {\n                        _this.IsDragStop = true;\n                        if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(_this.position)) {\n                            _this.dlgContainer.classList.remove('e-dlg-' + _this.position.X + '-' + _this.position.Y);\n                        }\n                        // Reset the dialog position after drag completion.\n                        var targetType = _this.getTargetContainer(_this.target);\n                        if (targetType instanceof Element) {\n                            var computedStyle = window.getComputedStyle(targetType);\n                            if (computedStyle.getPropertyValue('direction') === 'rtl') {\n                                _this.element.style.position = 'absolute';\n                            }\n                            else {\n                                _this.element.style.position = 'relative';\n                            }\n                        }\n                        else {\n                            _this.element.style.position = 'relative';\n                        }\n                    }\n                    _this.trigger('dragStop', event);\n                    _this.isModelResize = false;\n                    _this.element.classList.remove(DLG_RESTRICT_LEFT_VALUE);\n                    _this.updatePersistData();\n                },\n                drag: function (event) {\n                    _this.trigger('drag', event);\n                }\n            });\n            if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(this.targetEle)) {\n                this.dragObj.dragArea = this.targetEle;\n            }\n        }\n    };\n    Dialog.prototype.setButton = function () {\n        if (!this.isBlazorServerRender()) {\n            this.buttonContent = [];\n            this.btnObj = [];\n            for (var i = 0; i < this.buttons.length; i++) {\n                if ((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(this.buttons[i].buttonModel)) {\n                    continue;\n                }\n                var buttonType = !(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(this.buttons[i].type) ?\n                    this.buttons[i].type.toLowerCase() : 'button';\n                var btn = this.createElement('button', { className: this.cssClass, attrs: { type: buttonType, tabindex: '0' } });\n                this.buttonContent.push(btn.outerHTML);\n            }\n            this.setFooterTemplate();\n        }\n        var footerBtn;\n        for (var i = 0, childNodes = this.element.children; i < childNodes.length; i++) {\n            if (childNodes[i].classList.contains(DLG_FOOTER_CONTENT)) {\n                footerBtn = childNodes[i].querySelectorAll('button');\n            }\n        }\n        for (var i = 0; i < this.buttons.length; i++) {\n            if ((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(this.buttons[i].buttonModel)) {\n                continue;\n            }\n            if (!this.isBlazorServerRender()) {\n                this.btnObj[i] = new _syncfusion_ej2_buttons__WEBPACK_IMPORTED_MODULE_3__.Button(this.buttons[i].buttonModel);\n            }\n            if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(this.ftrTemplateContent) && footerBtn.length > 0) {\n                if (typeof (this.buttons[i].click) === 'function') {\n                    _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.EventHandler.add(footerBtn[i], 'click', this.buttons[i].click, this);\n                }\n                if (typeof (this.buttons[i].click) === 'object') {\n                    _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.EventHandler.add(footerBtn[i], 'click', this.buttonClickHandler.bind(this, i), this);\n                }\n            }\n            if (!this.isBlazorServerRender() && !(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(this.ftrTemplateContent)) {\n                this.btnObj[i].appendTo(this.ftrTemplateContent.children[i]);\n                if (this.buttons[i].isFlat) {\n                    this.btnObj[i].element.classList.add('e-flat');\n                }\n                this.primaryButtonEle = this.element.getElementsByClassName('e-primary')[0];\n            }\n        }\n    };\n    Dialog.prototype.buttonClickHandler = function (index) {\n        this.trigger('buttons[' + index + '].click', {});\n    };\n    Dialog.prototype.setContent = function () {\n        this.contentEle = this.createElement('div', { className: DLG_CONTENT, id: this.element.id + '_dialog-content' });\n        if (this.headerEle) {\n            (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.attributes)(this.element, { 'aria-describedby': this.element.id + '_title' + ' ' + this.element.id + '_dialog-content' });\n        }\n        else {\n            (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.attributes)(this.element, { 'aria-describedby': this.element.id + '_dialog-content' });\n        }\n        if (this.innerContentElement) {\n            this.contentEle.appendChild(this.innerContentElement);\n        }\n        else if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(this.content) && this.content !== '' || !this.initialRender) {\n            if (typeof (this.content) === 'string' && !(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isBlazor)()) {\n                this.setTemplate(this.content, this.contentEle, 'content');\n            }\n            else if (this.content instanceof HTMLElement) {\n                this.contentEle.appendChild(this.content);\n            }\n            else {\n                this.setTemplate(this.content, this.contentEle, 'content');\n            }\n        }\n        if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(this.headerContent)) {\n            this.element.insertBefore(this.contentEle, this.element.children[1]);\n        }\n        else {\n            this.element.insertBefore(this.contentEle, this.element.children[0]);\n        }\n        if (this.height === 'auto') {\n            if (!this.isBlazorServerRender() && _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Browser.isIE && this.element.style.width === '' && !(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(this.width)) {\n                this.element.style.width = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.formatUnit)(this.width);\n            }\n            this.setMaxHeight();\n        }\n    };\n    Dialog.prototype.setTemplate = function (template, toElement, prop) {\n        var templateFn;\n        var templateProps;\n        if (toElement.classList.contains(DLG_HEADER)) {\n            templateProps = this.element.id + 'header';\n        }\n        else if (toElement.classList.contains(DLG_FOOTER_CONTENT)) {\n            templateProps = this.element.id + 'footerTemplate';\n        }\n        else {\n            templateProps = this.element.id + 'content';\n        }\n        var templateValue;\n        if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(template.outerHTML)) {\n            toElement.appendChild(template);\n        }\n        else if ((typeof template === 'string') || (typeof template !== 'string') || ((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isBlazor)() && !this.isStringTemplate)) {\n            if ((typeof template === 'string')) {\n                template = this.sanitizeHelper(template);\n            }\n            if (this.isVue || typeof template !== 'string') {\n                templateFn = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.compile)(template);\n                templateValue = template;\n            }\n            else {\n                toElement.innerHTML = template;\n            }\n        }\n        var fromElements = [];\n        if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(templateFn)) {\n            var isString = ((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isBlazor)() &&\n                !this.isStringTemplate && (templateValue).indexOf('<div>Blazor') === 0) ?\n                this.isStringTemplate : true;\n            for (var _i = 0, _a = templateFn({}, this, prop, templateProps, isString); _i < _a.length; _i++) {\n                var item = _a[_i];\n                fromElements.push(item);\n            }\n            (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.append)([].slice.call(fromElements), toElement);\n        }\n    };\n    /*\n     * @returns {void}\n     * @hidden\n     * @value\n     */\n    Dialog.prototype.sanitizeHelper = function (value) {\n        if (this.enableHtmlSanitizer) {\n            var dialogItem = _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.SanitizeHtmlHelper.beforeSanitize();\n            var beforeEvent = {\n                cancel: false,\n                helper: null\n            };\n            (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.extend)(dialogItem, dialogItem, beforeEvent);\n            this.trigger('beforeSanitizeHtml', dialogItem);\n            if (dialogItem.cancel && !(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(dialogItem.helper)) {\n                value = dialogItem.helper(value);\n            }\n            else if (!dialogItem.cancel) {\n                value = _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.SanitizeHtmlHelper.serializeValue(dialogItem, value);\n            }\n        }\n        return value;\n    };\n    Dialog.prototype.setMaxHeight = function () {\n        if (!this.allowMaxHeight) {\n            return;\n        }\n        var display = this.element.style.display;\n        this.element.style.display = 'none';\n        this.element.style.maxHeight = (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(this.target)) && (this.targetEle.offsetHeight < window.innerHeight) ?\n            (this.targetEle.offsetHeight - 20) + 'px' : (window.innerHeight - 20) + 'px';\n        this.element.style.display = display;\n        if (_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Browser.isIE && this.height === 'auto' && !(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(this.contentEle)\n            && this.element.offsetHeight < this.contentEle.offsetHeight) {\n            this.element.style.height = 'inherit';\n        }\n    };\n    Dialog.prototype.setEnableRTL = function () {\n        if (!this.isBlazorServerRender()) {\n            if (this.enableRtl) {\n                (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.addClass)([this.element], RTL);\n            }\n            else {\n                (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.removeClass)([this.element], RTL);\n            }\n        }\n        if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(this.element.querySelector('.e-resize-handle'))) {\n            (0,_common_resize__WEBPACK_IMPORTED_MODULE_1__.removeResize)();\n            this.setResize();\n        }\n    };\n    Dialog.prototype.setTargetContent = function () {\n        var _this = this;\n        if ((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(this.content) || this.content === '') {\n            var isContent = this.element.innerHTML.replace(/\\s|<(\\/?|\\/?)(!--!--)>/g, '') !== '';\n            if (this.element.children.length > 0 || isContent) {\n                this.innerContentElement = document.createDocumentFragment();\n                [].slice.call(this.element.childNodes).forEach(function (el) {\n                    if (el.nodeType !== 8) {\n                        _this.innerContentElement.appendChild(el);\n                    }\n                });\n            }\n        }\n    };\n    Dialog.prototype.setHeader = function () {\n        if (this.headerEle) {\n            this.headerEle.innerHTML = '';\n        }\n        else {\n            this.headerEle = this.createElement('div', { id: this.element.id + '_title', className: DLG_HEADER });\n        }\n        this.createHeaderContent();\n        this.headerContent.appendChild(this.headerEle);\n        this.setTemplate(this.header, this.headerEle, 'header');\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.attributes)(this.element, { 'aria-describedby': this.element.id + '_title' });\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.attributes)(this.element, { 'aria-labelledby': this.element.id + '_dialog-header' });\n        this.element.insertBefore(this.headerContent, this.element.children[0]);\n        if (this.allowDragging && (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(this.headerContent))) {\n            this.setAllowDragging();\n        }\n    };\n    Dialog.prototype.setFooterTemplate = function () {\n        if (this.ftrTemplateContent) {\n            this.ftrTemplateContent.innerHTML = '';\n        }\n        else {\n            this.ftrTemplateContent = this.createElement('div', {\n                className: DLG_FOOTER_CONTENT\n            });\n        }\n        if (this.footerTemplate !== '' && !(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(this.footerTemplate)) {\n            this.setTemplate(this.footerTemplate, this.ftrTemplateContent, 'footerTemplate');\n        }\n        else {\n            this.ftrTemplateContent.innerHTML = this.buttonContent.join('');\n        }\n        this.element.appendChild(this.ftrTemplateContent);\n    };\n    Dialog.prototype.createHeaderContent = function () {\n        if ((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(this.headerContent)) {\n            this.headerContent = this.createElement('div', { id: this.element.id + '_dialog-header', className: DLG_HEADER_CONTENT });\n        }\n    };\n    Dialog.prototype.renderCloseIcon = function () {\n        if (this.showCloseIcon) {\n            this.closeIcon = this.createElement('button', { className: DLG_CLOSE_ICON_BTN, attrs: { type: 'button' } });\n            this.closeIconBtnObj = new _syncfusion_ej2_buttons__WEBPACK_IMPORTED_MODULE_3__.Button({ cssClass: 'e-flat', iconCss: DLG_CLOSE_ICON + ' ' + ICON });\n            this.closeIconTitle();\n            if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(this.headerContent)) {\n                (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.prepend)([this.closeIcon], this.headerContent);\n            }\n            else {\n                this.createHeaderContent();\n                (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.prepend)([this.closeIcon], this.headerContent);\n                this.element.insertBefore(this.headerContent, this.element.children[0]);\n            }\n            this.closeIconBtnObj.appendTo(this.closeIcon);\n        }\n    };\n    Dialog.prototype.closeIconTitle = function () {\n        this.l10n.setLocale(this.locale);\n        var closeIconTitle = this.l10n.getConstant('close');\n        this.closeIcon.setAttribute('title', closeIconTitle);\n        this.closeIcon.setAttribute('aria-label', closeIconTitle);\n    };\n    Dialog.prototype.setCSSClass = function (oldCSSClass) {\n        if (oldCSSClass) {\n            (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.removeClass)([this.element], oldCSSClass.split(' '));\n            if (this.isModal && !(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(this.dlgContainer)) {\n                (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.removeClass)([this.dlgContainer], oldCSSClass.split(' '));\n            }\n        }\n        if (this.cssClass) {\n            (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.addClass)([this.element], this.cssClass.split(' '));\n            if (this.isModal && !(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(this.dlgContainer)) {\n                (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.addClass)([this.dlgContainer], this.cssClass.split(' '));\n            }\n        }\n    };\n    Dialog.prototype.setIsModal = function () {\n        this.dlgContainer = this.createElement('div', { className: DLG_CONTAINER });\n        this.setCSSClass();\n        this.element.classList.remove(DLG_SHOW);\n        this.element.parentNode.insertBefore(this.dlgContainer, this.element);\n        this.dlgContainer.appendChild(this.element);\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.addClass)([this.element], MODAL_DLG);\n        this.dlgOverlay = this.createElement('div', { className: DLG_OVERLAY });\n        this.dlgOverlay.style.zIndex = (this.zIndex - 1).toString();\n        this.dlgContainer.appendChild(this.dlgOverlay);\n    };\n    Dialog.prototype.getValidFocusNode = function (items) {\n        var node;\n        for (var u = 0; u < items.length; u++) {\n            node = items[u];\n            if ((node.clientHeight > 0 || (node.tagName.toLowerCase() === 'a' && node.hasAttribute('href'))) && node.tabIndex > -1 &&\n                !node.disabled && !this.disableElement(node, '[disabled],[aria-disabled=\"true\"],[type=\"hidden\"]')) {\n                return node;\n            }\n            else {\n                node = null;\n            }\n        }\n        return node;\n    };\n    Dialog.prototype.focusableElements = function (content) {\n        if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(content)) {\n            var value = 'input,select,textarea,button,a,[contenteditable=\"true\"],[tabindex]';\n            var items = content.querySelectorAll(value);\n            return this.getValidFocusNode(items);\n        }\n        return null;\n    };\n    Dialog.prototype.getAutoFocusNode = function (container) {\n        var node = container.querySelector('.' + DLG_CLOSE_ICON_BTN);\n        var value = '[autofocus]';\n        var items = container.querySelectorAll(value);\n        var validNode = this.getValidFocusNode(items);\n        if ((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isBlazor)()) {\n            this.primaryButtonEle = this.element.getElementsByClassName('e-primary')[0];\n        }\n        if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(validNode)) {\n            node = validNode;\n        }\n        else {\n            validNode = this.focusableElements(this.contentEle);\n            if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(validNode)) {\n                return node = validNode;\n            }\n            else if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(this.primaryButtonEle)) {\n                return this.element.querySelector('.' + DLG_PRIMARY_BUTTON);\n            }\n        }\n        return node;\n    };\n    Dialog.prototype.disableElement = function (element, t) {\n        var elementMatch = element ? element.matches || element.webkitMatchesSelector || element.msGetRegionContent : null;\n        if (elementMatch) {\n            for (; element; element = element.parentNode) {\n                if (element instanceof Element && elementMatch.call(element, t)) {\n                    /* istanbul ignore next */\n                    return element;\n                }\n            }\n        }\n        return null;\n    };\n    Dialog.prototype.focusContent = function () {\n        var element = this.getAutoFocusNode(this.element);\n        var node = !(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(element) ? element : this.element;\n        var userAgent = _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Browser.userAgent;\n        if (userAgent.indexOf('MSIE ') > 0 || userAgent.indexOf('Trident/') > 0) {\n            this.element.focus();\n        }\n        node.focus();\n        this.unBindEvent(this.element);\n        this.bindEvent(this.element);\n    };\n    Dialog.prototype.bindEvent = function (element) {\n        _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.EventHandler.add(element, 'keydown', this.keyDown, this);\n    };\n    Dialog.prototype.unBindEvent = function (element) {\n        _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.EventHandler.remove(element, 'keydown', this.keyDown);\n    };\n    Dialog.prototype.updateSanitizeContent = function () {\n        if (!this.isBlazorServerRender()) {\n            this.contentEle.innerHTML = this.sanitizeHelper(this.content);\n        }\n    };\n    Dialog.prototype.isBlazorServerRender = function () {\n        return (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isBlazor)() && this.isServerRendered;\n    };\n    /**\n     * Module required function\n     *\n     * @returns {void}\n     * @private\n     */\n    Dialog.prototype.getModuleName = function () {\n        return 'dialog';\n    };\n    /**\n     * Called internally if any of the property value changed\n     *\n     * @param {DialogModel} newProp - specifies the new property\n     * @param {DialogModel} oldProp - specifies the old property\n     * @private\n     * @returns {void}\n     */\n    Dialog.prototype.onPropertyChanged = function (newProp, oldProp) {\n        if (!this.element.classList.contains(ROOT)) {\n            return;\n        }\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'content':\n                    if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(this.content) && this.content !== '') {\n                        if (this.isBlazorServerRender()) {\n                            this.contentEle = this.element.querySelector('.e-dlg-content');\n                        }\n                        if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(this.contentEle) && this.contentEle.getAttribute('role') !== 'dialog') {\n                            if (!this.isBlazorServerRender()) {\n                                this.contentEle.innerHTML = '';\n                            }\n                            if (typeof (this.content) === 'function') {\n                                this.clearTemplate(['content']);\n                                (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.detach)(this.contentEle);\n                                this.contentEle = null;\n                                this.setContent();\n                            }\n                            else {\n                                if (typeof (this.content) === 'string') {\n                                    this.updateSanitizeContent();\n                                }\n                                else {\n                                    this.contentEle.appendChild(this.content);\n                                }\n                            }\n                            this.setMaxHeight();\n                        }\n                        else {\n                            this.setContent();\n                        }\n                    }\n                    else if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(this.contentEle)) {\n                        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.detach)(this.contentEle);\n                        this.contentEle = null;\n                    }\n                    break;\n                case 'header':\n                    if (this.header === '' || (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(this.header)) {\n                        if (this.headerEle) {\n                            (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.detach)(this.headerEle);\n                            this.headerEle = null;\n                        }\n                    }\n                    else {\n                        this.setHeader();\n                    }\n                    break;\n                case 'footerTemplate':\n                    if (this.footerTemplate === '' || (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(this.footerTemplate)) {\n                        if (!this.ftrTemplateContent) {\n                            return;\n                        }\n                        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.detach)(this.ftrTemplateContent);\n                        this.ftrTemplateContent = null;\n                        this.buttons = [{}];\n                    }\n                    else {\n                        this.setFooterTemplate();\n                        this.buttons = [{}];\n                    }\n                    break;\n                case 'showCloseIcon':\n                    if (this.element.getElementsByClassName(DLG_CLOSE_ICON).length > 0) {\n                        if (!this.showCloseIcon && (this.header === '' || (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(this.header))) {\n                            (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.detach)(this.headerContent);\n                            this.headerContent = null;\n                        }\n                        else if (!this.showCloseIcon) {\n                            (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.detach)(this.closeIcon);\n                        }\n                    }\n                    else {\n                        this.renderCloseIcon();\n                        this.wireEvents();\n                    }\n                    break;\n                case 'locale':\n                    if (this.showCloseIcon) {\n                        this.closeIconTitle();\n                    }\n                    break;\n                case 'visible':\n                    if (this.visible) {\n                        this.show();\n                    }\n                    else {\n                        this.hide();\n                    }\n                    break;\n                case 'isModal':\n                    this.updateIsModal();\n                    break;\n                case 'height':\n                    (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.setStyleAttribute)(this.element, { 'height': (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.formatUnit)(newProp.height) });\n                    this.updatePersistData();\n                    break;\n                case 'width':\n                    (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.setStyleAttribute)(this.element, { 'width': (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.formatUnit)(newProp.width) });\n                    this.updatePersistData();\n                    break;\n                case 'zIndex':\n                    this.popupObj.zIndex = this.zIndex;\n                    if (this.isModal) {\n                        this.setOverlayZindex(this.zIndex);\n                    }\n                    if (this.element.style.zIndex !== this.zIndex.toString()) {\n                        this.calculatezIndex = false;\n                    }\n                    break;\n                case 'cssClass':\n                    this.setCSSClass(oldProp.cssClass);\n                    break;\n                case 'buttons': {\n                    this.unWireButtonEvents();\n                    this.destroyButtons();\n                    if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(this.ftrTemplateContent)) {\n                        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.detach)(this.ftrTemplateContent);\n                        this.ftrTemplateContent = null;\n                    }\n                    this.footerTemplate = '';\n                    this.setButton();\n                    break;\n                }\n                case 'allowDragging':\n                    if (this.allowDragging && (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(this.headerContent))) {\n                        this.setAllowDragging();\n                    }\n                    else {\n                        this.dragObj.destroy();\n                    }\n                    break;\n                case 'target':\n                    this.setTarget(newProp.target);\n                    break;\n                case 'position':\n                    this.checkPositionData();\n                    if (this.isModal) {\n                        var positionX = this.position.X;\n                        var positionY = this.position.Y;\n                        if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(oldProp.position)) {\n                            if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(oldProp.position.X)) {\n                                positionX = oldProp.position.X;\n                            }\n                            if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(oldProp.position.Y)) {\n                                positionY = oldProp.position.Y;\n                            }\n                        }\n                        if (this.dlgContainer.classList.contains('e-dlg-' + positionX + '-' + positionY)) {\n                            this.dlgContainer.classList.remove('e-dlg-' + positionX + '-' + positionY);\n                        }\n                    }\n                    this.positionChange();\n                    this.updatePersistData();\n                    break;\n                case 'enableRtl':\n                    this.setEnableRTL();\n                    break;\n                case 'enableResize':\n                    this.setResize();\n                    this.isModelResize = this.enableResize && this.isModal;\n                    if (this.enableResize && this.dialogOpen) {\n                        this.resetResizeIcon();\n                    }\n                    break;\n                case 'minHeight':\n                    if (this.minHeight !== '') {\n                        this.element.style.minHeight = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.formatUnit)(this.minHeight);\n                    }\n                    break;\n            }\n        }\n    };\n    Dialog.prototype.setTarget = function (target) {\n        this.popupObj.relateTo = target;\n        this.target = target;\n        this.targetEle = ((typeof this.target) === 'string') ?\n            document.querySelector(this.target) : this.target;\n        if (this.dragObj) {\n            this.dragObj.dragArea = this.targetEle;\n        }\n        this.setMaxHeight();\n        if (this.isModal) {\n            this.updateIsModal();\n        }\n        if (this.enableResize) {\n            this.setResize();\n        }\n        if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(this.targetEle)) {\n            if (this.isModal && !(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(this.dlgContainer)) {\n                this.targetEle.appendChild(this.dlgContainer);\n            }\n            else if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(this.element)) {\n                this.targetEle.appendChild(this.element);\n            }\n        }\n    };\n    Dialog.prototype.updateIsModal = function () {\n        this.element.setAttribute('aria-modal', this.isModal ? 'true' : 'false');\n        if (this.isModal) {\n            if ((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(this.dlgOverlay)) {\n                this.setIsModal();\n                this.element.style.top = '0px';\n                this.element.style.left = '0px';\n                if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(this.targetEle)) {\n                    this.targetEle.appendChild(this.dlgContainer);\n                }\n            }\n        }\n        else {\n            (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.removeClass)([this.element], MODAL_DLG);\n            (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.removeClass)([document.body], [DLG_TARGET, SCROLL_DISABLED]);\n            (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.detach)(this.dlgOverlay);\n            while (this.dlgContainer.firstChild) {\n                this.dlgContainer.parentElement.insertBefore(this.dlgContainer.firstChild, this.dlgContainer);\n            }\n            this.dlgContainer.parentElement.removeChild(this.dlgContainer);\n        }\n        if (this.visible) {\n            this.show();\n        }\n        this.positionChange();\n        if (this.isModal && this.dlgOverlay) {\n            _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.EventHandler.add(this.dlgOverlay, 'click', this.dlgOverlayClickEventHandler, this);\n        }\n    };\n    Dialog.prototype.setzIndex = function (zIndexElement, setPopupZindex) {\n        var prevOnChange = this.isProtectedOnChange;\n        this.isProtectedOnChange = true;\n        var currentzIndex = (0,_popup_popup__WEBPACK_IMPORTED_MODULE_2__.getZindexPartial)(zIndexElement);\n        this.zIndex = currentzIndex > this.zIndex ? currentzIndex : this.zIndex;\n        this.isProtectedOnChange = prevOnChange;\n        if (setPopupZindex) {\n            this.popupObj.zIndex = this.zIndex;\n        }\n    };\n    Dialog.prototype.windowResizeHandler = function () {\n        (0,_common_resize__WEBPACK_IMPORTED_MODULE_1__.setMaxWidth)(this.targetEle.clientWidth);\n        (0,_common_resize__WEBPACK_IMPORTED_MODULE_1__.setMaxHeight)(this.targetEle.clientHeight);\n        this.setMaxHeight();\n    };\n    /**\n     * Get the properties to be maintained in the persisted state.\n     *\n     * @returns {void}\n     * @private\n     */\n    Dialog.prototype.getPersistData = function () {\n        return this.addOnPersist(['width', 'height', 'position']);\n    };\n    Dialog.prototype.removeAllChildren = function (element) {\n        while (element.children[0]) {\n            this.removeAllChildren(element.children[0]);\n            element.removeChild(element.children[0]);\n        }\n    };\n    /**\n     * To destroy the widget\n     *\n     * @returns {void}\n     */\n    Dialog.prototype.destroy = function () {\n        if (this.isDestroyed) {\n            return;\n        }\n        var classArray = [RTL, MODAL_DLG, DLG_RESIZABLE, DLG_RESTRICT_LEFT_VALUE, FULLSCREEN, DEVICE];\n        var attrs = ['role', 'aria-modal', 'aria-labelledby', 'aria-describedby', 'aria-grabbed', 'tabindex', 'style'];\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.removeClass)([this.targetEle], [DLG_TARGET, SCROLL_DISABLED]);\n        if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(this.element) && this.element.classList.contains(FULLSCREEN)) {\n            (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.removeClass)([document.body], [DLG_TARGET, SCROLL_DISABLED]);\n        }\n        if (this.isModal) {\n            (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.removeClass)([(!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(this.targetEle) ? this.targetEle : document.body)], SCROLL_DISABLED);\n        }\n        this.unWireEvents();\n        this.unWireButtonEvents();\n        this.destroyButtons();\n        if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(this.closeIconBtnObj)) {\n            this.closeIconBtnObj.destroy();\n        }\n        if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(this.dragObj)) {\n            this.dragObj.destroy();\n        }\n        if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(this.popupObj.element) && this.popupObj.element.classList.contains(POPUP_ROOT)) {\n            this.popupObj.destroy();\n        }\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.removeClass)([this.element], classArray);\n        if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(this.cssClass) && this.cssClass !== '') {\n            (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.removeClass)([this.element], this.cssClass.split(' '));\n        }\n        if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(this.refElement) && !(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(this.refElement.parentElement)) {\n            this.refElement.parentElement.insertBefore((this.isModal ? this.dlgContainer : this.element), this.refElement);\n            (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.detach)(this.refElement);\n            this.refElement = undefined;\n        }\n        if (this.isModal) {\n            (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.detach)(this.dlgOverlay);\n            this.dlgContainer.parentNode.insertBefore(this.element, this.dlgContainer);\n            (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.detach)(this.dlgContainer);\n        }\n        this.element.innerHTML = this.clonedEle.innerHTML;\n        for (var i = 0; i < attrs.length; i++) {\n            this.element.removeAttribute(attrs[i]);\n        }\n        this.ftrTemplateContent = null;\n        this.headerContent = null;\n        if (!this.isReact && !this.isVue && !(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(this.contentEle)) {\n            this.removeAllChildren(this.contentEle);\n        }\n        this.contentEle = null;\n        (0,_common_resize__WEBPACK_IMPORTED_MODULE_1__.resizeDestroy)();\n        _super.prototype.destroy.call(this);\n        // eslint-disable-next-line\n        if (this.isReact) {\n            this.clearTemplate();\n        }\n    };\n    Dialog.prototype.wireWindowResizeEvent = function () {\n        this.boundWindowResizeHandler = this.windowResizeHandler.bind(this);\n        window.addEventListener('resize', this.boundWindowResizeHandler);\n    };\n    Dialog.prototype.unWireWindowResizeEvent = function () {\n        window.removeEventListener('resize', this.boundWindowResizeHandler);\n        this.boundWindowResizeHandler = null;\n    };\n    /**\n     * Binding event to the element while widget creation\n     *\n     * @returns {void}\n     * @hidden\n     */\n    Dialog.prototype.wireEvents = function () {\n        if (this.showCloseIcon) {\n            _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.EventHandler.add(this.closeIcon, 'click', this.closeIconClickEventHandler, this);\n        }\n        if (this.isModal && this.dlgOverlay) {\n            _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.EventHandler.add(this.dlgOverlay, 'click', this.dlgOverlayClickEventHandler, this);\n        }\n    };\n    /**\n     * Unbinding event to the element while widget destroy\n     *\n     * @returns {void}\n     * @hidden\n     */\n    Dialog.prototype.unWireEvents = function () {\n        if (this.showCloseIcon) {\n            _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.EventHandler.remove(this.closeIcon, 'click', this.closeIconClickEventHandler);\n        }\n        if (this.isModal) {\n            _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.EventHandler.remove(this.dlgOverlay, 'click', this.dlgOverlayClickEventHandler);\n        }\n    };\n    /**\n     * Refreshes the dialog's position when the user changes its header and footer height/width dynamically.\n     *\n     * @returns {void}\n     */\n    Dialog.prototype.refreshPosition = function () {\n        this.popupObj.refreshPosition();\n        if (this.element.classList.contains(MODAL_DLG)) {\n            this.positionChange();\n        }\n    };\n    /**\n     * Returns the current width and height of the Dialog\n     *\n     * @returns {DialogDimension}- returns the dialog element Dimension.\n     * @public\n     */\n    Dialog.prototype.getDimension = function () {\n        var dialogWidth = this.element.offsetWidth;\n        var dialogHeight = this.element.offsetHeight;\n        return { width: dialogWidth, height: dialogHeight };\n    };\n    /**\n     * Opens the dialog if it is in hidden state.\n     * To open the dialog with full screen width, set the parameter to true.\n     *\n     * @param { boolean } isFullScreen - Enable the fullScreen Dialog.\n     * @returns {void}\n     */\n    Dialog.prototype.show = function (isFullScreen) {\n        var _this = this;\n        if (!this.element.classList.contains(ROOT)) {\n            return;\n        }\n        if (!this.element.classList.contains(DLG_SHOW) || (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(isFullScreen))) {\n            if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(isFullScreen)) {\n                this.fullScreen(isFullScreen);\n            }\n            var eventArgs_1 = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isBlazor)() ? {\n                cancel: false,\n                element: this.element,\n                container: this.isModal ? this.dlgContainer : this.element,\n                maxHeight: this.element.style.maxHeight\n            } : {\n                cancel: false,\n                element: this.element,\n                container: this.isModal ? this.dlgContainer : this.element,\n                target: this.target,\n                maxHeight: this.element.style.maxHeight\n            };\n            this.trigger('beforeOpen', eventArgs_1, function (beforeOpenArgs) {\n                if (!beforeOpenArgs.cancel) {\n                    if (_this.element.style.maxHeight !== eventArgs_1.maxHeight) {\n                        _this.allowMaxHeight = false;\n                        _this.element.style.maxHeight = eventArgs_1.maxHeight;\n                    }\n                    if (_this.enableResize && _this.boundWindowResizeHandler == null && !_this.initialRender) {\n                        _this.wireWindowResizeEvent();\n                    }\n                    _this.storeActiveElement = document.activeElement;\n                    _this.element.tabIndex = -1;\n                    if (_this.isModal && (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(_this.dlgOverlay))) {\n                        _this.dlgOverlay.style.display = 'block';\n                        _this.dlgContainer.style.display = 'flex';\n                        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.removeClass)([_this.dlgOverlay], 'e-fade');\n                        if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(_this.targetEle)) {\n                            if (_this.targetEle === document.body) {\n                                _this.dlgContainer.style.position = 'fixed';\n                            }\n                            else {\n                                _this.dlgContainer.style.position = 'absolute';\n                            }\n                            _this.dlgOverlay.style.position = 'absolute';\n                            var targetType = _this.getTargetContainer(_this.target);\n                            if (targetType instanceof Element) {\n                                var computedStyle = window.getComputedStyle(targetType);\n                                if (computedStyle.getPropertyValue('direction') === 'rtl') {\n                                    _this.element.style.position = 'absolute';\n                                }\n                                else {\n                                    _this.element.style.position = 'relative';\n                                }\n                            }\n                            else {\n                                _this.element.style.position = 'relative';\n                            }\n                            (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.addClass)([_this.targetEle], [DLG_TARGET, SCROLL_DISABLED]);\n                        }\n                        else {\n                            (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.addClass)([document.body], [DLG_TARGET, SCROLL_DISABLED]);\n                        }\n                    }\n                    var openAnimation = {\n                        name: (_this.animationSettings.effect === 'None' && _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.animationMode === 'Enable') ? 'Zoom' + 'In' : _this.animationSettings.effect + 'In',\n                        duration: _this.animationSettings.duration,\n                        delay: _this.animationSettings.delay\n                    };\n                    var zIndexElement = (_this.isModal) ? _this.element.parentElement : _this.element;\n                    if (_this.calculatezIndex) {\n                        _this.setzIndex(zIndexElement, true);\n                        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.setStyleAttribute)(_this.element, { 'zIndex': _this.zIndex });\n                        if (_this.isModal) {\n                            _this.setOverlayZindex(_this.zIndex);\n                        }\n                    }\n                    // eslint-disable-next-line\n                    (_this.animationSettings.effect === 'None' && _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.animationMode === 'Enable') ? _this.popupObj.show(openAnimation) : ((_this.animationSettings.effect === 'None') ? _this.popupObj.show() : _this.popupObj.show(openAnimation));\n                    if (_this.isModal) {\n                        var targetType = _this.getTargetContainer(_this.target);\n                        if (targetType instanceof Element) {\n                            var computedStyle = window.getComputedStyle(targetType);\n                            if (computedStyle.getPropertyValue('direction') === 'rtl' && !_this.IsDragStop) {\n                                _this.setPopupPosition();\n                            }\n                        }\n                    }\n                    _this.dialogOpen = true;\n                    var prevOnChange = _this.isProtectedOnChange;\n                    _this.isProtectedOnChange = true;\n                    _this.visible = true;\n                    _this.preventVisibility = true;\n                    _this.isProtectedOnChange = prevOnChange;\n                }\n            });\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if (this.isReact) {\n            this.renderReactTemplates();\n        }\n    };\n    /**\n     * Closes the dialog if it is in visible state.\n     *\n     * @param { Event } event - specifies the event\n     * @returns {void}\n     */\n    Dialog.prototype.hide = function (event) {\n        var _this = this;\n        if (!this.element.classList.contains(ROOT)) {\n            return;\n        }\n        if (this.preventVisibility) {\n            var eventArgs = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isBlazor)() ? {\n                cancel: false,\n                isInteracted: event ? true : false,\n                element: this.element,\n                container: this.isModal ? this.dlgContainer : this.element,\n                event: event\n            } : {\n                cancel: false,\n                isInteracted: event ? true : false,\n                element: this.element,\n                target: this.target,\n                container: this.isModal ? this.dlgContainer : this.element,\n                event: event,\n                closedBy: this.dlgClosedBy\n            };\n            this.closeArgs = eventArgs;\n            this.trigger('beforeClose', eventArgs, function (beforeCloseArgs) {\n                if (!beforeCloseArgs.cancel) {\n                    if (_this.enableResize) {\n                        _this.unWireWindowResizeEvent();\n                    }\n                    var closeAnimation = {\n                        name: (_this.animationSettings.effect === 'None' && _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.animationMode === 'Enable') ? 'Zoom' + 'Out' : _this.animationSettings.effect + 'Out',\n                        duration: _this.animationSettings.duration,\n                        delay: _this.animationSettings.delay\n                    };\n                    if (_this.animationSettings.effect === 'None' && _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.animationMode === 'Enable') {\n                        _this.popupObj.hide(closeAnimation);\n                    }\n                    else if (_this.animationSettings.effect === 'None') {\n                        _this.popupObj.hide();\n                    }\n                    else {\n                        _this.popupObj.hide(closeAnimation);\n                    }\n                    setTimeout(function () {\n                        if (_this.isModal) {\n                            if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(_this.targetEle) && _this.targetEle.classList.contains(DLG_TARGET) &&\n                                _this.targetEle.classList.contains(SCROLL_DISABLED)) {\n                                (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.removeClass)([_this.targetEle], [DLG_TARGET, SCROLL_DISABLED]);\n                            }\n                        }\n                        if (document.body.classList.contains(DLG_TARGET) &&\n                            document.body.classList.contains(SCROLL_DISABLED)) {\n                            (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.removeClass)([document.body], [DLG_TARGET, SCROLL_DISABLED]);\n                        }\n                    }, (_this.animationSettings.duration + _this.animationSettings.delay));\n                    _this.dialogOpen = false;\n                    var prevOnChange = _this.isProtectedOnChange;\n                    _this.isProtectedOnChange = true;\n                    _this.visible = false;\n                    _this.preventVisibility = false;\n                    _this.isProtectedOnChange = prevOnChange;\n                }\n                _this.dlgClosedBy = DLG_USER_ACTION_CLOSED;\n            });\n        }\n    };\n    /**\n     * Specifies to view the Full screen Dialog.\n     *\n     * @param {boolean} args - specifies the arguments\n     * @returns {boolean} - returns the boolean value\n     * @private\n     */\n    Dialog.prototype.fullScreen = function (args) {\n        /* eslint-disable */\n        var top = this.element.offsetTop;\n        var left = this.element.offsetLeft;\n        /* eslint-enable */\n        if (args) {\n            if (!this.isModal) {\n                this.element.style.top = document.scrollingElement.scrollTop + 'px';\n            }\n            (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.addClass)([this.element], FULLSCREEN);\n            var display = this.element.style.display;\n            this.element.style.display = 'none';\n            this.element.style.maxHeight = (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(this.target)) ?\n                (this.targetEle.offsetHeight) + 'px' : (window.innerHeight) + 'px';\n            this.element.style.display = display;\n            (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.addClass)([document.body], [DLG_TARGET, SCROLL_DISABLED]);\n            if (this.allowDragging && !(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(this.dragObj)) {\n                this.dragObj.destroy();\n            }\n        }\n        else {\n            (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.removeClass)([this.element], FULLSCREEN);\n            (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.removeClass)([document.body], [DLG_TARGET, SCROLL_DISABLED]);\n            if (this.allowDragging && (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(this.headerContent))) {\n                this.setAllowDragging();\n            }\n        }\n        return args;\n    };\n    /**\n     * Returns the dialog button instances.\n     * Based on that, you can dynamically change the button states.\n     *\n     * @param { number } index - Index of the button.\n     * @returns {Button} - returns the button element\n     */\n    Dialog.prototype.getButtons = function (index) {\n        if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(index)) {\n            return this.btnObj[index];\n        }\n        return this.btnObj;\n    };\n    Dialog.prototype.unWireButtonEvents = function () {\n        if (this.buttons.length > 0 && this.footerTemplate === '' && this.ftrTemplateContent) {\n            for (var i = 0; i < this.buttons.length; i++) {\n                if (this.buttons[i].click && typeof (this.buttons[i].click) === 'function'\n                    && this.ftrTemplateContent.children[i]) {\n                    _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.EventHandler.remove(this.ftrTemplateContent.children[i], 'click', this.buttons[i].click);\n                }\n            }\n        }\n    };\n    Dialog.prototype.destroyButtons = function () {\n        if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(this.btnObj)) {\n            for (var i = 0; i < this.btnObj.length; i++) {\n                if (this.btnObj[i] && !this.btnObj[i].isDestroyed) {\n                    this.btnObj[i].destroy();\n                }\n            }\n        }\n    };\n    __decorate([\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Property)('')\n    ], Dialog.prototype, \"content\", void 0);\n    __decorate([\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Property)(true)\n    ], Dialog.prototype, \"enableHtmlSanitizer\", void 0);\n    __decorate([\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Property)(false)\n    ], Dialog.prototype, \"enablePersistence\", void 0);\n    __decorate([\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Property)(false)\n    ], Dialog.prototype, \"showCloseIcon\", void 0);\n    __decorate([\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Property)(false)\n    ], Dialog.prototype, \"isModal\", void 0);\n    __decorate([\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Property)('')\n    ], Dialog.prototype, \"header\", void 0);\n    __decorate([\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Property)(true)\n    ], Dialog.prototype, \"visible\", void 0);\n    __decorate([\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Property)(false)\n    ], Dialog.prototype, \"enableResize\", void 0);\n    __decorate([\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Property)(['South-East'])\n    ], Dialog.prototype, \"resizeHandles\", void 0);\n    __decorate([\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Property)('auto')\n    ], Dialog.prototype, \"height\", void 0);\n    __decorate([\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Property)('')\n    ], Dialog.prototype, \"minHeight\", void 0);\n    __decorate([\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Property)('100%')\n    ], Dialog.prototype, \"width\", void 0);\n    __decorate([\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Property)('')\n    ], Dialog.prototype, \"cssClass\", void 0);\n    __decorate([\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Property)(1000)\n    ], Dialog.prototype, \"zIndex\", void 0);\n    __decorate([\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Property)(null)\n    ], Dialog.prototype, \"target\", void 0);\n    __decorate([\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Property)('')\n    ], Dialog.prototype, \"footerTemplate\", void 0);\n    __decorate([\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Property)(false)\n    ], Dialog.prototype, \"allowDragging\", void 0);\n    __decorate([\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Collection)([{}], ButtonProps)\n    ], Dialog.prototype, \"buttons\", void 0);\n    __decorate([\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Property)(true)\n    ], Dialog.prototype, \"closeOnEscape\", void 0);\n    __decorate([\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Complex)({}, AnimationSettings)\n    ], Dialog.prototype, \"animationSettings\", void 0);\n    __decorate([\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Complex)({ X: 'center', Y: 'center' }, _popup_popup__WEBPACK_IMPORTED_MODULE_2__.PositionData)\n    ], Dialog.prototype, \"position\", void 0);\n    __decorate([\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Event)()\n    ], Dialog.prototype, \"created\", void 0);\n    __decorate([\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Event)()\n    ], Dialog.prototype, \"open\", void 0);\n    __decorate([\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Event)()\n    ], Dialog.prototype, \"beforeSanitizeHtml\", void 0);\n    __decorate([\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Event)()\n    ], Dialog.prototype, \"beforeOpen\", void 0);\n    __decorate([\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Event)()\n    ], Dialog.prototype, \"close\", void 0);\n    __decorate([\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Event)()\n    ], Dialog.prototype, \"beforeClose\", void 0);\n    __decorate([\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Event)()\n    ], Dialog.prototype, \"dragStart\", void 0);\n    __decorate([\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Event)()\n    ], Dialog.prototype, \"dragStop\", void 0);\n    __decorate([\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Event)()\n    ], Dialog.prototype, \"drag\", void 0);\n    __decorate([\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Event)()\n    ], Dialog.prototype, \"overlayClick\", void 0);\n    __decorate([\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Event)()\n    ], Dialog.prototype, \"resizeStart\", void 0);\n    __decorate([\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Event)()\n    ], Dialog.prototype, \"resizing\", void 0);\n    __decorate([\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Event)()\n    ], Dialog.prototype, \"resizeStop\", void 0);\n    __decorate([\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Event)()\n    ], Dialog.prototype, \"destroyed\", void 0);\n    Dialog = __decorate([\n        _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.NotifyPropertyChanges\n    ], Dialog);\n    return Dialog;\n}(_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Component));\n\n/**\n * Base for creating Alert and Confirmation Dialog through util method.\n */\n// eslint-disable-next-line\nvar DialogUtility;\n(function (DialogUtility) {\n    /**\n     * An alert dialog box is used to display warning like messages to the users.\n     * ```\n     * Eg : DialogUtility.alert('Alert message');\n     *\n     * ```\n     */\n    /* istanbul ignore next */\n    /**\n     *\n     * @param {AlertDialogArgs} args - specifies the string\n     * @returns {Dialog} - returns the dialog element.\n     */\n    function alert(args) {\n        var dialogElement = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.createElement)('div', { 'className': DLG_UTIL_ALERT });\n        document.body.appendChild(dialogElement);\n        var alertDialogObj;\n        var okButtonModel = [{\n                buttonModel: { isPrimary: true, content: 'OK' },\n                click: function () {\n                    this.hide();\n                }\n            }];\n        if (typeof (args) === 'string') {\n            alertDialogObj = createDialog({ content: args,\n                position: { X: 'center', Y: 'top' },\n                isModal: true, header: DLG_UTIL_DEFAULT_TITLE,\n                buttons: okButtonModel }, dialogElement);\n        }\n        else {\n            alertDialogObj = createDialog(alertOptions(args), dialogElement);\n        }\n        alertDialogObj.close = function () {\n            if (args && args.close) {\n                args.close.apply(alertDialogObj);\n            }\n            alertDialogObj.destroy();\n            if (alertDialogObj.element.classList.contains('e-dlg-modal')) {\n                alertDialogObj.element.parentElement.remove();\n                alertDialogObj.target.classList.remove(DLG_UTIL_ROOT);\n            }\n            else {\n                alertDialogObj.element.remove();\n            }\n        };\n        return alertDialogObj;\n    }\n    DialogUtility.alert = alert;\n    /**\n     * A confirm dialog displays a specified message along with ‘OK’ and ‘Cancel’ button.\n     * ```\n     * Eg : DialogUtility.confirm('Confirm dialog message');\n     *\n     * ```\n     */\n    /* istanbul ignore next */\n    /**\n     *\n     * @param {ConfirmDialogArgs} args - specifies the args\n     * @returns {Dialog} - returns te element\n     */\n    function confirm(args) {\n        var dialogElement = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.createElement)('div', { 'className': DLG_UTIL_CONFIRM });\n        document.body.appendChild(dialogElement);\n        var confirmDialogObj;\n        var okCancelButtonModel = [{\n                buttonModel: { isPrimary: true, content: 'OK' },\n                click: function () {\n                    this.hide();\n                }\n            }, {\n                buttonModel: { content: 'Cancel' },\n                click: function () {\n                    this.hide();\n                }\n            }];\n        if (typeof (args) === 'string') {\n            confirmDialogObj = createDialog({ position: { X: 'center', Y: 'top' }, content: args, isModal: true,\n                header: DLG_UTIL_DEFAULT_TITLE, buttons: okCancelButtonModel\n            }, dialogElement);\n        }\n        else {\n            confirmDialogObj = createDialog(confirmOptions(args), dialogElement);\n        }\n        confirmDialogObj.close = function () {\n            if (args && args.close) {\n                args.close.apply(confirmDialogObj);\n            }\n            confirmDialogObj.destroy();\n            if (confirmDialogObj.element.classList.contains('e-dlg-modal')) {\n                confirmDialogObj.element.parentElement.remove();\n                confirmDialogObj.target.classList.remove(DLG_UTIL_ROOT);\n            }\n            else {\n                confirmDialogObj.element.remove();\n            }\n        };\n        return confirmDialogObj;\n    }\n    DialogUtility.confirm = confirm;\n    // eslint-disable-next-line\n    function createDialog(options, element) {\n        var dialogObject = new Dialog(options);\n        dialogObject.appendTo(element);\n        return dialogObject;\n    }\n    // eslint-disable-next-line\n    function alertOptions(option) {\n        var options = {};\n        options.buttons = [];\n        options = formOptions(options, option);\n        options = setAlertButtonModel(options, option);\n        return options;\n    }\n    // eslint-disable-next-line\n    function confirmOptions(option) {\n        var options = {};\n        options.buttons = [];\n        options = formOptions(options, option);\n        options = setConfirmButtonModel(options, option);\n        return options;\n    }\n    // eslint-disable-next-line\n    function formOptions(options, option) {\n        options.header = !(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(option.title) ? option.title : null;\n        options.content = !(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(option.content) ? option.content : '';\n        options.isModal = !(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(option.isModal) ? option.isModal : true;\n        options.showCloseIcon = !(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(option.showCloseIcon) ? option.showCloseIcon : false;\n        options.allowDragging = !(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(option.isDraggable) ? option.isDraggable : false;\n        options.closeOnEscape = !(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(option.closeOnEscape) ? option.closeOnEscape : false;\n        options.position = !(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(option.position) ? option.position : { X: 'center', Y: 'top' };\n        options.animationSettings = !(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(option.animationSettings) ? option.animationSettings :\n            { effect: 'Fade', duration: 400, delay: 0 };\n        options.cssClass = !(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(option.cssClass) ? option.cssClass : '';\n        options.zIndex = !(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(option.zIndex) ? option.zIndex : 1000;\n        options.open = !(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(option.open) ? option.open : null;\n        options.width = !(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(option.width) ? option.width : 'auto';\n        options.height = !(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(option.height) ? option.height : 'auto';\n        return options;\n    }\n    // eslint-disable-next-line\n    function setAlertButtonModel(options, option) {\n        var alertButtonModel = [{\n                buttonModel: { isPrimary: true, content: 'OK' },\n                click: function () {\n                    this.hide();\n                }\n            }];\n        if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(option.okButton)) {\n            options.buttons[0] = formButtonModel(options.buttons[0], option.okButton, alertButtonModel[0]);\n        }\n        else {\n            options.buttons = alertButtonModel;\n        }\n        return options;\n    }\n    // eslint-disable-next-line\n    function setConfirmButtonModel(options, option) {\n        var okButtonModel = {\n            buttonModel: { isPrimary: true, content: 'OK' },\n            click: function () {\n                this.hide();\n            }\n        };\n        var cancelButtonModel = {\n            buttonModel: { content: 'Cancel' },\n            click: function () {\n                this.hide();\n            }\n        };\n        if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(option.okButton)) {\n            options.buttons[0] = formButtonModel(options.buttons[0], option.okButton, okButtonModel);\n        }\n        else {\n            options.buttons[0] = okButtonModel;\n        }\n        if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(option.cancelButton)) {\n            options.buttons[1] = formButtonModel(options.buttons[1], option.cancelButton, cancelButtonModel);\n        }\n        else {\n            options.buttons[1] = cancelButtonModel;\n        }\n        return options;\n    }\n    // eslint-disable-next-line\n    function formButtonModel(buttonModel, option, buttonPropModel) {\n        var buttonProps = buttonPropModel;\n        if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(option.text)) {\n            buttonProps.buttonModel.content = option.text;\n        }\n        if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(option.icon)) {\n            buttonProps.buttonModel.iconCss = option.icon;\n        }\n        if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(option.cssClass)) {\n            buttonProps.buttonModel.cssClass = option.cssClass;\n        }\n        if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(option.click)) {\n            buttonProps.click = option.click;\n        }\n        if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(option.isFlat)) {\n            buttonProps.isFlat = option.isFlat;\n        }\n        return buttonProps;\n    }\n})(DialogUtility || (DialogUtility = {}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHN5bmNmdXNpb24rZWoyLXBvcHVwc0AyOS4xLjM3L25vZGVfbW9kdWxlcy9Ac3luY2Z1c2lvbi9lajItcG9wdXBzL3NyYy9kaWFsb2cvZGlhbG9nLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQUEsaUJBQWlCLFNBQUksSUFBSSxTQUFJO0FBQzdCO0FBQ0E7QUFDQSxlQUFlLGdCQUFnQixzQ0FBc0Msa0JBQWtCO0FBQ3ZGLDhCQUE4QjtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QjtBQUN4QjtBQUNBO0FBQ0EsQ0FBQztBQUNELGtCQUFrQixTQUFJLElBQUksU0FBSTtBQUM5QjtBQUNBO0FBQ0EsNkNBQTZDLFFBQVE7QUFDckQ7QUFDQTtBQUNvSTtBQUN2QjtBQUN2QjtBQUN3QjtBQUMzQztBQUNsQjtBQUNzQjtBQUMrQztBQUN0SDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLDhEQUFRO0FBQ2hCO0FBQ0E7QUFDQSxRQUFRLDhEQUFRO0FBQ2hCO0FBQ0E7QUFDQSxRQUFRLDhEQUFRO0FBQ2hCO0FBQ0E7QUFDQSxRQUFRLDJEQUFLO0FBQ2I7QUFDQTtBQUNBLENBQUMsQ0FBQywrREFBYTtBQUNRO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsOERBQVE7QUFDaEI7QUFDQTtBQUNBLFFBQVEsOERBQVE7QUFDaEI7QUFDQTtBQUNBLFFBQVEsOERBQVE7QUFDaEI7QUFDQTtBQUNBLENBQUMsQ0FBQywrREFBYTtBQUNjO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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O0FBQ2QsNEJBQTRCLHVFQUFpQjtBQUM3QywwQkFBMEIsdUVBQWlCO0FBQzNDLHdCQUF3Qix1RUFBaUI7QUFDekMseUJBQXlCLHVFQUFpQjtBQUMxQywwQkFBMEIsdUVBQWlCO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsZ0NBQWdDO0FBQy9EO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixhQUFhLHVFQUFpQjtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixnQ0FBZ0M7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixtQkFBbUI7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLHVFQUFpQjtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSx1RUFBaUI7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLHVFQUFpQjtBQUM5QjtBQUNBO0FBQ0EsYUFBYSx1RUFBaUI7QUFDOUI7QUFDQTtBQUNBLGFBQWEsdUVBQWlCO0FBQzlCO0FBQ0E7QUFDQSxhQUFhLHVFQUFpQjtBQUM5QjtBQUNBO0FBQ0EsYUFBYSx1RUFBaUI7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLHNDQUFzQyIsInNvdXJjZXMiOlsid2VicGFjazovL2FpX3RyYXZlbC8uL25vZGVfbW9kdWxlcy8ucG5wbS9Ac3luY2Z1c2lvbitlajItcG9wdXBzQDI5LjEuMzcvbm9kZV9tb2R1bGVzL0BzeW5jZnVzaW9uL2VqMi1wb3B1cHMvc3JjL2RpYWxvZy9kaWFsb2cuanM/YzY4ZiJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbnZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xufTtcbmltcG9ydCB7IENvbXBvbmVudCwgUHJvcGVydHksIEV2ZW50LCBDb2xsZWN0aW9uLCBMMTBuLCBDb21wbGV4LCBjb21waWxlLCBjcmVhdGVFbGVtZW50LCBhbmltYXRpb25Nb2RlIH0gZnJvbSAnQHN5bmNmdXNpb24vZWoyLWJhc2UnO1xuaW1wb3J0IHsgYWRkQ2xhc3MsIHJlbW92ZUNsYXNzLCBkZXRhY2gsIGF0dHJpYnV0ZXMsIHByZXBlbmQsIHNldFN0eWxlQXR0cmlidXRlIH0gZnJvbSAnQHN5bmNmdXNpb24vZWoyLWJhc2UnO1xuaW1wb3J0IHsgTm90aWZ5UHJvcGVydHlDaGFuZ2VzLCBDaGlsZFByb3BlcnR5LCBpc0JsYXpvciB9IGZyb20gJ0BzeW5jZnVzaW9uL2VqMi1iYXNlJztcbmltcG9ydCB7IGlzTnVsbE9yVW5kZWZpbmVkLCBmb3JtYXRVbml0LCBhcHBlbmQsIEV2ZW50SGFuZGxlciwgRHJhZ2dhYmxlLCBleHRlbmQgfSBmcm9tICdAc3luY2Z1c2lvbi9lajItYmFzZSc7XG5pbXBvcnQgeyBTYW5pdGl6ZUh0bWxIZWxwZXIsIEJyb3dzZXIgfSBmcm9tICdAc3luY2Z1c2lvbi9lajItYmFzZSc7XG5pbXBvcnQgeyBCdXR0b24gfSBmcm9tICdAc3luY2Z1c2lvbi9lajItYnV0dG9ucyc7XG5pbXBvcnQgeyBQb3B1cCwgUG9zaXRpb25EYXRhLCBnZXRaaW5kZXhQYXJ0aWFsIH0gZnJvbSAnLi4vcG9wdXAvcG9wdXAnO1xuaW1wb3J0IHsgY3JlYXRlUmVzaXplLCByZW1vdmVSZXNpemUsIHNldE1pbkhlaWdodCwgc2V0TWF4V2lkdGgsIHNldE1heEhlaWdodCwgcmVzaXplRGVzdHJveSB9IGZyb20gJy4uL2NvbW1vbi9yZXNpemUnO1xudmFyIEJ1dHRvblByb3BzID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhCdXR0b25Qcm9wcywgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBCdXR0b25Qcm9wcygpIHtcbiAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgIH1cbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgUHJvcGVydHkodHJ1ZSlcbiAgICBdLCBCdXR0b25Qcm9wcy5wcm90b3R5cGUsIFwiaXNGbGF0XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIFByb3BlcnR5KClcbiAgICBdLCBCdXR0b25Qcm9wcy5wcm90b3R5cGUsIFwiYnV0dG9uTW9kZWxcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgUHJvcGVydHkoJ0J1dHRvbicpXG4gICAgXSwgQnV0dG9uUHJvcHMucHJvdG90eXBlLCBcInR5cGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgRXZlbnQoKVxuICAgIF0sIEJ1dHRvblByb3BzLnByb3RvdHlwZSwgXCJjbGlja1wiLCB2b2lkIDApO1xuICAgIHJldHVybiBCdXR0b25Qcm9wcztcbn0oQ2hpbGRQcm9wZXJ0eSkpO1xuZXhwb3J0IHsgQnV0dG9uUHJvcHMgfTtcbi8qKlxuICogQ29uZmlndXJlcyB0aGUgYW5pbWF0aW9uIHByb3BlcnRpZXMgZm9yIGJvdGggb3BlbiBhbmQgY2xvc2UgdGhlIGRpYWxvZy5cbiAqL1xudmFyIEFuaW1hdGlvblNldHRpbmdzID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhBbmltYXRpb25TZXR0aW5ncywgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBBbmltYXRpb25TZXR0aW5ncygpIHtcbiAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgIH1cbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgUHJvcGVydHkoJ0ZhZGUnKVxuICAgIF0sIEFuaW1hdGlvblNldHRpbmdzLnByb3RvdHlwZSwgXCJlZmZlY3RcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgUHJvcGVydHkoNDAwKVxuICAgIF0sIEFuaW1hdGlvblNldHRpbmdzLnByb3RvdHlwZSwgXCJkdXJhdGlvblwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBQcm9wZXJ0eSgwKVxuICAgIF0sIEFuaW1hdGlvblNldHRpbmdzLnByb3RvdHlwZSwgXCJkZWxheVwiLCB2b2lkIDApO1xuICAgIHJldHVybiBBbmltYXRpb25TZXR0aW5ncztcbn0oQ2hpbGRQcm9wZXJ0eSkpO1xuZXhwb3J0IHsgQW5pbWF0aW9uU2V0dGluZ3MgfTtcbnZhciBST09UID0gJ2UtZGlhbG9nJztcbnZhciBSVEwgPSAnZS1ydGwnO1xudmFyIERMR19IRUFERVJfQ09OVEVOVCA9ICdlLWRsZy1oZWFkZXItY29udGVudCc7XG52YXIgRExHX0hFQURFUiA9ICdlLWRsZy1oZWFkZXInO1xudmFyIERMR19GT09URVJfQ09OVEVOVCA9ICdlLWZvb3Rlci1jb250ZW50JztcbnZhciBNT0RBTF9ETEcgPSAnZS1kbGctbW9kYWwnO1xudmFyIERMR19DT05URU5UID0gJ2UtZGxnLWNvbnRlbnQnO1xudmFyIERMR19DTE9TRV9JQ09OID0gJ2UtaWNvbi1kbGctY2xvc2UnO1xudmFyIERMR19PVkVSTEFZID0gJ2UtZGxnLW92ZXJsYXknO1xudmFyIERMR19UQVJHRVQgPSAnZS1kbGctdGFyZ2V0JztcbnZhciBETEdfQ09OVEFJTkVSID0gJ2UtZGxnLWNvbnRhaW5lcic7XG52YXIgU0NST0xMX0RJU0FCTEVEID0gJ2Utc2Nyb2xsLWRpc2FibGVkJztcbnZhciBETEdfUFJJTUFSWV9CVVRUT04gPSAnZS1wcmltYXJ5JztcbnZhciBJQ09OID0gJ2UtaWNvbnMnO1xudmFyIFBPUFVQX1JPT1QgPSAnZS1wb3B1cCc7XG52YXIgREVWSUNFID0gJ2UtZGV2aWNlJztcbnZhciBGVUxMU0NSRUVOID0gJ2UtZGxnLWZ1bGxzY3JlZW4nO1xudmFyIERMR19DTE9TRV9JQ09OX0JUTiA9ICdlLWRsZy1jbG9zZWljb24tYnRuJztcbnZhciBETEdfSElERSA9ICdlLXBvcHVwLWNsb3NlJztcbnZhciBETEdfU0hPVyA9ICdlLXBvcHVwLW9wZW4nO1xudmFyIERMR19VVElMX0RFRkFVTFRfVElUTEUgPSAnSW5mb3JtYXRpb24nO1xudmFyIERMR19VVElMX1JPT1QgPSAnZS1zY3JvbGwtZGlzYWJsZWQnO1xudmFyIERMR19VVElMX0FMRVJUID0gJ2UtYWxlcnQtZGlhbG9nJztcbnZhciBETEdfVVRJTF9DT05GSVJNID0gJ2UtY29uZmlybS1kaWFsb2cnO1xudmFyIERMR19SRVNJWkFCTEUgPSAnZS1kbGctcmVzaXphYmxlJztcbnZhciBETEdfUkVTVFJJQ1RfTEVGVF9WQUxVRSA9ICdlLXJlc3RyaWN0LWxlZnQnO1xudmFyIERMR19SRVNUUklDVF9XSURUSF9WQUxVRSA9ICdlLXJlc2l6ZS12aWV3cG9ydCc7XG52YXIgRExHX1JFRl9FTEVNRU5UID0gJ2UtZGxnLXJlZi1lbGVtZW50JztcbnZhciBETEdfVVNFUl9BQ1RJT05fQ0xPU0VEID0gJ3VzZXIgYWN0aW9uJztcbnZhciBETEdfQ0xPU0VfSUNPTl9DTE9TRUQgPSAnY2xvc2UgaWNvbic7XG52YXIgRExHX0VTQ0FQRV9DTE9TRUQgPSAnZXNjYXBlJztcbnZhciBETEdfT1ZFUkxBWUNMSUNLX0NMT1NFRCA9ICdvdmVybGF5Q2xpY2snO1xudmFyIERMR19EUkFHID0gJ2UtZHJhZ2dhYmxlJztcbi8qKlxuICogUmVwcmVzZW50cyB0aGUgZGlhbG9nIGNvbXBvbmVudCB0aGF0IGRpc3BsYXlzIHRoZSBpbmZvcm1hdGlvbiBhbmQgZ2V0IGlucHV0IGZyb20gdGhlIHVzZXIuXG4gKiBUd28gdHlwZXMgb2YgZGlhbG9nIGNvbXBvbmVudHMgYXJlIGBNb2RhbCBhbmQgTW9kZWxlc3MgKG5vbi1tb2RhbClgIGRlcGVuZGluZyBvbiBpdHMgaW50ZXJhY3Rpb24gd2l0aCBwYXJlbnQgYXBwbGljYXRpb24uXG4gKiBgYGBodG1sXG4gKiA8ZGl2IGlkPVwiZGlhbG9nXCI+PC9kaXY+XG4gKiBgYGBcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIDxzY3JpcHQ+XG4gKiAgIHZhciBkaWFsb2dPYmogPSBuZXcgRGlhbG9nKHsgaGVhZGVyOiAnRGlhbG9nJyB9KTtcbiAqICAgZGlhbG9nT2JqLmFwcGVuZFRvKFwiI2RpYWxvZ1wiKTtcbiAqIDwvc2NyaXB0PlxuICogYGBgXG4gKi9cbnZhciBEaWFsb2cgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKERpYWxvZywgX3N1cGVyKTtcbiAgICAvKlxuICAgICAqICogQ29uc3RydWN0b3IgZm9yIGNyZWF0aW5nIHRoZSB3aWRnZXRcbiAgICAgKlxuICAgICAqIEBwYXJhbVxuICAgICAqIEBwYXJhbVxuICAgICAqIEBoaWRkZW5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBEaWFsb2cob3B0aW9ucywgZWxlbWVudCkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBvcHRpb25zLCBlbGVtZW50KSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5uZWVkc0lEID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKkluaXRpYWxpemUgdGhlIGNvbnRyb2wgcmVuZGVyaW5nXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIERpYWxvZy5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmluaXRpYWxpemUoKTtcbiAgICAgICAgdGhpcy5pbml0UmVuZGVyKCk7XG4gICAgICAgIHRoaXMud2lyZUV2ZW50cygpO1xuICAgICAgICBpZiAodGhpcy53aWR0aCA9PT0gJzEwMCUnKSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuc3R5bGUud2lkdGggPSAnJztcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5taW5IZWlnaHQgIT09ICcnKSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuc3R5bGUubWluSGVpZ2h0ID0gZm9ybWF0VW5pdCh0aGlzLm1pbkhlaWdodCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuZW5hYmxlUmVzaXplKSB7XG4gICAgICAgICAgICB0aGlzLnNldFJlc2l6ZSgpO1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNNb2RhbCkge1xuICAgICAgICAgICAgICAgIHRoaXMuaXNNb2RlbFJlc2l6ZSA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5hbmltYXRpb25TZXR0aW5ncy5lZmZlY3QgPT09ICdOb25lJykge1xuICAgICAgICAgICAgICAgIHRoaXMuZ2V0TWluSGVpZ2h0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZW5kZXJDb21wbGV0ZSgpO1xuICAgIH07XG4gICAgRGlhbG9nLnByb3RvdHlwZS5pbml0aWFsaXplVmFsdWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuZGxnQ2xvc2VkQnkgPSBETEdfVVNFUl9BQ1RJT05fQ0xPU0VEO1xuICAgIH07XG4gICAgLyoqXG4gICAgICpJbml0aWFsaXplIHRoZSBldmVudCBoYW5kbGVyXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIERpYWxvZy5wcm90b3R5cGUucHJlUmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB0aGlzLmluaXRpYWxpemVWYWx1ZSgpO1xuICAgICAgICB0aGlzLmhlYWRlckNvbnRlbnQgPSBudWxsO1xuICAgICAgICB0aGlzLmFsbG93TWF4SGVpZ2h0ID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5wcmV2ZW50VmlzaWJpbGl0eSA9IHRydWU7XG4gICAgICAgIHRoaXMuY2xvbmVkRWxlID0gdGhpcy5lbGVtZW50LmNsb25lTm9kZSh0cnVlKTtcbiAgICAgICAgdGhpcy5jbG9zZUljb25DbGlja0V2ZW50SGFuZGxlciA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgX3RoaXMuZGxnQ2xvc2VkQnkgPSBETEdfQ0xPU0VfSUNPTl9DTE9TRUQ7XG4gICAgICAgICAgICBfdGhpcy5oaWRlKGV2ZW50KTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5kbGdPdmVybGF5Q2xpY2tFdmVudEhhbmRsZXIgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIF90aGlzLmRsZ0Nsb3NlZEJ5ID0gRExHX09WRVJMQVlDTElDS19DTE9TRUQ7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50Rm9jdXMgPSBmYWxzZTtcbiAgICAgICAgICAgIF90aGlzLnRyaWdnZXIoJ292ZXJsYXlDbGljaycsIGV2ZW50LCBmdW5jdGlvbiAob3ZlcmxheUNsaWNrRXZlbnRBcmdzKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFvdmVybGF5Q2xpY2tFdmVudEFyZ3MucHJldmVudEZvY3VzKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmZvY3VzQ29udGVudCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBfdGhpcy5kbGdDbG9zZWRCeSA9IERMR19VU0VSX0FDVElPTl9DTE9TRUQ7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIGxvY2FsZVRleHQgPSB7IGNsb3NlOiAnQ2xvc2UnIH07XG4gICAgICAgIHRoaXMubDEwbiA9IG5ldyBMMTBuKCdkaWFsb2cnLCBsb2NhbGVUZXh0LCB0aGlzLmxvY2FsZSk7XG4gICAgICAgIHRoaXMuY2hlY2tQb3NpdGlvbkRhdGEoKTtcbiAgICAgICAgaWYgKGlzTnVsbE9yVW5kZWZpbmVkKHRoaXMudGFyZ2V0KSkge1xuICAgICAgICAgICAgdmFyIHByZXZPbkNoYW5nZSA9IHRoaXMuaXNQcm90ZWN0ZWRPbkNoYW5nZTtcbiAgICAgICAgICAgIHRoaXMuaXNQcm90ZWN0ZWRPbkNoYW5nZSA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLnRhcmdldCA9IGRvY3VtZW50LmJvZHk7XG4gICAgICAgICAgICB0aGlzLmlzUHJvdGVjdGVkT25DaGFuZ2UgPSBwcmV2T25DaGFuZ2U7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIERpYWxvZy5wcm90b3R5cGUudXBkYXRlUGVyc2lzdERhdGEgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLmVuYWJsZVBlcnNpc3RlbmNlKSB7XG4gICAgICAgICAgICB0aGlzLnNldFByb3BlcnRpZXMoeyB3aWR0aDogcGFyc2VGbG9hdCh0aGlzLmVsZW1lbnQuc3R5bGUud2lkdGgpLCBoZWlnaHQ6IHBhcnNlRmxvYXQodGhpcy5lbGVtZW50LnN0eWxlLmhlaWdodCksXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IHsgWDogcGFyc2VGbG9hdCh0aGlzLmRyYWdPYmouZWxlbWVudC5zdHlsZS5sZWZ0KSwgWTogcGFyc2VGbG9hdCh0aGlzLmRyYWdPYmouZWxlbWVudC5zdHlsZS50b3ApIH0gfSwgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIERpYWxvZy5wcm90b3R5cGUuaXNOdW1iZXJWYWx1ZSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB2YXIgaXNOdW1iZXIgPSAvXlstK10/XFxkKlxcLj9cXGQrJC8udGVzdCh2YWx1ZSk7XG4gICAgICAgIHJldHVybiBpc051bWJlcjtcbiAgICB9O1xuICAgIERpYWxvZy5wcm90b3R5cGUuY2hlY2tQb3NpdGlvbkRhdGEgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghaXNOdWxsT3JVbmRlZmluZWQodGhpcy5wb3NpdGlvbikpIHtcbiAgICAgICAgICAgIGlmICghaXNOdWxsT3JVbmRlZmluZWQodGhpcy5wb3NpdGlvbi5YKSAmJiAodHlwZW9mICh0aGlzLnBvc2l0aW9uLlgpICE9PSAnbnVtYmVyJykpIHtcbiAgICAgICAgICAgICAgICB2YXIgaXNOdW1iZXIgPSB0aGlzLmlzTnVtYmVyVmFsdWUodGhpcy5wb3NpdGlvbi5YKTtcbiAgICAgICAgICAgICAgICBpZiAoaXNOdW1iZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHByZXZPbkNoYW5nZSA9IHRoaXMuaXNQcm90ZWN0ZWRPbkNoYW5nZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1Byb3RlY3RlZE9uQ2hhbmdlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3NpdGlvbi5YID0gcGFyc2VGbG9hdCh0aGlzLnBvc2l0aW9uLlgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmlzUHJvdGVjdGVkT25DaGFuZ2UgPSBwcmV2T25DaGFuZ2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFpc051bGxPclVuZGVmaW5lZCh0aGlzLnBvc2l0aW9uLlkpICYmICh0eXBlb2YgKHRoaXMucG9zaXRpb24uWSkgIT09ICdudW1iZXInKSkge1xuICAgICAgICAgICAgICAgIHZhciBpc051bWJlciA9IHRoaXMuaXNOdW1iZXJWYWx1ZSh0aGlzLnBvc2l0aW9uLlkpO1xuICAgICAgICAgICAgICAgIGlmIChpc051bWJlcikge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcHJldk9uQ2hhbmdlID0gdGhpcy5pc1Byb3RlY3RlZE9uQ2hhbmdlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmlzUHJvdGVjdGVkT25DaGFuZ2UgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBvc2l0aW9uLlkgPSBwYXJzZUZsb2F0KHRoaXMucG9zaXRpb24uWSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaXNQcm90ZWN0ZWRPbkNoYW5nZSA9IHByZXZPbkNoYW5nZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIERpYWxvZy5wcm90b3R5cGUuZ2V0RWxlID0gZnVuY3Rpb24gKGxpc3QsIHNlbGVjdG9yKSB7XG4gICAgICAgIHZhciBlbGVtZW50ID0gdW5kZWZpbmVkO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChsaXN0W2ldLmNsYXNzTGlzdC5jb250YWlucyhzZWxlY3RvcikpIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50ID0gbGlzdFtpXTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZWxlbWVudDtcbiAgICB9O1xuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgRGlhbG9nLnByb3RvdHlwZS5nZXRNaW5IZWlnaHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBjb21wdXRlZEhlYWRlckhlaWdodCA9ICcwcHgnO1xuICAgICAgICB2YXIgY29tcHV0ZWRGb290ZXJIZWlnaHQgPSAnMHB4JztcbiAgICAgICAgaWYgKCFpc051bGxPclVuZGVmaW5lZCh0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLicgKyBETEdfSEVBREVSX0NPTlRFTlQpKSkge1xuICAgICAgICAgICAgY29tcHV0ZWRIZWFkZXJIZWlnaHQgPSBnZXRDb21wdXRlZFN0eWxlKHRoaXMuaGVhZGVyQ29udGVudCkuaGVpZ2h0O1xuICAgICAgICB9XG4gICAgICAgIHZhciBmb290ZXJFbGUgPSB0aGlzLmdldEVsZSh0aGlzLmVsZW1lbnQuY2hpbGRyZW4sIERMR19GT09URVJfQ09OVEVOVCk7XG4gICAgICAgIGlmICghaXNOdWxsT3JVbmRlZmluZWQoZm9vdGVyRWxlKSkge1xuICAgICAgICAgICAgY29tcHV0ZWRGb290ZXJIZWlnaHQgPSBnZXRDb21wdXRlZFN0eWxlKGZvb3RlckVsZSkuaGVpZ2h0O1xuICAgICAgICB9XG4gICAgICAgIHZhciBoZWFkZXJIZWlnaHQgPSBwYXJzZUludChjb21wdXRlZEhlYWRlckhlaWdodC5zbGljZSgwLCBjb21wdXRlZEhlYWRlckhlaWdodC5pbmRleE9mKCdwJykpLCAxMCk7XG4gICAgICAgIHZhciBmb290ZXJIZWlnaHQgPSBwYXJzZUludChjb21wdXRlZEZvb3RlckhlaWdodC5zbGljZSgwLCBjb21wdXRlZEZvb3RlckhlaWdodC5pbmRleE9mKCdwJykpLCAxMCk7XG4gICAgICAgIHNldE1pbkhlaWdodChoZWFkZXJIZWlnaHQgKyAzMCArIChpc05hTihmb290ZXJIZWlnaHQpID8gMCA6IGZvb3RlckhlaWdodCkpO1xuICAgICAgICByZXR1cm4gKGhlYWRlckhlaWdodCArIDMwICsgZm9vdGVySGVpZ2h0KTtcbiAgICB9O1xuICAgIERpYWxvZy5wcm90b3R5cGUub25SZXNpemVTdGFydCA9IGZ1bmN0aW9uIChhcmdzLCBkaWFsb2dPYmopIHtcbiAgICAgICAgZGlhbG9nT2JqLnRyaWdnZXIoJ3Jlc2l6ZVN0YXJ0JywgYXJncyk7XG4gICAgICAgIGlmICghYXJncy5jYW5jZWwgJiYgdGhpcy5pc01vZGVsUmVzaXplICYmICFpc051bGxPclVuZGVmaW5lZCh0aGlzLmRsZ0NvbnRhaW5lcikgJiYgdGhpcy5kbGdDb250YWluZXIuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWRsZy0nICsgdGhpcy5wb3NpdGlvbi5YICsgJy0nICsgdGhpcy5wb3NpdGlvbi5ZKSkge1xuICAgICAgICAgICAgdGhpcy5zZXRQb3B1cFBvc2l0aW9uKCk7XG4gICAgICAgICAgICB0aGlzLmRsZ0NvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKCdlLWRsZy0nICsgdGhpcy5wb3NpdGlvbi5YICsgJy0nICsgdGhpcy5wb3NpdGlvbi5ZKTtcbiAgICAgICAgICAgIHZhciB0YXJnZXRUeXBlID0gdGhpcy5nZXRUYXJnZXRDb250YWluZXIodGhpcy50YXJnZXQpO1xuICAgICAgICAgICAgaWYgKHRhcmdldFR5cGUgaW5zdGFuY2VvZiBFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbXB1dGVkU3R5bGUgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0YXJnZXRUeXBlKTtcbiAgICAgICAgICAgICAgICBpZiAoY29tcHV0ZWRTdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKCdkaXJlY3Rpb24nKSA9PT0gJ3J0bCcpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5zdHlsZS5wb3NpdGlvbiA9ICdyZWxhdGl2ZSc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLnBvc2l0aW9uID0gJ3JlbGF0aXZlJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKERMR19SRVNUUklDVF9MRUZUX1ZBTFVFKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKERMR19SRVNUUklDVF9MRUZUX1ZBTFVFKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuaXNNb2RlbFJlc2l6ZSA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhcmdzLmNhbmNlbDtcbiAgICB9O1xuICAgIERpYWxvZy5wcm90b3R5cGUub25SZXNpemluZyA9IGZ1bmN0aW9uIChhcmdzLCBkaWFsb2dPYmopIHtcbiAgICAgICAgZGlhbG9nT2JqLnRyaWdnZXIoJ3Jlc2l6aW5nJywgYXJncyk7XG4gICAgfTtcbiAgICBEaWFsb2cucHJvdG90eXBlLm9uUmVzaXplQ29tcGxldGUgPSBmdW5jdGlvbiAoYXJncywgZGlhbG9nT2JqKSB7XG4gICAgICAgIGRpYWxvZ09iai50cmlnZ2VyKCdyZXNpemVTdG9wJywgYXJncyk7XG4gICAgICAgIHRoaXMudXBkYXRlUGVyc2lzdERhdGEoKTtcbiAgICB9O1xuICAgIERpYWxvZy5wcm90b3R5cGUuc2V0UmVzaXplID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5lbmFibGVSZXNpemUpIHtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKERMR19SRVNJWkFCTEUpO1xuICAgICAgICAgICAgdmFyIGNvbXB1dGVkSGVpZ2h0ID0gZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLmVsZW1lbnQpLm1pbkhlaWdodDtcbiAgICAgICAgICAgIHZhciBjb21wdXRlZFdpZHRoID0gZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLmVsZW1lbnQpLm1pbldpZHRoO1xuICAgICAgICAgICAgdmFyIGRpcmVjdGlvbiA9ICcnO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnJlc2l6ZUhhbmRsZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5yZXNpemVIYW5kbGVzW2ldID09PSAnQWxsJykge1xuICAgICAgICAgICAgICAgICAgICBkaXJlY3Rpb24gPSAnc291dGggbm9ydGggZWFzdCB3ZXN0IG5vcnRoLWVhc3Qgbm9ydGgtd2VzdCBzb3V0aC1lYXN0IHNvdXRoLXdlc3QnO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBkaXJlY3Rpb25WYWx1ZSA9ICcnO1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHRoaXMucmVzaXplSGFuZGxlc1tpXS50b1N0cmluZygpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdTb3V0aEVhc3QnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpcmVjdGlvblZhbHVlID0gJ3NvdXRoLWVhc3QnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnU291dGhXZXN0JzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXJlY3Rpb25WYWx1ZSA9ICdzb3V0aC13ZXN0JztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ05vcnRoRWFzdCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlyZWN0aW9uVmFsdWUgPSAnbm9ydGgtZWFzdCc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdOb3J0aFdlc3QnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpcmVjdGlvblZhbHVlID0gJ25vcnRoLXdlc3QnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXJlY3Rpb25WYWx1ZSA9IHRoaXMucmVzaXplSGFuZGxlc1tpXS50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGRpcmVjdGlvbiArPSBkaXJlY3Rpb25WYWx1ZS50b0xvY2FsZUxvd2VyQ2FzZSgpICsgJyAnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmVuYWJsZVJ0bCAmJiBkaXJlY3Rpb24udHJpbSgpID09PSAnc291dGgtZWFzdCcpIHtcbiAgICAgICAgICAgICAgICBkaXJlY3Rpb24gPSAnc291dGgtd2VzdCc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0aGlzLmVuYWJsZVJ0bCAmJiBkaXJlY3Rpb24udHJpbSgpID09PSAnc291dGgtd2VzdCcpIHtcbiAgICAgICAgICAgICAgICBkaXJlY3Rpb24gPSAnc291dGgtZWFzdCc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5pc01vZGFsICYmIHRoaXMuZW5hYmxlUnRsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoRExHX1JFU1RSSUNUX0xFRlRfVkFMVUUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5pc01vZGFsICYmIHRoaXMudGFyZ2V0ID09PSBkb2N1bWVudC5ib2R5KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoRExHX1JFU1RSSUNUX1dJRFRIX1ZBTFVFKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNyZWF0ZVJlc2l6ZSh7XG4gICAgICAgICAgICAgICAgZWxlbWVudDogdGhpcy5lbGVtZW50LFxuICAgICAgICAgICAgICAgIGRpcmVjdGlvbjogZGlyZWN0aW9uLFxuICAgICAgICAgICAgICAgIG1pbkhlaWdodDogcGFyc2VJbnQoY29tcHV0ZWRIZWlnaHQuc2xpY2UoMCwgY29tcHV0ZWRXaWR0aC5pbmRleE9mKCdwJykpLCAxMCksXG4gICAgICAgICAgICAgICAgbWF4SGVpZ2h0OiB0aGlzLnRhcmdldEVsZS5jbGllbnRIZWlnaHQsXG4gICAgICAgICAgICAgICAgbWluV2lkdGg6IHBhcnNlSW50KGNvbXB1dGVkV2lkdGguc2xpY2UoMCwgY29tcHV0ZWRXaWR0aC5pbmRleE9mKCdwJykpLCAxMCksXG4gICAgICAgICAgICAgICAgbWF4V2lkdGg6IHRoaXMudGFyZ2V0RWxlLmNsaWVudFdpZHRoLFxuICAgICAgICAgICAgICAgIGJvdW5kYXJ5OiB0aGlzLnRhcmdldCA9PT0gZG9jdW1lbnQuYm9keSA/IG51bGwgOiB0aGlzLnRhcmdldEVsZSxcbiAgICAgICAgICAgICAgICByZXNpemVCZWdpbjogdGhpcy5vblJlc2l6ZVN0YXJ0LmJpbmQodGhpcyksXG4gICAgICAgICAgICAgICAgcmVzaXplQ29tcGxldGU6IHRoaXMub25SZXNpemVDb21wbGV0ZS5iaW5kKHRoaXMpLFxuICAgICAgICAgICAgICAgIHJlc2l6aW5nOiB0aGlzLm9uUmVzaXppbmcuYmluZCh0aGlzKSxcbiAgICAgICAgICAgICAgICBwcm94eTogdGhpc1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLndpcmVXaW5kb3dSZXNpemVFdmVudCgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmVtb3ZlUmVzaXplKCk7XG4gICAgICAgICAgICB0aGlzLnVuV2lyZVdpbmRvd1Jlc2l6ZUV2ZW50KCk7XG4gICAgICAgICAgICBpZiAodGhpcy5pc01vZGFsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoRExHX1JFU1RSSUNUX0xFRlRfVkFMVUUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoRExHX1JFU1RSSUNUX1dJRFRIX1ZBTFVFKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKERMR19SRVNJWkFCTEUpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBEaWFsb2cucHJvdG90eXBlLmdldEZvY3VzRWxlbWVudCA9IGZ1bmN0aW9uICh0YXJnZXQpIHtcbiAgICAgICAgdmFyIHZhbHVlID0gJ2lucHV0LHNlbGVjdCx0ZXh0YXJlYSxidXR0b246ZW5hYmxlZCxhLFtjb250ZW50ZWRpdGFibGU9XCJ0cnVlXCJdLFt0YWJpbmRleF0nO1xuICAgICAgICB2YXIgaXRlbXMgPSB0YXJnZXQucXVlcnlTZWxlY3RvckFsbCh2YWx1ZSk7XG4gICAgICAgIHJldHVybiB7IGVsZW1lbnQ6IGl0ZW1zW2l0ZW1zLmxlbmd0aCAtIDFdIH07XG4gICAgfTtcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgIERpYWxvZy5wcm90b3R5cGUua2V5RG93biA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZiAoZXZlbnQua2V5Q29kZSA9PT0gOSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNNb2RhbCkge1xuICAgICAgICAgICAgICAgIHZhciBidXR0b25PYmogPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgaWYgKCFpc051bGxPclVuZGVmaW5lZCh0aGlzLmJ0bk9iaikpIHtcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uT2JqID0gdGhpcy5idG5PYmpbdGhpcy5idG5PYmoubGVuZ3RoIC0gMV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICgoaXNOdWxsT3JVbmRlZmluZWQodGhpcy5idG5PYmopKSAmJiAoIWlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuZnRyVGVtcGxhdGVDb250ZW50KSkpIHtcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uT2JqID0gdGhpcy5nZXRGb2N1c0VsZW1lbnQodGhpcy5mdHJUZW1wbGF0ZUNvbnRlbnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoaXNOdWxsT3JVbmRlZmluZWQodGhpcy5idG5PYmopICYmIGlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuZnRyVGVtcGxhdGVDb250ZW50KSAmJiAhaXNOdWxsT3JVbmRlZmluZWQodGhpcy5jb250ZW50RWxlKSkge1xuICAgICAgICAgICAgICAgICAgICBidXR0b25PYmogPSB0aGlzLmdldEZvY3VzRWxlbWVudCh0aGlzLmNvbnRlbnRFbGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIWlzTnVsbE9yVW5kZWZpbmVkKGJ1dHRvbk9iaikgJiYgZG9jdW1lbnQuYWN0aXZlRWxlbWVudCA9PT0gYnV0dG9uT2JqLmVsZW1lbnQgJiYgIWV2ZW50LnNoaWZ0S2V5KSB7XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZm9jdXNhYmxlRWxlbWVudHModGhpcy5lbGVtZW50KS5mb2N1cygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCA9PT0gdGhpcy5mb2N1c2FibGVFbGVtZW50cyh0aGlzLmVsZW1lbnQpICYmIGV2ZW50LnNoaWZ0S2V5KSB7XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghaXNOdWxsT3JVbmRlZmluZWQoYnV0dG9uT2JqKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uT2JqLmVsZW1lbnQuZm9jdXMoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB2YXIgZWxlbWVudCA9IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ7XG4gICAgICAgIHZhciBpc1RhZ05hbWUgPSAoWydpbnB1dCcsICd0ZXh0YXJlYSddLmluZGV4T2YoZWxlbWVudC50YWdOYW1lLnRvTG93ZXJDYXNlKCkpID4gLTEpO1xuICAgICAgICB2YXIgaXNDb250ZW50RWRpdCA9IGZhbHNlO1xuICAgICAgICBpZiAoIWlzVGFnTmFtZSkge1xuICAgICAgICAgICAgaXNDb250ZW50RWRpdCA9IGVsZW1lbnQuaGFzQXR0cmlidXRlKCdjb250ZW50ZWRpdGFibGUnKSAmJiBlbGVtZW50LmdldEF0dHJpYnV0ZSgnY29udGVudGVkaXRhYmxlJykgPT09ICd0cnVlJztcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXZlbnQua2V5Q29kZSA9PT0gMjcgJiYgdGhpcy5jbG9zZU9uRXNjYXBlKSB7XG4gICAgICAgICAgICB0aGlzLmRsZ0Nsb3NlZEJ5ID0gRExHX0VTQ0FQRV9DTE9TRUQ7XG4gICAgICAgICAgICB2YXIgcXVlcnkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZS1wb3B1cC1vcGVuOm5vdCguZS1kaWFsb2cpJyk7XG4gICAgICAgICAgICAvLyAnZG9jdW1lbnQucXVlcnlTZWxlY3RvcicgaXMgdXNlZCB0byBmaW5kIHRoZSBlbGVtZW50cyByZW5kZXJlZCBiYXNlZCBvbiBib2R5XG4gICAgICAgICAgICBpZiAoISghaXNOdWxsT3JVbmRlZmluZWQocXVlcnkpICYmICFxdWVyeS5jbGFzc0xpc3QuY29udGFpbnMoJ2UtdG9vbGJhci1wb3AnKSAmJiAhcXVlcnkuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLXNsaWRlci10b29sdGlwJykpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5oaWRlKGV2ZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoKGV2ZW50LmtleUNvZGUgPT09IDEzICYmICFldmVudC5jdHJsS2V5ICYmIGVsZW1lbnQudGFnTmFtZS50b0xvd2VyQ2FzZSgpICE9PSAndGV4dGFyZWEnICYmXG4gICAgICAgICAgICBpc1RhZ05hbWUgJiYgIWlzTnVsbE9yVW5kZWZpbmVkKHRoaXMucHJpbWFyeUJ1dHRvbkVsZSkpIHx8XG4gICAgICAgICAgICAoZXZlbnQua2V5Q29kZSA9PT0gMTMgJiYgZXZlbnQuY3RybEtleSAmJiAoZWxlbWVudC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICd0ZXh0YXJlYScgfHxcbiAgICAgICAgICAgICAgICBpc0NvbnRlbnRFZGl0KSkgJiYgIWlzTnVsbE9yVW5kZWZpbmVkKHRoaXMucHJpbWFyeUJ1dHRvbkVsZSkpIHtcbiAgICAgICAgICAgIHZhciBidXR0b25JbmRleF8xO1xuICAgICAgICAgICAgdmFyIGZpcnN0UHJpbWFyeSA9IHRoaXMuYnV0dG9ucy5zb21lKGZ1bmN0aW9uIChkYXRhLCBpbmRleCkge1xuICAgICAgICAgICAgICAgIGJ1dHRvbkluZGV4XzEgPSBpbmRleDtcbiAgICAgICAgICAgICAgICB2YXIgYnV0dG9uTW9kZWwgPSBkYXRhLmJ1dHRvbk1vZGVsO1xuICAgICAgICAgICAgICAgIHJldHVybiAhaXNOdWxsT3JVbmRlZmluZWQoYnV0dG9uTW9kZWwpICYmIGJ1dHRvbk1vZGVsLmlzUHJpbWFyeSA9PT0gdHJ1ZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKGZpcnN0UHJpbWFyeSAmJiB0eXBlb2YgKHRoaXMuYnV0dG9uc1tidXR0b25JbmRleF8xXS5jbGljaykgPT09ICdmdW5jdGlvbicgJiYgIXRoaXMucHJpbWFyeUJ1dHRvbkVsZS5kaXNhYmxlZCkge1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5idXR0b25zW2J1dHRvbkluZGV4XzFdLmNsaWNrLmNhbGwoX3RoaXMsIGV2ZW50KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogSW5pdGlhbGl6ZSB0aGUgY29udHJvbCByZW5kZXJpbmdcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHt2b2lkfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgRGlhbG9nLnByb3RvdHlwZS5pbml0aWFsaXplID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIWlzTnVsbE9yVW5kZWZpbmVkKHRoaXMudGFyZ2V0KSkge1xuICAgICAgICAgICAgdGhpcy50YXJnZXRFbGUgPSAoKHR5cGVvZiB0aGlzLnRhcmdldCkgPT09ICdzdHJpbmcnKSA/XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLnRhcmdldCkgOiB0aGlzLnRhcmdldDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuaXNCbGF6b3JTZXJ2ZXJSZW5kZXIoKSkge1xuICAgICAgICAgICAgYWRkQ2xhc3MoW3RoaXMuZWxlbWVudF0sIFJPT1QpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChCcm93c2VyLmlzRGV2aWNlKSB7XG4gICAgICAgICAgICBhZGRDbGFzcyhbdGhpcy5lbGVtZW50XSwgREVWSUNFKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuaXNCbGF6b3JTZXJ2ZXJSZW5kZXIoKSkge1xuICAgICAgICAgICAgdGhpcy5zZXRDU1NDbGFzcygpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2V0TWF4SGVpZ2h0KCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBJbml0aWFsaXplIHRoZSByZW5kZXJpbmdcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHt2b2lkfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgRGlhbG9nLnByb3RvdHlwZS5pbml0UmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB0aGlzLmluaXRpYWxSZW5kZXIgPSB0cnVlO1xuICAgICAgICBpZiAoIXRoaXMuaXNCbGF6b3JTZXJ2ZXJSZW5kZXIoKSkge1xuICAgICAgICAgICAgYXR0cmlidXRlcyh0aGlzLmVsZW1lbnQsIHsgcm9sZTogJ2RpYWxvZycgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuekluZGV4ID09PSAxMDAwKSB7XG4gICAgICAgICAgICB0aGlzLnNldHpJbmRleCh0aGlzLmVsZW1lbnQsIGZhbHNlKTtcbiAgICAgICAgICAgIHRoaXMuY2FsY3VsYXRlekluZGV4ID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuY2FsY3VsYXRlekluZGV4ID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZXRUYXJnZXRDb250ZW50KCk7XG4gICAgICAgIGlmICh0aGlzLmhlYWRlciAhPT0gJycgJiYgIWlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuaGVhZGVyKSkge1xuICAgICAgICAgICAgdGhpcy5zZXRIZWFkZXIoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlbmRlckNsb3NlSWNvbigpO1xuICAgICAgICB0aGlzLnNldENvbnRlbnQoKTtcbiAgICAgICAgaWYgKHRoaXMuZm9vdGVyVGVtcGxhdGUgIT09ICcnICYmICFpc051bGxPclVuZGVmaW5lZCh0aGlzLmZvb3RlclRlbXBsYXRlKSkge1xuICAgICAgICAgICAgdGhpcy5zZXRGb290ZXJUZW1wbGF0ZSgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCFpc051bGxPclVuZGVmaW5lZCh0aGlzLmJ1dHRvbnNbMF0pICYmICFpc051bGxPclVuZGVmaW5lZCh0aGlzLmJ1dHRvbnNbMF0uYnV0dG9uTW9kZWwpKSB7XG4gICAgICAgICAgICB0aGlzLnNldEJ1dHRvbigpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmFsbG93RHJhZ2dpbmcgJiYgKCFpc051bGxPclVuZGVmaW5lZCh0aGlzLmhlYWRlckNvbnRlbnQpKSkge1xuICAgICAgICAgICAgdGhpcy5zZXRBbGxvd0RyYWdnaW5nKCk7XG4gICAgICAgIH1cbiAgICAgICAgYXR0cmlidXRlcyh0aGlzLmVsZW1lbnQsIHsgJ2FyaWEtbW9kYWwnOiAodGhpcy5pc01vZGFsID8gJ3RydWUnIDogJ2ZhbHNlJykgfSk7XG4gICAgICAgIGlmICh0aGlzLmlzTW9kYWwpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0SXNNb2RhbCgpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKERMR19VVElMX0FMRVJUKSAhPT0gdHJ1ZSAmJiB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKERMR19VVElMX0NPTkZJUk0pICE9PSB0cnVlXG4gICAgICAgICAgICAmJiAhaXNOdWxsT3JVbmRlZmluZWQodGhpcy5lbGVtZW50LnBhcmVudEVsZW1lbnQpKSB7XG4gICAgICAgICAgICB2YXIgcGFyZW50RWxlID0gdGhpcy5pc01vZGFsID8gdGhpcy5kbGdDb250YWluZXIucGFyZW50RWxlbWVudCA6IHRoaXMuZWxlbWVudC5wYXJlbnRFbGVtZW50O1xuICAgICAgICAgICAgdGhpcy5yZWZFbGVtZW50ID0gdGhpcy5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogRExHX1JFRl9FTEVNRU5UIH0pO1xuICAgICAgICAgICAgcGFyZW50RWxlLmluc2VydEJlZm9yZSh0aGlzLnJlZkVsZW1lbnQsICh0aGlzLmlzTW9kYWwgPyB0aGlzLmRsZ0NvbnRhaW5lciA6IHRoaXMuZWxlbWVudCkpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghaXNOdWxsT3JVbmRlZmluZWQodGhpcy50YXJnZXRFbGUpKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc01vZGFsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50YXJnZXRFbGUuYXBwZW5kQ2hpbGQodGhpcy5kbGdDb250YWluZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy50YXJnZXRFbGUuYXBwZW5kQ2hpbGQodGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLnBvcHVwT2JqID0gbmV3IFBvcHVwKHRoaXMuZWxlbWVudCwge1xuICAgICAgICAgICAgaGVpZ2h0OiB0aGlzLmhlaWdodCxcbiAgICAgICAgICAgIHdpZHRoOiB0aGlzLndpZHRoLFxuICAgICAgICAgICAgekluZGV4OiB0aGlzLnpJbmRleCxcbiAgICAgICAgICAgIHJlbGF0ZVRvOiB0aGlzLnRhcmdldCxcbiAgICAgICAgICAgIGFjdGlvbk9uU2Nyb2xsOiAnbm9uZScsXG4gICAgICAgICAgICBlbmFibGVSdGw6IHRoaXMuZW5hYmxlUnRsLFxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lXG4gICAgICAgICAgICBvcGVuOiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgICAgICB2YXIgZXZlbnRBcmdzID0ge1xuICAgICAgICAgICAgICAgICAgICBjb250YWluZXI6IF90aGlzLmlzTW9kYWwgPyBfdGhpcy5kbGdDb250YWluZXIgOiBfdGhpcy5lbGVtZW50LFxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50OiBfdGhpcy5lbGVtZW50LFxuICAgICAgICAgICAgICAgICAgICB0YXJnZXQ6IF90aGlzLnRhcmdldCxcbiAgICAgICAgICAgICAgICAgICAgcHJldmVudEZvY3VzOiBmYWxzZVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgaWYgKF90aGlzLmVuYWJsZVJlc2l6ZSkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5yZXNldFJlc2l6ZUljb24oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgX3RoaXMudHJpZ2dlcignb3BlbicsIGV2ZW50QXJncywgZnVuY3Rpb24gKG9wZW5FdmVudEFyZ3MpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFvcGVuRXZlbnRBcmdzLnByZXZlbnRGb2N1cykge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuZm9jdXNDb250ZW50KCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcbiAgICAgICAgICAgIGNsb3NlOiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgICAgICBpZiAoX3RoaXMuaXNNb2RhbCkge1xuICAgICAgICAgICAgICAgICAgICBhZGRDbGFzcyhbX3RoaXMuZGxnT3ZlcmxheV0sICdlLWZhZGUnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgX3RoaXMudW5CaW5kRXZlbnQoX3RoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgaWYgKF90aGlzLmlzTW9kYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuZGxnQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIF90aGlzLnRyaWdnZXIoJ2Nsb3NlJywgX3RoaXMuY2xvc2VBcmdzKTtcbiAgICAgICAgICAgICAgICB2YXIgYWN0aXZlRWxlID0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudDtcbiAgICAgICAgICAgICAgICBpZiAoIWlzTnVsbE9yVW5kZWZpbmVkKGFjdGl2ZUVsZSkgJiYgIWlzTnVsbE9yVW5kZWZpbmVkKChhY3RpdmVFbGUpLmJsdXIpKSB7XG4gICAgICAgICAgICAgICAgICAgIGFjdGl2ZUVsZS5ibHVyKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghaXNOdWxsT3JVbmRlZmluZWQoX3RoaXMuc3RvcmVBY3RpdmVFbGVtZW50KSAmJiAhaXNOdWxsT3JVbmRlZmluZWQoX3RoaXMuc3RvcmVBY3RpdmVFbGVtZW50LmZvY3VzKSkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5zdG9yZUFjdGl2ZUVsZW1lbnQuZm9jdXMoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnBvc2l0aW9uQ2hhbmdlKCk7XG4gICAgICAgIHRoaXMuc2V0RW5hYmxlUlRMKCk7XG4gICAgICAgIGlmICghdGhpcy5pc0JsYXpvclNlcnZlclJlbmRlcigpKSB7XG4gICAgICAgICAgICBhZGRDbGFzcyhbdGhpcy5lbGVtZW50XSwgRExHX0hJREUpO1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNNb2RhbCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0T3ZlcmxheVppbmRleCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnZpc2libGUpIHtcbiAgICAgICAgICAgIHRoaXMuc2hvdygpO1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNNb2RhbCkge1xuICAgICAgICAgICAgICAgIHZhciB0YXJnZXRUeXBlID0gdGhpcy5nZXRUYXJnZXRDb250YWluZXIodGhpcy50YXJnZXQpO1xuICAgICAgICAgICAgICAgIGlmICh0YXJnZXRUeXBlIGluc3RhbmNlb2YgRWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY29tcHV0ZWRTdHlsZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRhcmdldFR5cGUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY29tcHV0ZWRTdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKCdkaXJlY3Rpb24nKSA9PT0gJ3J0bCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0UG9wdXBQb3NpdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNNb2RhbCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZGxnT3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuaW5pdGlhbFJlbmRlciA9IGZhbHNlO1xuICAgIH07XG4gICAgRGlhbG9nLnByb3RvdHlwZS5nZXRUYXJnZXRDb250YWluZXIgPSBmdW5jdGlvbiAodGFyZ2V0VmFsdWUpIHtcbiAgICAgICAgdmFyIHRhcmdldEVsZW1lbnQgPSBudWxsO1xuICAgICAgICBpZiAodHlwZW9mIHRhcmdldFZhbHVlID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgaWYgKHRhcmdldFZhbHVlLnN0YXJ0c1dpdGgoJyMnKSkge1xuICAgICAgICAgICAgICAgIHRhcmdldEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0YXJnZXRWYWx1ZS5zdWJzdHJpbmcoMSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodGFyZ2V0VmFsdWUuc3RhcnRzV2l0aCgnLicpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGVsZW1lbnRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSh0YXJnZXRWYWx1ZS5zdWJzdHJpbmcoMSkpO1xuICAgICAgICAgICAgICAgIHRhcmdldEVsZW1lbnQgPSBlbGVtZW50cy5sZW5ndGggPiAwID8gZWxlbWVudHNbMF0gOiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKCEodGFyZ2V0VmFsdWUgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkgJiYgdGFyZ2V0VmFsdWUgIT09IGRvY3VtZW50LmJvZHkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGFyZ2V0VmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0YXJnZXRWYWx1ZSBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSB7XG4gICAgICAgICAgICB0YXJnZXRFbGVtZW50ID0gdGFyZ2V0VmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRhcmdldEVsZW1lbnQ7XG4gICAgfTtcbiAgICBEaWFsb2cucHJvdG90eXBlLnJlc2V0UmVzaXplSWNvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGRpYWxvZ0NvbkhlaWdodCA9IHRoaXMuZ2V0TWluSGVpZ2h0KCk7XG4gICAgICAgIGlmICh0aGlzLnRhcmdldEVsZS5vZmZzZXRIZWlnaHQgPCBkaWFsb2dDb25IZWlnaHQpIHtcbiAgICAgICAgICAgIHZhciBjbGFzc05hbWUgPSB0aGlzLmVuYWJsZVJ0bCA/ICdlLXNvdXRoLXdlc3QnIDogJ2Utc291dGgtZWFzdCc7XG4gICAgICAgICAgICB2YXIgcmVzaXplSWNvbiA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuJyArIGNsYXNzTmFtZSk7XG4gICAgICAgICAgICBpZiAoIWlzTnVsbE9yVW5kZWZpbmVkKHJlc2l6ZUljb24pKSB7XG4gICAgICAgICAgICAgICAgcmVzaXplSWNvbi5zdHlsZS5ib3R0b20gPSAnLScgKyBkaWFsb2dDb25IZWlnaHQudG9TdHJpbmcoKSArICdweCc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIERpYWxvZy5wcm90b3R5cGUuc2V0T3ZlcmxheVppbmRleCA9IGZ1bmN0aW9uICh6SW5kZXhWYWx1ZSkge1xuICAgICAgICB2YXIgekluZGV4O1xuICAgICAgICBpZiAoaXNOdWxsT3JVbmRlZmluZWQoekluZGV4VmFsdWUpKSB7XG4gICAgICAgICAgICB6SW5kZXggPSBwYXJzZUludCh0aGlzLmVsZW1lbnQuc3R5bGUuekluZGV4LCAxMCkgPyBwYXJzZUludCh0aGlzLmVsZW1lbnQuc3R5bGUuekluZGV4LCAxMCkgOiB0aGlzLnpJbmRleDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHpJbmRleCA9IHpJbmRleFZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZGxnT3ZlcmxheS5zdHlsZS56SW5kZXggPSAoekluZGV4IC0gMSkudG9TdHJpbmcoKTtcbiAgICAgICAgdGhpcy5kbGdDb250YWluZXIuc3R5bGUuekluZGV4ID0gekluZGV4LnRvU3RyaW5nKCk7XG4gICAgfTtcbiAgICBEaWFsb2cucHJvdG90eXBlLnBvc2l0aW9uQ2hhbmdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5pc01vZGFsKSB7XG4gICAgICAgICAgICBpZiAoIWlzTmFOKHBhcnNlRmxvYXQodGhpcy5wb3NpdGlvbi5YKSkgJiYgIWlzTmFOKHBhcnNlRmxvYXQodGhpcy5wb3NpdGlvbi5ZKSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFBvcHVwUG9zaXRpb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKCghaXNOYU4ocGFyc2VGbG9hdCh0aGlzLnBvc2l0aW9uLlgpKSAmJiBpc05hTihwYXJzZUZsb2F0KHRoaXMucG9zaXRpb24uWSkpKVxuICAgICAgICAgICAgICAgIHx8IChpc05hTihwYXJzZUZsb2F0KHRoaXMucG9zaXRpb24uWCkpICYmICFpc05hTihwYXJzZUZsb2F0KHRoaXMucG9zaXRpb24uWSkpKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0UG9wdXBQb3NpdGlvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLnRvcCA9ICcwcHgnO1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5zdHlsZS5sZWZ0ID0gJzBweCc7XG4gICAgICAgICAgICAgICAgdGhpcy5kbGdDb250YWluZXIuY2xhc3NMaXN0LmFkZCgnZS1kbGctJyArIHRoaXMucG9zaXRpb24uWCArICctJyArIHRoaXMucG9zaXRpb24uWSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnNldFBvcHVwUG9zaXRpb24oKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgRGlhbG9nLnByb3RvdHlwZS5zZXRQb3B1cFBvc2l0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnBvcHVwT2JqLnNldFByb3BlcnRpZXMoe1xuICAgICAgICAgICAgcG9zaXRpb246IHtcbiAgICAgICAgICAgICAgICBYOiB0aGlzLnBvc2l0aW9uLlgsIFk6IHRoaXMucG9zaXRpb24uWVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xuICAgIERpYWxvZy5wcm90b3R5cGUuc2V0QWxsb3dEcmFnZ2luZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIGhhbmRsZUNvbnRlbnQgPSAnLicgKyBETEdfSEVBREVSX0NPTlRFTlQ7XG4gICAgICAgIGlmICghdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhETEdfRFJBRykpIHtcbiAgICAgICAgICAgIHRoaXMuZHJhZ09iaiA9IG5ldyBEcmFnZ2FibGUodGhpcy5lbGVtZW50LCB7XG4gICAgICAgICAgICAgICAgY2xvbmU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGlzRHJhZ1Njcm9sbDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBhYm9ydDogJy5lLWRsZy1jbG9zZWljb24tYnRuJyxcbiAgICAgICAgICAgICAgICBoYW5kbGU6IGhhbmRsZUNvbnRlbnQsXG4gICAgICAgICAgICAgICAgZHJhZ1N0YXJ0OiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMudHJpZ2dlcignZHJhZ1N0YXJ0JywgZXZlbnQsIGZ1bmN0aW9uIChkcmFnRXZlbnRBcmdzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNCbGF6b3IoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRyYWdFdmVudEFyZ3MuYmluZEV2ZW50cyhldmVudC5kcmFnRWxlbWVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZHJhZ1N0b3A6IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMuaXNNb2RhbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuSXNEcmFnU3RvcCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWlzTnVsbE9yVW5kZWZpbmVkKF90aGlzLnBvc2l0aW9uKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmRsZ0NvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKCdlLWRsZy0nICsgX3RoaXMucG9zaXRpb24uWCArICctJyArIF90aGlzLnBvc2l0aW9uLlkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVzZXQgdGhlIGRpYWxvZyBwb3NpdGlvbiBhZnRlciBkcmFnIGNvbXBsZXRpb24uXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0VHlwZSA9IF90aGlzLmdldFRhcmdldENvbnRhaW5lcihfdGhpcy50YXJnZXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRhcmdldFR5cGUgaW5zdGFuY2VvZiBFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvbXB1dGVkU3R5bGUgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0YXJnZXRUeXBlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29tcHV0ZWRTdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKCdkaXJlY3Rpb24nKSA9PT0gJ3J0bCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuZWxlbWVudC5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5lbGVtZW50LnN0eWxlLnBvc2l0aW9uID0gJ3JlbGF0aXZlJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5lbGVtZW50LnN0eWxlLnBvc2l0aW9uID0gJ3JlbGF0aXZlJztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBfdGhpcy50cmlnZ2VyKCdkcmFnU3RvcCcsIGV2ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuaXNNb2RlbFJlc2l6ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoRExHX1JFU1RSSUNUX0xFRlRfVkFMVUUpO1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy51cGRhdGVQZXJzaXN0RGF0YSgpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZHJhZzogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnRyaWdnZXIoJ2RyYWcnLCBldmVudCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoIWlzTnVsbE9yVW5kZWZpbmVkKHRoaXMudGFyZ2V0RWxlKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZHJhZ09iai5kcmFnQXJlYSA9IHRoaXMudGFyZ2V0RWxlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBEaWFsb2cucHJvdG90eXBlLnNldEJ1dHRvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzQmxhem9yU2VydmVyUmVuZGVyKCkpIHtcbiAgICAgICAgICAgIHRoaXMuYnV0dG9uQ29udGVudCA9IFtdO1xuICAgICAgICAgICAgdGhpcy5idG5PYmogPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5idXR0b25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuYnV0dG9uc1tpXS5idXR0b25Nb2RlbCkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBidXR0b25UeXBlID0gIWlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuYnV0dG9uc1tpXS50eXBlKSA/XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYnV0dG9uc1tpXS50eXBlLnRvTG93ZXJDYXNlKCkgOiAnYnV0dG9uJztcbiAgICAgICAgICAgICAgICB2YXIgYnRuID0gdGhpcy5jcmVhdGVFbGVtZW50KCdidXR0b24nLCB7IGNsYXNzTmFtZTogdGhpcy5jc3NDbGFzcywgYXR0cnM6IHsgdHlwZTogYnV0dG9uVHlwZSwgdGFiaW5kZXg6ICcwJyB9IH0pO1xuICAgICAgICAgICAgICAgIHRoaXMuYnV0dG9uQ29udGVudC5wdXNoKGJ0bi5vdXRlckhUTUwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zZXRGb290ZXJUZW1wbGF0ZSgpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBmb290ZXJCdG47XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBjaGlsZE5vZGVzID0gdGhpcy5lbGVtZW50LmNoaWxkcmVuOyBpIDwgY2hpbGROb2Rlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKGNoaWxkTm9kZXNbaV0uY2xhc3NMaXN0LmNvbnRhaW5zKERMR19GT09URVJfQ09OVEVOVCkpIHtcbiAgICAgICAgICAgICAgICBmb290ZXJCdG4gPSBjaGlsZE5vZGVzW2ldLnF1ZXJ5U2VsZWN0b3JBbGwoJ2J1dHRvbicpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5idXR0b25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoaXNOdWxsT3JVbmRlZmluZWQodGhpcy5idXR0b25zW2ldLmJ1dHRvbk1vZGVsKSkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCF0aGlzLmlzQmxhem9yU2VydmVyUmVuZGVyKCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmJ0bk9ialtpXSA9IG5ldyBCdXR0b24odGhpcy5idXR0b25zW2ldLmJ1dHRvbk1vZGVsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghaXNOdWxsT3JVbmRlZmluZWQodGhpcy5mdHJUZW1wbGF0ZUNvbnRlbnQpICYmIGZvb3RlckJ0bi5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiAodGhpcy5idXR0b25zW2ldLmNsaWNrKSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICBFdmVudEhhbmRsZXIuYWRkKGZvb3RlckJ0bltpXSwgJ2NsaWNrJywgdGhpcy5idXR0b25zW2ldLmNsaWNrLCB0aGlzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiAodGhpcy5idXR0b25zW2ldLmNsaWNrKSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgICAgICAgICAgRXZlbnRIYW5kbGVyLmFkZChmb290ZXJCdG5baV0sICdjbGljaycsIHRoaXMuYnV0dG9uQ2xpY2tIYW5kbGVyLmJpbmQodGhpcywgaSksIHRoaXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghdGhpcy5pc0JsYXpvclNlcnZlclJlbmRlcigpICYmICFpc051bGxPclVuZGVmaW5lZCh0aGlzLmZ0clRlbXBsYXRlQ29udGVudCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmJ0bk9ialtpXS5hcHBlbmRUbyh0aGlzLmZ0clRlbXBsYXRlQ29udGVudC5jaGlsZHJlbltpXSk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuYnV0dG9uc1tpXS5pc0ZsYXQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5idG5PYmpbaV0uZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdlLWZsYXQnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5wcmltYXJ5QnV0dG9uRWxlID0gdGhpcy5lbGVtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2UtcHJpbWFyeScpWzBdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBEaWFsb2cucHJvdG90eXBlLmJ1dHRvbkNsaWNrSGFuZGxlciA9IGZ1bmN0aW9uIChpbmRleCkge1xuICAgICAgICB0aGlzLnRyaWdnZXIoJ2J1dHRvbnNbJyArIGluZGV4ICsgJ10uY2xpY2snLCB7fSk7XG4gICAgfTtcbiAgICBEaWFsb2cucHJvdG90eXBlLnNldENvbnRlbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuY29udGVudEVsZSA9IHRoaXMuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6IERMR19DT05URU5ULCBpZDogdGhpcy5lbGVtZW50LmlkICsgJ19kaWFsb2ctY29udGVudCcgfSk7XG4gICAgICAgIGlmICh0aGlzLmhlYWRlckVsZSkge1xuICAgICAgICAgICAgYXR0cmlidXRlcyh0aGlzLmVsZW1lbnQsIHsgJ2FyaWEtZGVzY3JpYmVkYnknOiB0aGlzLmVsZW1lbnQuaWQgKyAnX3RpdGxlJyArICcgJyArIHRoaXMuZWxlbWVudC5pZCArICdfZGlhbG9nLWNvbnRlbnQnIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgYXR0cmlidXRlcyh0aGlzLmVsZW1lbnQsIHsgJ2FyaWEtZGVzY3JpYmVkYnknOiB0aGlzLmVsZW1lbnQuaWQgKyAnX2RpYWxvZy1jb250ZW50JyB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5pbm5lckNvbnRlbnRFbGVtZW50KSB7XG4gICAgICAgICAgICB0aGlzLmNvbnRlbnRFbGUuYXBwZW5kQ2hpbGQodGhpcy5pbm5lckNvbnRlbnRFbGVtZW50KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICghaXNOdWxsT3JVbmRlZmluZWQodGhpcy5jb250ZW50KSAmJiB0aGlzLmNvbnRlbnQgIT09ICcnIHx8ICF0aGlzLmluaXRpYWxSZW5kZXIpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgKHRoaXMuY29udGVudCkgPT09ICdzdHJpbmcnICYmICFpc0JsYXpvcigpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRUZW1wbGF0ZSh0aGlzLmNvbnRlbnQsIHRoaXMuY29udGVudEVsZSwgJ2NvbnRlbnQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuY29udGVudCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZW50RWxlLmFwcGVuZENoaWxkKHRoaXMuY29udGVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFRlbXBsYXRlKHRoaXMuY29udGVudCwgdGhpcy5jb250ZW50RWxlLCAnY29udGVudCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghaXNOdWxsT3JVbmRlZmluZWQodGhpcy5oZWFkZXJDb250ZW50KSkge1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50Lmluc2VydEJlZm9yZSh0aGlzLmNvbnRlbnRFbGUsIHRoaXMuZWxlbWVudC5jaGlsZHJlblsxXSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuaW5zZXJ0QmVmb3JlKHRoaXMuY29udGVudEVsZSwgdGhpcy5lbGVtZW50LmNoaWxkcmVuWzBdKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5oZWlnaHQgPT09ICdhdXRvJykge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlzQmxhem9yU2VydmVyUmVuZGVyKCkgJiYgQnJvd3Nlci5pc0lFICYmIHRoaXMuZWxlbWVudC5zdHlsZS53aWR0aCA9PT0gJycgJiYgIWlzTnVsbE9yVW5kZWZpbmVkKHRoaXMud2lkdGgpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLndpZHRoID0gZm9ybWF0VW5pdCh0aGlzLndpZHRoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuc2V0TWF4SGVpZ2h0KCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIERpYWxvZy5wcm90b3R5cGUuc2V0VGVtcGxhdGUgPSBmdW5jdGlvbiAodGVtcGxhdGUsIHRvRWxlbWVudCwgcHJvcCkge1xuICAgICAgICB2YXIgdGVtcGxhdGVGbjtcbiAgICAgICAgdmFyIHRlbXBsYXRlUHJvcHM7XG4gICAgICAgIGlmICh0b0VsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKERMR19IRUFERVIpKSB7XG4gICAgICAgICAgICB0ZW1wbGF0ZVByb3BzID0gdGhpcy5lbGVtZW50LmlkICsgJ2hlYWRlcic7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodG9FbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhETEdfRk9PVEVSX0NPTlRFTlQpKSB7XG4gICAgICAgICAgICB0ZW1wbGF0ZVByb3BzID0gdGhpcy5lbGVtZW50LmlkICsgJ2Zvb3RlclRlbXBsYXRlJztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRlbXBsYXRlUHJvcHMgPSB0aGlzLmVsZW1lbnQuaWQgKyAnY29udGVudCc7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHRlbXBsYXRlVmFsdWU7XG4gICAgICAgIGlmICghaXNOdWxsT3JVbmRlZmluZWQodGVtcGxhdGUub3V0ZXJIVE1MKSkge1xuICAgICAgICAgICAgdG9FbGVtZW50LmFwcGVuZENoaWxkKHRlbXBsYXRlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICgodHlwZW9mIHRlbXBsYXRlID09PSAnc3RyaW5nJykgfHwgKHR5cGVvZiB0ZW1wbGF0ZSAhPT0gJ3N0cmluZycpIHx8IChpc0JsYXpvcigpICYmICF0aGlzLmlzU3RyaW5nVGVtcGxhdGUpKSB7XG4gICAgICAgICAgICBpZiAoKHR5cGVvZiB0ZW1wbGF0ZSA9PT0gJ3N0cmluZycpKSB7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGUgPSB0aGlzLnNhbml0aXplSGVscGVyKHRlbXBsYXRlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmlzVnVlIHx8IHR5cGVvZiB0ZW1wbGF0ZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZUZuID0gY29tcGlsZSh0ZW1wbGF0ZSk7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVWYWx1ZSA9IHRlbXBsYXRlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdG9FbGVtZW50LmlubmVySFRNTCA9IHRlbXBsYXRlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZhciBmcm9tRWxlbWVudHMgPSBbXTtcbiAgICAgICAgaWYgKCFpc051bGxPclVuZGVmaW5lZCh0ZW1wbGF0ZUZuKSkge1xuICAgICAgICAgICAgdmFyIGlzU3RyaW5nID0gKGlzQmxhem9yKCkgJiZcbiAgICAgICAgICAgICAgICAhdGhpcy5pc1N0cmluZ1RlbXBsYXRlICYmICh0ZW1wbGF0ZVZhbHVlKS5pbmRleE9mKCc8ZGl2PkJsYXpvcicpID09PSAwKSA/XG4gICAgICAgICAgICAgICAgdGhpcy5pc1N0cmluZ1RlbXBsYXRlIDogdHJ1ZTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSB0ZW1wbGF0ZUZuKHt9LCB0aGlzLCBwcm9wLCB0ZW1wbGF0ZVByb3BzLCBpc1N0cmluZyk7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGl0ZW0gPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgZnJvbUVsZW1lbnRzLnB1c2goaXRlbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhcHBlbmQoW10uc2xpY2UuY2FsbChmcm9tRWxlbWVudHMpLCB0b0VsZW1lbnQpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKlxuICAgICAqIEByZXR1cm5zIHt2b2lkfVxuICAgICAqIEBoaWRkZW5cbiAgICAgKiBAdmFsdWVcbiAgICAgKi9cbiAgICBEaWFsb2cucHJvdG90eXBlLnNhbml0aXplSGVscGVyID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIGlmICh0aGlzLmVuYWJsZUh0bWxTYW5pdGl6ZXIpIHtcbiAgICAgICAgICAgIHZhciBkaWFsb2dJdGVtID0gU2FuaXRpemVIdG1sSGVscGVyLmJlZm9yZVNhbml0aXplKCk7XG4gICAgICAgICAgICB2YXIgYmVmb3JlRXZlbnQgPSB7XG4gICAgICAgICAgICAgICAgY2FuY2VsOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBoZWxwZXI6IG51bGxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBleHRlbmQoZGlhbG9nSXRlbSwgZGlhbG9nSXRlbSwgYmVmb3JlRXZlbnQpO1xuICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdiZWZvcmVTYW5pdGl6ZUh0bWwnLCBkaWFsb2dJdGVtKTtcbiAgICAgICAgICAgIGlmIChkaWFsb2dJdGVtLmNhbmNlbCAmJiAhaXNOdWxsT3JVbmRlZmluZWQoZGlhbG9nSXRlbS5oZWxwZXIpKSB7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSBkaWFsb2dJdGVtLmhlbHBlcih2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICghZGlhbG9nSXRlbS5jYW5jZWwpIHtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IFNhbml0aXplSHRtbEhlbHBlci5zZXJpYWxpemVWYWx1ZShkaWFsb2dJdGVtLCB2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH07XG4gICAgRGlhbG9nLnByb3RvdHlwZS5zZXRNYXhIZWlnaHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghdGhpcy5hbGxvd01heEhlaWdodCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBkaXNwbGF5ID0gdGhpcy5lbGVtZW50LnN0eWxlLmRpc3BsYXk7XG4gICAgICAgIHRoaXMuZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICB0aGlzLmVsZW1lbnQuc3R5bGUubWF4SGVpZ2h0ID0gKCFpc051bGxPclVuZGVmaW5lZCh0aGlzLnRhcmdldCkpICYmICh0aGlzLnRhcmdldEVsZS5vZmZzZXRIZWlnaHQgPCB3aW5kb3cuaW5uZXJIZWlnaHQpID9cbiAgICAgICAgICAgICh0aGlzLnRhcmdldEVsZS5vZmZzZXRIZWlnaHQgLSAyMCkgKyAncHgnIDogKHdpbmRvdy5pbm5lckhlaWdodCAtIDIwKSArICdweCc7XG4gICAgICAgIHRoaXMuZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gZGlzcGxheTtcbiAgICAgICAgaWYgKEJyb3dzZXIuaXNJRSAmJiB0aGlzLmhlaWdodCA9PT0gJ2F1dG8nICYmICFpc051bGxPclVuZGVmaW5lZCh0aGlzLmNvbnRlbnRFbGUpXG4gICAgICAgICAgICAmJiB0aGlzLmVsZW1lbnQub2Zmc2V0SGVpZ2h0IDwgdGhpcy5jb250ZW50RWxlLm9mZnNldEhlaWdodCkge1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLmhlaWdodCA9ICdpbmhlcml0JztcbiAgICAgICAgfVxuICAgIH07XG4gICAgRGlhbG9nLnByb3RvdHlwZS5zZXRFbmFibGVSVEwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghdGhpcy5pc0JsYXpvclNlcnZlclJlbmRlcigpKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5lbmFibGVSdGwpIHtcbiAgICAgICAgICAgICAgICBhZGRDbGFzcyhbdGhpcy5lbGVtZW50XSwgUlRMKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlbW92ZUNsYXNzKFt0aGlzLmVsZW1lbnRdLCBSVEwpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghaXNOdWxsT3JVbmRlZmluZWQodGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLXJlc2l6ZS1oYW5kbGUnKSkpIHtcbiAgICAgICAgICAgIHJlbW92ZVJlc2l6ZSgpO1xuICAgICAgICAgICAgdGhpcy5zZXRSZXNpemUoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgRGlhbG9nLnByb3RvdHlwZS5zZXRUYXJnZXRDb250ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZiAoaXNOdWxsT3JVbmRlZmluZWQodGhpcy5jb250ZW50KSB8fCB0aGlzLmNvbnRlbnQgPT09ICcnKSB7XG4gICAgICAgICAgICB2YXIgaXNDb250ZW50ID0gdGhpcy5lbGVtZW50LmlubmVySFRNTC5yZXBsYWNlKC9cXHN8PChcXC8/fFxcLz8pKCEtLSEtLSk+L2csICcnKSAhPT0gJyc7XG4gICAgICAgICAgICBpZiAodGhpcy5lbGVtZW50LmNoaWxkcmVuLmxlbmd0aCA+IDAgfHwgaXNDb250ZW50KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbm5lckNvbnRlbnRFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICAgICAgICAgICAgICAgIFtdLnNsaWNlLmNhbGwodGhpcy5lbGVtZW50LmNoaWxkTm9kZXMpLmZvckVhY2goZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlbC5ub2RlVHlwZSAhPT0gOCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuaW5uZXJDb250ZW50RWxlbWVudC5hcHBlbmRDaGlsZChlbCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgRGlhbG9nLnByb3RvdHlwZS5zZXRIZWFkZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLmhlYWRlckVsZSkge1xuICAgICAgICAgICAgdGhpcy5oZWFkZXJFbGUuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmhlYWRlckVsZSA9IHRoaXMuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBpZDogdGhpcy5lbGVtZW50LmlkICsgJ190aXRsZScsIGNsYXNzTmFtZTogRExHX0hFQURFUiB9KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNyZWF0ZUhlYWRlckNvbnRlbnQoKTtcbiAgICAgICAgdGhpcy5oZWFkZXJDb250ZW50LmFwcGVuZENoaWxkKHRoaXMuaGVhZGVyRWxlKTtcbiAgICAgICAgdGhpcy5zZXRUZW1wbGF0ZSh0aGlzLmhlYWRlciwgdGhpcy5oZWFkZXJFbGUsICdoZWFkZXInKTtcbiAgICAgICAgYXR0cmlidXRlcyh0aGlzLmVsZW1lbnQsIHsgJ2FyaWEtZGVzY3JpYmVkYnknOiB0aGlzLmVsZW1lbnQuaWQgKyAnX3RpdGxlJyB9KTtcbiAgICAgICAgYXR0cmlidXRlcyh0aGlzLmVsZW1lbnQsIHsgJ2FyaWEtbGFiZWxsZWRieSc6IHRoaXMuZWxlbWVudC5pZCArICdfZGlhbG9nLWhlYWRlcicgfSk7XG4gICAgICAgIHRoaXMuZWxlbWVudC5pbnNlcnRCZWZvcmUodGhpcy5oZWFkZXJDb250ZW50LCB0aGlzLmVsZW1lbnQuY2hpbGRyZW5bMF0pO1xuICAgICAgICBpZiAodGhpcy5hbGxvd0RyYWdnaW5nICYmICghaXNOdWxsT3JVbmRlZmluZWQodGhpcy5oZWFkZXJDb250ZW50KSkpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0QWxsb3dEcmFnZ2luZygpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBEaWFsb2cucHJvdG90eXBlLnNldEZvb3RlclRlbXBsYXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5mdHJUZW1wbGF0ZUNvbnRlbnQpIHtcbiAgICAgICAgICAgIHRoaXMuZnRyVGVtcGxhdGVDb250ZW50LmlubmVySFRNTCA9ICcnO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5mdHJUZW1wbGF0ZUNvbnRlbnQgPSB0aGlzLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IERMR19GT09URVJfQ09OVEVOVFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuZm9vdGVyVGVtcGxhdGUgIT09ICcnICYmICFpc051bGxPclVuZGVmaW5lZCh0aGlzLmZvb3RlclRlbXBsYXRlKSkge1xuICAgICAgICAgICAgdGhpcy5zZXRUZW1wbGF0ZSh0aGlzLmZvb3RlclRlbXBsYXRlLCB0aGlzLmZ0clRlbXBsYXRlQ29udGVudCwgJ2Zvb3RlclRlbXBsYXRlJyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmZ0clRlbXBsYXRlQ29udGVudC5pbm5lckhUTUwgPSB0aGlzLmJ1dHRvbkNvbnRlbnQuam9pbignJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5lbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuZnRyVGVtcGxhdGVDb250ZW50KTtcbiAgICB9O1xuICAgIERpYWxvZy5wcm90b3R5cGUuY3JlYXRlSGVhZGVyQ29udGVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKGlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuaGVhZGVyQ29udGVudCkpIHtcbiAgICAgICAgICAgIHRoaXMuaGVhZGVyQ29udGVudCA9IHRoaXMuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBpZDogdGhpcy5lbGVtZW50LmlkICsgJ19kaWFsb2ctaGVhZGVyJywgY2xhc3NOYW1lOiBETEdfSEVBREVSX0NPTlRFTlQgfSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIERpYWxvZy5wcm90b3R5cGUucmVuZGVyQ2xvc2VJY29uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5zaG93Q2xvc2VJY29uKSB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlSWNvbiA9IHRoaXMuY3JlYXRlRWxlbWVudCgnYnV0dG9uJywgeyBjbGFzc05hbWU6IERMR19DTE9TRV9JQ09OX0JUTiwgYXR0cnM6IHsgdHlwZTogJ2J1dHRvbicgfSB9KTtcbiAgICAgICAgICAgIHRoaXMuY2xvc2VJY29uQnRuT2JqID0gbmV3IEJ1dHRvbih7IGNzc0NsYXNzOiAnZS1mbGF0JywgaWNvbkNzczogRExHX0NMT1NFX0lDT04gKyAnICcgKyBJQ09OIH0pO1xuICAgICAgICAgICAgdGhpcy5jbG9zZUljb25UaXRsZSgpO1xuICAgICAgICAgICAgaWYgKCFpc051bGxPclVuZGVmaW5lZCh0aGlzLmhlYWRlckNvbnRlbnQpKSB7XG4gICAgICAgICAgICAgICAgcHJlcGVuZChbdGhpcy5jbG9zZUljb25dLCB0aGlzLmhlYWRlckNvbnRlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jcmVhdGVIZWFkZXJDb250ZW50KCk7XG4gICAgICAgICAgICAgICAgcHJlcGVuZChbdGhpcy5jbG9zZUljb25dLCB0aGlzLmhlYWRlckNvbnRlbnQpO1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5pbnNlcnRCZWZvcmUodGhpcy5oZWFkZXJDb250ZW50LCB0aGlzLmVsZW1lbnQuY2hpbGRyZW5bMF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jbG9zZUljb25CdG5PYmouYXBwZW5kVG8odGhpcy5jbG9zZUljb24pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBEaWFsb2cucHJvdG90eXBlLmNsb3NlSWNvblRpdGxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmwxMG4uc2V0TG9jYWxlKHRoaXMubG9jYWxlKTtcbiAgICAgICAgdmFyIGNsb3NlSWNvblRpdGxlID0gdGhpcy5sMTBuLmdldENvbnN0YW50KCdjbG9zZScpO1xuICAgICAgICB0aGlzLmNsb3NlSWNvbi5zZXRBdHRyaWJ1dGUoJ3RpdGxlJywgY2xvc2VJY29uVGl0bGUpO1xuICAgICAgICB0aGlzLmNsb3NlSWNvbi5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCBjbG9zZUljb25UaXRsZSk7XG4gICAgfTtcbiAgICBEaWFsb2cucHJvdG90eXBlLnNldENTU0NsYXNzID0gZnVuY3Rpb24gKG9sZENTU0NsYXNzKSB7XG4gICAgICAgIGlmIChvbGRDU1NDbGFzcykge1xuICAgICAgICAgICAgcmVtb3ZlQ2xhc3MoW3RoaXMuZWxlbWVudF0sIG9sZENTU0NsYXNzLnNwbGl0KCcgJykpO1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNNb2RhbCAmJiAhaXNOdWxsT3JVbmRlZmluZWQodGhpcy5kbGdDb250YWluZXIpKSB7XG4gICAgICAgICAgICAgICAgcmVtb3ZlQ2xhc3MoW3RoaXMuZGxnQ29udGFpbmVyXSwgb2xkQ1NTQ2xhc3Muc3BsaXQoJyAnKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuY3NzQ2xhc3MpIHtcbiAgICAgICAgICAgIGFkZENsYXNzKFt0aGlzLmVsZW1lbnRdLCB0aGlzLmNzc0NsYXNzLnNwbGl0KCcgJykpO1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNNb2RhbCAmJiAhaXNOdWxsT3JVbmRlZmluZWQodGhpcy5kbGdDb250YWluZXIpKSB7XG4gICAgICAgICAgICAgICAgYWRkQ2xhc3MoW3RoaXMuZGxnQ29udGFpbmVyXSwgdGhpcy5jc3NDbGFzcy5zcGxpdCgnICcpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgRGlhbG9nLnByb3RvdHlwZS5zZXRJc01vZGFsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmRsZ0NvbnRhaW5lciA9IHRoaXMuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6IERMR19DT05UQUlORVIgfSk7XG4gICAgICAgIHRoaXMuc2V0Q1NTQ2xhc3MoKTtcbiAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoRExHX1NIT1cpO1xuICAgICAgICB0aGlzLmVsZW1lbnQucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUodGhpcy5kbGdDb250YWluZXIsIHRoaXMuZWxlbWVudCk7XG4gICAgICAgIHRoaXMuZGxnQ29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMuZWxlbWVudCk7XG4gICAgICAgIGFkZENsYXNzKFt0aGlzLmVsZW1lbnRdLCBNT0RBTF9ETEcpO1xuICAgICAgICB0aGlzLmRsZ092ZXJsYXkgPSB0aGlzLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiBETEdfT1ZFUkxBWSB9KTtcbiAgICAgICAgdGhpcy5kbGdPdmVybGF5LnN0eWxlLnpJbmRleCA9ICh0aGlzLnpJbmRleCAtIDEpLnRvU3RyaW5nKCk7XG4gICAgICAgIHRoaXMuZGxnQ29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMuZGxnT3ZlcmxheSk7XG4gICAgfTtcbiAgICBEaWFsb2cucHJvdG90eXBlLmdldFZhbGlkRm9jdXNOb2RlID0gZnVuY3Rpb24gKGl0ZW1zKSB7XG4gICAgICAgIHZhciBub2RlO1xuICAgICAgICBmb3IgKHZhciB1ID0gMDsgdSA8IGl0ZW1zLmxlbmd0aDsgdSsrKSB7XG4gICAgICAgICAgICBub2RlID0gaXRlbXNbdV07XG4gICAgICAgICAgICBpZiAoKG5vZGUuY2xpZW50SGVpZ2h0ID4gMCB8fCAobm9kZS50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICdhJyAmJiBub2RlLmhhc0F0dHJpYnV0ZSgnaHJlZicpKSkgJiYgbm9kZS50YWJJbmRleCA+IC0xICYmXG4gICAgICAgICAgICAgICAgIW5vZGUuZGlzYWJsZWQgJiYgIXRoaXMuZGlzYWJsZUVsZW1lbnQobm9kZSwgJ1tkaXNhYmxlZF0sW2FyaWEtZGlzYWJsZWQ9XCJ0cnVlXCJdLFt0eXBlPVwiaGlkZGVuXCJdJykpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG5vZGUgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBub2RlO1xuICAgIH07XG4gICAgRGlhbG9nLnByb3RvdHlwZS5mb2N1c2FibGVFbGVtZW50cyA9IGZ1bmN0aW9uIChjb250ZW50KSB7XG4gICAgICAgIGlmICghaXNOdWxsT3JVbmRlZmluZWQoY29udGVudCkpIHtcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9ICdpbnB1dCxzZWxlY3QsdGV4dGFyZWEsYnV0dG9uLGEsW2NvbnRlbnRlZGl0YWJsZT1cInRydWVcIl0sW3RhYmluZGV4XSc7XG4gICAgICAgICAgICB2YXIgaXRlbXMgPSBjb250ZW50LnF1ZXJ5U2VsZWN0b3JBbGwodmFsdWUpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VmFsaWRGb2N1c05vZGUoaXRlbXMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH07XG4gICAgRGlhbG9nLnByb3RvdHlwZS5nZXRBdXRvRm9jdXNOb2RlID0gZnVuY3Rpb24gKGNvbnRhaW5lcikge1xuICAgICAgICB2YXIgbm9kZSA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuJyArIERMR19DTE9TRV9JQ09OX0JUTik7XG4gICAgICAgIHZhciB2YWx1ZSA9ICdbYXV0b2ZvY3VzXSc7XG4gICAgICAgIHZhciBpdGVtcyA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKHZhbHVlKTtcbiAgICAgICAgdmFyIHZhbGlkTm9kZSA9IHRoaXMuZ2V0VmFsaWRGb2N1c05vZGUoaXRlbXMpO1xuICAgICAgICBpZiAoaXNCbGF6b3IoKSkge1xuICAgICAgICAgICAgdGhpcy5wcmltYXJ5QnV0dG9uRWxlID0gdGhpcy5lbGVtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2UtcHJpbWFyeScpWzBdO1xuICAgICAgICB9XG4gICAgICAgIGlmICghaXNOdWxsT3JVbmRlZmluZWQodmFsaWROb2RlKSkge1xuICAgICAgICAgICAgbm9kZSA9IHZhbGlkTm9kZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZhbGlkTm9kZSA9IHRoaXMuZm9jdXNhYmxlRWxlbWVudHModGhpcy5jb250ZW50RWxlKTtcbiAgICAgICAgICAgIGlmICghaXNOdWxsT3JVbmRlZmluZWQodmFsaWROb2RlKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBub2RlID0gdmFsaWROb2RlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoIWlzTnVsbE9yVW5kZWZpbmVkKHRoaXMucHJpbWFyeUJ1dHRvbkVsZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy4nICsgRExHX1BSSU1BUllfQlVUVE9OKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbm9kZTtcbiAgICB9O1xuICAgIERpYWxvZy5wcm90b3R5cGUuZGlzYWJsZUVsZW1lbnQgPSBmdW5jdGlvbiAoZWxlbWVudCwgdCkge1xuICAgICAgICB2YXIgZWxlbWVudE1hdGNoID0gZWxlbWVudCA/IGVsZW1lbnQubWF0Y2hlcyB8fCBlbGVtZW50LndlYmtpdE1hdGNoZXNTZWxlY3RvciB8fCBlbGVtZW50Lm1zR2V0UmVnaW9uQ29udGVudCA6IG51bGw7XG4gICAgICAgIGlmIChlbGVtZW50TWF0Y2gpIHtcbiAgICAgICAgICAgIGZvciAoOyBlbGVtZW50OyBlbGVtZW50ID0gZWxlbWVudC5wYXJlbnROb2RlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQgaW5zdGFuY2VvZiBFbGVtZW50ICYmIGVsZW1lbnRNYXRjaC5jYWxsKGVsZW1lbnQsIHQpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBlbGVtZW50O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9O1xuICAgIERpYWxvZy5wcm90b3R5cGUuZm9jdXNDb250ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZWxlbWVudCA9IHRoaXMuZ2V0QXV0b0ZvY3VzTm9kZSh0aGlzLmVsZW1lbnQpO1xuICAgICAgICB2YXIgbm9kZSA9ICFpc051bGxPclVuZGVmaW5lZChlbGVtZW50KSA/IGVsZW1lbnQgOiB0aGlzLmVsZW1lbnQ7XG4gICAgICAgIHZhciB1c2VyQWdlbnQgPSBCcm93c2VyLnVzZXJBZ2VudDtcbiAgICAgICAgaWYgKHVzZXJBZ2VudC5pbmRleE9mKCdNU0lFICcpID4gMCB8fCB1c2VyQWdlbnQuaW5kZXhPZignVHJpZGVudC8nKSA+IDApIHtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5mb2N1cygpO1xuICAgICAgICB9XG4gICAgICAgIG5vZGUuZm9jdXMoKTtcbiAgICAgICAgdGhpcy51bkJpbmRFdmVudCh0aGlzLmVsZW1lbnQpO1xuICAgICAgICB0aGlzLmJpbmRFdmVudCh0aGlzLmVsZW1lbnQpO1xuICAgIH07XG4gICAgRGlhbG9nLnByb3RvdHlwZS5iaW5kRXZlbnQgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICBFdmVudEhhbmRsZXIuYWRkKGVsZW1lbnQsICdrZXlkb3duJywgdGhpcy5rZXlEb3duLCB0aGlzKTtcbiAgICB9O1xuICAgIERpYWxvZy5wcm90b3R5cGUudW5CaW5kRXZlbnQgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICBFdmVudEhhbmRsZXIucmVtb3ZlKGVsZW1lbnQsICdrZXlkb3duJywgdGhpcy5rZXlEb3duKTtcbiAgICB9O1xuICAgIERpYWxvZy5wcm90b3R5cGUudXBkYXRlU2FuaXRpemVDb250ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIXRoaXMuaXNCbGF6b3JTZXJ2ZXJSZW5kZXIoKSkge1xuICAgICAgICAgICAgdGhpcy5jb250ZW50RWxlLmlubmVySFRNTCA9IHRoaXMuc2FuaXRpemVIZWxwZXIodGhpcy5jb250ZW50KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgRGlhbG9nLnByb3RvdHlwZS5pc0JsYXpvclNlcnZlclJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGlzQmxhem9yKCkgJiYgdGhpcy5pc1NlcnZlclJlbmRlcmVkO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogTW9kdWxlIHJlcXVpcmVkIGZ1bmN0aW9uXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIERpYWxvZy5wcm90b3R5cGUuZ2V0TW9kdWxlTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuICdkaWFsb2cnO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQ2FsbGVkIGludGVybmFsbHkgaWYgYW55IG9mIHRoZSBwcm9wZXJ0eSB2YWx1ZSBjaGFuZ2VkXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0RpYWxvZ01vZGVsfSBuZXdQcm9wIC0gc3BlY2lmaWVzIHRoZSBuZXcgcHJvcGVydHlcbiAgICAgKiBAcGFyYW0ge0RpYWxvZ01vZGVsfSBvbGRQcm9wIC0gc3BlY2lmaWVzIHRoZSBvbGQgcHJvcGVydHlcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEByZXR1cm5zIHt2b2lkfVxuICAgICAqL1xuICAgIERpYWxvZy5wcm90b3R5cGUub25Qcm9wZXJ0eUNoYW5nZWQgPSBmdW5jdGlvbiAobmV3UHJvcCwgb2xkUHJvcCkge1xuICAgICAgICBpZiAoIXRoaXMuZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoUk9PVCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gT2JqZWN0LmtleXMobmV3UHJvcCk7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICB2YXIgcHJvcCA9IF9hW19pXTtcbiAgICAgICAgICAgIHN3aXRjaCAocHJvcCkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ2NvbnRlbnQnOlxuICAgICAgICAgICAgICAgICAgICBpZiAoIWlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuY29udGVudCkgJiYgdGhpcy5jb250ZW50ICE9PSAnJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNCbGF6b3JTZXJ2ZXJSZW5kZXIoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29udGVudEVsZSA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1kbGctY29udGVudCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpc051bGxPclVuZGVmaW5lZCh0aGlzLmNvbnRlbnRFbGUpICYmIHRoaXMuY29udGVudEVsZS5nZXRBdHRyaWJ1dGUoJ3JvbGUnKSAhPT0gJ2RpYWxvZycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaXNCbGF6b3JTZXJ2ZXJSZW5kZXIoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnRlbnRFbGUuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgKHRoaXMuY29udGVudCkgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbGVhclRlbXBsYXRlKFsnY29udGVudCddKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGV0YWNoKHRoaXMuY29udGVudEVsZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29udGVudEVsZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0Q29udGVudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiAodGhpcy5jb250ZW50KSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlU2FuaXRpemVDb250ZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnRlbnRFbGUuYXBwZW5kQ2hpbGQodGhpcy5jb250ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldE1heEhlaWdodCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRDb250ZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoIWlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuY29udGVudEVsZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRldGFjaCh0aGlzLmNvbnRlbnRFbGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb250ZW50RWxlID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdoZWFkZXInOlxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5oZWFkZXIgPT09ICcnIHx8IGlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuaGVhZGVyKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaGVhZGVyRWxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGV0YWNoKHRoaXMuaGVhZGVyRWxlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhlYWRlckVsZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldEhlYWRlcigpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2Zvb3RlclRlbXBsYXRlJzpcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZm9vdGVyVGVtcGxhdGUgPT09ICcnIHx8IGlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuZm9vdGVyVGVtcGxhdGUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuZnRyVGVtcGxhdGVDb250ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZGV0YWNoKHRoaXMuZnRyVGVtcGxhdGVDb250ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZnRyVGVtcGxhdGVDb250ZW50ID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYnV0dG9ucyA9IFt7fV07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldEZvb3RlclRlbXBsYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmJ1dHRvbnMgPSBbe31dO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3Nob3dDbG9zZUljb24nOlxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5lbGVtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoRExHX0NMT1NFX0lDT04pLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5zaG93Q2xvc2VJY29uICYmICh0aGlzLmhlYWRlciA9PT0gJycgfHwgaXNOdWxsT3JVbmRlZmluZWQodGhpcy5oZWFkZXIpKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRldGFjaCh0aGlzLmhlYWRlckNvbnRlbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGVhZGVyQ29udGVudCA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICghdGhpcy5zaG93Q2xvc2VJY29uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGV0YWNoKHRoaXMuY2xvc2VJY29uKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyQ2xvc2VJY29uKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLndpcmVFdmVudHMoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdsb2NhbGUnOlxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zaG93Q2xvc2VJY29uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlSWNvblRpdGxlKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAndmlzaWJsZSc6XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnZpc2libGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvdygpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5oaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnaXNNb2RhbCc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlSXNNb2RhbCgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdoZWlnaHQnOlxuICAgICAgICAgICAgICAgICAgICBzZXRTdHlsZUF0dHJpYnV0ZSh0aGlzLmVsZW1lbnQsIHsgJ2hlaWdodCc6IGZvcm1hdFVuaXQobmV3UHJvcC5oZWlnaHQpIH0pO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVBlcnNpc3REYXRhKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3dpZHRoJzpcbiAgICAgICAgICAgICAgICAgICAgc2V0U3R5bGVBdHRyaWJ1dGUodGhpcy5lbGVtZW50LCB7ICd3aWR0aCc6IGZvcm1hdFVuaXQobmV3UHJvcC53aWR0aCkgfSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlUGVyc2lzdERhdGEoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnekluZGV4JzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3B1cE9iai56SW5kZXggPSB0aGlzLnpJbmRleDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNNb2RhbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRPdmVybGF5WmluZGV4KHRoaXMuekluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5lbGVtZW50LnN0eWxlLnpJbmRleCAhPT0gdGhpcy56SW5kZXgudG9TdHJpbmcoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jYWxjdWxhdGV6SW5kZXggPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdjc3NDbGFzcyc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0Q1NTQ2xhc3Mob2xkUHJvcC5jc3NDbGFzcyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2J1dHRvbnMnOiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudW5XaXJlQnV0dG9uRXZlbnRzKCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGVzdHJveUJ1dHRvbnMoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFpc051bGxPclVuZGVmaW5lZCh0aGlzLmZ0clRlbXBsYXRlQ29udGVudCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRldGFjaCh0aGlzLmZ0clRlbXBsYXRlQ29udGVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZ0clRlbXBsYXRlQ29udGVudCA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mb290ZXJUZW1wbGF0ZSA9ICcnO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldEJ1dHRvbigpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSAnYWxsb3dEcmFnZ2luZyc6XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmFsbG93RHJhZ2dpbmcgJiYgKCFpc051bGxPclVuZGVmaW5lZCh0aGlzLmhlYWRlckNvbnRlbnQpKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRBbGxvd0RyYWdnaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRyYWdPYmouZGVzdHJveSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3RhcmdldCc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0VGFyZ2V0KG5ld1Byb3AudGFyZ2V0KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAncG9zaXRpb24nOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNoZWNrUG9zaXRpb25EYXRhKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzTW9kYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwb3NpdGlvblggPSB0aGlzLnBvc2l0aW9uLlg7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcG9zaXRpb25ZID0gdGhpcy5wb3NpdGlvbi5ZO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpc051bGxPclVuZGVmaW5lZChvbGRQcm9wLnBvc2l0aW9uKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaXNOdWxsT3JVbmRlZmluZWQob2xkUHJvcC5wb3NpdGlvbi5YKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvblggPSBvbGRQcm9wLnBvc2l0aW9uLlg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaXNOdWxsT3JVbmRlZmluZWQob2xkUHJvcC5wb3NpdGlvbi5ZKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvblkgPSBvbGRQcm9wLnBvc2l0aW9uLlk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZGxnQ29udGFpbmVyLmNsYXNzTGlzdC5jb250YWlucygnZS1kbGctJyArIHBvc2l0aW9uWCArICctJyArIHBvc2l0aW9uWSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRsZ0NvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKCdlLWRsZy0nICsgcG9zaXRpb25YICsgJy0nICsgcG9zaXRpb25ZKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBvc2l0aW9uQ2hhbmdlKCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlUGVyc2lzdERhdGEoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZW5hYmxlUnRsJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRFbmFibGVSVEwoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZW5hYmxlUmVzaXplJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRSZXNpemUoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc01vZGVsUmVzaXplID0gdGhpcy5lbmFibGVSZXNpemUgJiYgdGhpcy5pc01vZGFsO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5lbmFibGVSZXNpemUgJiYgdGhpcy5kaWFsb2dPcGVuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlc2V0UmVzaXplSWNvbigpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ21pbkhlaWdodCc6XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm1pbkhlaWdodCAhPT0gJycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5zdHlsZS5taW5IZWlnaHQgPSBmb3JtYXRVbml0KHRoaXMubWluSGVpZ2h0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgRGlhbG9nLnByb3RvdHlwZS5zZXRUYXJnZXQgPSBmdW5jdGlvbiAodGFyZ2V0KSB7XG4gICAgICAgIHRoaXMucG9wdXBPYmoucmVsYXRlVG8gPSB0YXJnZXQ7XG4gICAgICAgIHRoaXMudGFyZ2V0ID0gdGFyZ2V0O1xuICAgICAgICB0aGlzLnRhcmdldEVsZSA9ICgodHlwZW9mIHRoaXMudGFyZ2V0KSA9PT0gJ3N0cmluZycpID9cbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy50YXJnZXQpIDogdGhpcy50YXJnZXQ7XG4gICAgICAgIGlmICh0aGlzLmRyYWdPYmopIHtcbiAgICAgICAgICAgIHRoaXMuZHJhZ09iai5kcmFnQXJlYSA9IHRoaXMudGFyZ2V0RWxlO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2V0TWF4SGVpZ2h0KCk7XG4gICAgICAgIGlmICh0aGlzLmlzTW9kYWwpIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlSXNNb2RhbCgpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmVuYWJsZVJlc2l6ZSkge1xuICAgICAgICAgICAgdGhpcy5zZXRSZXNpemUoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWlzTnVsbE9yVW5kZWZpbmVkKHRoaXMudGFyZ2V0RWxlKSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNNb2RhbCAmJiAhaXNOdWxsT3JVbmRlZmluZWQodGhpcy5kbGdDb250YWluZXIpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50YXJnZXRFbGUuYXBwZW5kQ2hpbGQodGhpcy5kbGdDb250YWluZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoIWlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuZWxlbWVudCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRhcmdldEVsZS5hcHBlbmRDaGlsZCh0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBEaWFsb2cucHJvdG90eXBlLnVwZGF0ZUlzTW9kYWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtbW9kYWwnLCB0aGlzLmlzTW9kYWwgPyAndHJ1ZScgOiAnZmFsc2UnKTtcbiAgICAgICAgaWYgKHRoaXMuaXNNb2RhbCkge1xuICAgICAgICAgICAgaWYgKGlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuZGxnT3ZlcmxheSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldElzTW9kYWwoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuc3R5bGUudG9wID0gJzBweCc7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLmxlZnQgPSAnMHB4JztcbiAgICAgICAgICAgICAgICBpZiAoIWlzTnVsbE9yVW5kZWZpbmVkKHRoaXMudGFyZ2V0RWxlKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRhcmdldEVsZS5hcHBlbmRDaGlsZCh0aGlzLmRsZ0NvbnRhaW5lcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmVtb3ZlQ2xhc3MoW3RoaXMuZWxlbWVudF0sIE1PREFMX0RMRyk7XG4gICAgICAgICAgICByZW1vdmVDbGFzcyhbZG9jdW1lbnQuYm9keV0sIFtETEdfVEFSR0VULCBTQ1JPTExfRElTQUJMRURdKTtcbiAgICAgICAgICAgIGRldGFjaCh0aGlzLmRsZ092ZXJsYXkpO1xuICAgICAgICAgICAgd2hpbGUgKHRoaXMuZGxnQ29udGFpbmVyLmZpcnN0Q2hpbGQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRsZ0NvbnRhaW5lci5wYXJlbnRFbGVtZW50Lmluc2VydEJlZm9yZSh0aGlzLmRsZ0NvbnRhaW5lci5maXJzdENoaWxkLCB0aGlzLmRsZ0NvbnRhaW5lcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmRsZ0NvbnRhaW5lci5wYXJlbnRFbGVtZW50LnJlbW92ZUNoaWxkKHRoaXMuZGxnQ29udGFpbmVyKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy52aXNpYmxlKSB7XG4gICAgICAgICAgICB0aGlzLnNob3coKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnBvc2l0aW9uQ2hhbmdlKCk7XG4gICAgICAgIGlmICh0aGlzLmlzTW9kYWwgJiYgdGhpcy5kbGdPdmVybGF5KSB7XG4gICAgICAgICAgICBFdmVudEhhbmRsZXIuYWRkKHRoaXMuZGxnT3ZlcmxheSwgJ2NsaWNrJywgdGhpcy5kbGdPdmVybGF5Q2xpY2tFdmVudEhhbmRsZXIsIHRoaXMpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBEaWFsb2cucHJvdG90eXBlLnNldHpJbmRleCA9IGZ1bmN0aW9uICh6SW5kZXhFbGVtZW50LCBzZXRQb3B1cFppbmRleCkge1xuICAgICAgICB2YXIgcHJldk9uQ2hhbmdlID0gdGhpcy5pc1Byb3RlY3RlZE9uQ2hhbmdlO1xuICAgICAgICB0aGlzLmlzUHJvdGVjdGVkT25DaGFuZ2UgPSB0cnVlO1xuICAgICAgICB2YXIgY3VycmVudHpJbmRleCA9IGdldFppbmRleFBhcnRpYWwoekluZGV4RWxlbWVudCk7XG4gICAgICAgIHRoaXMuekluZGV4ID0gY3VycmVudHpJbmRleCA+IHRoaXMuekluZGV4ID8gY3VycmVudHpJbmRleCA6IHRoaXMuekluZGV4O1xuICAgICAgICB0aGlzLmlzUHJvdGVjdGVkT25DaGFuZ2UgPSBwcmV2T25DaGFuZ2U7XG4gICAgICAgIGlmIChzZXRQb3B1cFppbmRleCkge1xuICAgICAgICAgICAgdGhpcy5wb3B1cE9iai56SW5kZXggPSB0aGlzLnpJbmRleDtcbiAgICAgICAgfVxuICAgIH07XG4gICAgRGlhbG9nLnByb3RvdHlwZS53aW5kb3dSZXNpemVIYW5kbGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBzZXRNYXhXaWR0aCh0aGlzLnRhcmdldEVsZS5jbGllbnRXaWR0aCk7XG4gICAgICAgIHNldE1heEhlaWdodCh0aGlzLnRhcmdldEVsZS5jbGllbnRIZWlnaHQpO1xuICAgICAgICB0aGlzLnNldE1heEhlaWdodCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBwcm9wZXJ0aWVzIHRvIGJlIG1haW50YWluZWQgaW4gdGhlIHBlcnNpc3RlZCBzdGF0ZS5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHt2b2lkfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgRGlhbG9nLnByb3RvdHlwZS5nZXRQZXJzaXN0RGF0YSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYWRkT25QZXJzaXN0KFsnd2lkdGgnLCAnaGVpZ2h0JywgJ3Bvc2l0aW9uJ10pO1xuICAgIH07XG4gICAgRGlhbG9nLnByb3RvdHlwZS5yZW1vdmVBbGxDaGlsZHJlbiA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgIHdoaWxlIChlbGVtZW50LmNoaWxkcmVuWzBdKSB7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZUFsbENoaWxkcmVuKGVsZW1lbnQuY2hpbGRyZW5bMF0pO1xuICAgICAgICAgICAgZWxlbWVudC5yZW1vdmVDaGlsZChlbGVtZW50LmNoaWxkcmVuWzBdKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogVG8gZGVzdHJveSB0aGUgd2lkZ2V0XG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICAgKi9cbiAgICBEaWFsb2cucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGNsYXNzQXJyYXkgPSBbUlRMLCBNT0RBTF9ETEcsIERMR19SRVNJWkFCTEUsIERMR19SRVNUUklDVF9MRUZUX1ZBTFVFLCBGVUxMU0NSRUVOLCBERVZJQ0VdO1xuICAgICAgICB2YXIgYXR0cnMgPSBbJ3JvbGUnLCAnYXJpYS1tb2RhbCcsICdhcmlhLWxhYmVsbGVkYnknLCAnYXJpYS1kZXNjcmliZWRieScsICdhcmlhLWdyYWJiZWQnLCAndGFiaW5kZXgnLCAnc3R5bGUnXTtcbiAgICAgICAgcmVtb3ZlQ2xhc3MoW3RoaXMudGFyZ2V0RWxlXSwgW0RMR19UQVJHRVQsIFNDUk9MTF9ESVNBQkxFRF0pO1xuICAgICAgICBpZiAoIWlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuZWxlbWVudCkgJiYgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhGVUxMU0NSRUVOKSkge1xuICAgICAgICAgICAgcmVtb3ZlQ2xhc3MoW2RvY3VtZW50LmJvZHldLCBbRExHX1RBUkdFVCwgU0NST0xMX0RJU0FCTEVEXSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuaXNNb2RhbCkge1xuICAgICAgICAgICAgcmVtb3ZlQ2xhc3MoWyghaXNOdWxsT3JVbmRlZmluZWQodGhpcy50YXJnZXRFbGUpID8gdGhpcy50YXJnZXRFbGUgOiBkb2N1bWVudC5ib2R5KV0sIFNDUk9MTF9ESVNBQkxFRCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy51bldpcmVFdmVudHMoKTtcbiAgICAgICAgdGhpcy51bldpcmVCdXR0b25FdmVudHMoKTtcbiAgICAgICAgdGhpcy5kZXN0cm95QnV0dG9ucygpO1xuICAgICAgICBpZiAoIWlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuY2xvc2VJY29uQnRuT2JqKSkge1xuICAgICAgICAgICAgdGhpcy5jbG9zZUljb25CdG5PYmouZGVzdHJveSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghaXNOdWxsT3JVbmRlZmluZWQodGhpcy5kcmFnT2JqKSkge1xuICAgICAgICAgICAgdGhpcy5kcmFnT2JqLmRlc3Ryb3koKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWlzTnVsbE9yVW5kZWZpbmVkKHRoaXMucG9wdXBPYmouZWxlbWVudCkgJiYgdGhpcy5wb3B1cE9iai5lbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhQT1BVUF9ST09UKSkge1xuICAgICAgICAgICAgdGhpcy5wb3B1cE9iai5kZXN0cm95KCk7XG4gICAgICAgIH1cbiAgICAgICAgcmVtb3ZlQ2xhc3MoW3RoaXMuZWxlbWVudF0sIGNsYXNzQXJyYXkpO1xuICAgICAgICBpZiAoIWlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuY3NzQ2xhc3MpICYmIHRoaXMuY3NzQ2xhc3MgIT09ICcnKSB7XG4gICAgICAgICAgICByZW1vdmVDbGFzcyhbdGhpcy5lbGVtZW50XSwgdGhpcy5jc3NDbGFzcy5zcGxpdCgnICcpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWlzTnVsbE9yVW5kZWZpbmVkKHRoaXMucmVmRWxlbWVudCkgJiYgIWlzTnVsbE9yVW5kZWZpbmVkKHRoaXMucmVmRWxlbWVudC5wYXJlbnRFbGVtZW50KSkge1xuICAgICAgICAgICAgdGhpcy5yZWZFbGVtZW50LnBhcmVudEVsZW1lbnQuaW5zZXJ0QmVmb3JlKCh0aGlzLmlzTW9kYWwgPyB0aGlzLmRsZ0NvbnRhaW5lciA6IHRoaXMuZWxlbWVudCksIHRoaXMucmVmRWxlbWVudCk7XG4gICAgICAgICAgICBkZXRhY2godGhpcy5yZWZFbGVtZW50KTtcbiAgICAgICAgICAgIHRoaXMucmVmRWxlbWVudCA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5pc01vZGFsKSB7XG4gICAgICAgICAgICBkZXRhY2godGhpcy5kbGdPdmVybGF5KTtcbiAgICAgICAgICAgIHRoaXMuZGxnQ29udGFpbmVyLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHRoaXMuZWxlbWVudCwgdGhpcy5kbGdDb250YWluZXIpO1xuICAgICAgICAgICAgZGV0YWNoKHRoaXMuZGxnQ29udGFpbmVyKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmVsZW1lbnQuaW5uZXJIVE1MID0gdGhpcy5jbG9uZWRFbGUuaW5uZXJIVE1MO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGF0dHJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKGF0dHJzW2ldKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmZ0clRlbXBsYXRlQ29udGVudCA9IG51bGw7XG4gICAgICAgIHRoaXMuaGVhZGVyQ29udGVudCA9IG51bGw7XG4gICAgICAgIGlmICghdGhpcy5pc1JlYWN0ICYmICF0aGlzLmlzVnVlICYmICFpc051bGxPclVuZGVmaW5lZCh0aGlzLmNvbnRlbnRFbGUpKSB7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZUFsbENoaWxkcmVuKHRoaXMuY29udGVudEVsZSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jb250ZW50RWxlID0gbnVsbDtcbiAgICAgICAgcmVzaXplRGVzdHJveSgpO1xuICAgICAgICBfc3VwZXIucHJvdG90eXBlLmRlc3Ryb3kuY2FsbCh0aGlzKTtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lXG4gICAgICAgIGlmICh0aGlzLmlzUmVhY3QpIHtcbiAgICAgICAgICAgIHRoaXMuY2xlYXJUZW1wbGF0ZSgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBEaWFsb2cucHJvdG90eXBlLndpcmVXaW5kb3dSZXNpemVFdmVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5ib3VuZFdpbmRvd1Jlc2l6ZUhhbmRsZXIgPSB0aGlzLndpbmRvd1Jlc2l6ZUhhbmRsZXIuYmluZCh0aGlzKTtcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMuYm91bmRXaW5kb3dSZXNpemVIYW5kbGVyKTtcbiAgICB9O1xuICAgIERpYWxvZy5wcm90b3R5cGUudW5XaXJlV2luZG93UmVzaXplRXZlbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdyZXNpemUnLCB0aGlzLmJvdW5kV2luZG93UmVzaXplSGFuZGxlcik7XG4gICAgICAgIHRoaXMuYm91bmRXaW5kb3dSZXNpemVIYW5kbGVyID0gbnVsbDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEJpbmRpbmcgZXZlbnQgdG8gdGhlIGVsZW1lbnQgd2hpbGUgd2lkZ2V0IGNyZWF0aW9uXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgRGlhbG9nLnByb3RvdHlwZS53aXJlRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5zaG93Q2xvc2VJY29uKSB7XG4gICAgICAgICAgICBFdmVudEhhbmRsZXIuYWRkKHRoaXMuY2xvc2VJY29uLCAnY2xpY2snLCB0aGlzLmNsb3NlSWNvbkNsaWNrRXZlbnRIYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5pc01vZGFsICYmIHRoaXMuZGxnT3ZlcmxheSkge1xuICAgICAgICAgICAgRXZlbnRIYW5kbGVyLmFkZCh0aGlzLmRsZ092ZXJsYXksICdjbGljaycsIHRoaXMuZGxnT3ZlcmxheUNsaWNrRXZlbnRIYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogVW5iaW5kaW5nIGV2ZW50IHRvIHRoZSBlbGVtZW50IHdoaWxlIHdpZGdldCBkZXN0cm95XG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICAgKiBAaGlkZGVuXG4gICAgICovXG4gICAgRGlhbG9nLnByb3RvdHlwZS51bldpcmVFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLnNob3dDbG9zZUljb24pIHtcbiAgICAgICAgICAgIEV2ZW50SGFuZGxlci5yZW1vdmUodGhpcy5jbG9zZUljb24sICdjbGljaycsIHRoaXMuY2xvc2VJY29uQ2xpY2tFdmVudEhhbmRsZXIpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmlzTW9kYWwpIHtcbiAgICAgICAgICAgIEV2ZW50SGFuZGxlci5yZW1vdmUodGhpcy5kbGdPdmVybGF5LCAnY2xpY2snLCB0aGlzLmRsZ092ZXJsYXlDbGlja0V2ZW50SGFuZGxlcik7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJlZnJlc2hlcyB0aGUgZGlhbG9nJ3MgcG9zaXRpb24gd2hlbiB0aGUgdXNlciBjaGFuZ2VzIGl0cyBoZWFkZXIgYW5kIGZvb3RlciBoZWlnaHQvd2lkdGggZHluYW1pY2FsbHkuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICAgKi9cbiAgICBEaWFsb2cucHJvdG90eXBlLnJlZnJlc2hQb3NpdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5wb3B1cE9iai5yZWZyZXNoUG9zaXRpb24oKTtcbiAgICAgICAgaWYgKHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoTU9EQUxfRExHKSkge1xuICAgICAgICAgICAgdGhpcy5wb3NpdGlvbkNoYW5nZSgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBjdXJyZW50IHdpZHRoIGFuZCBoZWlnaHQgb2YgdGhlIERpYWxvZ1xuICAgICAqXG4gICAgICogQHJldHVybnMge0RpYWxvZ0RpbWVuc2lvbn0tIHJldHVybnMgdGhlIGRpYWxvZyBlbGVtZW50IERpbWVuc2lvbi5cbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgRGlhbG9nLnByb3RvdHlwZS5nZXREaW1lbnNpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBkaWFsb2dXaWR0aCA9IHRoaXMuZWxlbWVudC5vZmZzZXRXaWR0aDtcbiAgICAgICAgdmFyIGRpYWxvZ0hlaWdodCA9IHRoaXMuZWxlbWVudC5vZmZzZXRIZWlnaHQ7XG4gICAgICAgIHJldHVybiB7IHdpZHRoOiBkaWFsb2dXaWR0aCwgaGVpZ2h0OiBkaWFsb2dIZWlnaHQgfTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIE9wZW5zIHRoZSBkaWFsb2cgaWYgaXQgaXMgaW4gaGlkZGVuIHN0YXRlLlxuICAgICAqIFRvIG9wZW4gdGhlIGRpYWxvZyB3aXRoIGZ1bGwgc2NyZWVuIHdpZHRoLCBzZXQgdGhlIHBhcmFtZXRlciB0byB0cnVlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHsgYm9vbGVhbiB9IGlzRnVsbFNjcmVlbiAtIEVuYWJsZSB0aGUgZnVsbFNjcmVlbiBEaWFsb2cuXG4gICAgICogQHJldHVybnMge3ZvaWR9XG4gICAgICovXG4gICAgRGlhbG9nLnByb3RvdHlwZS5zaG93ID0gZnVuY3Rpb24gKGlzRnVsbFNjcmVlbikge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZiAoIXRoaXMuZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoUk9PVCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoRExHX1NIT1cpIHx8ICghaXNOdWxsT3JVbmRlZmluZWQoaXNGdWxsU2NyZWVuKSkpIHtcbiAgICAgICAgICAgIGlmICghaXNOdWxsT3JVbmRlZmluZWQoaXNGdWxsU2NyZWVuKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZnVsbFNjcmVlbihpc0Z1bGxTY3JlZW4pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGV2ZW50QXJnc18xID0gaXNCbGF6b3IoKSA/IHtcbiAgICAgICAgICAgICAgICBjYW5jZWw6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGVsZW1lbnQ6IHRoaXMuZWxlbWVudCxcbiAgICAgICAgICAgICAgICBjb250YWluZXI6IHRoaXMuaXNNb2RhbCA/IHRoaXMuZGxnQ29udGFpbmVyIDogdGhpcy5lbGVtZW50LFxuICAgICAgICAgICAgICAgIG1heEhlaWdodDogdGhpcy5lbGVtZW50LnN0eWxlLm1heEhlaWdodFxuICAgICAgICAgICAgfSA6IHtcbiAgICAgICAgICAgICAgICBjYW5jZWw6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGVsZW1lbnQ6IHRoaXMuZWxlbWVudCxcbiAgICAgICAgICAgICAgICBjb250YWluZXI6IHRoaXMuaXNNb2RhbCA/IHRoaXMuZGxnQ29udGFpbmVyIDogdGhpcy5lbGVtZW50LFxuICAgICAgICAgICAgICAgIHRhcmdldDogdGhpcy50YXJnZXQsXG4gICAgICAgICAgICAgICAgbWF4SGVpZ2h0OiB0aGlzLmVsZW1lbnQuc3R5bGUubWF4SGVpZ2h0XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdiZWZvcmVPcGVuJywgZXZlbnRBcmdzXzEsIGZ1bmN0aW9uIChiZWZvcmVPcGVuQXJncykge1xuICAgICAgICAgICAgICAgIGlmICghYmVmb3JlT3BlbkFyZ3MuY2FuY2VsKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5lbGVtZW50LnN0eWxlLm1heEhlaWdodCAhPT0gZXZlbnRBcmdzXzEubWF4SGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5hbGxvd01heEhlaWdodCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuZWxlbWVudC5zdHlsZS5tYXhIZWlnaHQgPSBldmVudEFyZ3NfMS5tYXhIZWlnaHQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLmVuYWJsZVJlc2l6ZSAmJiBfdGhpcy5ib3VuZFdpbmRvd1Jlc2l6ZUhhbmRsZXIgPT0gbnVsbCAmJiAhX3RoaXMuaW5pdGlhbFJlbmRlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMud2lyZVdpbmRvd1Jlc2l6ZUV2ZW50KCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuc3RvcmVBY3RpdmVFbGVtZW50ID0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudDtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuZWxlbWVudC50YWJJbmRleCA9IC0xO1xuICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMuaXNNb2RhbCAmJiAoIWlzTnVsbE9yVW5kZWZpbmVkKF90aGlzLmRsZ092ZXJsYXkpKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuZGxnT3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmRsZ0NvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlQ2xhc3MoW190aGlzLmRsZ092ZXJsYXldLCAnZS1mYWRlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWlzTnVsbE9yVW5kZWZpbmVkKF90aGlzLnRhcmdldEVsZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMudGFyZ2V0RWxlID09PSBkb2N1bWVudC5ib2R5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmRsZ0NvbnRhaW5lci5zdHlsZS5wb3NpdGlvbiA9ICdmaXhlZCc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5kbGdDb250YWluZXIuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5kbGdPdmVybGF5LnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0VHlwZSA9IF90aGlzLmdldFRhcmdldENvbnRhaW5lcihfdGhpcy50YXJnZXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0YXJnZXRUeXBlIGluc3RhbmNlb2YgRWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29tcHV0ZWRTdHlsZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRhcmdldFR5cGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29tcHV0ZWRTdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKCdkaXJlY3Rpb24nKSA9PT0gJ3J0bCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmVsZW1lbnQuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuZWxlbWVudC5zdHlsZS5wb3NpdGlvbiA9ICdyZWxhdGl2ZSc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmVsZW1lbnQuc3R5bGUucG9zaXRpb24gPSAncmVsYXRpdmUnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRDbGFzcyhbX3RoaXMudGFyZ2V0RWxlXSwgW0RMR19UQVJHRVQsIFNDUk9MTF9ESVNBQkxFRF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkQ2xhc3MoW2RvY3VtZW50LmJvZHldLCBbRExHX1RBUkdFVCwgU0NST0xMX0RJU0FCTEVEXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdmFyIG9wZW5BbmltYXRpb24gPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAoX3RoaXMuYW5pbWF0aW9uU2V0dGluZ3MuZWZmZWN0ID09PSAnTm9uZScgJiYgYW5pbWF0aW9uTW9kZSA9PT0gJ0VuYWJsZScpID8gJ1pvb20nICsgJ0luJyA6IF90aGlzLmFuaW1hdGlvblNldHRpbmdzLmVmZmVjdCArICdJbicsXG4gICAgICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogX3RoaXMuYW5pbWF0aW9uU2V0dGluZ3MuZHVyYXRpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxheTogX3RoaXMuYW5pbWF0aW9uU2V0dGluZ3MuZGVsYXlcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHpJbmRleEVsZW1lbnQgPSAoX3RoaXMuaXNNb2RhbCkgPyBfdGhpcy5lbGVtZW50LnBhcmVudEVsZW1lbnQgOiBfdGhpcy5lbGVtZW50O1xuICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMuY2FsY3VsYXRlekluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5zZXR6SW5kZXgoekluZGV4RWxlbWVudCwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRTdHlsZUF0dHJpYnV0ZShfdGhpcy5lbGVtZW50LCB7ICd6SW5kZXgnOiBfdGhpcy56SW5kZXggfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMuaXNNb2RhbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnNldE92ZXJsYXlaaW5kZXgoX3RoaXMuekluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcbiAgICAgICAgICAgICAgICAgICAgKF90aGlzLmFuaW1hdGlvblNldHRpbmdzLmVmZmVjdCA9PT0gJ05vbmUnICYmIGFuaW1hdGlvbk1vZGUgPT09ICdFbmFibGUnKSA/IF90aGlzLnBvcHVwT2JqLnNob3cob3BlbkFuaW1hdGlvbikgOiAoKF90aGlzLmFuaW1hdGlvblNldHRpbmdzLmVmZmVjdCA9PT0gJ05vbmUnKSA/IF90aGlzLnBvcHVwT2JqLnNob3coKSA6IF90aGlzLnBvcHVwT2JqLnNob3cob3BlbkFuaW1hdGlvbikpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMuaXNNb2RhbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRhcmdldFR5cGUgPSBfdGhpcy5nZXRUYXJnZXRDb250YWluZXIoX3RoaXMudGFyZ2V0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0YXJnZXRUeXBlIGluc3RhbmNlb2YgRWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb21wdXRlZFN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUodGFyZ2V0VHlwZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbXB1dGVkU3R5bGUuZ2V0UHJvcGVydHlWYWx1ZSgnZGlyZWN0aW9uJykgPT09ICdydGwnICYmICFfdGhpcy5Jc0RyYWdTdG9wKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnNldFBvcHVwUG9zaXRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuZGlhbG9nT3BlbiA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwcmV2T25DaGFuZ2UgPSBfdGhpcy5pc1Byb3RlY3RlZE9uQ2hhbmdlO1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5pc1Byb3RlY3RlZE9uQ2hhbmdlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMudmlzaWJsZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnByZXZlbnRWaXNpYmlsaXR5ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuaXNQcm90ZWN0ZWRPbkNoYW5nZSA9IHByZXZPbkNoYW5nZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICBpZiAodGhpcy5pc1JlYWN0KSB7XG4gICAgICAgICAgICB0aGlzLnJlbmRlclJlYWN0VGVtcGxhdGVzKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENsb3NlcyB0aGUgZGlhbG9nIGlmIGl0IGlzIGluIHZpc2libGUgc3RhdGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0geyBFdmVudCB9IGV2ZW50IC0gc3BlY2lmaWVzIHRoZSBldmVudFxuICAgICAqIEByZXR1cm5zIHt2b2lkfVxuICAgICAqL1xuICAgIERpYWxvZy5wcm90b3R5cGUuaGlkZSA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZiAoIXRoaXMuZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoUk9PVCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5wcmV2ZW50VmlzaWJpbGl0eSkge1xuICAgICAgICAgICAgdmFyIGV2ZW50QXJncyA9IGlzQmxhem9yKCkgPyB7XG4gICAgICAgICAgICAgICAgY2FuY2VsOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBpc0ludGVyYWN0ZWQ6IGV2ZW50ID8gdHJ1ZSA6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGVsZW1lbnQ6IHRoaXMuZWxlbWVudCxcbiAgICAgICAgICAgICAgICBjb250YWluZXI6IHRoaXMuaXNNb2RhbCA/IHRoaXMuZGxnQ29udGFpbmVyIDogdGhpcy5lbGVtZW50LFxuICAgICAgICAgICAgICAgIGV2ZW50OiBldmVudFxuICAgICAgICAgICAgfSA6IHtcbiAgICAgICAgICAgICAgICBjYW5jZWw6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGlzSW50ZXJhY3RlZDogZXZlbnQgPyB0cnVlIDogZmFsc2UsXG4gICAgICAgICAgICAgICAgZWxlbWVudDogdGhpcy5lbGVtZW50LFxuICAgICAgICAgICAgICAgIHRhcmdldDogdGhpcy50YXJnZXQsXG4gICAgICAgICAgICAgICAgY29udGFpbmVyOiB0aGlzLmlzTW9kYWwgPyB0aGlzLmRsZ0NvbnRhaW5lciA6IHRoaXMuZWxlbWVudCxcbiAgICAgICAgICAgICAgICBldmVudDogZXZlbnQsXG4gICAgICAgICAgICAgICAgY2xvc2VkQnk6IHRoaXMuZGxnQ2xvc2VkQnlcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmNsb3NlQXJncyA9IGV2ZW50QXJncztcbiAgICAgICAgICAgIHRoaXMudHJpZ2dlcignYmVmb3JlQ2xvc2UnLCBldmVudEFyZ3MsIGZ1bmN0aW9uIChiZWZvcmVDbG9zZUFyZ3MpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWJlZm9yZUNsb3NlQXJncy5jYW5jZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLmVuYWJsZVJlc2l6ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMudW5XaXJlV2luZG93UmVzaXplRXZlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB2YXIgY2xvc2VBbmltYXRpb24gPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAoX3RoaXMuYW5pbWF0aW9uU2V0dGluZ3MuZWZmZWN0ID09PSAnTm9uZScgJiYgYW5pbWF0aW9uTW9kZSA9PT0gJ0VuYWJsZScpID8gJ1pvb20nICsgJ091dCcgOiBfdGhpcy5hbmltYXRpb25TZXR0aW5ncy5lZmZlY3QgKyAnT3V0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiBfdGhpcy5hbmltYXRpb25TZXR0aW5ncy5kdXJhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGF5OiBfdGhpcy5hbmltYXRpb25TZXR0aW5ncy5kZWxheVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMuYW5pbWF0aW9uU2V0dGluZ3MuZWZmZWN0ID09PSAnTm9uZScgJiYgYW5pbWF0aW9uTW9kZSA9PT0gJ0VuYWJsZScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnBvcHVwT2JqLmhpZGUoY2xvc2VBbmltYXRpb24pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKF90aGlzLmFuaW1hdGlvblNldHRpbmdzLmVmZmVjdCA9PT0gJ05vbmUnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5wb3B1cE9iai5oaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5wb3B1cE9iai5oaWRlKGNsb3NlQW5pbWF0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5pc01vZGFsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpc051bGxPclVuZGVmaW5lZChfdGhpcy50YXJnZXRFbGUpICYmIF90aGlzLnRhcmdldEVsZS5jbGFzc0xpc3QuY29udGFpbnMoRExHX1RBUkdFVCkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMudGFyZ2V0RWxlLmNsYXNzTGlzdC5jb250YWlucyhTQ1JPTExfRElTQUJMRUQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZUNsYXNzKFtfdGhpcy50YXJnZXRFbGVdLCBbRExHX1RBUkdFVCwgU0NST0xMX0RJU0FCTEVEXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmNvbnRhaW5zKERMR19UQVJHRVQpICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuY29udGFpbnMoU0NST0xMX0RJU0FCTEVEKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZUNsYXNzKFtkb2N1bWVudC5ib2R5XSwgW0RMR19UQVJHRVQsIFNDUk9MTF9ESVNBQkxFRF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LCAoX3RoaXMuYW5pbWF0aW9uU2V0dGluZ3MuZHVyYXRpb24gKyBfdGhpcy5hbmltYXRpb25TZXR0aW5ncy5kZWxheSkpO1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5kaWFsb2dPcGVuID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwcmV2T25DaGFuZ2UgPSBfdGhpcy5pc1Byb3RlY3RlZE9uQ2hhbmdlO1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5pc1Byb3RlY3RlZE9uQ2hhbmdlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMudmlzaWJsZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5wcmV2ZW50VmlzaWJpbGl0eSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5pc1Byb3RlY3RlZE9uQ2hhbmdlID0gcHJldk9uQ2hhbmdlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBfdGhpcy5kbGdDbG9zZWRCeSA9IERMR19VU0VSX0FDVElPTl9DTE9TRUQ7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogU3BlY2lmaWVzIHRvIHZpZXcgdGhlIEZ1bGwgc2NyZWVuIERpYWxvZy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gYXJncyAtIHNwZWNpZmllcyB0aGUgYXJndW1lbnRzXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IC0gcmV0dXJucyB0aGUgYm9vbGVhbiB2YWx1ZVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgRGlhbG9nLnByb3RvdHlwZS5mdWxsU2NyZWVuID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgLyogZXNsaW50LWRpc2FibGUgKi9cbiAgICAgICAgdmFyIHRvcCA9IHRoaXMuZWxlbWVudC5vZmZzZXRUb3A7XG4gICAgICAgIHZhciBsZWZ0ID0gdGhpcy5lbGVtZW50Lm9mZnNldExlZnQ7XG4gICAgICAgIC8qIGVzbGludC1lbmFibGUgKi9cbiAgICAgICAgaWYgKGFyZ3MpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5pc01vZGFsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLnRvcCA9IGRvY3VtZW50LnNjcm9sbGluZ0VsZW1lbnQuc2Nyb2xsVG9wICsgJ3B4JztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGFkZENsYXNzKFt0aGlzLmVsZW1lbnRdLCBGVUxMU0NSRUVOKTtcbiAgICAgICAgICAgIHZhciBkaXNwbGF5ID0gdGhpcy5lbGVtZW50LnN0eWxlLmRpc3BsYXk7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5zdHlsZS5tYXhIZWlnaHQgPSAoIWlzTnVsbE9yVW5kZWZpbmVkKHRoaXMudGFyZ2V0KSkgP1xuICAgICAgICAgICAgICAgICh0aGlzLnRhcmdldEVsZS5vZmZzZXRIZWlnaHQpICsgJ3B4JyA6ICh3aW5kb3cuaW5uZXJIZWlnaHQpICsgJ3B4JztcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gZGlzcGxheTtcbiAgICAgICAgICAgIGFkZENsYXNzKFtkb2N1bWVudC5ib2R5XSwgW0RMR19UQVJHRVQsIFNDUk9MTF9ESVNBQkxFRF0pO1xuICAgICAgICAgICAgaWYgKHRoaXMuYWxsb3dEcmFnZ2luZyAmJiAhaXNOdWxsT3JVbmRlZmluZWQodGhpcy5kcmFnT2JqKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZHJhZ09iai5kZXN0cm95KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZW1vdmVDbGFzcyhbdGhpcy5lbGVtZW50XSwgRlVMTFNDUkVFTik7XG4gICAgICAgICAgICByZW1vdmVDbGFzcyhbZG9jdW1lbnQuYm9keV0sIFtETEdfVEFSR0VULCBTQ1JPTExfRElTQUJMRURdKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmFsbG93RHJhZ2dpbmcgJiYgKCFpc051bGxPclVuZGVmaW5lZCh0aGlzLmhlYWRlckNvbnRlbnQpKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0QWxsb3dEcmFnZ2luZygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhcmdzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgZGlhbG9nIGJ1dHRvbiBpbnN0YW5jZXMuXG4gICAgICogQmFzZWQgb24gdGhhdCwgeW91IGNhbiBkeW5hbWljYWxseSBjaGFuZ2UgdGhlIGJ1dHRvbiBzdGF0ZXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0geyBudW1iZXIgfSBpbmRleCAtIEluZGV4IG9mIHRoZSBidXR0b24uXG4gICAgICogQHJldHVybnMge0J1dHRvbn0gLSByZXR1cm5zIHRoZSBidXR0b24gZWxlbWVudFxuICAgICAqL1xuICAgIERpYWxvZy5wcm90b3R5cGUuZ2V0QnV0dG9ucyA9IGZ1bmN0aW9uIChpbmRleCkge1xuICAgICAgICBpZiAoIWlzTnVsbE9yVW5kZWZpbmVkKGluZGV4KSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYnRuT2JqW2luZGV4XTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5idG5PYmo7XG4gICAgfTtcbiAgICBEaWFsb2cucHJvdG90eXBlLnVuV2lyZUJ1dHRvbkV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuYnV0dG9ucy5sZW5ndGggPiAwICYmIHRoaXMuZm9vdGVyVGVtcGxhdGUgPT09ICcnICYmIHRoaXMuZnRyVGVtcGxhdGVDb250ZW50KSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuYnV0dG9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmJ1dHRvbnNbaV0uY2xpY2sgJiYgdHlwZW9mICh0aGlzLmJ1dHRvbnNbaV0uY2xpY2spID09PSAnZnVuY3Rpb24nXG4gICAgICAgICAgICAgICAgICAgICYmIHRoaXMuZnRyVGVtcGxhdGVDb250ZW50LmNoaWxkcmVuW2ldKSB7XG4gICAgICAgICAgICAgICAgICAgIEV2ZW50SGFuZGxlci5yZW1vdmUodGhpcy5mdHJUZW1wbGF0ZUNvbnRlbnQuY2hpbGRyZW5baV0sICdjbGljaycsIHRoaXMuYnV0dG9uc1tpXS5jbGljayk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBEaWFsb2cucHJvdG90eXBlLmRlc3Ryb3lCdXR0b25zID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIWlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuYnRuT2JqKSkge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmJ0bk9iai5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmJ0bk9ialtpXSAmJiAhdGhpcy5idG5PYmpbaV0uaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5idG5PYmpbaV0uZGVzdHJveSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIFByb3BlcnR5KCcnKVxuICAgIF0sIERpYWxvZy5wcm90b3R5cGUsIFwiY29udGVudFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBQcm9wZXJ0eSh0cnVlKVxuICAgIF0sIERpYWxvZy5wcm90b3R5cGUsIFwiZW5hYmxlSHRtbFNhbml0aXplclwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBQcm9wZXJ0eShmYWxzZSlcbiAgICBdLCBEaWFsb2cucHJvdG90eXBlLCBcImVuYWJsZVBlcnNpc3RlbmNlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIFByb3BlcnR5KGZhbHNlKVxuICAgIF0sIERpYWxvZy5wcm90b3R5cGUsIFwic2hvd0Nsb3NlSWNvblwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBQcm9wZXJ0eShmYWxzZSlcbiAgICBdLCBEaWFsb2cucHJvdG90eXBlLCBcImlzTW9kYWxcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgUHJvcGVydHkoJycpXG4gICAgXSwgRGlhbG9nLnByb3RvdHlwZSwgXCJoZWFkZXJcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgUHJvcGVydHkodHJ1ZSlcbiAgICBdLCBEaWFsb2cucHJvdG90eXBlLCBcInZpc2libGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgUHJvcGVydHkoZmFsc2UpXG4gICAgXSwgRGlhbG9nLnByb3RvdHlwZSwgXCJlbmFibGVSZXNpemVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgUHJvcGVydHkoWydTb3V0aC1FYXN0J10pXG4gICAgXSwgRGlhbG9nLnByb3RvdHlwZSwgXCJyZXNpemVIYW5kbGVzXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIFByb3BlcnR5KCdhdXRvJylcbiAgICBdLCBEaWFsb2cucHJvdG90eXBlLCBcImhlaWdodFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBQcm9wZXJ0eSgnJylcbiAgICBdLCBEaWFsb2cucHJvdG90eXBlLCBcIm1pbkhlaWdodFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBQcm9wZXJ0eSgnMTAwJScpXG4gICAgXSwgRGlhbG9nLnByb3RvdHlwZSwgXCJ3aWR0aFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBQcm9wZXJ0eSgnJylcbiAgICBdLCBEaWFsb2cucHJvdG90eXBlLCBcImNzc0NsYXNzXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIFByb3BlcnR5KDEwMDApXG4gICAgXSwgRGlhbG9nLnByb3RvdHlwZSwgXCJ6SW5kZXhcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgUHJvcGVydHkobnVsbClcbiAgICBdLCBEaWFsb2cucHJvdG90eXBlLCBcInRhcmdldFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBQcm9wZXJ0eSgnJylcbiAgICBdLCBEaWFsb2cucHJvdG90eXBlLCBcImZvb3RlclRlbXBsYXRlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIFByb3BlcnR5KGZhbHNlKVxuICAgIF0sIERpYWxvZy5wcm90b3R5cGUsIFwiYWxsb3dEcmFnZ2luZ1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBDb2xsZWN0aW9uKFt7fV0sIEJ1dHRvblByb3BzKVxuICAgIF0sIERpYWxvZy5wcm90b3R5cGUsIFwiYnV0dG9uc1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBQcm9wZXJ0eSh0cnVlKVxuICAgIF0sIERpYWxvZy5wcm90b3R5cGUsIFwiY2xvc2VPbkVzY2FwZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBDb21wbGV4KHt9LCBBbmltYXRpb25TZXR0aW5ncylcbiAgICBdLCBEaWFsb2cucHJvdG90eXBlLCBcImFuaW1hdGlvblNldHRpbmdzXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIENvbXBsZXgoeyBYOiAnY2VudGVyJywgWTogJ2NlbnRlcicgfSwgUG9zaXRpb25EYXRhKVxuICAgIF0sIERpYWxvZy5wcm90b3R5cGUsIFwicG9zaXRpb25cIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgRXZlbnQoKVxuICAgIF0sIERpYWxvZy5wcm90b3R5cGUsIFwiY3JlYXRlZFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBFdmVudCgpXG4gICAgXSwgRGlhbG9nLnByb3RvdHlwZSwgXCJvcGVuXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEV2ZW50KClcbiAgICBdLCBEaWFsb2cucHJvdG90eXBlLCBcImJlZm9yZVNhbml0aXplSHRtbFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBFdmVudCgpXG4gICAgXSwgRGlhbG9nLnByb3RvdHlwZSwgXCJiZWZvcmVPcGVuXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEV2ZW50KClcbiAgICBdLCBEaWFsb2cucHJvdG90eXBlLCBcImNsb3NlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEV2ZW50KClcbiAgICBdLCBEaWFsb2cucHJvdG90eXBlLCBcImJlZm9yZUNsb3NlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEV2ZW50KClcbiAgICBdLCBEaWFsb2cucHJvdG90eXBlLCBcImRyYWdTdGFydFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBFdmVudCgpXG4gICAgXSwgRGlhbG9nLnByb3RvdHlwZSwgXCJkcmFnU3RvcFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBFdmVudCgpXG4gICAgXSwgRGlhbG9nLnByb3RvdHlwZSwgXCJkcmFnXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEV2ZW50KClcbiAgICBdLCBEaWFsb2cucHJvdG90eXBlLCBcIm92ZXJsYXlDbGlja1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBFdmVudCgpXG4gICAgXSwgRGlhbG9nLnByb3RvdHlwZSwgXCJyZXNpemVTdGFydFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBFdmVudCgpXG4gICAgXSwgRGlhbG9nLnByb3RvdHlwZSwgXCJyZXNpemluZ1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBFdmVudCgpXG4gICAgXSwgRGlhbG9nLnByb3RvdHlwZSwgXCJyZXNpemVTdG9wXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEV2ZW50KClcbiAgICBdLCBEaWFsb2cucHJvdG90eXBlLCBcImRlc3Ryb3llZFwiLCB2b2lkIDApO1xuICAgIERpYWxvZyA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBOb3RpZnlQcm9wZXJ0eUNoYW5nZXNcbiAgICBdLCBEaWFsb2cpO1xuICAgIHJldHVybiBEaWFsb2c7XG59KENvbXBvbmVudCkpO1xuZXhwb3J0IHsgRGlhbG9nIH07XG4vKipcbiAqIEJhc2UgZm9yIGNyZWF0aW5nIEFsZXJ0IGFuZCBDb25maXJtYXRpb24gRGlhbG9nIHRocm91Z2ggdXRpbCBtZXRob2QuXG4gKi9cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuZXhwb3J0IHZhciBEaWFsb2dVdGlsaXR5O1xuKGZ1bmN0aW9uIChEaWFsb2dVdGlsaXR5KSB7XG4gICAgLyoqXG4gICAgICogQW4gYWxlcnQgZGlhbG9nIGJveCBpcyB1c2VkIHRvIGRpc3BsYXkgd2FybmluZyBsaWtlIG1lc3NhZ2VzIHRvIHRoZSB1c2Vycy5cbiAgICAgKiBgYGBcbiAgICAgKiBFZyA6IERpYWxvZ1V0aWxpdHkuYWxlcnQoJ0FsZXJ0IG1lc3NhZ2UnKTtcbiAgICAgKlxuICAgICAqIGBgYFxuICAgICAqL1xuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0FsZXJ0RGlhbG9nQXJnc30gYXJncyAtIHNwZWNpZmllcyB0aGUgc3RyaW5nXG4gICAgICogQHJldHVybnMge0RpYWxvZ30gLSByZXR1cm5zIHRoZSBkaWFsb2cgZWxlbWVudC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBhbGVydChhcmdzKSB7XG4gICAgICAgIHZhciBkaWFsb2dFbGVtZW50ID0gY3JlYXRlRWxlbWVudCgnZGl2JywgeyAnY2xhc3NOYW1lJzogRExHX1VUSUxfQUxFUlQgfSk7XG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZGlhbG9nRWxlbWVudCk7XG4gICAgICAgIHZhciBhbGVydERpYWxvZ09iajtcbiAgICAgICAgdmFyIG9rQnV0dG9uTW9kZWwgPSBbe1xuICAgICAgICAgICAgICAgIGJ1dHRvbk1vZGVsOiB7IGlzUHJpbWFyeTogdHJ1ZSwgY29udGVudDogJ09LJyB9LFxuICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGlkZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1dO1xuICAgICAgICBpZiAodHlwZW9mIChhcmdzKSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIGFsZXJ0RGlhbG9nT2JqID0gY3JlYXRlRGlhbG9nKHsgY29udGVudDogYXJncyxcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogeyBYOiAnY2VudGVyJywgWTogJ3RvcCcgfSxcbiAgICAgICAgICAgICAgICBpc01vZGFsOiB0cnVlLCBoZWFkZXI6IERMR19VVElMX0RFRkFVTFRfVElUTEUsXG4gICAgICAgICAgICAgICAgYnV0dG9uczogb2tCdXR0b25Nb2RlbCB9LCBkaWFsb2dFbGVtZW50KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGFsZXJ0RGlhbG9nT2JqID0gY3JlYXRlRGlhbG9nKGFsZXJ0T3B0aW9ucyhhcmdzKSwgZGlhbG9nRWxlbWVudCk7XG4gICAgICAgIH1cbiAgICAgICAgYWxlcnREaWFsb2dPYmouY2xvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoYXJncyAmJiBhcmdzLmNsb3NlKSB7XG4gICAgICAgICAgICAgICAgYXJncy5jbG9zZS5hcHBseShhbGVydERpYWxvZ09iaik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhbGVydERpYWxvZ09iai5kZXN0cm95KCk7XG4gICAgICAgICAgICBpZiAoYWxlcnREaWFsb2dPYmouZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2UtZGxnLW1vZGFsJykpIHtcbiAgICAgICAgICAgICAgICBhbGVydERpYWxvZ09iai5lbGVtZW50LnBhcmVudEVsZW1lbnQucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgYWxlcnREaWFsb2dPYmoudGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoRExHX1VUSUxfUk9PVCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBhbGVydERpYWxvZ09iai5lbGVtZW50LnJlbW92ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gYWxlcnREaWFsb2dPYmo7XG4gICAgfVxuICAgIERpYWxvZ1V0aWxpdHkuYWxlcnQgPSBhbGVydDtcbiAgICAvKipcbiAgICAgKiBBIGNvbmZpcm0gZGlhbG9nIGRpc3BsYXlzIGEgc3BlY2lmaWVkIG1lc3NhZ2UgYWxvbmcgd2l0aCDigJhPS+KAmSBhbmQg4oCYQ2FuY2Vs4oCZIGJ1dHRvbi5cbiAgICAgKiBgYGBcbiAgICAgKiBFZyA6IERpYWxvZ1V0aWxpdHkuY29uZmlybSgnQ29uZmlybSBkaWFsb2cgbWVzc2FnZScpO1xuICAgICAqXG4gICAgICogYGBgXG4gICAgICovXG4gICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Q29uZmlybURpYWxvZ0FyZ3N9IGFyZ3MgLSBzcGVjaWZpZXMgdGhlIGFyZ3NcbiAgICAgKiBAcmV0dXJucyB7RGlhbG9nfSAtIHJldHVybnMgdGUgZWxlbWVudFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNvbmZpcm0oYXJncykge1xuICAgICAgICB2YXIgZGlhbG9nRWxlbWVudCA9IGNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgJ2NsYXNzTmFtZSc6IERMR19VVElMX0NPTkZJUk0gfSk7XG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZGlhbG9nRWxlbWVudCk7XG4gICAgICAgIHZhciBjb25maXJtRGlhbG9nT2JqO1xuICAgICAgICB2YXIgb2tDYW5jZWxCdXR0b25Nb2RlbCA9IFt7XG4gICAgICAgICAgICAgICAgYnV0dG9uTW9kZWw6IHsgaXNQcmltYXJ5OiB0cnVlLCBjb250ZW50OiAnT0snIH0sXG4gICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oaWRlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIGJ1dHRvbk1vZGVsOiB7IGNvbnRlbnQ6ICdDYW5jZWwnIH0sXG4gICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oaWRlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfV07XG4gICAgICAgIGlmICh0eXBlb2YgKGFyZ3MpID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgY29uZmlybURpYWxvZ09iaiA9IGNyZWF0ZURpYWxvZyh7IHBvc2l0aW9uOiB7IFg6ICdjZW50ZXInLCBZOiAndG9wJyB9LCBjb250ZW50OiBhcmdzLCBpc01vZGFsOiB0cnVlLFxuICAgICAgICAgICAgICAgIGhlYWRlcjogRExHX1VUSUxfREVGQVVMVF9USVRMRSwgYnV0dG9uczogb2tDYW5jZWxCdXR0b25Nb2RlbFxuICAgICAgICAgICAgfSwgZGlhbG9nRWxlbWVudCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25maXJtRGlhbG9nT2JqID0gY3JlYXRlRGlhbG9nKGNvbmZpcm1PcHRpb25zKGFyZ3MpLCBkaWFsb2dFbGVtZW50KTtcbiAgICAgICAgfVxuICAgICAgICBjb25maXJtRGlhbG9nT2JqLmNsb3NlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKGFyZ3MgJiYgYXJncy5jbG9zZSkge1xuICAgICAgICAgICAgICAgIGFyZ3MuY2xvc2UuYXBwbHkoY29uZmlybURpYWxvZ09iaik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25maXJtRGlhbG9nT2JqLmRlc3Ryb3koKTtcbiAgICAgICAgICAgIGlmIChjb25maXJtRGlhbG9nT2JqLmVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWRsZy1tb2RhbCcpKSB7XG4gICAgICAgICAgICAgICAgY29uZmlybURpYWxvZ09iai5lbGVtZW50LnBhcmVudEVsZW1lbnQucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgY29uZmlybURpYWxvZ09iai50YXJnZXQuY2xhc3NMaXN0LnJlbW92ZShETEdfVVRJTF9ST09UKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbmZpcm1EaWFsb2dPYmouZWxlbWVudC5yZW1vdmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIGNvbmZpcm1EaWFsb2dPYmo7XG4gICAgfVxuICAgIERpYWxvZ1V0aWxpdHkuY29uZmlybSA9IGNvbmZpcm07XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lXG4gICAgZnVuY3Rpb24gY3JlYXRlRGlhbG9nKG9wdGlvbnMsIGVsZW1lbnQpIHtcbiAgICAgICAgdmFyIGRpYWxvZ09iamVjdCA9IG5ldyBEaWFsb2cob3B0aW9ucyk7XG4gICAgICAgIGRpYWxvZ09iamVjdC5hcHBlbmRUbyhlbGVtZW50KTtcbiAgICAgICAgcmV0dXJuIGRpYWxvZ09iamVjdDtcbiAgICB9XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lXG4gICAgZnVuY3Rpb24gYWxlcnRPcHRpb25zKG9wdGlvbikge1xuICAgICAgICB2YXIgb3B0aW9ucyA9IHt9O1xuICAgICAgICBvcHRpb25zLmJ1dHRvbnMgPSBbXTtcbiAgICAgICAgb3B0aW9ucyA9IGZvcm1PcHRpb25zKG9wdGlvbnMsIG9wdGlvbik7XG4gICAgICAgIG9wdGlvbnMgPSBzZXRBbGVydEJ1dHRvbk1vZGVsKG9wdGlvbnMsIG9wdGlvbik7XG4gICAgICAgIHJldHVybiBvcHRpb25zO1xuICAgIH1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcbiAgICBmdW5jdGlvbiBjb25maXJtT3B0aW9ucyhvcHRpb24pIHtcbiAgICAgICAgdmFyIG9wdGlvbnMgPSB7fTtcbiAgICAgICAgb3B0aW9ucy5idXR0b25zID0gW107XG4gICAgICAgIG9wdGlvbnMgPSBmb3JtT3B0aW9ucyhvcHRpb25zLCBvcHRpb24pO1xuICAgICAgICBvcHRpb25zID0gc2V0Q29uZmlybUJ1dHRvbk1vZGVsKG9wdGlvbnMsIG9wdGlvbik7XG4gICAgICAgIHJldHVybiBvcHRpb25zO1xuICAgIH1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcbiAgICBmdW5jdGlvbiBmb3JtT3B0aW9ucyhvcHRpb25zLCBvcHRpb24pIHtcbiAgICAgICAgb3B0aW9ucy5oZWFkZXIgPSAhaXNOdWxsT3JVbmRlZmluZWQob3B0aW9uLnRpdGxlKSA/IG9wdGlvbi50aXRsZSA6IG51bGw7XG4gICAgICAgIG9wdGlvbnMuY29udGVudCA9ICFpc051bGxPclVuZGVmaW5lZChvcHRpb24uY29udGVudCkgPyBvcHRpb24uY29udGVudCA6ICcnO1xuICAgICAgICBvcHRpb25zLmlzTW9kYWwgPSAhaXNOdWxsT3JVbmRlZmluZWQob3B0aW9uLmlzTW9kYWwpID8gb3B0aW9uLmlzTW9kYWwgOiB0cnVlO1xuICAgICAgICBvcHRpb25zLnNob3dDbG9zZUljb24gPSAhaXNOdWxsT3JVbmRlZmluZWQob3B0aW9uLnNob3dDbG9zZUljb24pID8gb3B0aW9uLnNob3dDbG9zZUljb24gOiBmYWxzZTtcbiAgICAgICAgb3B0aW9ucy5hbGxvd0RyYWdnaW5nID0gIWlzTnVsbE9yVW5kZWZpbmVkKG9wdGlvbi5pc0RyYWdnYWJsZSkgPyBvcHRpb24uaXNEcmFnZ2FibGUgOiBmYWxzZTtcbiAgICAgICAgb3B0aW9ucy5jbG9zZU9uRXNjYXBlID0gIWlzTnVsbE9yVW5kZWZpbmVkKG9wdGlvbi5jbG9zZU9uRXNjYXBlKSA/IG9wdGlvbi5jbG9zZU9uRXNjYXBlIDogZmFsc2U7XG4gICAgICAgIG9wdGlvbnMucG9zaXRpb24gPSAhaXNOdWxsT3JVbmRlZmluZWQob3B0aW9uLnBvc2l0aW9uKSA/IG9wdGlvbi5wb3NpdGlvbiA6IHsgWDogJ2NlbnRlcicsIFk6ICd0b3AnIH07XG4gICAgICAgIG9wdGlvbnMuYW5pbWF0aW9uU2V0dGluZ3MgPSAhaXNOdWxsT3JVbmRlZmluZWQob3B0aW9uLmFuaW1hdGlvblNldHRpbmdzKSA/IG9wdGlvbi5hbmltYXRpb25TZXR0aW5ncyA6XG4gICAgICAgICAgICB7IGVmZmVjdDogJ0ZhZGUnLCBkdXJhdGlvbjogNDAwLCBkZWxheTogMCB9O1xuICAgICAgICBvcHRpb25zLmNzc0NsYXNzID0gIWlzTnVsbE9yVW5kZWZpbmVkKG9wdGlvbi5jc3NDbGFzcykgPyBvcHRpb24uY3NzQ2xhc3MgOiAnJztcbiAgICAgICAgb3B0aW9ucy56SW5kZXggPSAhaXNOdWxsT3JVbmRlZmluZWQob3B0aW9uLnpJbmRleCkgPyBvcHRpb24uekluZGV4IDogMTAwMDtcbiAgICAgICAgb3B0aW9ucy5vcGVuID0gIWlzTnVsbE9yVW5kZWZpbmVkKG9wdGlvbi5vcGVuKSA/IG9wdGlvbi5vcGVuIDogbnVsbDtcbiAgICAgICAgb3B0aW9ucy53aWR0aCA9ICFpc051bGxPclVuZGVmaW5lZChvcHRpb24ud2lkdGgpID8gb3B0aW9uLndpZHRoIDogJ2F1dG8nO1xuICAgICAgICBvcHRpb25zLmhlaWdodCA9ICFpc051bGxPclVuZGVmaW5lZChvcHRpb24uaGVpZ2h0KSA/IG9wdGlvbi5oZWlnaHQgOiAnYXV0byc7XG4gICAgICAgIHJldHVybiBvcHRpb25zO1xuICAgIH1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcbiAgICBmdW5jdGlvbiBzZXRBbGVydEJ1dHRvbk1vZGVsKG9wdGlvbnMsIG9wdGlvbikge1xuICAgICAgICB2YXIgYWxlcnRCdXR0b25Nb2RlbCA9IFt7XG4gICAgICAgICAgICAgICAgYnV0dG9uTW9kZWw6IHsgaXNQcmltYXJ5OiB0cnVlLCBjb250ZW50OiAnT0snIH0sXG4gICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oaWRlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfV07XG4gICAgICAgIGlmICghaXNOdWxsT3JVbmRlZmluZWQob3B0aW9uLm9rQnV0dG9uKSkge1xuICAgICAgICAgICAgb3B0aW9ucy5idXR0b25zWzBdID0gZm9ybUJ1dHRvbk1vZGVsKG9wdGlvbnMuYnV0dG9uc1swXSwgb3B0aW9uLm9rQnV0dG9uLCBhbGVydEJ1dHRvbk1vZGVsWzBdKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG9wdGlvbnMuYnV0dG9ucyA9IGFsZXJ0QnV0dG9uTW9kZWw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG9wdGlvbnM7XG4gICAgfVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuICAgIGZ1bmN0aW9uIHNldENvbmZpcm1CdXR0b25Nb2RlbChvcHRpb25zLCBvcHRpb24pIHtcbiAgICAgICAgdmFyIG9rQnV0dG9uTW9kZWwgPSB7XG4gICAgICAgICAgICBidXR0b25Nb2RlbDogeyBpc1ByaW1hcnk6IHRydWUsIGNvbnRlbnQ6ICdPSycgfSxcbiAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5oaWRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHZhciBjYW5jZWxCdXR0b25Nb2RlbCA9IHtcbiAgICAgICAgICAgIGJ1dHRvbk1vZGVsOiB7IGNvbnRlbnQ6ICdDYW5jZWwnIH0sXG4gICAgICAgICAgICBjbGljazogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHRoaXMuaGlkZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBpZiAoIWlzTnVsbE9yVW5kZWZpbmVkKG9wdGlvbi5va0J1dHRvbikpIHtcbiAgICAgICAgICAgIG9wdGlvbnMuYnV0dG9uc1swXSA9IGZvcm1CdXR0b25Nb2RlbChvcHRpb25zLmJ1dHRvbnNbMF0sIG9wdGlvbi5va0J1dHRvbiwgb2tCdXR0b25Nb2RlbCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBvcHRpb25zLmJ1dHRvbnNbMF0gPSBva0J1dHRvbk1vZGVsO1xuICAgICAgICB9XG4gICAgICAgIGlmICghaXNOdWxsT3JVbmRlZmluZWQob3B0aW9uLmNhbmNlbEJ1dHRvbikpIHtcbiAgICAgICAgICAgIG9wdGlvbnMuYnV0dG9uc1sxXSA9IGZvcm1CdXR0b25Nb2RlbChvcHRpb25zLmJ1dHRvbnNbMV0sIG9wdGlvbi5jYW5jZWxCdXR0b24sIGNhbmNlbEJ1dHRvbk1vZGVsKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG9wdGlvbnMuYnV0dG9uc1sxXSA9IGNhbmNlbEJ1dHRvbk1vZGVsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvcHRpb25zO1xuICAgIH1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcbiAgICBmdW5jdGlvbiBmb3JtQnV0dG9uTW9kZWwoYnV0dG9uTW9kZWwsIG9wdGlvbiwgYnV0dG9uUHJvcE1vZGVsKSB7XG4gICAgICAgIHZhciBidXR0b25Qcm9wcyA9IGJ1dHRvblByb3BNb2RlbDtcbiAgICAgICAgaWYgKCFpc051bGxPclVuZGVmaW5lZChvcHRpb24udGV4dCkpIHtcbiAgICAgICAgICAgIGJ1dHRvblByb3BzLmJ1dHRvbk1vZGVsLmNvbnRlbnQgPSBvcHRpb24udGV4dDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWlzTnVsbE9yVW5kZWZpbmVkKG9wdGlvbi5pY29uKSkge1xuICAgICAgICAgICAgYnV0dG9uUHJvcHMuYnV0dG9uTW9kZWwuaWNvbkNzcyA9IG9wdGlvbi5pY29uO1xuICAgICAgICB9XG4gICAgICAgIGlmICghaXNOdWxsT3JVbmRlZmluZWQob3B0aW9uLmNzc0NsYXNzKSkge1xuICAgICAgICAgICAgYnV0dG9uUHJvcHMuYnV0dG9uTW9kZWwuY3NzQ2xhc3MgPSBvcHRpb24uY3NzQ2xhc3M7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFpc051bGxPclVuZGVmaW5lZChvcHRpb24uY2xpY2spKSB7XG4gICAgICAgICAgICBidXR0b25Qcm9wcy5jbGljayA9IG9wdGlvbi5jbGljaztcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWlzTnVsbE9yVW5kZWZpbmVkKG9wdGlvbi5pc0ZsYXQpKSB7XG4gICAgICAgICAgICBidXR0b25Qcm9wcy5pc0ZsYXQgPSBvcHRpb24uaXNGbGF0O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBidXR0b25Qcm9wcztcbiAgICB9XG59KShEaWFsb2dVdGlsaXR5IHx8IChEaWFsb2dVdGlsaXR5ID0ge30pKTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@syncfusion+ej2-popups@29.1.37/node_modules/@syncfusion/ej2-popups/src/dialog/dialog.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@syncfusion+ej2-popups@29.1.37/node_modules/@syncfusion/ej2-popups/src/popup/popup.js":
/*!******************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@syncfusion+ej2-popups@29.1.37/node_modules/@syncfusion/ej2-popups/src/popup/popup.js ***!
  \******************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Popup: () => (/* binding */ Popup),\n/* harmony export */   PositionData: () => (/* binding */ PositionData),\n/* harmony export */   getMaxZindex: () => (/* binding */ getMaxZindex),\n/* harmony export */   getScrollableParent: () => (/* binding */ getScrollableParent),\n/* harmony export */   getZindexPartial: () => (/* binding */ getZindexPartial)\n/* harmony export */ });\n/* harmony import */ var _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @syncfusion/ej2-base */ \"(ssr)/./node_modules/.pnpm/@syncfusion+ej2-base@29.1.36/node_modules/@syncfusion/ej2-base/index.js\");\n/* harmony import */ var _common_position__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../common/position */ \"(ssr)/./node_modules/.pnpm/@syncfusion+ej2-popups@29.1.37/node_modules/@syncfusion/ej2-popups/src/common/position.js\");\n/* harmony import */ var _common_collision__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../common/collision */ \"(ssr)/./node_modules/.pnpm/@syncfusion+ej2-popups@29.1.37/node_modules/@syncfusion/ej2-popups/src/common/collision.js\");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\n\n\n\n\n\n\n\n/**\n * Specifies the offset position values.\n */\nvar PositionData = /** @class */ (function (_super) {\n    __extends(PositionData, _super);\n    function PositionData() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Property)('left')\n    ], PositionData.prototype, \"X\", void 0);\n    __decorate([\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Property)('top')\n    ], PositionData.prototype, \"Y\", void 0);\n    return PositionData;\n}(_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.ChildProperty));\n\n// don't use space in classNames\nvar CLASSNAMES = {\n    ROOT: 'e-popup',\n    RTL: 'e-rtl',\n    OPEN: 'e-popup-open',\n    CLOSE: 'e-popup-close'\n};\n/**\n * Represents the Popup Component\n * ```html\n * <div id=\"popup\" style=\"position:absolute;height:100px;width:100px;\">\n * <div style=\"margin:35px 25px;\">Popup Content</div></div>\n * ```\n * ```typescript\n * <script>\n *   var popupObj = new Popup();\n *   popupObj.appendTo(\"#popup\");\n * </script>\n * ```\n */\nvar Popup = /** @class */ (function (_super) {\n    __extends(Popup, _super);\n    function Popup(element, options) {\n        return _super.call(this, options, element) || this;\n    }\n    /**\n     * Called internally if any of the property value changed.\n     *\n     * @param {PopupModel} newProp - specifies the new property\n     * @param {PopupModel} oldProp - specifies the old property\n     * @private\n     * @returns {void}\n     */\n    Popup.prototype.onPropertyChanged = function (newProp, oldProp) {\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'width':\n                    (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.setStyleAttribute)(this.element, { 'width': (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.formatUnit)(newProp.width) });\n                    break;\n                case 'height':\n                    (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.setStyleAttribute)(this.element, { 'height': (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.formatUnit)(newProp.height) });\n                    break;\n                case 'zIndex':\n                    (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.setStyleAttribute)(this.element, { 'zIndex': newProp.zIndex });\n                    break;\n                case 'enableRtl':\n                    this.setEnableRtl();\n                    break;\n                case 'position':\n                case 'relateTo':\n                    this.refreshPosition();\n                    break;\n                case 'offsetX': {\n                    var x = newProp.offsetX - oldProp.offsetX;\n                    this.element.style.left = (parseInt(this.element.style.left, 10) + (x)).toString() + 'px';\n                    break;\n                }\n                case 'offsetY': {\n                    var y = newProp.offsetY - oldProp.offsetY;\n                    this.element.style.top = (parseInt(this.element.style.top, 10) + (y)).toString() + 'px';\n                    break;\n                }\n                case 'content':\n                    this.setContent();\n                    break;\n                case 'actionOnScroll':\n                    if (newProp.actionOnScroll !== 'none') {\n                        this.wireScrollEvents();\n                    }\n                    else {\n                        this.unwireScrollEvents();\n                    }\n                    break;\n            }\n        }\n    };\n    /**\n     * gets the Component module name.\n     *\n     * @returns {void}\n     * @private\n     */\n    Popup.prototype.getModuleName = function () {\n        return 'popup';\n    };\n    /**\n     * To resolve if any collision occurs.\n     *\n     * @returns {void}\n     */\n    Popup.prototype.resolveCollision = function () {\n        this.checkCollision();\n    };\n    /**\n     * gets the persisted state properties of the Component.\n     *\n     * @returns {void}\n     */\n    Popup.prototype.getPersistData = function () {\n        return this.addOnPersist([]);\n    };\n    /**\n     * To destroy the control.\n     *\n     * @returns {void}\n     */\n    Popup.prototype.destroy = function () {\n        if (this.element.classList.contains('e-popup-open')) {\n            this.unwireEvents();\n        }\n        this.element.classList.remove(CLASSNAMES.ROOT, CLASSNAMES.RTL, CLASSNAMES.OPEN, CLASSNAMES.CLOSE);\n        this.content = null;\n        this.relateTo = null;\n        (0,_common_collision__WEBPACK_IMPORTED_MODULE_1__.destroy)();\n        _super.prototype.destroy.call(this);\n    };\n    /**\n     * To Initialize the control rendering\n     *\n     * @returns {void}\n     * @private\n     */\n    Popup.prototype.render = function () {\n        this.element.classList.add(CLASSNAMES.ROOT);\n        var styles = {};\n        if (this.zIndex !== 1000) {\n            styles.zIndex = this.zIndex;\n        }\n        if (this.width !== 'auto') {\n            styles.width = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.formatUnit)(this.width);\n        }\n        if (this.height !== 'auto') {\n            styles.height = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.formatUnit)(this.height);\n        }\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.setStyleAttribute)(this.element, styles);\n        this.fixedParent = false;\n        this.setEnableRtl();\n        this.setContent();\n    };\n    Popup.prototype.wireEvents = function () {\n        if (_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Browser.isDevice) {\n            _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.EventHandler.add(window, 'orientationchange', this.orientationOnChange, this);\n        }\n        if (this.actionOnScroll !== 'none') {\n            this.wireScrollEvents();\n        }\n    };\n    Popup.prototype.wireScrollEvents = function () {\n        if (this.getRelateToElement()) {\n            for (var _i = 0, _a = this.getScrollableParent(this.getRelateToElement()); _i < _a.length; _i++) {\n                var parent_1 = _a[_i];\n                _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.EventHandler.add(parent_1, 'scroll', this.scrollRefresh, this);\n            }\n        }\n    };\n    Popup.prototype.unwireEvents = function () {\n        if (_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Browser.isDevice) {\n            _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.EventHandler.remove(window, 'orientationchange', this.orientationOnChange);\n        }\n        if (this.actionOnScroll !== 'none') {\n            this.unwireScrollEvents();\n        }\n    };\n    Popup.prototype.unwireScrollEvents = function () {\n        if (this.getRelateToElement()) {\n            for (var _i = 0, _a = this.getScrollableParent(this.getRelateToElement()); _i < _a.length; _i++) {\n                var parent_2 = _a[_i];\n                _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.EventHandler.remove(parent_2, 'scroll', this.scrollRefresh);\n            }\n        }\n    };\n    Popup.prototype.getRelateToElement = function () {\n        var relateToElement = this.relateTo === '' || (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(this.relateTo) ?\n            document.body : this.relateTo;\n        this.setProperties({ relateTo: relateToElement }, true);\n        return ((typeof this.relateTo) === 'string') ?\n            document.querySelector(this.relateTo) : this.relateTo;\n    };\n    Popup.prototype.scrollRefresh = function (e) {\n        if (this.actionOnScroll === 'reposition') {\n            if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(this.element) && !(this.element.offsetParent === e.target ||\n                (this.element.offsetParent && this.element.offsetParent.tagName === 'BODY' &&\n                    e.target.parentElement == null))) {\n                this.refreshPosition();\n            }\n        }\n        else if (this.actionOnScroll === 'hide') {\n            this.hide();\n        }\n        if (this.actionOnScroll !== 'none') {\n            if (this.getRelateToElement()) {\n                var targetVisible = this.isElementOnViewport(this.getRelateToElement(), e.target);\n                if (!targetVisible && !this.targetInvisibleStatus) {\n                    this.trigger('targetExitViewport');\n                    this.targetInvisibleStatus = true;\n                }\n                else if (targetVisible) {\n                    this.targetInvisibleStatus = false;\n                }\n            }\n        }\n    };\n    /**\n     * This method is to get the element visibility on viewport when scroll\n     * the page. This method will returns true even though 1 px of element\n     * part is in visible.\n     *\n     * @param {HTMLElement} relateToElement - specifies the element\n     * @param {HTMLElement} scrollElement - specifies the scroll element\n     * @returns {boolean} - retruns the boolean\n     */\n    // eslint-disable-next-line\n    Popup.prototype.isElementOnViewport = function (relateToElement, scrollElement) {\n        var scrollParents = this.getScrollableParent(relateToElement);\n        for (var parent_3 = 0; parent_3 < scrollParents.length; parent_3++) {\n            if (this.isElementVisible(relateToElement, scrollParents[parent_3])) {\n                continue;\n            }\n            else {\n                return false;\n            }\n        }\n        return true;\n    };\n    Popup.prototype.isElementVisible = function (relateToElement, scrollElement) {\n        var rect = this.checkGetBoundingClientRect(relateToElement);\n        if (!rect.height || !rect.width) {\n            return false;\n        }\n        if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(this.checkGetBoundingClientRect(scrollElement))) {\n            var parent_4 = scrollElement.getBoundingClientRect();\n            return !(rect.bottom < parent_4.top) &&\n                (!(rect.bottom > parent_4.bottom) &&\n                    (!(rect.right > parent_4.right) &&\n                        !(rect.left < parent_4.left)));\n        }\n        else {\n            var win = window;\n            var windowView = {\n                top: win.scrollY,\n                left: win.scrollX,\n                right: win.scrollX + win.outerWidth,\n                bottom: win.scrollY + win.outerHeight\n            };\n            var off = (0,_common_position__WEBPACK_IMPORTED_MODULE_2__.calculatePosition)(relateToElement);\n            var ele = {\n                top: off.top,\n                left: off.left,\n                right: off.left + rect.width,\n                bottom: off.top + rect.height\n            };\n            var elementView = {\n                top: windowView.bottom - ele.top,\n                left: windowView.right - ele.left,\n                bottom: ele.bottom - windowView.top,\n                right: ele.right - windowView.left\n            };\n            return elementView.top > 0\n                && elementView.left > 0\n                && elementView.right > 0\n                && elementView.bottom > 0;\n        }\n    };\n    /**\n     * Initialize the event handler\n     *\n     * @returns {void}\n     * @private\n     */\n    Popup.prototype.preRender = function () {\n        //There is no event handler\n    };\n    Popup.prototype.setEnableRtl = function () {\n        this.reposition();\n        if (this.enableRtl) {\n            this.element.classList.add(CLASSNAMES.RTL);\n        }\n        else {\n            this.element.classList.remove(CLASSNAMES.RTL);\n        }\n    };\n    Popup.prototype.setContent = function () {\n        if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(this.content)) {\n            this.element.innerHTML = '';\n            if (typeof (this.content) === 'string') {\n                this.element.textContent = this.content;\n            }\n            else {\n                var relateToElem = this.getRelateToElement();\n                // eslint-disable-next-line\n                var props = this.content.props;\n                if (!relateToElem.classList.contains('e-dropdown-btn') || (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(props)) {\n                    this.element.appendChild(this.content);\n                }\n            }\n        }\n    };\n    Popup.prototype.orientationOnChange = function () {\n        var _this = this;\n        setTimeout(function () {\n            _this.refreshPosition();\n        }, 200);\n    };\n    /**\n     * Based on the `relative` element and `offset` values, `Popup` element position will refreshed.\n     *\n     * @param {HTMLElement} target - The target element.\n     * @param {boolean} collision - Specifies whether to check for collision.\n     * @returns {void}\n     */\n    Popup.prototype.refreshPosition = function (target, collision) {\n        if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(target)) {\n            this.checkFixedParent(target);\n        }\n        this.reposition();\n        if (!collision) {\n            this.checkCollision();\n        }\n    };\n    Popup.prototype.reposition = function () {\n        var pos;\n        var position;\n        var relateToElement = this.getRelateToElement();\n        if (typeof this.position.X === 'number' && typeof this.position.Y === 'number') {\n            pos = { left: this.position.X, top: this.position.Y };\n        }\n        else if ((typeof this.position.X === 'string' && typeof this.position.Y === 'number') ||\n            (typeof this.position.X === 'number' && typeof this.position.Y === 'string')) {\n            var parentDisplay = void 0;\n            var display = this.element.style.display;\n            this.element.style.display = 'block';\n            if (this.element.classList.contains('e-dlg-modal')) {\n                parentDisplay = this.element.parentElement.style.display;\n                this.element.parentElement.style.display = 'block';\n            }\n            position = this.getAnchorPosition(relateToElement, this.element, this.position, this.offsetX, this.offsetY);\n            if (typeof this.position.X === 'string') {\n                pos = { left: position.left, top: this.position.Y };\n            }\n            else {\n                pos = { left: this.position.X, top: position.top };\n            }\n            this.element.style.display = display;\n            if (this.element.classList.contains('e-dlg-modal')) {\n                this.element.parentElement.style.display = parentDisplay;\n            }\n        }\n        else if (relateToElement) {\n            var height = this.element.clientHeight;\n            var display = this.element.style.display;\n            this.element.style.display = 'block';\n            pos = this.getAnchorPosition(relateToElement, this.element, this.position, this.offsetX, this.offsetY, height);\n            this.element.style.display = display;\n        }\n        else {\n            pos = { left: 0, top: 0 };\n        }\n        if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(pos)) {\n            this.element.style.left = pos.left + 'px';\n            this.element.style.top = pos.top + 'px';\n        }\n    };\n    Popup.prototype.checkGetBoundingClientRect = function (ele) {\n        var eleRect;\n        try {\n            eleRect = ele.getBoundingClientRect();\n            return eleRect;\n        }\n        catch (error) {\n            return null;\n        }\n    };\n    Popup.prototype.getAnchorPosition = function (anchorEle, ele, position, offsetX, offsetY, height) {\n        if (height === void 0) { height = 0; }\n        var eleRect = this.checkGetBoundingClientRect(ele);\n        var anchorRect = this.checkGetBoundingClientRect(anchorEle);\n        if ((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(eleRect) || (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(anchorRect)) {\n            return null;\n        }\n        var anchor = anchorEle;\n        var anchorPos = { left: 0, top: 0 };\n        if (ele.offsetParent && ele.offsetParent.tagName === 'BODY' && anchorEle.tagName === 'BODY') {\n            anchorPos = (0,_common_position__WEBPACK_IMPORTED_MODULE_2__.calculatePosition)(anchorEle);\n        }\n        else {\n            if ((ele.classList.contains('e-dlg-modal') && anchor.tagName !== 'BODY')) {\n                ele = ele.parentElement;\n            }\n            anchorPos = (0,_common_position__WEBPACK_IMPORTED_MODULE_2__.calculateRelativeBasedPosition)(anchor, ele);\n        }\n        switch (position.X) {\n            default:\n            case 'left':\n                break;\n            case 'center':\n                if ((ele.classList.contains('e-dlg-modal') && anchor.tagName === 'BODY' && this.targetType === 'container')) {\n                    anchorPos.left += (window.innerWidth / 2 - eleRect.width / 2);\n                }\n                else if (this.targetType === 'container') {\n                    anchorPos.left += (anchorRect.width / 2 - eleRect.width / 2);\n                }\n                else {\n                    anchorPos.left += (anchorRect.width / 2);\n                }\n                break;\n            case 'right':\n                if ((ele.classList.contains('e-dlg-modal') && anchor.tagName === 'BODY' && this.targetType === 'container')) {\n                    anchorPos.left += (window.innerWidth - eleRect.width);\n                }\n                else if (this.targetType === 'container') {\n                    var scaleX = 1;\n                    var tranformElement = (0,_common_collision__WEBPACK_IMPORTED_MODULE_1__.getTransformElement)(ele);\n                    if (tranformElement) {\n                        var transformStyle = getComputedStyle(tranformElement).transform;\n                        if (transformStyle !== 'none') {\n                            var matrix = new DOMMatrix(transformStyle);\n                            scaleX = matrix.a;\n                        }\n                        var zoomStyle = getComputedStyle(tranformElement).zoom;\n                        if (zoomStyle !== 'none') {\n                            var bodyZoom = (0,_common_collision__WEBPACK_IMPORTED_MODULE_1__.getZoomValue)(document.body);\n                            scaleX = bodyZoom * scaleX;\n                        }\n                    }\n                    anchorPos.left += ((anchorRect.width - eleRect.width) / scaleX);\n                }\n                else {\n                    anchorPos.left += (anchorRect.width);\n                }\n                break;\n        }\n        switch (position.Y) {\n            default:\n            case 'top':\n                break;\n            case 'center':\n                if ((ele.classList.contains('e-dlg-modal') && anchor.tagName === 'BODY' && this.targetType === 'container')) {\n                    anchorPos.top += (window.innerHeight / 2 - eleRect.height / 2);\n                }\n                else if (this.targetType === 'container') {\n                    anchorPos.top += (anchorRect.height / 2 - eleRect.height / 2);\n                }\n                else {\n                    anchorPos.top += (anchorRect.height / 2);\n                }\n                break;\n            case 'bottom':\n                if ((ele.classList.contains('e-dlg-modal') && anchor.tagName === 'BODY' && this.targetType === 'container')) {\n                    anchorPos.top += (window.innerHeight - eleRect.height);\n                }\n                else if (this.targetType === 'container' && !ele.classList.contains('e-dialog')) {\n                    anchorPos.top += (anchorRect.height - eleRect.height);\n                }\n                else if (this.targetType === 'container' && ele.classList.contains('e-dialog')) {\n                    anchorPos.top += (anchorRect.height - height);\n                }\n                else {\n                    anchorPos.top += (anchorRect.height);\n                }\n                break;\n        }\n        anchorPos.left += offsetX;\n        anchorPos.top += offsetY;\n        return anchorPos;\n    };\n    Popup.prototype.callFlip = function (param) {\n        var relateToElement = this.getRelateToElement();\n        (0,_common_collision__WEBPACK_IMPORTED_MODULE_1__.flip)(this.element, relateToElement, this.offsetX, this.offsetY, this.position.X, this.position.Y, this.viewPortElement, param, this.fixedParent);\n    };\n    Popup.prototype.callFit = function (param) {\n        if ((0,_common_collision__WEBPACK_IMPORTED_MODULE_1__.isCollide)(this.element, this.viewPortElement).length !== 0) {\n            if ((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(this.viewPortElement)) {\n                var data = (0,_common_collision__WEBPACK_IMPORTED_MODULE_1__.fit)(this.element, this.viewPortElement, param);\n                if (param.X) {\n                    this.element.style.left = data.left + 'px';\n                }\n                if (param.Y) {\n                    this.element.style.top = data.top + 'px';\n                }\n            }\n            else {\n                var elementRect = this.checkGetBoundingClientRect(this.element);\n                var viewPortRect = this.checkGetBoundingClientRect(this.viewPortElement);\n                if ((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(elementRect) || (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(viewPortRect)) {\n                    return null;\n                }\n                if (param && param.Y === true) {\n                    if (viewPortRect.top > elementRect.top) {\n                        this.element.style.top = '0px';\n                    }\n                    else if (viewPortRect.bottom < elementRect.bottom) {\n                        this.element.style.top = parseInt(this.element.style.top, 10) - (elementRect.bottom - viewPortRect.bottom) + 'px';\n                    }\n                }\n                if (param && param.X === true) {\n                    if (viewPortRect.right < elementRect.right) {\n                        this.element.style.left = parseInt(this.element.style.left, 10) - (elementRect.right - viewPortRect.right) + 'px';\n                    }\n                    else if (viewPortRect.left > elementRect.left) {\n                        this.element.style.left = parseInt(this.element.style.left, 10) + (viewPortRect.left - elementRect.left) + 'px';\n                    }\n                }\n            }\n        }\n    };\n    Popup.prototype.checkCollision = function () {\n        var horz = this.collision.X;\n        var vert = this.collision.Y;\n        if (horz === 'none' && vert === 'none') {\n            return;\n        }\n        if (horz === 'flip' && vert === 'flip') {\n            this.callFlip({ X: true, Y: true });\n        }\n        else if (horz === 'fit' && vert === 'fit') {\n            this.callFit({ X: true, Y: true });\n        }\n        else {\n            if (horz === 'flip') {\n                this.callFlip({ X: true, Y: false });\n            }\n            else if (vert === 'flip') {\n                this.callFlip({ Y: true, X: false });\n            }\n            if (horz === 'fit') {\n                this.callFit({ X: true, Y: false });\n            }\n            else if (vert === 'fit') {\n                this.callFit({ X: false, Y: true });\n            }\n        }\n    };\n    /**\n     * Shows the popup element from screen.\n     *\n     * @returns {void}\n     * @param {AnimationModel} animationOptions - specifies the model\n     * @param { HTMLElement } relativeElement - To calculate the zIndex value dynamically.\n     */\n    Popup.prototype.show = function (animationOptions, relativeElement) {\n        var _this = this;\n        this.wireEvents();\n        if (this.zIndex === 1000 || !(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(relativeElement)) {\n            var zIndexElement = ((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(relativeElement)) ? this.element : relativeElement;\n            this.zIndex = getZindexPartial(zIndexElement);\n            (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.setStyleAttribute)(this.element, { 'zIndex': this.zIndex });\n        }\n        animationOptions = (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(animationOptions) && typeof animationOptions === 'object') ?\n            animationOptions : this.showAnimation;\n        if (this.collision.X !== 'none' || this.collision.Y !== 'none') {\n            (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.removeClass)([this.element], CLASSNAMES.CLOSE);\n            (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.addClass)([this.element], CLASSNAMES.OPEN);\n            this.checkCollision();\n            (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.removeClass)([this.element], CLASSNAMES.OPEN);\n            (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.addClass)([this.element], CLASSNAMES.CLOSE);\n        }\n        if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(animationOptions)) {\n            animationOptions.begin = function () {\n                if (!_this.isDestroyed) {\n                    (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.removeClass)([_this.element], CLASSNAMES.CLOSE);\n                    (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.addClass)([_this.element], CLASSNAMES.OPEN);\n                }\n            };\n            animationOptions.end = function () {\n                if (!_this.isDestroyed) {\n                    _this.trigger('open');\n                }\n            };\n            new _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Animation(animationOptions).animate(this.element);\n        }\n        else {\n            (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.removeClass)([this.element], CLASSNAMES.CLOSE);\n            (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.addClass)([this.element], CLASSNAMES.OPEN);\n            this.trigger('open');\n        }\n    };\n    /**\n     * Hides the popup element from screen.\n     *\n     * @param {AnimationModel} animationOptions - To give the animation options.\n     * @returns {void}\n     */\n    Popup.prototype.hide = function (animationOptions) {\n        var _this = this;\n        animationOptions = (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(animationOptions) && typeof animationOptions === 'object') ?\n            animationOptions : this.hideAnimation;\n        if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(animationOptions)) {\n            animationOptions.end = function () {\n                if (!_this.isDestroyed) {\n                    (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.removeClass)([_this.element], CLASSNAMES.OPEN);\n                    (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.addClass)([_this.element], CLASSNAMES.CLOSE);\n                    _this.trigger('close');\n                }\n            };\n            new _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Animation(animationOptions).animate(this.element);\n        }\n        else {\n            (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.removeClass)([this.element], CLASSNAMES.OPEN);\n            (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.addClass)([this.element], CLASSNAMES.CLOSE);\n            this.trigger('close');\n        }\n        this.unwireEvents();\n    };\n    /**\n     * Gets scrollable parent elements for the given element.\n     *\n     * @returns {void}\n     * @param { HTMLElement } element - Specify the element to get the scrollable parents of it.\n     */\n    Popup.prototype.getScrollableParent = function (element) {\n        this.checkFixedParent(element);\n        return getScrollableParent(element, this.fixedParent);\n    };\n    Popup.prototype.checkFixedParent = function (element) {\n        var parent = element.parentElement;\n        while (parent && parent.tagName !== 'HTML') {\n            var parentStyle = getComputedStyle(parent);\n            if ((parentStyle.position === 'fixed' || parentStyle.position === 'sticky') && !(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(this.element) && this.element.offsetParent &&\n                this.element.offsetParent.tagName === 'BODY' && getComputedStyle(this.element.offsetParent).overflow !== 'hidden') {\n                this.element.style.top = window.scrollY > parseInt(this.element.style.top, 10) ?\n                    (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.formatUnit)(window.scrollY - parseInt(this.element.style.top, 10))\n                    : (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.formatUnit)(parseInt(this.element.style.top, 10) - window.scrollY);\n                this.element.style.position = 'fixed';\n                this.fixedParent = true;\n            }\n            parent = parent.parentElement;\n            if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(this.element) && (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(this.element.offsetParent) && parentStyle.position === 'fixed'\n                && this.element.style.position === 'fixed') {\n                this.fixedParent = true;\n            }\n        }\n    };\n    __decorate([\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Property)('auto')\n    ], Popup.prototype, \"height\", void 0);\n    __decorate([\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Property)('auto')\n    ], Popup.prototype, \"width\", void 0);\n    __decorate([\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Property)(null)\n    ], Popup.prototype, \"content\", void 0);\n    __decorate([\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Property)('container')\n    ], Popup.prototype, \"targetType\", void 0);\n    __decorate([\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Property)(null)\n    ], Popup.prototype, \"viewPortElement\", void 0);\n    __decorate([\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Property)({ X: 'none', Y: 'none' })\n    ], Popup.prototype, \"collision\", void 0);\n    __decorate([\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Property)('')\n    ], Popup.prototype, \"relateTo\", void 0);\n    __decorate([\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Complex)({}, PositionData)\n    ], Popup.prototype, \"position\", void 0);\n    __decorate([\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Property)(0)\n    ], Popup.prototype, \"offsetX\", void 0);\n    __decorate([\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Property)(0)\n    ], Popup.prototype, \"offsetY\", void 0);\n    __decorate([\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Property)(1000)\n    ], Popup.prototype, \"zIndex\", void 0);\n    __decorate([\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Property)(false)\n    ], Popup.prototype, \"enableRtl\", void 0);\n    __decorate([\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Property)('reposition')\n    ], Popup.prototype, \"actionOnScroll\", void 0);\n    __decorate([\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Property)(null)\n    ], Popup.prototype, \"showAnimation\", void 0);\n    __decorate([\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Property)(null)\n    ], Popup.prototype, \"hideAnimation\", void 0);\n    __decorate([\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Event)()\n    ], Popup.prototype, \"open\", void 0);\n    __decorate([\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Event)()\n    ], Popup.prototype, \"close\", void 0);\n    __decorate([\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Event)()\n    ], Popup.prototype, \"targetExitViewport\", void 0);\n    Popup = __decorate([\n        _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.NotifyPropertyChanges\n    ], Popup);\n    return Popup;\n}(_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Component));\n\n/**\n * Gets scrollable parent elements for the given element.\n *\n * @param { HTMLElement } element - Specify the element to get the scrollable parents of it.\n * @param {boolean} fixedParent - specifies the parent element\n * @private\n * @returns {void}\n */\nfunction getScrollableParent(element, fixedParent) {\n    var eleStyle = getComputedStyle(element);\n    var scrollParents = [];\n    var overflowRegex = /(auto|scroll)/;\n    var parent = element.parentElement;\n    while (parent && parent.tagName !== 'HTML') {\n        var parentStyle = getComputedStyle(parent);\n        if (!(eleStyle.position === 'absolute' && parentStyle.position === 'static')\n            && overflowRegex.test(parentStyle.overflow + parentStyle.overflowY + parentStyle.overflowX)) {\n            scrollParents.push(parent);\n        }\n        parent = parent.parentElement;\n    }\n    if (!fixedParent) {\n        scrollParents.push(document);\n    }\n    return scrollParents;\n}\n/**\n * Gets the maximum z-index of the given element.\n *\n * @returns {void}\n * @param { HTMLElement } element - Specify the element to get the maximum z-index of it.\n * @private\n */\nfunction getZindexPartial(element) {\n    // upto body traversal\n    var parent = element.parentElement;\n    var parentZindex = [];\n    while (parent) {\n        if (parent.tagName !== 'BODY') {\n            var index = document.defaultView.getComputedStyle(parent, null).getPropertyValue('z-index');\n            var position = document.defaultView.getComputedStyle(parent, null).getPropertyValue('position');\n            if (index !== 'auto' && position !== 'static') {\n                parentZindex.push(index);\n            }\n            parent = parent.parentElement;\n        }\n        else {\n            break;\n        }\n    }\n    var childrenZindex = [];\n    for (var i = 0; i < document.body.children.length; i++) {\n        if (!element.isEqualNode(document.body.children[i])) {\n            var index = document.defaultView.getComputedStyle(document.body.children[i], null).getPropertyValue('z-index');\n            var position = document.defaultView.getComputedStyle(document.body.children[i], null).getPropertyValue('position');\n            if (index !== 'auto' && position !== 'static') {\n                childrenZindex.push(index);\n            }\n        }\n    }\n    childrenZindex.push('999');\n    var siblingsZindex = [];\n    if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(element.parentElement) && element.parentElement.tagName !== 'BODY') {\n        var childNodes = [].slice.call(element.parentElement.children);\n        for (var i = 0; i < childNodes.length; i++) {\n            if (!element.isEqualNode(childNodes[i])) {\n                var index = document.defaultView.getComputedStyle(childNodes[i], null).getPropertyValue('z-index');\n                var position = document.defaultView.getComputedStyle(childNodes[i], null).getPropertyValue('position');\n                if (index !== 'auto' && position !== 'static') {\n                    siblingsZindex.push(index);\n                }\n            }\n        }\n    }\n    var finalValue = parentZindex.concat(childrenZindex, siblingsZindex);\n    // eslint-disable-next-line\n    var currentZindexValue = Math.max.apply(Math, finalValue) + 1;\n    return currentZindexValue > 2147483647 ? 2147483647 : currentZindexValue;\n}\n/**\n * Gets the maximum z-index of the page.\n *\n * @returns {void}\n * @param { HTMLElement } tagName - Specify the tagName to get the maximum z-index of it.\n * @private\n */\nfunction getMaxZindex(tagName) {\n    if (tagName === void 0) { tagName = ['*']; }\n    var maxZindex = [];\n    for (var i = 0; i < tagName.length; i++) {\n        var elements = document.getElementsByTagName(tagName[i]);\n        for (var i_1 = 0; i_1 < elements.length; i_1++) {\n            var index = document.defaultView.getComputedStyle(elements[i_1], null).getPropertyValue('z-index');\n            var position = document.defaultView.getComputedStyle(elements[i_1], null).getPropertyValue('position');\n            if (index !== 'auto' && position !== 'static') {\n                maxZindex.push(index);\n            }\n        }\n    }\n    // eslint-disable-next-line\n    var currentZindexValue = Math.max.apply(Math, maxZindex) + 1;\n    return currentZindexValue > 2147483647 ? 2147483647 : currentZindexValue;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHN5bmNmdXNpb24rZWoyLXBvcHVwc0AyOS4xLjM3L25vZGVfbW9kdWxlcy9Ac3luY2Z1c2lvbi9lajItcG9wdXBzL3NyYy9wb3B1cC9wb3B1cC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFBLGlCQUFpQixTQUFJLElBQUksU0FBSTtBQUM3QjtBQUNBO0FBQ0EsZUFBZSxnQkFBZ0Isc0NBQXNDLGtCQUFrQjtBQUN2Riw4QkFBOEI7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0I7QUFDeEI7QUFDQTtBQUNBLENBQUM7QUFDRCxrQkFBa0IsU0FBSSxJQUFJLFNBQUk7QUFDOUI7QUFDQTtBQUNBLDZDQUE2QyxRQUFRO0FBQ3JEO0FBQ0E7QUFDd0c7QUFDbkM7QUFDdEI7QUFDd0M7QUFDVjtBQUNoQjtBQUNUO0FBQ3VFO0FBQzNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsOERBQVE7QUFDaEI7QUFDQTtBQUNBLFFBQVEsOERBQVE7QUFDaEI7QUFDQTtBQUNBLENBQUMsQ0FBQywrREFBYTtBQUNTO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNENBQTRDLGFBQWEsWUFBWTtBQUNyRSxnQ0FBZ0M7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFlBQVk7QUFDM0IsZUFBZSxZQUFZO0FBQzNCO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQSxvREFBb0QsZ0JBQWdCO0FBQ3BFO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQix1RUFBaUIsaUJBQWlCLFNBQVMsZ0VBQVUsaUJBQWlCO0FBQzFGO0FBQ0E7QUFDQSxvQkFBb0IsdUVBQWlCLGlCQUFpQixVQUFVLGdFQUFVLGtCQUFrQjtBQUM1RjtB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dWxlcy8ucG5wbS9Ac3luY2Z1c2lvbitlajItcG9wdXBzQDI5LjEuMzcvbm9kZV9tb2R1bGVzL0BzeW5jZnVzaW9uL2VqMi1wb3B1cHMvc3JjL3BvcHVwL3BvcHVwLmpzPzJjN2QiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG52YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcbn07XG5pbXBvcnQgeyBzZXRTdHlsZUF0dHJpYnV0ZSwgYWRkQ2xhc3MsIHJlbW92ZUNsYXNzLCBDaGlsZFByb3BlcnR5LCBDb21wbGV4IH0gZnJvbSAnQHN5bmNmdXNpb24vZWoyLWJhc2UnO1xuaW1wb3J0IHsgaXNOdWxsT3JVbmRlZmluZWQsIGZvcm1hdFVuaXQgfSBmcm9tICdAc3luY2Z1c2lvbi9lajItYmFzZSc7XG5pbXBvcnQgeyBCcm93c2VyIH0gZnJvbSAnQHN5bmNmdXNpb24vZWoyLWJhc2UnO1xuaW1wb3J0IHsgY2FsY3VsYXRlUG9zaXRpb24sIGNhbGN1bGF0ZVJlbGF0aXZlQmFzZWRQb3NpdGlvbiB9IGZyb20gJy4uL2NvbW1vbi9wb3NpdGlvbic7XG5pbXBvcnQgeyBBbmltYXRpb24sIFByb3BlcnR5LCBFdmVudCwgQ29tcG9uZW50IH0gZnJvbSAnQHN5bmNmdXNpb24vZWoyLWJhc2UnO1xuaW1wb3J0IHsgTm90aWZ5UHJvcGVydHlDaGFuZ2VzIH0gZnJvbSAnQHN5bmNmdXNpb24vZWoyLWJhc2UnO1xuaW1wb3J0IHsgRXZlbnRIYW5kbGVyIH0gZnJvbSAnQHN5bmNmdXNpb24vZWoyLWJhc2UnO1xuaW1wb3J0IHsgZmxpcCwgZml0LCBpc0NvbGxpZGUsIGRlc3Ryb3kgYXMgY29sbGlzaW9uRGVzdHJveSwgZ2V0VHJhbnNmb3JtRWxlbWVudCwgZ2V0Wm9vbVZhbHVlIH0gZnJvbSAnLi4vY29tbW9uL2NvbGxpc2lvbic7XG4vKipcbiAqIFNwZWNpZmllcyB0aGUgb2Zmc2V0IHBvc2l0aW9uIHZhbHVlcy5cbiAqL1xudmFyIFBvc2l0aW9uRGF0YSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoUG9zaXRpb25EYXRhLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFBvc2l0aW9uRGF0YSgpIHtcbiAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgIH1cbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgUHJvcGVydHkoJ2xlZnQnKVxuICAgIF0sIFBvc2l0aW9uRGF0YS5wcm90b3R5cGUsIFwiWFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBQcm9wZXJ0eSgndG9wJylcbiAgICBdLCBQb3NpdGlvbkRhdGEucHJvdG90eXBlLCBcIllcIiwgdm9pZCAwKTtcbiAgICByZXR1cm4gUG9zaXRpb25EYXRhO1xufShDaGlsZFByb3BlcnR5KSk7XG5leHBvcnQgeyBQb3NpdGlvbkRhdGEgfTtcbi8vIGRvbid0IHVzZSBzcGFjZSBpbiBjbGFzc05hbWVzXG52YXIgQ0xBU1NOQU1FUyA9IHtcbiAgICBST09UOiAnZS1wb3B1cCcsXG4gICAgUlRMOiAnZS1ydGwnLFxuICAgIE9QRU46ICdlLXBvcHVwLW9wZW4nLFxuICAgIENMT1NFOiAnZS1wb3B1cC1jbG9zZSdcbn07XG4vKipcbiAqIFJlcHJlc2VudHMgdGhlIFBvcHVwIENvbXBvbmVudFxuICogYGBgaHRtbFxuICogPGRpdiBpZD1cInBvcHVwXCIgc3R5bGU9XCJwb3NpdGlvbjphYnNvbHV0ZTtoZWlnaHQ6MTAwcHg7d2lkdGg6MTAwcHg7XCI+XG4gKiA8ZGl2IHN0eWxlPVwibWFyZ2luOjM1cHggMjVweDtcIj5Qb3B1cCBDb250ZW50PC9kaXY+PC9kaXY+XG4gKiBgYGBcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIDxzY3JpcHQ+XG4gKiAgIHZhciBwb3B1cE9iaiA9IG5ldyBQb3B1cCgpO1xuICogICBwb3B1cE9iai5hcHBlbmRUbyhcIiNwb3B1cFwiKTtcbiAqIDwvc2NyaXB0PlxuICogYGBgXG4gKi9cbnZhciBQb3B1cCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoUG9wdXAsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gUG9wdXAoZWxlbWVudCwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gX3N1cGVyLmNhbGwodGhpcywgb3B0aW9ucywgZWxlbWVudCkgfHwgdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FsbGVkIGludGVybmFsbHkgaWYgYW55IG9mIHRoZSBwcm9wZXJ0eSB2YWx1ZSBjaGFuZ2VkLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtQb3B1cE1vZGVsfSBuZXdQcm9wIC0gc3BlY2lmaWVzIHRoZSBuZXcgcHJvcGVydHlcbiAgICAgKiBAcGFyYW0ge1BvcHVwTW9kZWx9IG9sZFByb3AgLSBzcGVjaWZpZXMgdGhlIG9sZCBwcm9wZXJ0eVxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHJldHVybnMge3ZvaWR9XG4gICAgICovXG4gICAgUG9wdXAucHJvdG90eXBlLm9uUHJvcGVydHlDaGFuZ2VkID0gZnVuY3Rpb24gKG5ld1Byb3AsIG9sZFByb3ApIHtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IE9iamVjdC5rZXlzKG5ld1Byb3ApOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgdmFyIHByb3AgPSBfYVtfaV07XG4gICAgICAgICAgICBzd2l0Y2ggKHByb3ApIHtcbiAgICAgICAgICAgICAgICBjYXNlICd3aWR0aCc6XG4gICAgICAgICAgICAgICAgICAgIHNldFN0eWxlQXR0cmlidXRlKHRoaXMuZWxlbWVudCwgeyAnd2lkdGgnOiBmb3JtYXRVbml0KG5ld1Byb3Aud2lkdGgpIH0pO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdoZWlnaHQnOlxuICAgICAgICAgICAgICAgICAgICBzZXRTdHlsZUF0dHJpYnV0ZSh0aGlzLmVsZW1lbnQsIHsgJ2hlaWdodCc6IGZvcm1hdFVuaXQobmV3UHJvcC5oZWlnaHQpIH0pO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICd6SW5kZXgnOlxuICAgICAgICAgICAgICAgICAgICBzZXRTdHlsZUF0dHJpYnV0ZSh0aGlzLmVsZW1lbnQsIHsgJ3pJbmRleCc6IG5ld1Byb3AuekluZGV4IH0pO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdlbmFibGVSdGwnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldEVuYWJsZVJ0bCgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdwb3NpdGlvbic6XG4gICAgICAgICAgICAgICAgY2FzZSAncmVsYXRlVG8nOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2hQb3NpdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdvZmZzZXRYJzoge1xuICAgICAgICAgICAgICAgICAgICB2YXIgeCA9IG5ld1Byb3Aub2Zmc2V0WCAtIG9sZFByb3Aub2Zmc2V0WDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLmxlZnQgPSAocGFyc2VJbnQodGhpcy5lbGVtZW50LnN0eWxlLmxlZnQsIDEwKSArICh4KSkudG9TdHJpbmcoKSArICdweCc7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlICdvZmZzZXRZJzoge1xuICAgICAgICAgICAgICAgICAgICB2YXIgeSA9IG5ld1Byb3Aub2Zmc2V0WSAtIG9sZFByb3Aub2Zmc2V0WTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLnRvcCA9IChwYXJzZUludCh0aGlzLmVsZW1lbnQuc3R5bGUudG9wLCAxMCkgKyAoeSkpLnRvU3RyaW5nKCkgKyAncHgnO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSAnY29udGVudCc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0Q29udGVudCgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdhY3Rpb25PblNjcm9sbCc6XG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXdQcm9wLmFjdGlvbk9uU2Nyb2xsICE9PSAnbm9uZScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMud2lyZVNjcm9sbEV2ZW50cygpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51bndpcmVTY3JvbGxFdmVudHMoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogZ2V0cyB0aGUgQ29tcG9uZW50IG1vZHVsZSBuYW1lLlxuICAgICAqXG4gICAgICogQHJldHVybnMge3ZvaWR9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBQb3B1cC5wcm90b3R5cGUuZ2V0TW9kdWxlTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuICdwb3B1cCc7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBUbyByZXNvbHZlIGlmIGFueSBjb2xsaXNpb24gb2NjdXJzLlxuICAgICAqXG4gICAgICogQHJldHVybnMge3ZvaWR9XG4gICAgICovXG4gICAgUG9wdXAucHJvdG90eXBlLnJlc29sdmVDb2xsaXNpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuY2hlY2tDb2xsaXNpb24oKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIGdldHMgdGhlIHBlcnNpc3RlZCBzdGF0ZSBwcm9wZXJ0aWVzIG9mIHRoZSBDb21wb25lbnQuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICAgKi9cbiAgICBQb3B1cC5wcm90b3R5cGUuZ2V0UGVyc2lzdERhdGEgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFkZE9uUGVyc2lzdChbXSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBUbyBkZXN0cm95IHRoZSBjb250cm9sLlxuICAgICAqXG4gICAgICogQHJldHVybnMge3ZvaWR9XG4gICAgICovXG4gICAgUG9wdXAucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLXBvcHVwLW9wZW4nKSkge1xuICAgICAgICAgICAgdGhpcy51bndpcmVFdmVudHMoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShDTEFTU05BTUVTLlJPT1QsIENMQVNTTkFNRVMuUlRMLCBDTEFTU05BTUVTLk9QRU4sIENMQVNTTkFNRVMuQ0xPU0UpO1xuICAgICAgICB0aGlzLmNvbnRlbnQgPSBudWxsO1xuICAgICAgICB0aGlzLnJlbGF0ZVRvID0gbnVsbDtcbiAgICAgICAgY29sbGlzaW9uRGVzdHJveSgpO1xuICAgICAgICBfc3VwZXIucHJvdG90eXBlLmRlc3Ryb3kuY2FsbCh0aGlzKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFRvIEluaXRpYWxpemUgdGhlIGNvbnRyb2wgcmVuZGVyaW5nXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIFBvcHVwLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKENMQVNTTkFNRVMuUk9PVCk7XG4gICAgICAgIHZhciBzdHlsZXMgPSB7fTtcbiAgICAgICAgaWYgKHRoaXMuekluZGV4ICE9PSAxMDAwKSB7XG4gICAgICAgICAgICBzdHlsZXMuekluZGV4ID0gdGhpcy56SW5kZXg7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMud2lkdGggIT09ICdhdXRvJykge1xuICAgICAgICAgICAgc3R5bGVzLndpZHRoID0gZm9ybWF0VW5pdCh0aGlzLndpZHRoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5oZWlnaHQgIT09ICdhdXRvJykge1xuICAgICAgICAgICAgc3R5bGVzLmhlaWdodCA9IGZvcm1hdFVuaXQodGhpcy5oZWlnaHQpO1xuICAgICAgICB9XG4gICAgICAgIHNldFN0eWxlQXR0cmlidXRlKHRoaXMuZWxlbWVudCwgc3R5bGVzKTtcbiAgICAgICAgdGhpcy5maXhlZFBhcmVudCA9IGZhbHNlO1xuICAgICAgICB0aGlzLnNldEVuYWJsZVJ0bCgpO1xuICAgICAgICB0aGlzLnNldENvbnRlbnQoKTtcbiAgICB9O1xuICAgIFBvcHVwLnByb3RvdHlwZS53aXJlRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoQnJvd3Nlci5pc0RldmljZSkge1xuICAgICAgICAgICAgRXZlbnRIYW5kbGVyLmFkZCh3aW5kb3csICdvcmllbnRhdGlvbmNoYW5nZScsIHRoaXMub3JpZW50YXRpb25PbkNoYW5nZSwgdGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuYWN0aW9uT25TY3JvbGwgIT09ICdub25lJykge1xuICAgICAgICAgICAgdGhpcy53aXJlU2Nyb2xsRXZlbnRzKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFBvcHVwLnByb3RvdHlwZS53aXJlU2Nyb2xsRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5nZXRSZWxhdGVUb0VsZW1lbnQoKSkge1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHRoaXMuZ2V0U2Nyb2xsYWJsZVBhcmVudCh0aGlzLmdldFJlbGF0ZVRvRWxlbWVudCgpKTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgcGFyZW50XzEgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgRXZlbnRIYW5kbGVyLmFkZChwYXJlbnRfMSwgJ3Njcm9sbCcsIHRoaXMuc2Nyb2xsUmVmcmVzaCwgdGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFBvcHVwLnByb3RvdHlwZS51bndpcmVFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChCcm93c2VyLmlzRGV2aWNlKSB7XG4gICAgICAgICAgICBFdmVudEhhbmRsZXIucmVtb3ZlKHdpbmRvdywgJ29yaWVudGF0aW9uY2hhbmdlJywgdGhpcy5vcmllbnRhdGlvbk9uQ2hhbmdlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5hY3Rpb25PblNjcm9sbCAhPT0gJ25vbmUnKSB7XG4gICAgICAgICAgICB0aGlzLnVud2lyZVNjcm9sbEV2ZW50cygpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBQb3B1cC5wcm90b3R5cGUudW53aXJlU2Nyb2xsRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5nZXRSZWxhdGVUb0VsZW1lbnQoKSkge1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHRoaXMuZ2V0U2Nyb2xsYWJsZVBhcmVudCh0aGlzLmdldFJlbGF0ZVRvRWxlbWVudCgpKTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgcGFyZW50XzIgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgRXZlbnRIYW5kbGVyLnJlbW92ZShwYXJlbnRfMiwgJ3Njcm9sbCcsIHRoaXMuc2Nyb2xsUmVmcmVzaCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFBvcHVwLnByb3RvdHlwZS5nZXRSZWxhdGVUb0VsZW1lbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciByZWxhdGVUb0VsZW1lbnQgPSB0aGlzLnJlbGF0ZVRvID09PSAnJyB8fCBpc051bGxPclVuZGVmaW5lZCh0aGlzLnJlbGF0ZVRvKSA/XG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5IDogdGhpcy5yZWxhdGVUbztcbiAgICAgICAgdGhpcy5zZXRQcm9wZXJ0aWVzKHsgcmVsYXRlVG86IHJlbGF0ZVRvRWxlbWVudCB9LCB0cnVlKTtcbiAgICAgICAgcmV0dXJuICgodHlwZW9mIHRoaXMucmVsYXRlVG8pID09PSAnc3RyaW5nJykgP1xuICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLnJlbGF0ZVRvKSA6IHRoaXMucmVsYXRlVG87XG4gICAgfTtcbiAgICBQb3B1cC5wcm90b3R5cGUuc2Nyb2xsUmVmcmVzaCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGlmICh0aGlzLmFjdGlvbk9uU2Nyb2xsID09PSAncmVwb3NpdGlvbicpIHtcbiAgICAgICAgICAgIGlmICghaXNOdWxsT3JVbmRlZmluZWQodGhpcy5lbGVtZW50KSAmJiAhKHRoaXMuZWxlbWVudC5vZmZzZXRQYXJlbnQgPT09IGUudGFyZ2V0IHx8XG4gICAgICAgICAgICAgICAgKHRoaXMuZWxlbWVudC5vZmZzZXRQYXJlbnQgJiYgdGhpcy5lbGVtZW50Lm9mZnNldFBhcmVudC50YWdOYW1lID09PSAnQk9EWScgJiZcbiAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQucGFyZW50RWxlbWVudCA9PSBudWxsKSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2hQb3NpdGlvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuYWN0aW9uT25TY3JvbGwgPT09ICdoaWRlJykge1xuICAgICAgICAgICAgdGhpcy5oaWRlKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuYWN0aW9uT25TY3JvbGwgIT09ICdub25lJykge1xuICAgICAgICAgICAgaWYgKHRoaXMuZ2V0UmVsYXRlVG9FbGVtZW50KCkpIHtcbiAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0VmlzaWJsZSA9IHRoaXMuaXNFbGVtZW50T25WaWV3cG9ydCh0aGlzLmdldFJlbGF0ZVRvRWxlbWVudCgpLCBlLnRhcmdldCk7XG4gICAgICAgICAgICAgICAgaWYgKCF0YXJnZXRWaXNpYmxlICYmICF0aGlzLnRhcmdldEludmlzaWJsZVN0YXR1cykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ3RhcmdldEV4aXRWaWV3cG9ydCcpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRhcmdldEludmlzaWJsZVN0YXR1cyA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRhcmdldFZpc2libGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50YXJnZXRJbnZpc2libGVTdGF0dXMgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIHRvIGdldCB0aGUgZWxlbWVudCB2aXNpYmlsaXR5IG9uIHZpZXdwb3J0IHdoZW4gc2Nyb2xsXG4gICAgICogdGhlIHBhZ2UuIFRoaXMgbWV0aG9kIHdpbGwgcmV0dXJucyB0cnVlIGV2ZW4gdGhvdWdoIDEgcHggb2YgZWxlbWVudFxuICAgICAqIHBhcnQgaXMgaW4gdmlzaWJsZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IHJlbGF0ZVRvRWxlbWVudCAtIHNwZWNpZmllcyB0aGUgZWxlbWVudFxuICAgICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IHNjcm9sbEVsZW1lbnQgLSBzcGVjaWZpZXMgdGhlIHNjcm9sbCBlbGVtZW50XG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IC0gcmV0cnVucyB0aGUgYm9vbGVhblxuICAgICAqL1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuICAgIFBvcHVwLnByb3RvdHlwZS5pc0VsZW1lbnRPblZpZXdwb3J0ID0gZnVuY3Rpb24gKHJlbGF0ZVRvRWxlbWVudCwgc2Nyb2xsRWxlbWVudCkge1xuICAgICAgICB2YXIgc2Nyb2xsUGFyZW50cyA9IHRoaXMuZ2V0U2Nyb2xsYWJsZVBhcmVudChyZWxhdGVUb0VsZW1lbnQpO1xuICAgICAgICBmb3IgKHZhciBwYXJlbnRfMyA9IDA7IHBhcmVudF8zIDwgc2Nyb2xsUGFyZW50cy5sZW5ndGg7IHBhcmVudF8zKyspIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzRWxlbWVudFZpc2libGUocmVsYXRlVG9FbGVtZW50LCBzY3JvbGxQYXJlbnRzW3BhcmVudF8zXSkpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuICAgIFBvcHVwLnByb3RvdHlwZS5pc0VsZW1lbnRWaXNpYmxlID0gZnVuY3Rpb24gKHJlbGF0ZVRvRWxlbWVudCwgc2Nyb2xsRWxlbWVudCkge1xuICAgICAgICB2YXIgcmVjdCA9IHRoaXMuY2hlY2tHZXRCb3VuZGluZ0NsaWVudFJlY3QocmVsYXRlVG9FbGVtZW50KTtcbiAgICAgICAgaWYgKCFyZWN0LmhlaWdodCB8fCAhcmVjdC53aWR0aCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmICghaXNOdWxsT3JVbmRlZmluZWQodGhpcy5jaGVja0dldEJvdW5kaW5nQ2xpZW50UmVjdChzY3JvbGxFbGVtZW50KSkpIHtcbiAgICAgICAgICAgIHZhciBwYXJlbnRfNCA9IHNjcm9sbEVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICByZXR1cm4gIShyZWN0LmJvdHRvbSA8IHBhcmVudF80LnRvcCkgJiZcbiAgICAgICAgICAgICAgICAoIShyZWN0LmJvdHRvbSA+IHBhcmVudF80LmJvdHRvbSkgJiZcbiAgICAgICAgICAgICAgICAgICAgKCEocmVjdC5yaWdodCA+IHBhcmVudF80LnJpZ2h0KSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgIShyZWN0LmxlZnQgPCBwYXJlbnRfNC5sZWZ0KSkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFyIHdpbiA9IHdpbmRvdztcbiAgICAgICAgICAgIHZhciB3aW5kb3dWaWV3ID0ge1xuICAgICAgICAgICAgICAgIHRvcDogd2luLnNjcm9sbFksXG4gICAgICAgICAgICAgICAgbGVmdDogd2luLnNjcm9sbFgsXG4gICAgICAgICAgICAgICAgcmlnaHQ6IHdpbi5zY3JvbGxYICsgd2luLm91dGVyV2lkdGgsXG4gICAgICAgICAgICAgICAgYm90dG9tOiB3aW4uc2Nyb2xsWSArIHdpbi5vdXRlckhlaWdodFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciBvZmYgPSBjYWxjdWxhdGVQb3NpdGlvbihyZWxhdGVUb0VsZW1lbnQpO1xuICAgICAgICAgICAgdmFyIGVsZSA9IHtcbiAgICAgICAgICAgICAgICB0b3A6IG9mZi50b3AsXG4gICAgICAgICAgICAgICAgbGVmdDogb2ZmLmxlZnQsXG4gICAgICAgICAgICAgICAgcmlnaHQ6IG9mZi5sZWZ0ICsgcmVjdC53aWR0aCxcbiAgICAgICAgICAgICAgICBib3R0b206IG9mZi50b3AgKyByZWN0LmhlaWdodFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciBlbGVtZW50VmlldyA9IHtcbiAgICAgICAgICAgICAgICB0b3A6IHdpbmRvd1ZpZXcuYm90dG9tIC0gZWxlLnRvcCxcbiAgICAgICAgICAgICAgICBsZWZ0OiB3aW5kb3dWaWV3LnJpZ2h0IC0gZWxlLmxlZnQsXG4gICAgICAgICAgICAgICAgYm90dG9tOiBlbGUuYm90dG9tIC0gd2luZG93Vmlldy50b3AsXG4gICAgICAgICAgICAgICAgcmlnaHQ6IGVsZS5yaWdodCAtIHdpbmRvd1ZpZXcubGVmdFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiBlbGVtZW50Vmlldy50b3AgPiAwXG4gICAgICAgICAgICAgICAgJiYgZWxlbWVudFZpZXcubGVmdCA+IDBcbiAgICAgICAgICAgICAgICAmJiBlbGVtZW50Vmlldy5yaWdodCA+IDBcbiAgICAgICAgICAgICAgICAmJiBlbGVtZW50Vmlldy5ib3R0b20gPiAwO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBJbml0aWFsaXplIHRoZSBldmVudCBoYW5kbGVyXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIFBvcHVwLnByb3RvdHlwZS5wcmVSZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vVGhlcmUgaXMgbm8gZXZlbnQgaGFuZGxlclxuICAgIH07XG4gICAgUG9wdXAucHJvdG90eXBlLnNldEVuYWJsZVJ0bCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5yZXBvc2l0aW9uKCk7XG4gICAgICAgIGlmICh0aGlzLmVuYWJsZVJ0bCkge1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoQ0xBU1NOQU1FUy5SVEwpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoQ0xBU1NOQU1FUy5SVEwpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBQb3B1cC5wcm90b3R5cGUuc2V0Q29udGVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCFpc051bGxPclVuZGVmaW5lZCh0aGlzLmNvbnRlbnQpKSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgICAgICBpZiAodHlwZW9mICh0aGlzLmNvbnRlbnQpID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC50ZXh0Q29udGVudCA9IHRoaXMuY29udGVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciByZWxhdGVUb0VsZW0gPSB0aGlzLmdldFJlbGF0ZVRvRWxlbWVudCgpO1xuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuICAgICAgICAgICAgICAgIHZhciBwcm9wcyA9IHRoaXMuY29udGVudC5wcm9wcztcbiAgICAgICAgICAgICAgICBpZiAoIXJlbGF0ZVRvRWxlbS5jbGFzc0xpc3QuY29udGFpbnMoJ2UtZHJvcGRvd24tYnRuJykgfHwgaXNOdWxsT3JVbmRlZmluZWQocHJvcHMpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLmNvbnRlbnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgUG9wdXAucHJvdG90eXBlLm9yaWVudGF0aW9uT25DaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgX3RoaXMucmVmcmVzaFBvc2l0aW9uKCk7XG4gICAgICAgIH0sIDIwMCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBCYXNlZCBvbiB0aGUgYHJlbGF0aXZlYCBlbGVtZW50IGFuZCBgb2Zmc2V0YCB2YWx1ZXMsIGBQb3B1cGAgZWxlbWVudCBwb3NpdGlvbiB3aWxsIHJlZnJlc2hlZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IHRhcmdldCAtIFRoZSB0YXJnZXQgZWxlbWVudC5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGNvbGxpc2lvbiAtIFNwZWNpZmllcyB3aGV0aGVyIHRvIGNoZWNrIGZvciBjb2xsaXNpb24uXG4gICAgICogQHJldHVybnMge3ZvaWR9XG4gICAgICovXG4gICAgUG9wdXAucHJvdG90eXBlLnJlZnJlc2hQb3NpdGlvbiA9IGZ1bmN0aW9uICh0YXJnZXQsIGNvbGxpc2lvbikge1xuICAgICAgICBpZiAoIWlzTnVsbE9yVW5kZWZpbmVkKHRhcmdldCkpIHtcbiAgICAgICAgICAgIHRoaXMuY2hlY2tGaXhlZFBhcmVudCh0YXJnZXQpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVwb3NpdGlvbigpO1xuICAgICAgICBpZiAoIWNvbGxpc2lvbikge1xuICAgICAgICAgICAgdGhpcy5jaGVja0NvbGxpc2lvbigpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBQb3B1cC5wcm90b3R5cGUucmVwb3NpdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHBvcztcbiAgICAgICAgdmFyIHBvc2l0aW9uO1xuICAgICAgICB2YXIgcmVsYXRlVG9FbGVtZW50ID0gdGhpcy5nZXRSZWxhdGVUb0VsZW1lbnQoKTtcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLnBvc2l0aW9uLlggPT09ICdudW1iZXInICYmIHR5cGVvZiB0aGlzLnBvc2l0aW9uLlkgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICBwb3MgPSB7IGxlZnQ6IHRoaXMucG9zaXRpb24uWCwgdG9wOiB0aGlzLnBvc2l0aW9uLlkgfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICgodHlwZW9mIHRoaXMucG9zaXRpb24uWCA9PT0gJ3N0cmluZycgJiYgdHlwZW9mIHRoaXMucG9zaXRpb24uWSA9PT0gJ251bWJlcicpIHx8XG4gICAgICAgICAgICAodHlwZW9mIHRoaXMucG9zaXRpb24uWCA9PT0gJ251bWJlcicgJiYgdHlwZW9mIHRoaXMucG9zaXRpb24uWSA9PT0gJ3N0cmluZycpKSB7XG4gICAgICAgICAgICB2YXIgcGFyZW50RGlzcGxheSA9IHZvaWQgMDtcbiAgICAgICAgICAgIHZhciBkaXNwbGF5ID0gdGhpcy5lbGVtZW50LnN0eWxlLmRpc3BsYXk7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgICAgICBpZiAodGhpcy5lbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnZS1kbGctbW9kYWwnKSkge1xuICAgICAgICAgICAgICAgIHBhcmVudERpc3BsYXkgPSB0aGlzLmVsZW1lbnQucGFyZW50RWxlbWVudC5zdHlsZS5kaXNwbGF5O1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5wYXJlbnRFbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcG9zaXRpb24gPSB0aGlzLmdldEFuY2hvclBvc2l0aW9uKHJlbGF0ZVRvRWxlbWVudCwgdGhpcy5lbGVtZW50LCB0aGlzLnBvc2l0aW9uLCB0aGlzLm9mZnNldFgsIHRoaXMub2Zmc2V0WSk7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHRoaXMucG9zaXRpb24uWCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICBwb3MgPSB7IGxlZnQ6IHBvc2l0aW9uLmxlZnQsIHRvcDogdGhpcy5wb3NpdGlvbi5ZIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBwb3MgPSB7IGxlZnQ6IHRoaXMucG9zaXRpb24uWCwgdG9wOiBwb3NpdGlvbi50b3AgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gZGlzcGxheTtcbiAgICAgICAgICAgIGlmICh0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWRsZy1tb2RhbCcpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnBhcmVudEVsZW1lbnQuc3R5bGUuZGlzcGxheSA9IHBhcmVudERpc3BsYXk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocmVsYXRlVG9FbGVtZW50KSB7XG4gICAgICAgICAgICB2YXIgaGVpZ2h0ID0gdGhpcy5lbGVtZW50LmNsaWVudEhlaWdodDtcbiAgICAgICAgICAgIHZhciBkaXNwbGF5ID0gdGhpcy5lbGVtZW50LnN0eWxlLmRpc3BsYXk7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgICAgICBwb3MgPSB0aGlzLmdldEFuY2hvclBvc2l0aW9uKHJlbGF0ZVRvRWxlbWVudCwgdGhpcy5lbGVtZW50LCB0aGlzLnBvc2l0aW9uLCB0aGlzLm9mZnNldFgsIHRoaXMub2Zmc2V0WSwgaGVpZ2h0KTtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gZGlzcGxheTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHBvcyA9IHsgbGVmdDogMCwgdG9wOiAwIH07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFpc051bGxPclVuZGVmaW5lZChwb3MpKSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuc3R5bGUubGVmdCA9IHBvcy5sZWZ0ICsgJ3B4JztcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5zdHlsZS50b3AgPSBwb3MudG9wICsgJ3B4JztcbiAgICAgICAgfVxuICAgIH07XG4gICAgUG9wdXAucHJvdG90eXBlLmNoZWNrR2V0Qm91bmRpbmdDbGllbnRSZWN0ID0gZnVuY3Rpb24gKGVsZSkge1xuICAgICAgICB2YXIgZWxlUmVjdDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGVsZVJlY3QgPSBlbGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICByZXR1cm4gZWxlUmVjdDtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBQb3B1cC5wcm90b3R5cGUuZ2V0QW5jaG9yUG9zaXRpb24gPSBmdW5jdGlvbiAoYW5jaG9yRWxlLCBlbGUsIHBvc2l0aW9uLCBvZmZzZXRYLCBvZmZzZXRZLCBoZWlnaHQpIHtcbiAgICAgICAgaWYgKGhlaWdodCA9PT0gdm9pZCAwKSB7IGhlaWdodCA9IDA7IH1cbiAgICAgICAgdmFyIGVsZVJlY3QgPSB0aGlzLmNoZWNrR2V0Qm91bmRpbmdDbGllbnRSZWN0KGVsZSk7XG4gICAgICAgIHZhciBhbmNob3JSZWN0ID0gdGhpcy5jaGVja0dldEJvdW5kaW5nQ2xpZW50UmVjdChhbmNob3JFbGUpO1xuICAgICAgICBpZiAoaXNOdWxsT3JVbmRlZmluZWQoZWxlUmVjdCkgfHwgaXNOdWxsT3JVbmRlZmluZWQoYW5jaG9yUmVjdCkpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHZhciBhbmNob3IgPSBhbmNob3JFbGU7XG4gICAgICAgIHZhciBhbmNob3JQb3MgPSB7IGxlZnQ6IDAsIHRvcDogMCB9O1xuICAgICAgICBpZiAoZWxlLm9mZnNldFBhcmVudCAmJiBlbGUub2Zmc2V0UGFyZW50LnRhZ05hbWUgPT09ICdCT0RZJyAmJiBhbmNob3JFbGUudGFnTmFtZSA9PT0gJ0JPRFknKSB7XG4gICAgICAgICAgICBhbmNob3JQb3MgPSBjYWxjdWxhdGVQb3NpdGlvbihhbmNob3JFbGUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKChlbGUuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWRsZy1tb2RhbCcpICYmIGFuY2hvci50YWdOYW1lICE9PSAnQk9EWScpKSB7XG4gICAgICAgICAgICAgICAgZWxlID0gZWxlLnBhcmVudEVsZW1lbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhbmNob3JQb3MgPSBjYWxjdWxhdGVSZWxhdGl2ZUJhc2VkUG9zaXRpb24oYW5jaG9yLCBlbGUpO1xuICAgICAgICB9XG4gICAgICAgIHN3aXRjaCAocG9zaXRpb24uWCkge1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIGNhc2UgJ2xlZnQnOlxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnY2VudGVyJzpcbiAgICAgICAgICAgICAgICBpZiAoKGVsZS5jbGFzc0xpc3QuY29udGFpbnMoJ2UtZGxnLW1vZGFsJykgJiYgYW5jaG9yLnRhZ05hbWUgPT09ICdCT0RZJyAmJiB0aGlzLnRhcmdldFR5cGUgPT09ICdjb250YWluZXInKSkge1xuICAgICAgICAgICAgICAgICAgICBhbmNob3JQb3MubGVmdCArPSAod2luZG93LmlubmVyV2lkdGggLyAyIC0gZWxlUmVjdC53aWR0aCAvIDIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICh0aGlzLnRhcmdldFR5cGUgPT09ICdjb250YWluZXInKSB7XG4gICAgICAgICAgICAgICAgICAgIGFuY2hvclBvcy5sZWZ0ICs9IChhbmNob3JSZWN0LndpZHRoIC8gMiAtIGVsZVJlY3Qud2lkdGggLyAyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGFuY2hvclBvcy5sZWZ0ICs9IChhbmNob3JSZWN0LndpZHRoIC8gMik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAncmlnaHQnOlxuICAgICAgICAgICAgICAgIGlmICgoZWxlLmNsYXNzTGlzdC5jb250YWlucygnZS1kbGctbW9kYWwnKSAmJiBhbmNob3IudGFnTmFtZSA9PT0gJ0JPRFknICYmIHRoaXMudGFyZ2V0VHlwZSA9PT0gJ2NvbnRhaW5lcicpKSB7XG4gICAgICAgICAgICAgICAgICAgIGFuY2hvclBvcy5sZWZ0ICs9ICh3aW5kb3cuaW5uZXJXaWR0aCAtIGVsZVJlY3Qud2lkdGgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICh0aGlzLnRhcmdldFR5cGUgPT09ICdjb250YWluZXInKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzY2FsZVggPSAxO1xuICAgICAgICAgICAgICAgICAgICB2YXIgdHJhbmZvcm1FbGVtZW50ID0gZ2V0VHJhbnNmb3JtRWxlbWVudChlbGUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodHJhbmZvcm1FbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdHJhbnNmb3JtU3R5bGUgPSBnZXRDb21wdXRlZFN0eWxlKHRyYW5mb3JtRWxlbWVudCkudHJhbnNmb3JtO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRyYW5zZm9ybVN0eWxlICE9PSAnbm9uZScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWF0cml4ID0gbmV3IERPTU1hdHJpeCh0cmFuc2Zvcm1TdHlsZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NhbGVYID0gbWF0cml4LmE7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgem9vbVN0eWxlID0gZ2V0Q29tcHV0ZWRTdHlsZSh0cmFuZm9ybUVsZW1lbnQpLnpvb207XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoem9vbVN0eWxlICE9PSAnbm9uZScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYm9keVpvb20gPSBnZXRab29tVmFsdWUoZG9jdW1lbnQuYm9keSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NhbGVYID0gYm9keVpvb20gKiBzY2FsZVg7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYW5jaG9yUG9zLmxlZnQgKz0gKChhbmNob3JSZWN0LndpZHRoIC0gZWxlUmVjdC53aWR0aCkgLyBzY2FsZVgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYW5jaG9yUG9zLmxlZnQgKz0gKGFuY2hvclJlY3Qud2lkdGgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBzd2l0Y2ggKHBvc2l0aW9uLlkpIHtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBjYXNlICd0b3AnOlxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnY2VudGVyJzpcbiAgICAgICAgICAgICAgICBpZiAoKGVsZS5jbGFzc0xpc3QuY29udGFpbnMoJ2UtZGxnLW1vZGFsJykgJiYgYW5jaG9yLnRhZ05hbWUgPT09ICdCT0RZJyAmJiB0aGlzLnRhcmdldFR5cGUgPT09ICdjb250YWluZXInKSkge1xuICAgICAgICAgICAgICAgICAgICBhbmNob3JQb3MudG9wICs9ICh3aW5kb3cuaW5uZXJIZWlnaHQgLyAyIC0gZWxlUmVjdC5oZWlnaHQgLyAyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodGhpcy50YXJnZXRUeXBlID09PSAnY29udGFpbmVyJykge1xuICAgICAgICAgICAgICAgICAgICBhbmNob3JQb3MudG9wICs9IChhbmNob3JSZWN0LmhlaWdodCAvIDIgLSBlbGVSZWN0LmhlaWdodCAvIDIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYW5jaG9yUG9zLnRvcCArPSAoYW5jaG9yUmVjdC5oZWlnaHQgLyAyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdib3R0b20nOlxuICAgICAgICAgICAgICAgIGlmICgoZWxlLmNsYXNzTGlzdC5jb250YWlucygnZS1kbGctbW9kYWwnKSAmJiBhbmNob3IudGFnTmFtZSA9PT0gJ0JPRFknICYmIHRoaXMudGFyZ2V0VHlwZSA9PT0gJ2NvbnRhaW5lcicpKSB7XG4gICAgICAgICAgICAgICAgICAgIGFuY2hvclBvcy50b3AgKz0gKHdpbmRvdy5pbm5lckhlaWdodCAtIGVsZVJlY3QuaGVpZ2h0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodGhpcy50YXJnZXRUeXBlID09PSAnY29udGFpbmVyJyAmJiAhZWxlLmNsYXNzTGlzdC5jb250YWlucygnZS1kaWFsb2cnKSkge1xuICAgICAgICAgICAgICAgICAgICBhbmNob3JQb3MudG9wICs9IChhbmNob3JSZWN0LmhlaWdodCAtIGVsZVJlY3QuaGVpZ2h0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodGhpcy50YXJnZXRUeXBlID09PSAnY29udGFpbmVyJyAmJiBlbGUuY2xhc3NMaXN0LmNvbnRhaW5zKCdlLWRpYWxvZycpKSB7XG4gICAgICAgICAgICAgICAgICAgIGFuY2hvclBvcy50b3AgKz0gKGFuY2hvclJlY3QuaGVpZ2h0IC0gaGVpZ2h0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGFuY2hvclBvcy50b3AgKz0gKGFuY2hvclJlY3QuaGVpZ2h0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgYW5jaG9yUG9zLmxlZnQgKz0gb2Zmc2V0WDtcbiAgICAgICAgYW5jaG9yUG9zLnRvcCArPSBvZmZzZXRZO1xuICAgICAgICByZXR1cm4gYW5jaG9yUG9zO1xuICAgIH07XG4gICAgUG9wdXAucHJvdG90eXBlLmNhbGxGbGlwID0gZnVuY3Rpb24gKHBhcmFtKSB7XG4gICAgICAgIHZhciByZWxhdGVUb0VsZW1lbnQgPSB0aGlzLmdldFJlbGF0ZVRvRWxlbWVudCgpO1xuICAgICAgICBmbGlwKHRoaXMuZWxlbWVudCwgcmVsYXRlVG9FbGVtZW50LCB0aGlzLm9mZnNldFgsIHRoaXMub2Zmc2V0WSwgdGhpcy5wb3NpdGlvbi5YLCB0aGlzLnBvc2l0aW9uLlksIHRoaXMudmlld1BvcnRFbGVtZW50LCBwYXJhbSwgdGhpcy5maXhlZFBhcmVudCk7XG4gICAgfTtcbiAgICBQb3B1cC5wcm90b3R5cGUuY2FsbEZpdCA9IGZ1bmN0aW9uIChwYXJhbSkge1xuICAgICAgICBpZiAoaXNDb2xsaWRlKHRoaXMuZWxlbWVudCwgdGhpcy52aWV3UG9ydEVsZW1lbnQpLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICAgICAgaWYgKGlzTnVsbE9yVW5kZWZpbmVkKHRoaXMudmlld1BvcnRFbGVtZW50KSkge1xuICAgICAgICAgICAgICAgIHZhciBkYXRhID0gZml0KHRoaXMuZWxlbWVudCwgdGhpcy52aWV3UG9ydEVsZW1lbnQsIHBhcmFtKTtcbiAgICAgICAgICAgICAgICBpZiAocGFyYW0uWCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuc3R5bGUubGVmdCA9IGRhdGEubGVmdCArICdweCc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChwYXJhbS5ZKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5zdHlsZS50b3AgPSBkYXRhLnRvcCArICdweCc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIGVsZW1lbnRSZWN0ID0gdGhpcy5jaGVja0dldEJvdW5kaW5nQ2xpZW50UmVjdCh0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIHZhciB2aWV3UG9ydFJlY3QgPSB0aGlzLmNoZWNrR2V0Qm91bmRpbmdDbGllbnRSZWN0KHRoaXMudmlld1BvcnRFbGVtZW50KTtcbiAgICAgICAgICAgICAgICBpZiAoaXNOdWxsT3JVbmRlZmluZWQoZWxlbWVudFJlY3QpIHx8IGlzTnVsbE9yVW5kZWZpbmVkKHZpZXdQb3J0UmVjdCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChwYXJhbSAmJiBwYXJhbS5ZID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh2aWV3UG9ydFJlY3QudG9wID4gZWxlbWVudFJlY3QudG9wKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuc3R5bGUudG9wID0gJzBweCc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodmlld1BvcnRSZWN0LmJvdHRvbSA8IGVsZW1lbnRSZWN0LmJvdHRvbSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLnRvcCA9IHBhcnNlSW50KHRoaXMuZWxlbWVudC5zdHlsZS50b3AsIDEwKSAtIChlbGVtZW50UmVjdC5ib3R0b20gLSB2aWV3UG9ydFJlY3QuYm90dG9tKSArICdweCc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHBhcmFtICYmIHBhcmFtLlggPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZpZXdQb3J0UmVjdC5yaWdodCA8IGVsZW1lbnRSZWN0LnJpZ2h0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuc3R5bGUubGVmdCA9IHBhcnNlSW50KHRoaXMuZWxlbWVudC5zdHlsZS5sZWZ0LCAxMCkgLSAoZWxlbWVudFJlY3QucmlnaHQgLSB2aWV3UG9ydFJlY3QucmlnaHQpICsgJ3B4JztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh2aWV3UG9ydFJlY3QubGVmdCA+IGVsZW1lbnRSZWN0LmxlZnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5zdHlsZS5sZWZ0ID0gcGFyc2VJbnQodGhpcy5lbGVtZW50LnN0eWxlLmxlZnQsIDEwKSArICh2aWV3UG9ydFJlY3QubGVmdCAtIGVsZW1lbnRSZWN0LmxlZnQpICsgJ3B4JztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgUG9wdXAucHJvdG90eXBlLmNoZWNrQ29sbGlzaW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgaG9yeiA9IHRoaXMuY29sbGlzaW9uLlg7XG4gICAgICAgIHZhciB2ZXJ0ID0gdGhpcy5jb2xsaXNpb24uWTtcbiAgICAgICAgaWYgKGhvcnogPT09ICdub25lJyAmJiB2ZXJ0ID09PSAnbm9uZScpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaG9yeiA9PT0gJ2ZsaXAnICYmIHZlcnQgPT09ICdmbGlwJykge1xuICAgICAgICAgICAgdGhpcy5jYWxsRmxpcCh7IFg6IHRydWUsIFk6IHRydWUgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaG9yeiA9PT0gJ2ZpdCcgJiYgdmVydCA9PT0gJ2ZpdCcpIHtcbiAgICAgICAgICAgIHRoaXMuY2FsbEZpdCh7IFg6IHRydWUsIFk6IHRydWUgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAoaG9yeiA9PT0gJ2ZsaXAnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jYWxsRmxpcCh7IFg6IHRydWUsIFk6IGZhbHNlIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodmVydCA9PT0gJ2ZsaXAnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jYWxsRmxpcCh7IFk6IHRydWUsIFg6IGZhbHNlIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGhvcnogPT09ICdmaXQnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jYWxsRml0KHsgWDogdHJ1ZSwgWTogZmFsc2UgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh2ZXJ0ID09PSAnZml0Jykge1xuICAgICAgICAgICAgICAgIHRoaXMuY2FsbEZpdCh7IFg6IGZhbHNlLCBZOiB0cnVlIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTaG93cyB0aGUgcG9wdXAgZWxlbWVudCBmcm9tIHNjcmVlbi5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHt2b2lkfVxuICAgICAqIEBwYXJhbSB7QW5pbWF0aW9uTW9kZWx9IGFuaW1hdGlvbk9wdGlvbnMgLSBzcGVjaWZpZXMgdGhlIG1vZGVsXG4gICAgICogQHBhcmFtIHsgSFRNTEVsZW1lbnQgfSByZWxhdGl2ZUVsZW1lbnQgLSBUbyBjYWxjdWxhdGUgdGhlIHpJbmRleCB2YWx1ZSBkeW5hbWljYWxseS5cbiAgICAgKi9cbiAgICBQb3B1cC5wcm90b3R5cGUuc2hvdyA9IGZ1bmN0aW9uIChhbmltYXRpb25PcHRpb25zLCByZWxhdGl2ZUVsZW1lbnQpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdGhpcy53aXJlRXZlbnRzKCk7XG4gICAgICAgIGlmICh0aGlzLnpJbmRleCA9PT0gMTAwMCB8fCAhaXNOdWxsT3JVbmRlZmluZWQocmVsYXRpdmVFbGVtZW50KSkge1xuICAgICAgICAgICAgdmFyIHpJbmRleEVsZW1lbnQgPSAoaXNOdWxsT3JVbmRlZmluZWQocmVsYXRpdmVFbGVtZW50KSkgPyB0aGlzLmVsZW1lbnQgOiByZWxhdGl2ZUVsZW1lbnQ7XG4gICAgICAgICAgICB0aGlzLnpJbmRleCA9IGdldFppbmRleFBhcnRpYWwoekluZGV4RWxlbWVudCk7XG4gICAgICAgICAgICBzZXRTdHlsZUF0dHJpYnV0ZSh0aGlzLmVsZW1lbnQsIHsgJ3pJbmRleCc6IHRoaXMuekluZGV4IH0pO1xuICAgICAgICB9XG4gICAgICAgIGFuaW1hdGlvbk9wdGlvbnMgPSAoIWlzTnVsbE9yVW5kZWZpbmVkKGFuaW1hdGlvbk9wdGlvbnMpICYmIHR5cGVvZiBhbmltYXRpb25PcHRpb25zID09PSAnb2JqZWN0JykgP1xuICAgICAgICAgICAgYW5pbWF0aW9uT3B0aW9ucyA6IHRoaXMuc2hvd0FuaW1hdGlvbjtcbiAgICAgICAgaWYgKHRoaXMuY29sbGlzaW9uLlggIT09ICdub25lJyB8fCB0aGlzLmNvbGxpc2lvbi5ZICE9PSAnbm9uZScpIHtcbiAgICAgICAgICAgIHJlbW92ZUNsYXNzKFt0aGlzLmVsZW1lbnRdLCBDTEFTU05BTUVTLkNMT1NFKTtcbiAgICAgICAgICAgIGFkZENsYXNzKFt0aGlzLmVsZW1lbnRdLCBDTEFTU05BTUVTLk9QRU4pO1xuICAgICAgICAgICAgdGhpcy5jaGVja0NvbGxpc2lvbigpO1xuICAgICAgICAgICAgcmVtb3ZlQ2xhc3MoW3RoaXMuZWxlbWVudF0sIENMQVNTTkFNRVMuT1BFTik7XG4gICAgICAgICAgICBhZGRDbGFzcyhbdGhpcy5lbGVtZW50XSwgQ0xBU1NOQU1FUy5DTE9TRSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFpc051bGxPclVuZGVmaW5lZChhbmltYXRpb25PcHRpb25zKSkge1xuICAgICAgICAgICAgYW5pbWF0aW9uT3B0aW9ucy5iZWdpbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAoIV90aGlzLmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlbW92ZUNsYXNzKFtfdGhpcy5lbGVtZW50XSwgQ0xBU1NOQU1FUy5DTE9TRSk7XG4gICAgICAgICAgICAgICAgICAgIGFkZENsYXNzKFtfdGhpcy5lbGVtZW50XSwgQ0xBU1NOQU1FUy5PUEVOKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgYW5pbWF0aW9uT3B0aW9ucy5lbmQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFfdGhpcy5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy50cmlnZ2VyKCdvcGVuJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIG5ldyBBbmltYXRpb24oYW5pbWF0aW9uT3B0aW9ucykuYW5pbWF0ZSh0aGlzLmVsZW1lbnQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmVtb3ZlQ2xhc3MoW3RoaXMuZWxlbWVudF0sIENMQVNTTkFNRVMuQ0xPU0UpO1xuICAgICAgICAgICAgYWRkQ2xhc3MoW3RoaXMuZWxlbWVudF0sIENMQVNTTkFNRVMuT1BFTik7XG4gICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ29wZW4nKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogSGlkZXMgdGhlIHBvcHVwIGVsZW1lbnQgZnJvbSBzY3JlZW4uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0FuaW1hdGlvbk1vZGVsfSBhbmltYXRpb25PcHRpb25zIC0gVG8gZ2l2ZSB0aGUgYW5pbWF0aW9uIG9wdGlvbnMuXG4gICAgICogQHJldHVybnMge3ZvaWR9XG4gICAgICovXG4gICAgUG9wdXAucHJvdG90eXBlLmhpZGUgPSBmdW5jdGlvbiAoYW5pbWF0aW9uT3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBhbmltYXRpb25PcHRpb25zID0gKCFpc051bGxPclVuZGVmaW5lZChhbmltYXRpb25PcHRpb25zKSAmJiB0eXBlb2YgYW5pbWF0aW9uT3B0aW9ucyA9PT0gJ29iamVjdCcpID9cbiAgICAgICAgICAgIGFuaW1hdGlvbk9wdGlvbnMgOiB0aGlzLmhpZGVBbmltYXRpb247XG4gICAgICAgIGlmICghaXNOdWxsT3JVbmRlZmluZWQoYW5pbWF0aW9uT3B0aW9ucykpIHtcbiAgICAgICAgICAgIGFuaW1hdGlvbk9wdGlvbnMuZW5kID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGlmICghX3RoaXMuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlQ2xhc3MoW190aGlzLmVsZW1lbnRdLCBDTEFTU05BTUVTLk9QRU4pO1xuICAgICAgICAgICAgICAgICAgICBhZGRDbGFzcyhbX3RoaXMuZWxlbWVudF0sIENMQVNTTkFNRVMuQ0xPU0UpO1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy50cmlnZ2VyKCdjbG9zZScpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBuZXcgQW5pbWF0aW9uKGFuaW1hdGlvbk9wdGlvbnMpLmFuaW1hdGUodGhpcy5lbGVtZW50KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJlbW92ZUNsYXNzKFt0aGlzLmVsZW1lbnRdLCBDTEFTU05BTUVTLk9QRU4pO1xuICAgICAgICAgICAgYWRkQ2xhc3MoW3RoaXMuZWxlbWVudF0sIENMQVNTTkFNRVMuQ0xPU0UpO1xuICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdjbG9zZScpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudW53aXJlRXZlbnRzKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXRzIHNjcm9sbGFibGUgcGFyZW50IGVsZW1lbnRzIGZvciB0aGUgZ2l2ZW4gZWxlbWVudC5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHt2b2lkfVxuICAgICAqIEBwYXJhbSB7IEhUTUxFbGVtZW50IH0gZWxlbWVudCAtIFNwZWNpZnkgdGhlIGVsZW1lbnQgdG8gZ2V0IHRoZSBzY3JvbGxhYmxlIHBhcmVudHMgb2YgaXQuXG4gICAgICovXG4gICAgUG9wdXAucHJvdG90eXBlLmdldFNjcm9sbGFibGVQYXJlbnQgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICB0aGlzLmNoZWNrRml4ZWRQYXJlbnQoZWxlbWVudCk7XG4gICAgICAgIHJldHVybiBnZXRTY3JvbGxhYmxlUGFyZW50KGVsZW1lbnQsIHRoaXMuZml4ZWRQYXJlbnQpO1xuICAgIH07XG4gICAgUG9wdXAucHJvdG90eXBlLmNoZWNrRml4ZWRQYXJlbnQgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICB2YXIgcGFyZW50ID0gZWxlbWVudC5wYXJlbnRFbGVtZW50O1xuICAgICAgICB3aGlsZSAocGFyZW50ICYmIHBhcmVudC50YWdOYW1lICE9PSAnSFRNTCcpIHtcbiAgICAgICAgICAgIHZhciBwYXJlbnRTdHlsZSA9IGdldENvbXB1dGVkU3R5bGUocGFyZW50KTtcbiAgICAgICAgICAgIGlmICgocGFyZW50U3R5bGUucG9zaXRpb24gPT09ICdmaXhlZCcgfHwgcGFyZW50U3R5bGUucG9zaXRpb24gPT09ICdzdGlja3knKSAmJiAhaXNOdWxsT3JVbmRlZmluZWQodGhpcy5lbGVtZW50KSAmJiB0aGlzLmVsZW1lbnQub2Zmc2V0UGFyZW50ICYmXG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50Lm9mZnNldFBhcmVudC50YWdOYW1lID09PSAnQk9EWScgJiYgZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLmVsZW1lbnQub2Zmc2V0UGFyZW50KS5vdmVyZmxvdyAhPT0gJ2hpZGRlbicpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuc3R5bGUudG9wID0gd2luZG93LnNjcm9sbFkgPiBwYXJzZUludCh0aGlzLmVsZW1lbnQuc3R5bGUudG9wLCAxMCkgP1xuICAgICAgICAgICAgICAgICAgICBmb3JtYXRVbml0KHdpbmRvdy5zY3JvbGxZIC0gcGFyc2VJbnQodGhpcy5lbGVtZW50LnN0eWxlLnRvcCwgMTApKVxuICAgICAgICAgICAgICAgICAgICA6IGZvcm1hdFVuaXQocGFyc2VJbnQodGhpcy5lbGVtZW50LnN0eWxlLnRvcCwgMTApIC0gd2luZG93LnNjcm9sbFkpO1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5zdHlsZS5wb3NpdGlvbiA9ICdmaXhlZCc7XG4gICAgICAgICAgICAgICAgdGhpcy5maXhlZFBhcmVudCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwYXJlbnQgPSBwYXJlbnQucGFyZW50RWxlbWVudDtcbiAgICAgICAgICAgIGlmICghaXNOdWxsT3JVbmRlZmluZWQodGhpcy5lbGVtZW50KSAmJiBpc051bGxPclVuZGVmaW5lZCh0aGlzLmVsZW1lbnQub2Zmc2V0UGFyZW50KSAmJiBwYXJlbnRTdHlsZS5wb3NpdGlvbiA9PT0gJ2ZpeGVkJ1xuICAgICAgICAgICAgICAgICYmIHRoaXMuZWxlbWVudC5zdHlsZS5wb3NpdGlvbiA9PT0gJ2ZpeGVkJykge1xuICAgICAgICAgICAgICAgIHRoaXMuZml4ZWRQYXJlbnQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgUHJvcGVydHkoJ2F1dG8nKVxuICAgIF0sIFBvcHVwLnByb3RvdHlwZSwgXCJoZWlnaHRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgUHJvcGVydHkoJ2F1dG8nKVxuICAgIF0sIFBvcHVwLnByb3RvdHlwZSwgXCJ3aWR0aFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBQcm9wZXJ0eShudWxsKVxuICAgIF0sIFBvcHVwLnByb3RvdHlwZSwgXCJjb250ZW50XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIFByb3BlcnR5KCdjb250YWluZXInKVxuICAgIF0sIFBvcHVwLnByb3RvdHlwZSwgXCJ0YXJnZXRUeXBlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIFByb3BlcnR5KG51bGwpXG4gICAgXSwgUG9wdXAucHJvdG90eXBlLCBcInZpZXdQb3J0RWxlbWVudFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBQcm9wZXJ0eSh7IFg6ICdub25lJywgWTogJ25vbmUnIH0pXG4gICAgXSwgUG9wdXAucHJvdG90eXBlLCBcImNvbGxpc2lvblwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBQcm9wZXJ0eSgnJylcbiAgICBdLCBQb3B1cC5wcm90b3R5cGUsIFwicmVsYXRlVG9cIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgQ29tcGxleCh7fSwgUG9zaXRpb25EYXRhKVxuICAgIF0sIFBvcHVwLnByb3RvdHlwZSwgXCJwb3NpdGlvblwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBQcm9wZXJ0eSgwKVxuICAgIF0sIFBvcHVwLnByb3RvdHlwZSwgXCJvZmZzZXRYXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIFByb3BlcnR5KDApXG4gICAgXSwgUG9wdXAucHJvdG90eXBlLCBcIm9mZnNldFlcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgUHJvcGVydHkoMTAwMClcbiAgICBdLCBQb3B1cC5wcm90b3R5cGUsIFwiekluZGV4XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIFByb3BlcnR5KGZhbHNlKVxuICAgIF0sIFBvcHVwLnByb3RvdHlwZSwgXCJlbmFibGVSdGxcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgUHJvcGVydHkoJ3JlcG9zaXRpb24nKVxuICAgIF0sIFBvcHVwLnByb3RvdHlwZSwgXCJhY3Rpb25PblNjcm9sbFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBQcm9wZXJ0eShudWxsKVxuICAgIF0sIFBvcHVwLnByb3RvdHlwZSwgXCJzaG93QW5pbWF0aW9uXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIFByb3BlcnR5KG51bGwpXG4gICAgXSwgUG9wdXAucHJvdG90eXBlLCBcImhpZGVBbmltYXRpb25cIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgRXZlbnQoKVxuICAgIF0sIFBvcHVwLnByb3RvdHlwZSwgXCJvcGVuXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEV2ZW50KClcbiAgICBdLCBQb3B1cC5wcm90b3R5cGUsIFwiY2xvc2VcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgRXZlbnQoKVxuICAgIF0sIFBvcHVwLnByb3RvdHlwZSwgXCJ0YXJnZXRFeGl0Vmlld3BvcnRcIiwgdm9pZCAwKTtcbiAgICBQb3B1cCA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBOb3RpZnlQcm9wZXJ0eUNoYW5nZXNcbiAgICBdLCBQb3B1cCk7XG4gICAgcmV0dXJuIFBvcHVwO1xufShDb21wb25lbnQpKTtcbmV4cG9ydCB7IFBvcHVwIH07XG4vKipcbiAqIEdldHMgc2Nyb2xsYWJsZSBwYXJlbnQgZWxlbWVudHMgZm9yIHRoZSBnaXZlbiBlbGVtZW50LlxuICpcbiAqIEBwYXJhbSB7IEhUTUxFbGVtZW50IH0gZWxlbWVudCAtIFNwZWNpZnkgdGhlIGVsZW1lbnQgdG8gZ2V0IHRoZSBzY3JvbGxhYmxlIHBhcmVudHMgb2YgaXQuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGZpeGVkUGFyZW50IC0gc3BlY2lmaWVzIHRoZSBwYXJlbnQgZWxlbWVudFxuICogQHByaXZhdGVcbiAqIEByZXR1cm5zIHt2b2lkfVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0U2Nyb2xsYWJsZVBhcmVudChlbGVtZW50LCBmaXhlZFBhcmVudCkge1xuICAgIHZhciBlbGVTdHlsZSA9IGdldENvbXB1dGVkU3R5bGUoZWxlbWVudCk7XG4gICAgdmFyIHNjcm9sbFBhcmVudHMgPSBbXTtcbiAgICB2YXIgb3ZlcmZsb3dSZWdleCA9IC8oYXV0b3xzY3JvbGwpLztcbiAgICB2YXIgcGFyZW50ID0gZWxlbWVudC5wYXJlbnRFbGVtZW50O1xuICAgIHdoaWxlIChwYXJlbnQgJiYgcGFyZW50LnRhZ05hbWUgIT09ICdIVE1MJykge1xuICAgICAgICB2YXIgcGFyZW50U3R5bGUgPSBnZXRDb21wdXRlZFN0eWxlKHBhcmVudCk7XG4gICAgICAgIGlmICghKGVsZVN0eWxlLnBvc2l0aW9uID09PSAnYWJzb2x1dGUnICYmIHBhcmVudFN0eWxlLnBvc2l0aW9uID09PSAnc3RhdGljJylcbiAgICAgICAgICAgICYmIG92ZXJmbG93UmVnZXgudGVzdChwYXJlbnRTdHlsZS5vdmVyZmxvdyArIHBhcmVudFN0eWxlLm92ZXJmbG93WSArIHBhcmVudFN0eWxlLm92ZXJmbG93WCkpIHtcbiAgICAgICAgICAgIHNjcm9sbFBhcmVudHMucHVzaChwYXJlbnQpO1xuICAgICAgICB9XG4gICAgICAgIHBhcmVudCA9IHBhcmVudC5wYXJlbnRFbGVtZW50O1xuICAgIH1cbiAgICBpZiAoIWZpeGVkUGFyZW50KSB7XG4gICAgICAgIHNjcm9sbFBhcmVudHMucHVzaChkb2N1bWVudCk7XG4gICAgfVxuICAgIHJldHVybiBzY3JvbGxQYXJlbnRzO1xufVxuLyoqXG4gKiBHZXRzIHRoZSBtYXhpbXVtIHotaW5kZXggb2YgdGhlIGdpdmVuIGVsZW1lbnQuXG4gKlxuICogQHJldHVybnMge3ZvaWR9XG4gKiBAcGFyYW0geyBIVE1MRWxlbWVudCB9IGVsZW1lbnQgLSBTcGVjaWZ5IHRoZSBlbGVtZW50IHRvIGdldCB0aGUgbWF4aW11bSB6LWluZGV4IG9mIGl0LlxuICogQHByaXZhdGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFppbmRleFBhcnRpYWwoZWxlbWVudCkge1xuICAgIC8vIHVwdG8gYm9keSB0cmF2ZXJzYWxcbiAgICB2YXIgcGFyZW50ID0gZWxlbWVudC5wYXJlbnRFbGVtZW50O1xuICAgIHZhciBwYXJlbnRaaW5kZXggPSBbXTtcbiAgICB3aGlsZSAocGFyZW50KSB7XG4gICAgICAgIGlmIChwYXJlbnQudGFnTmFtZSAhPT0gJ0JPRFknKSB7XG4gICAgICAgICAgICB2YXIgaW5kZXggPSBkb2N1bWVudC5kZWZhdWx0Vmlldy5nZXRDb21wdXRlZFN0eWxlKHBhcmVudCwgbnVsbCkuZ2V0UHJvcGVydHlWYWx1ZSgnei1pbmRleCcpO1xuICAgICAgICAgICAgdmFyIHBvc2l0aW9uID0gZG9jdW1lbnQuZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZShwYXJlbnQsIG51bGwpLmdldFByb3BlcnR5VmFsdWUoJ3Bvc2l0aW9uJyk7XG4gICAgICAgICAgICBpZiAoaW5kZXggIT09ICdhdXRvJyAmJiBwb3NpdGlvbiAhPT0gJ3N0YXRpYycpIHtcbiAgICAgICAgICAgICAgICBwYXJlbnRaaW5kZXgucHVzaChpbmRleCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwYXJlbnQgPSBwYXJlbnQucGFyZW50RWxlbWVudDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuICAgIHZhciBjaGlsZHJlblppbmRleCA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZG9jdW1lbnQuYm9keS5jaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoIWVsZW1lbnQuaXNFcXVhbE5vZGUoZG9jdW1lbnQuYm9keS5jaGlsZHJlbltpXSkpIHtcbiAgICAgICAgICAgIHZhciBpbmRleCA9IGRvY3VtZW50LmRlZmF1bHRWaWV3LmdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keS5jaGlsZHJlbltpXSwgbnVsbCkuZ2V0UHJvcGVydHlWYWx1ZSgnei1pbmRleCcpO1xuICAgICAgICAgICAgdmFyIHBvc2l0aW9uID0gZG9jdW1lbnQuZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5ib2R5LmNoaWxkcmVuW2ldLCBudWxsKS5nZXRQcm9wZXJ0eVZhbHVlKCdwb3NpdGlvbicpO1xuICAgICAgICAgICAgaWYgKGluZGV4ICE9PSAnYXV0bycgJiYgcG9zaXRpb24gIT09ICdzdGF0aWMnKSB7XG4gICAgICAgICAgICAgICAgY2hpbGRyZW5aaW5kZXgucHVzaChpbmRleCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgY2hpbGRyZW5aaW5kZXgucHVzaCgnOTk5Jyk7XG4gICAgdmFyIHNpYmxpbmdzWmluZGV4ID0gW107XG4gICAgaWYgKCFpc051bGxPclVuZGVmaW5lZChlbGVtZW50LnBhcmVudEVsZW1lbnQpICYmIGVsZW1lbnQucGFyZW50RWxlbWVudC50YWdOYW1lICE9PSAnQk9EWScpIHtcbiAgICAgICAgdmFyIGNoaWxkTm9kZXMgPSBbXS5zbGljZS5jYWxsKGVsZW1lbnQucGFyZW50RWxlbWVudC5jaGlsZHJlbik7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hpbGROb2Rlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKCFlbGVtZW50LmlzRXF1YWxOb2RlKGNoaWxkTm9kZXNbaV0pKSB7XG4gICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gZG9jdW1lbnQuZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZShjaGlsZE5vZGVzW2ldLCBudWxsKS5nZXRQcm9wZXJ0eVZhbHVlKCd6LWluZGV4Jyk7XG4gICAgICAgICAgICAgICAgdmFyIHBvc2l0aW9uID0gZG9jdW1lbnQuZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZShjaGlsZE5vZGVzW2ldLCBudWxsKS5nZXRQcm9wZXJ0eVZhbHVlKCdwb3NpdGlvbicpO1xuICAgICAgICAgICAgICAgIGlmIChpbmRleCAhPT0gJ2F1dG8nICYmIHBvc2l0aW9uICE9PSAnc3RhdGljJykge1xuICAgICAgICAgICAgICAgICAgICBzaWJsaW5nc1ppbmRleC5wdXNoKGluZGV4KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgdmFyIGZpbmFsVmFsdWUgPSBwYXJlbnRaaW5kZXguY29uY2F0KGNoaWxkcmVuWmluZGV4LCBzaWJsaW5nc1ppbmRleCk7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lXG4gICAgdmFyIGN1cnJlbnRaaW5kZXhWYWx1ZSA9IE1hdGgubWF4LmFwcGx5KE1hdGgsIGZpbmFsVmFsdWUpICsgMTtcbiAgICByZXR1cm4gY3VycmVudFppbmRleFZhbHVlID4gMjE0NzQ4MzY0NyA/IDIxNDc0ODM2NDcgOiBjdXJyZW50WmluZGV4VmFsdWU7XG59XG4vKipcbiAqIEdldHMgdGhlIG1heGltdW0gei1pbmRleCBvZiB0aGUgcGFnZS5cbiAqXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqIEBwYXJhbSB7IEhUTUxFbGVtZW50IH0gdGFnTmFtZSAtIFNwZWNpZnkgdGhlIHRhZ05hbWUgdG8gZ2V0IHRoZSBtYXhpbXVtIHotaW5kZXggb2YgaXQuXG4gKiBAcHJpdmF0ZVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0TWF4WmluZGV4KHRhZ05hbWUpIHtcbiAgICBpZiAodGFnTmFtZSA9PT0gdm9pZCAwKSB7IHRhZ05hbWUgPSBbJyonXTsgfVxuICAgIHZhciBtYXhaaW5kZXggPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRhZ05hbWUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIGVsZW1lbnRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUodGFnTmFtZVtpXSk7XG4gICAgICAgIGZvciAodmFyIGlfMSA9IDA7IGlfMSA8IGVsZW1lbnRzLmxlbmd0aDsgaV8xKyspIHtcbiAgICAgICAgICAgIHZhciBpbmRleCA9IGRvY3VtZW50LmRlZmF1bHRWaWV3LmdldENvbXB1dGVkU3R5bGUoZWxlbWVudHNbaV8xXSwgbnVsbCkuZ2V0UHJvcGVydHlWYWx1ZSgnei1pbmRleCcpO1xuICAgICAgICAgICAgdmFyIHBvc2l0aW9uID0gZG9jdW1lbnQuZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50c1tpXzFdLCBudWxsKS5nZXRQcm9wZXJ0eVZhbHVlKCdwb3NpdGlvbicpO1xuICAgICAgICAgICAgaWYgKGluZGV4ICE9PSAnYXV0bycgJiYgcG9zaXRpb24gIT09ICdzdGF0aWMnKSB7XG4gICAgICAgICAgICAgICAgbWF4WmluZGV4LnB1c2goaW5kZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuICAgIHZhciBjdXJyZW50WmluZGV4VmFsdWUgPSBNYXRoLm1heC5hcHBseShNYXRoLCBtYXhaaW5kZXgpICsgMTtcbiAgICByZXR1cm4gY3VycmVudFppbmRleFZhbHVlID4gMjE0NzQ4MzY0NyA/IDIxNDc0ODM2NDcgOiBjdXJyZW50WmluZGV4VmFsdWU7XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@syncfusion+ej2-popups@29.1.37/node_modules/@syncfusion/ej2-popups/src/popup/popup.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@syncfusion+ej2-popups@29.1.37/node_modules/@syncfusion/ej2-popups/src/spinner/spinner.js":
/*!**********************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@syncfusion+ej2-popups@29.1.37/node_modules/@syncfusion/ej2-popups/src/spinner/spinner.js ***!
  \**********************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Spinner: () => (/* binding */ Spinner),\n/* harmony export */   createSpinner: () => (/* binding */ createSpinner),\n/* harmony export */   hideSpinner: () => (/* binding */ hideSpinner),\n/* harmony export */   setSpinner: () => (/* binding */ setSpinner),\n/* harmony export */   showSpinner: () => (/* binding */ showSpinner)\n/* harmony export */ });\n/* harmony import */ var _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @syncfusion/ej2-base */ \"(ssr)/./node_modules/.pnpm/@syncfusion+ej2-base@29.1.36/node_modules/@syncfusion/ej2-base/index.js\");\n\nvar globalTimeOut = {};\nvar DEFT_MAT_WIDTH = 30;\nvar DEFT_MAT3_WIDTH = 30;\nvar DEFT_FAB_WIDTH = 30;\nvar DEFT_FLUENT_WIDTH = 30;\nvar DEFT_FLUENT2_WIDTH = 30;\nvar DEFT_BOOT_WIDTH = 30;\nvar DEFT_BOOT4_WIDTH = 36;\nvar DEFT_BOOT5_WIDTH = 36;\nvar CLS_SHOWSPIN = 'e-spin-show';\nvar CLS_HIDESPIN = 'e-spin-hide';\nvar CLS_MATERIALSPIN = 'e-spin-material';\nvar CLS_MATERIAL3SPIN = 'e-spin-material3';\nvar CLS_TAILWIND3SPIN = 'e-spin-tailwind3';\nvar CLS_FABRICSPIN = 'e-spin-fabric';\nvar CLS_FLUENTSPIN = 'e-spin-fluent';\nvar CLS_FLUENT2SPIN = 'e-spin-fluent2';\nvar CLS_TAILWINDSPIN = 'e-spin-tailwind';\nvar CLS_BOOTSPIN = 'e-spin-bootstrap';\nvar CLS_BOOT4SPIN = 'e-spin-bootstrap4';\nvar CLS_BOOT5SPIN = 'e-spin-bootstrap5';\nvar CLS_HIGHCONTRASTSPIN = 'e-spin-high-contrast';\nvar CLS_SPINWRAP = 'e-spinner-pane';\nvar CLS_SPININWRAP = 'e-spinner-inner';\nvar CLS_SPINCIRCLE = 'e-path-circle';\nvar CLS_SPINARC = 'e-path-arc';\nvar CLS_SPINLABEL = 'e-spin-label';\nvar CLS_SPINTEMPLATE = 'e-spin-template';\nvar spinTemplate = null;\nvar spinCSSClass = null;\n/**\n * Function to change the Spinners in a page globally from application end.\n * ```\n * E.g : blazorSpinner({ action: \"Create\", options: {target: targetElement}, type: \"\" });\n * ```\n *\n * @param {string} action - specifies the string\n * @param {CreateArgs} options - specifies the args\n * @param {string} target - specifies the target\n * @param {string} type - specifes the type\n * @returns {void}\n * @private\n */\nfunction Spinner(action, options, target, type) {\n    switch (action) {\n        case 'Create':\n            /* eslint-disable */\n            var element = document.querySelector(options.target);\n            var args = {\n                type: type, target: element, cssClass: options.cssClass,\n                label: options.label, width: options.width\n            };\n            /* eslint-enable */\n            createSpinner(args);\n            break;\n        case 'Show':\n            showSpinner(document.querySelector(target));\n            break;\n        case 'Hide':\n            hideSpinner(document.querySelector(target));\n            break;\n        case 'Set': {\n            var setArgs = { cssClass: options.cssClass, type: type };\n            setSpinner(setArgs);\n            break;\n        }\n    }\n}\n/**\n * Create a spinner for the specified target element.\n * ```\n * E.g : createSpinner({ target: targetElement, width: '34px', label: 'Loading..' });\n * ```\n *\n * @param {SpinnerArgs} args - specifies the args\n * @param {CreateElementArgs} internalCreateElement - specifis the element args\n * @returns {void}\n * @private\n */\nfunction createSpinner(args, internalCreateElement) {\n    var _a;\n    if (!args.target) {\n        return;\n    }\n    var radius;\n    var makeElement = !(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(internalCreateElement) ? internalCreateElement : _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.createElement;\n    // eslint-disable-next-line\n    var container = create_spinner_container(args.target, makeElement);\n    if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(args.cssClass)) {\n        var classNames = args.cssClass.split(' ').filter(function (className) { return className.trim() !== ''; });\n        (_a = container.wrap.classList).add.apply(_a, classNames);\n    }\n    if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(args.template) || !(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(spinTemplate)) {\n        var template = !(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(args.template) ? args.template : spinTemplate;\n        container.wrap.classList.add(CLS_SPINTEMPLATE);\n        replaceContent(container.wrap, template, spinCSSClass);\n    }\n    else {\n        var theme = !(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(args.type) ? args.type : getTheme(container.wrap);\n        var width = !(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(args.width) ? args.width : undefined;\n        radius = calculateRadius(width, theme);\n        setTheme(theme, container.wrap, radius, makeElement);\n        if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(args.label)) {\n            createLabel(container.inner_wrap, args.label, makeElement);\n        }\n    }\n    container.wrap.classList.add(CLS_HIDESPIN);\n    container = null;\n}\n/**\n *\n * @param {HTMLElement} container - specifies the element\n * @param {string} label - specifies the string\n * @param {createElementParams} makeElement - specifies the element\n * @returns {HTMLElement} - returns the element\n */\nfunction createLabel(container, label, makeElement) {\n    var labelEle = makeElement('div', {});\n    labelEle.classList.add(CLS_SPINLABEL);\n    labelEle.innerHTML = label;\n    container.appendChild(labelEle);\n    return labelEle;\n}\n/**\n *\n * @param {HTMLElement} container - specifies the element\n * @param {number} radius - specifies the radius\n * @param {createElementParams} makeElement - specifies the element\n * @returns {void}\n */\nfunction createMaterialSpinner(container, radius, makeElement) {\n    var uniqueID = random_generator();\n    globalTimeOut[\"\" + uniqueID] = { timeOut: 0, type: 'Material', radius: radius };\n    create_material_element(container, uniqueID, makeElement, CLS_MATERIALSPIN);\n    mat_calculate_attributes(radius, container, 'Material', CLS_MATERIALSPIN);\n}\n/**\n *\n * @param {HTMLElement} container - specifies the element\n * @param {number} radius - specifies the radius\n * @param {createElementParams} makeElement - specifies the element\n * @returns {void}\n */\nfunction createTailwind3Spinner(container, radius, makeElement) {\n    var uniqueID = random_generator();\n    globalTimeOut[\"\" + uniqueID] = { timeOut: 0, type: 'Tailwind3', radius: radius };\n    create_material_element(container, uniqueID, makeElement, CLS_TAILWIND3SPIN);\n    mat_calculate_attributes(radius, container, 'Tailwind3', CLS_TAILWIND3SPIN);\n}\n/**\n *\n * @param {HTMLElement} container - specifies the element\n * @param {number} radius - specifies the radius\n * @param {createElementParams} makeElement - specifies the element\n * @returns {void}\n */\nfunction createMaterial3Spinner(container, radius, makeElement) {\n    var uniqueID = random_generator();\n    globalTimeOut[\"\" + uniqueID] = { timeOut: 0, type: 'Material3', radius: radius };\n    create_material_element(container, uniqueID, makeElement, CLS_MATERIAL3SPIN);\n    mat_calculate_attributes(radius, container, 'Material3', CLS_MATERIAL3SPIN);\n}\n/**\n *\n * @param {HTMLElement} container - specifies the element\n * @param {number} radius - specifies the radius\n * @param {createElementParams} makeElement - specifies the element\n * @returns {void}\n */\nfunction createBootstrap4Spinner(container, radius, makeElement) {\n    var uniqueID = random_generator();\n    globalTimeOut[\"\" + uniqueID] = { timeOut: 0, type: 'Bootstrap4', radius: radius };\n    create_material_element(container, uniqueID, makeElement, CLS_BOOT4SPIN);\n    mat_calculate_attributes(radius, container, 'Bootstrap4', CLS_BOOT4SPIN);\n}\n/**\n *\n * @param {HTMLElement} container - specifies the element\n * @param {number} radius - specifies the radius\n * @param {createElementParams} makeElement - specifies the element\n * @returns {void}\n */\nfunction createBootstrap5Spinner(container, radius, makeElement) {\n    var uniqueID = random_generator();\n    globalTimeOut[\"\" + uniqueID] = { timeOut: 0, type: 'Bootstrap5', radius: radius };\n    create_material_element(container, uniqueID, makeElement, CLS_BOOT5SPIN);\n    mat_calculate_attributes(radius, container, 'Bootstrap5', CLS_BOOT5SPIN);\n}\n/**\n *\n * @param {HTMLElement} container - specifies the element\n * @param {string} uniqueID - specifies the id.\n * @param {number} radius - specifies the radius\n * @returns {void}\n */\nfunction startMatAnimate(container, uniqueID, radius) {\n    var globalObject = {};\n    var timeOutVar = 0;\n    globalTimeOut[\"\" + uniqueID].timeOut = 0;\n    globalObject[\"\" + uniqueID] = globalVariables(uniqueID, radius, 0, 0);\n    var spinnerInfo = { uniqueID: uniqueID, container: container, globalInfo: globalObject, timeOutVar: timeOutVar };\n    animateMaterial(spinnerInfo);\n}\n/**\n *\n * @param {HTMLElement} container - specifies the element\n * @param {number} radius - specifies the radius\n * @param {createElementParams} makeElement - specifies the element\n * @returns {void}\n */\nfunction createFabricSpinner(container, radius, makeElement) {\n    var uniqueID = random_generator();\n    globalTimeOut[\"\" + uniqueID] = { timeOut: 0, type: 'Fabric', radius: radius };\n    create_fabric_element(container, uniqueID, CLS_FABRICSPIN, makeElement);\n    fb_calculate_attributes(radius, container, CLS_FABRICSPIN);\n}\n/**\n *\n * @param {HTMLElement} container - specifies the element\n * @param {number} radius - specifies the radius\n * @param {createElementParams} makeElement - specifies the element\n * @returns {void}\n */\nfunction createFluentSpinner(container, radius, makeElement) {\n    var uniqueID = random_generator();\n    globalTimeOut[\"\" + uniqueID] = { timeOut: 0, type: 'Fluent', radius: radius };\n    create_fabric_element(container, uniqueID, CLS_FLUENTSPIN, makeElement);\n    fb_calculate_attributes(radius, container, CLS_FLUENTSPIN);\n}\n/**\n *\n * @param {HTMLElement} container - specifies the element\n * @param {number} radius - specifies the radius\n * @param {createElementParams} makeElement - specifies the element\n * @returns {void}\n */\nfunction createFluent2Spinner(container, radius, makeElement) {\n    var uniqueID = random_generator();\n    globalTimeOut[\"\" + uniqueID] = { timeOut: 0, type: 'Fluent2', radius: radius };\n    create_fabric_element(container, uniqueID, CLS_FLUENT2SPIN, makeElement);\n    fb_calculate_attributes(radius, container, CLS_FLUENT2SPIN);\n}\n/**\n *\n * @param {HTMLElement} container - specifies the element\n * @param {number} radius - specifies the radius\n * @param {createElementParams} makeElement - specifies the element\n * @returns {void}\n */\nfunction createTailwindSpinner(container, radius, makeElement) {\n    var uniqueID = random_generator();\n    globalTimeOut[\"\" + uniqueID] = { timeOut: 0, type: 'Tailwind', radius: radius };\n    create_fabric_element(container, uniqueID, CLS_TAILWINDSPIN, makeElement);\n    fb_calculate_attributes(radius, container, CLS_TAILWINDSPIN);\n}\n/**\n *\n * @param {HTMLElement} container - specifies the element\n * @param {number} radius - specifies the radius\n * @param {createElementParams} makeElement - specifies the element\n * @returns {void}\n */\nfunction createHighContrastSpinner(container, radius, makeElement) {\n    var uniqueID = random_generator();\n    globalTimeOut[\"\" + uniqueID] = { timeOut: 0, type: 'HighContrast', radius: radius };\n    create_fabric_element(container, uniqueID, CLS_HIGHCONTRASTSPIN, makeElement);\n    fb_calculate_attributes(radius, container, CLS_HIGHCONTRASTSPIN);\n}\n/**\n *\n * @param {HTMLElement} container - specifies the element\n * @returns {string} - returns the string\n */\nfunction getTheme(container) {\n    var theme = window.getComputedStyle(container, ':after').getPropertyValue('content');\n    return theme.replace(/['\"]+/g, '');\n}\n/**\n *\n * @param {string} theme - specifies the theme\n * @param {HTMLElement} container - specifies the element\n * @param {number} radius - specifies the radius\n * @param {createElementParams} makeElement - specifies the element\n * @returns {void}\n */\nfunction setTheme(theme, container, radius, makeElement) {\n    var innerContainer = container.querySelector('.' + CLS_SPININWRAP);\n    var svg = innerContainer.querySelector('svg');\n    if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(svg)) {\n        innerContainer.removeChild(svg);\n    }\n    switch (theme) {\n        case 'Material':\n            createMaterialSpinner(innerContainer, radius, makeElement);\n            break;\n        case 'Material3':\n            createMaterial3Spinner(innerContainer, radius, makeElement);\n            break;\n        case 'Fabric':\n            createFabricSpinner(innerContainer, radius, makeElement);\n            break;\n        case 'Fluent':\n            createFluentSpinner(innerContainer, radius, makeElement);\n            break;\n        case 'Fluent2':\n            createFluent2Spinner(innerContainer, radius, makeElement);\n            break;\n        case 'Bootstrap':\n            createBootstrapSpinner(innerContainer, radius, makeElement);\n            break;\n        case 'HighContrast':\n            createHighContrastSpinner(innerContainer, radius, makeElement);\n            break;\n        case 'Bootstrap4':\n            createBootstrap4Spinner(innerContainer, radius, makeElement);\n            break;\n        case 'Bootstrap5':\n            createBootstrap5Spinner(innerContainer, radius, makeElement);\n            break;\n        case 'Tailwind':\n        case 'Tailwind-dark':\n            createTailwindSpinner(innerContainer, radius, makeElement);\n            break;\n        case 'Tailwind3':\n            createTailwind3Spinner(innerContainer, radius, makeElement);\n            break;\n    }\n}\n/**\n *\n * @param {HTMLElement} innerContainer - specifies the element\n * @param {number} radius - specifies the radius\n * @param {createElementParams} makeElement - specifies the element\n * @returns {void}\n */\nfunction createBootstrapSpinner(innerContainer, radius, makeElement) {\n    var uniqueID = random_generator();\n    globalTimeOut[\"\" + uniqueID] = { timeOut: 0, type: 'Bootstrap', radius: radius };\n    create_bootstrap_element(innerContainer, uniqueID, makeElement);\n    boot_calculate_attributes(innerContainer, radius);\n}\n/**\n *\n * @param {HTMLElement} innerContainer - specifies the element\n * @param {string} uniqueID - specifies the id\n * @param {createElementParams} makeElement - specifies the element\n * @returns {void}\n */\n// eslint-disable-next-line\nfunction create_bootstrap_element(innerContainer, uniqueID, makeElement) {\n    var svgBoot = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n    var viewBoxValue = 64;\n    var trans = 32;\n    var defaultRadius = 2;\n    svgBoot.setAttribute('id', uniqueID);\n    svgBoot.setAttribute('class', CLS_BOOTSPIN);\n    svgBoot.setAttribute('viewBox', '0 0 ' + viewBoxValue + ' ' + viewBoxValue);\n    innerContainer.insertBefore(svgBoot, innerContainer.firstChild);\n    for (var item = 0; item <= 7; item++) {\n        var bootCircle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');\n        bootCircle.setAttribute('class', CLS_SPINCIRCLE + '_' + item);\n        bootCircle.setAttribute('r', defaultRadius + '');\n        bootCircle.setAttribute('transform', 'translate(' + trans + ',' + trans + ')');\n        svgBoot.appendChild(bootCircle);\n    }\n}\n/**\n *\n * @param {HTMLElement} innerContainer - specifies the element\n * @param {number} radius - specifies the radius\n * @returns {void}\n */\n// eslint-disable-next-line\nfunction boot_calculate_attributes(innerContainer, radius) {\n    var svg = innerContainer.querySelector('svg.e-spin-bootstrap');\n    var x = 0;\n    var y = 0;\n    var rad = 24;\n    svg.style.width = svg.style.height = radius + 'px';\n    var startArc = 90;\n    for (var item = 0; item <= 7; item++) {\n        var start = defineArcPoints(x, y, rad, startArc);\n        var circleEle = svg.querySelector('.' + CLS_SPINCIRCLE + '_' + item);\n        circleEle.setAttribute('cx', start.x + '');\n        circleEle.setAttribute('cy', start.y + '');\n        startArc = startArc >= 360 ? 0 : startArc;\n        startArc = startArc + 45;\n    }\n}\n/**\n *\n * @param {number} begin - specifies the number\n * @param {number} stop  - specifirs the number\n * @returns {number[]} - returns the array of number\n */\nfunction generateSeries(begin, stop) {\n    var series = [];\n    var start = begin;\n    var end = stop;\n    var increment = false;\n    var count = 1;\n    formSeries(start);\n    /**\n     *\n     * @param {number} i - specifies the number\n     * @returns {void}\n     */\n    function formSeries(i) {\n        series.push(i);\n        if (i !== end || count === 1) {\n            if (i <= start && i > 1 && !increment) {\n                i = parseFloat((i - 0.2).toFixed(2));\n            }\n            else if (i === 1) {\n                i = 7;\n                i = parseFloat((i + 0.2).toFixed(2));\n                increment = true;\n            }\n            else if (i < 8 && increment) {\n                i = parseFloat((i + 0.2).toFixed(2));\n                if (i === 8) {\n                    increment = false;\n                }\n            }\n            else if (i <= 8 && !increment) {\n                i = parseFloat((i - 0.2).toFixed(2));\n            }\n            ++count;\n            formSeries(i);\n        }\n    }\n    return series;\n}\n/**\n *\n * @param {HTMLElement} innerContainer - specifies the element\n * @returns {void}\n */\nfunction animateBootstrap(innerContainer) {\n    var svg = innerContainer.querySelector('svg.e-spin-bootstrap');\n    var id = svg.getAttribute('id');\n    for (var i = 1; i <= 8; i++) {\n        var circleEle = (innerContainer.getElementsByClassName('e-path-circle_' +\n            (i === 8 ? 0 : i))[0]);\n        rotation(circleEle, i, i, generateSeries(i, i), id);\n    }\n    /**\n     *\n     * @param {SVGCircleElement} circle - specifies the circl element\n     * @param {number} start - specifies the number\n     * @param {number} end - specifies the end number\n     * @param {number} series - specifies the series\n     * @param {string} id - specifies the id\n     * @returns {void}\n     */\n    function rotation(circle, start, end, series, id) {\n        var count = 0;\n        boot_animate(start);\n        // eslint-disable-next-line\n        function boot_animate(radius) {\n            if (globalTimeOut[\"\" + id].isAnimate) {\n                ++count;\n                circle.setAttribute('r', radius + '');\n                if (count >= series.length) {\n                    count = 0;\n                }\n                // eslint-disable-next-line\n                globalTimeOut[id].timeOut = setTimeout(boot_animate.bind(null, series[count]), 18);\n            }\n        }\n    }\n}\n/**\n *\n * @param {HTMLElement} container - specifies the element\n * @param {string} template - specifies the template\n * @param {string} cssClass - specifies the css class.\n * @returns {void}\n */\nfunction replaceContent(container, template, cssClass) {\n    if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(cssClass)) {\n        container.classList.add(cssClass);\n    }\n    var inner = container.querySelector('.e-spinner-inner');\n    inner.innerHTML = template;\n}\n/**\n *\n * @param {string} width - specifies the width\n * @param {string} theme - specifies the string\n * @returns {number} - returns the number\n */\nfunction calculateRadius(width, theme) {\n    var defaultSize;\n    switch (theme) {\n        case 'Material':\n            defaultSize = DEFT_MAT_WIDTH;\n            break;\n        case 'Material3':\n            defaultSize = DEFT_MAT3_WIDTH;\n            break;\n        case 'Fabric':\n            defaultSize = DEFT_FAB_WIDTH;\n            break;\n        case 'Tailwind':\n        case 'Tailwind-dark':\n        case 'Tailwind3':\n            defaultSize = DEFT_FAB_WIDTH;\n            break;\n        case 'Fluent':\n            defaultSize = DEFT_FLUENT_WIDTH;\n            break;\n        case 'Fluent2':\n            defaultSize = DEFT_FLUENT2_WIDTH;\n            break;\n        case 'Bootstrap4':\n            defaultSize = DEFT_BOOT4_WIDTH;\n            break;\n        case 'Bootstrap5':\n            defaultSize = DEFT_BOOT5_WIDTH;\n            break;\n        default:\n            defaultSize = DEFT_BOOT_WIDTH;\n    }\n    width = width ? parseFloat(width + '') : defaultSize;\n    return theme === 'Bootstrap' ? width : width / 2;\n}\n/**\n *\n * @param {string} id - specifies the id\n * @param {number} radius - specifies the radius\n * @param {number} count - specifies the number count\n * @param {number} previousId - specifies the previous id\n * @returns {GlobalVariables} - returns the variables\n */\nfunction globalVariables(id, radius, count, previousId) {\n    return {\n        radius: radius,\n        count: count,\n        previousId: previousId\n    };\n}\n/**\n * @returns {string} - returns the string\n */\n// eslint-disable-next-line\nfunction random_generator() {\n    var random = '';\n    var combine = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n    for (var i = 0; i < 5; i++) {\n        random += combine.charAt(Math.floor(Math.random() * combine.length));\n    }\n    return random;\n}\n/**\n *\n * @param {HTMLElement} innerCon - specifies the element\n * @param {string} uniqueID - specifies the unique id\n * @param {string} themeClass - specifies the string\n * @param {createElementParams} makeElement - specifies the element\n * @returns {void}\n */\n// eslint-disable-next-line\nfunction create_fabric_element(innerCon, uniqueID, themeClass, makeElement) {\n    var svgFabric = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n    svgFabric.setAttribute('id', uniqueID);\n    svgFabric.setAttribute('class', themeClass);\n    var fabricCirclePath = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n    fabricCirclePath.setAttribute('class', CLS_SPINCIRCLE);\n    var fabricCircleArc = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n    fabricCircleArc.setAttribute('class', CLS_SPINARC);\n    innerCon.insertBefore(svgFabric, innerCon.firstChild);\n    svgFabric.appendChild(fabricCirclePath);\n    svgFabric.appendChild(fabricCircleArc);\n}\n/**\n *\n * @param {HTMLElement} innerContainer - specifies the element\n * @param {string} uniqueID - specifies the unique id\n * @param {createElementParams} makeElement - specifies the element\n * @param {string} cls - specifies the string\n * @returns {void}\n */\n// eslint-disable-next-line\nfunction create_material_element(innerContainer, uniqueID, makeElement, cls) {\n    var svgMaterial = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n    var matCirclePath = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n    svgMaterial.setAttribute('class', cls);\n    svgMaterial.setAttribute('id', uniqueID);\n    matCirclePath.setAttribute('class', CLS_SPINCIRCLE);\n    innerContainer.insertBefore(svgMaterial, innerContainer.firstChild);\n    svgMaterial.appendChild(matCirclePath);\n}\n/**\n *\n * @param {HTMLElement} target - specifies the element\n * @param {createElementParams} makeElement - specifies the element\n * @returns {void}\n */\n// eslint-disable-next-line\nfunction create_spinner_container(target, makeElement) {\n    var spinnerContainer = makeElement('div', {});\n    var spinnerInnerContainer = makeElement('div', {});\n    spinnerContainer.classList.add(CLS_SPINWRAP);\n    spinnerInnerContainer.classList.add(CLS_SPININWRAP);\n    spinnerInnerContainer.setAttribute('aria-disabled', 'true');\n    target.appendChild(spinnerContainer);\n    spinnerContainer.appendChild(spinnerInnerContainer);\n    // eslint-disable-next-line\n    return { wrap: spinnerContainer, inner_wrap: spinnerInnerContainer };\n}\n/**\n *\n * @param {SpinnerInfo} spinnerInfo - specifies the spinner\n * @returns {void}\n */\nfunction animateMaterial(spinnerInfo) {\n    var start = 1;\n    var end = 149;\n    var duration = 1333;\n    var max = 75;\n    createCircle(start, end, easeAnimation, duration, spinnerInfo.globalInfo[spinnerInfo.uniqueID].count, max, spinnerInfo);\n    spinnerInfo.globalInfo[spinnerInfo.uniqueID].count = ++spinnerInfo.globalInfo[spinnerInfo.uniqueID].count % 4;\n}\n/**\n *\n * @param {number} start - specifies the number\n * @param {number} end - specifies the end number\n * @param {Function} easing - specifies the function\n * @param {number} duration - specifies the duration\n * @param {number} count - specifies the count\n * @param {number} max - specifies the max number\n * @param {SpinnerInfo} spinnerInfo - specifies the spinner info\n * @returns {void}\n */\nfunction createCircle(start, end, easing, duration, count, max, spinnerInfo) {\n    var id = ++spinnerInfo.globalInfo[spinnerInfo.uniqueID].previousId;\n    var startTime = new Date().getTime();\n    var change = end - start;\n    var diameter = getSize((spinnerInfo.globalInfo[spinnerInfo.uniqueID].radius * 2) + '');\n    var strokeSize = getStrokeSize(diameter);\n    var rotate = -90 * (spinnerInfo.globalInfo[spinnerInfo.uniqueID].count || 0);\n    mat_animation(spinnerInfo);\n    // eslint-disable-next-line\n    function mat_animation(spinnerInfo) {\n        var currentTime = Math.max(0, Math.min(new Date().getTime() - startTime, duration));\n        updatePath(easing(currentTime, start, change, duration), spinnerInfo.container);\n        if (id === spinnerInfo.globalInfo[spinnerInfo.uniqueID].previousId && currentTime < duration) {\n            // eslint-disable-next-line\n            globalTimeOut[spinnerInfo.uniqueID].timeOut = setTimeout(mat_animation.bind(null, spinnerInfo), 1);\n        }\n        else {\n            animateMaterial(spinnerInfo);\n        }\n    }\n    /**\n     *\n     * @param {number} value - specifies the number value\n     * @param {HTMLElement} container - specifies the container\n     * @returns {void}\n     */\n    function updatePath(value, container) {\n        if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(container.querySelector('svg.e-spin-material')) || !(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(container.querySelector('svg.e-spin-material3')) || !(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(container.querySelector('svg.e-spin-tailwind3'))) {\n            var svg = void 0;\n            if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(container.querySelector('svg.e-spin-material')) &&\n                !(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(container.querySelector('svg.e-spin-material').querySelector('path.e-path-circle'))) {\n                svg = container.querySelector('svg.e-spin-material');\n            }\n            else if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(container.querySelector('svg.e-spin-material3')) &&\n                !(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(container.querySelector('svg.e-spin-material3').querySelector('path.e-path-circle'))) {\n                svg = container.querySelector('svg.e-spin-material3');\n            }\n            else if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(container.querySelector('svg.e-spin-tailwind3')) &&\n                !(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(container.querySelector('svg.e-spin-tailwind3').querySelector('path.e-path-circle'))) {\n                svg = container.querySelector('svg.e-spin-tailwind3');\n            }\n            if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(svg)) {\n                var path = svg.querySelector('path.e-path-circle');\n                path.setAttribute('stroke-dashoffset', getDashOffset(diameter, strokeSize, value, max) + '');\n                path.setAttribute('transform', 'rotate(' + (rotate) + ' ' + diameter / 2 + ' ' + diameter / 2 + ')');\n            }\n        }\n    }\n}\n/**\n *\n * @param {number} radius - specifies the number\n * @param {HTMLElement} container - specifies the element\n * @param {string} type - specifies the string type\n * @param {string} cls - specifies the string\n * @returns {void}\n */\n// eslint-disable-next-line\nfunction mat_calculate_attributes(radius, container, type, cls) {\n    var diameter = radius * 2;\n    var svg = container.querySelector('svg.' + cls);\n    var path = svg.querySelector('path.e-path-circle');\n    var strokeSize = getStrokeSize(diameter);\n    var transformOrigin = (diameter / 2) + 'px';\n    svg.setAttribute('viewBox', '0 0 ' + diameter + ' ' + diameter);\n    svg.style.width = svg.style.height = diameter + 'px';\n    svg.style.transformOrigin = transformOrigin + ' ' + transformOrigin + ' ' + transformOrigin;\n    path.setAttribute('d', drawArc(diameter, strokeSize));\n    if (type === 'Material' || type === 'Material3' || type === 'Fluent2' || type === 'Tailwind3') {\n        path.setAttribute('stroke-width', strokeSize + '');\n        path.setAttribute('stroke-dasharray', ((diameter - strokeSize) * Math.PI * 0.75) + '');\n        path.setAttribute('stroke-dashoffset', getDashOffset(diameter, strokeSize, 1, 75) + '');\n    }\n}\n/**\n *\n * @param {string} value - specifies the value\n * @returns {number} - returns the number\n */\nfunction getSize(value) {\n    var parsed = parseFloat(value);\n    return parsed;\n}\n/**\n *\n * @param {number} diameter - specifies the diameter\n * @param {number} strokeSize - specifies the size\n * @returns {string} - returns the string\n */\nfunction drawArc(diameter, strokeSize) {\n    var radius = diameter / 2;\n    var offset = strokeSize / 2;\n    return 'M' + radius + ',' + offset\n        + 'A' + (radius - offset) + ',' + (radius - offset) + ' 0 1 1 ' + offset + ',' + radius;\n}\n/**\n *\n * @param {number} diameter - specifies the number\n * @returns {number} - returns the number\n */\nfunction getStrokeSize(diameter) {\n    return 10 / 100 * diameter;\n}\n/**\n *\n * @param {number} diameter - specifies the number\n * @param {number} strokeSize - specifies the stroke size\n * @param {number} value - specifies the value\n * @param {number} max - specifies the max number\n * @returns {number} - returns the number\n */\nfunction getDashOffset(diameter, strokeSize, value, max) {\n    return (diameter - strokeSize) * Math.PI * ((3 * (max) / 100) - (value / 100));\n}\n/**\n *\n * @param {number} current - specifies the number\n * @param {number} start - specifies the stroke size\n * @param {number} change - specifies the value\n * @param {number} duration - specifies the max number\n * @returns {number} - returns the number\n */\nfunction easeAnimation(current, start, change, duration) {\n    var timestamp = (current /= duration) * current;\n    var timecount = timestamp * current;\n    return start + change * (6 * timecount * timestamp + -15 * timestamp * timestamp + 10 * timecount);\n}\n/**\n *\n * @param {number} radius - specifies the number\n * @param {HTMLElement} innerConainer - specifies the element\n * @param {string} trgClass - specifies the class\n * @returns {void}\n */\n// eslint-disable-next-line\nfunction fb_calculate_attributes(radius, innerConainer, trgClass) {\n    var centerX = radius;\n    var centerY = radius;\n    var diameter = radius * 2;\n    var startArc = 315;\n    var endArc = 45;\n    var svg = innerConainer.querySelector('.' + trgClass);\n    var circle = svg.querySelector('.e-path-circle');\n    var path = svg.querySelector('.e-path-arc');\n    var transformOrigin = (diameter / 2) + 'px';\n    circle.setAttribute('d', defineCircle(centerX, centerY, radius));\n    path.setAttribute('d', defineArc(centerX, centerY, radius, startArc, endArc));\n    svg.setAttribute('viewBox', '0 0 ' + diameter + ' ' + diameter);\n    svg.style.transformOrigin = transformOrigin + ' ' + transformOrigin + ' ' + transformOrigin;\n    svg.style.width = svg.style.height = diameter + 'px';\n}\n/**\n *\n * @param {number} centerX - specifies the number\n * @param {number} centerY - specifies the stroke size\n * @param {number} radius - specifies the value\n * @param {number} angle - specifies the max number\n * @returns {number} - returns the number\n */\nfunction defineArcPoints(centerX, centerY, radius, angle) {\n    var radians = (angle - 90) * Math.PI / 180.0;\n    return {\n        x: centerX + (radius * Math.cos(radians)),\n        y: centerY + (radius * Math.sin(radians))\n    };\n}\n/**\n *\n * @param {number} x - specifies the number\n * @param {number} y - specifies the stroke size\n * @param {number} radius - specifies the radius\n * @param {number} startArc - specifies the value\n * @param {number} endArc - specifies the max number\n * @returns {number} - returns the number\n */\nfunction defineArc(x, y, radius, startArc, endArc) {\n    var start = defineArcPoints(x, y, radius, endArc);\n    var end = defineArcPoints(x, y, radius, startArc);\n    var d = [\n        'M', start.x, start.y,\n        'A', radius, radius, 0, 0, 0, end.x, end.y\n    ].join(' ');\n    return d;\n}\n/**\n *\n * @param {number} x - specifies the number\n * @param {number} y - specifies the stroke size\n * @param {number} radius - specifies the value\n * @returns {string} - returns the string\n */\nfunction defineCircle(x, y, radius) {\n    var d = [\n        'M', x, y,\n        'm', -radius, 0,\n        'a', radius, radius, 0, 1, 0, radius * 2, 0,\n        'a', radius, radius, 0, 1, 0, -radius * 2, 0\n    ].join(' ');\n    return d;\n}\n/**\n * Function to show the Spinner.\n *\n * @param {HTMLElement} container - Specify the target of the Spinner.\n * @returns {void}\n * @private\n */\nfunction showSpinner(container) {\n    showHideSpinner(container, false);\n    container = null;\n}\n/**\n *\n * @param {HTMLElement} container - specifies the element\n * @param {boolean} isHide - specifies the boolean\n * @returns {void}\n */\nfunction showHideSpinner(container, isHide) {\n    var spinnerWrap;\n    if (container) {\n        if (container.classList.contains(CLS_SPINWRAP)) {\n            spinnerWrap = container;\n        }\n        else {\n            var spinWrapCollection = container.querySelectorAll('.' + CLS_SPINWRAP);\n            if (_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Browser.isIE) {\n                for (var i = 0; i < spinWrapCollection.length; i++) {\n                    if (spinWrapCollection[i].parentElement && spinWrapCollection[i].parentElement === container) {\n                        spinnerWrap = spinWrapCollection[i];\n                        break;\n                    }\n                }\n            }\n            else {\n                spinnerWrap = Array.from(spinWrapCollection).find(function (wrap) { return wrap.parentElement === container; }) || null;\n            }\n        }\n    }\n    if (container && spinnerWrap) {\n        var inner = spinnerWrap.querySelector('.' + CLS_SPININWRAP);\n        var spinCheck = isHide ? !spinnerWrap.classList.contains(CLS_SPINTEMPLATE) &&\n            !spinnerWrap.classList.contains(CLS_HIDESPIN) :\n            !spinnerWrap.classList.contains(CLS_SPINTEMPLATE) && !spinnerWrap.classList.contains(CLS_SHOWSPIN);\n        if (spinCheck) {\n            var svgEle = spinnerWrap.querySelector('svg');\n            if ((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(svgEle)) {\n                return;\n            }\n            var id = svgEle.getAttribute('id');\n            globalTimeOut[\"\" + id].isAnimate = !isHide;\n            switch (globalTimeOut[\"\" + id].type) {\n                case 'Material':\n                case 'Material3':\n                case 'Tailwind3':\n                    if (isHide) {\n                        clearTimeout(globalTimeOut[id].timeOut);\n                    }\n                    else {\n                        startMatAnimate(inner, id, globalTimeOut[id].radius);\n                    }\n                    break;\n                case 'Bootstrap':\n                    if (isHide) {\n                        clearTimeout(globalTimeOut[id].timeOut);\n                    }\n                    else {\n                        animateBootstrap(inner);\n                    }\n                    break;\n            }\n        }\n        if (isHide) {\n            (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.classList)(spinnerWrap, [CLS_HIDESPIN], [CLS_SHOWSPIN]);\n        }\n        else {\n            (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.classList)(spinnerWrap, [CLS_SHOWSPIN], [CLS_HIDESPIN]);\n        }\n        container = null;\n    }\n}\n/**\n * Function to hide the Spinner.\n *\n * @param {HTMLElement} container - Specify the target of the Spinner.\n * @returns {void}\n * @private\n */\nfunction hideSpinner(container) {\n    showHideSpinner(container, true);\n    container = null;\n}\n/**\n * Function to change the Spinners in a page globally from application end.\n * ```\n * E.g : setSpinner({ cssClass: 'custom-css'; type: 'Material' });\n * ```\n *\n * @param {SetSpinnerArgs} args - specifies the args\n * @param {createElementParams} internalCreateElement - specifies the element params\n * @returns {void}\n * @private\n */\nfunction setSpinner(args, internalCreateElement) {\n    var makeElement = !(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(internalCreateElement) ? internalCreateElement : _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.createElement;\n    if (args.template !== undefined) {\n        spinTemplate = args.template;\n        if (args.template !== undefined) {\n            spinCSSClass = args.cssClass;\n        }\n    }\n    var container = document.querySelectorAll('.' + CLS_SPINWRAP);\n    for (var index = 0; index < container.length; index++) {\n        ensureTemplate(args.template, container[index], args.type, args.cssClass, makeElement);\n    }\n}\n/**\n *\n * @param {string} template - specifies the string\n * @param {HTMLElement} container - specifies the container\n * @param {string} theme - specifies the theme\n * @param {string} cssClass - specifies the string class\n * @param {createElementParams} makeEle - specifies the params\n * @returns {void}\n */\nfunction ensureTemplate(template, container, theme, cssClass, makeEle) {\n    if ((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(template) && !container.classList.contains(CLS_SPINTEMPLATE)) {\n        replaceTheme(container, theme, cssClass, makeEle);\n        if (container.classList.contains(CLS_SHOWSPIN)) {\n            container.classList.remove(CLS_SHOWSPIN);\n            showSpinner(container);\n        }\n        else {\n            container.classList.remove(CLS_HIDESPIN);\n            hideSpinner(container);\n        }\n    }\n    else {\n        spinTemplate = template;\n        if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(cssClass)) {\n            spinCSSClass = cssClass;\n        }\n        if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(spinTemplate)) {\n            replaceContent(container, spinTemplate, spinCSSClass);\n        }\n    }\n}\n/**\n *\n * @param {HTMLElement} container - specifies the container\n * @param {string} theme - specifies the theme\n * @param {string} cssClass - specifies the string class\n * @param {createElementParams} makeEle - specifies the params\n * @returns {void}\n */\nfunction replaceTheme(container, theme, cssClass, makeEle) {\n    if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(cssClass)) {\n        container.classList.add(cssClass);\n    }\n    var svgElement = container.querySelector('svg');\n    if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(svgElement)) {\n        var radius = theme === 'Bootstrap' ? parseFloat(svgElement.style.height) : parseFloat(svgElement.style.height) / 2;\n        var classNames = svgElement.getAttribute('class');\n        var svgClassList = classNames.split(/\\s/);\n        if (svgClassList.indexOf('e-spin-material') >= 0) {\n            var id = svgElement.getAttribute('id');\n            clearTimeout(globalTimeOut[\"\" + id].timeOut);\n        }\n        setTheme(theme, container, radius, makeEle);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHN5bmNmdXNpb24rZWoyLXBvcHVwc0AyOS4xLjM3L25vZGVfbW9kdWxlcy9Ac3luY2Z1c2lvbi9lajItcG9wdXBzL3NyYy9zcGlubmVyL3NwaW5uZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQTRGO0FBQzVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5Qiw0QkFBNEIsc0JBQXNCLFlBQVk7QUFDdkY7QUFDQTtBQUNBLFdBQVcsUUFBUTtBQUNuQixXQUFXLFlBQVk7QUFDdkIsV0FBVyxRQUFRO0FBQ25CLFdBQVcsUUFBUTtBQUNuQixhQUFhO0FBQ2I7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsMERBQTBEO0FBQ25GO0FBQ0E7QUFDQSxXQUFXLGFBQWE7QUFDeEIsV0FBVyxtQkFBbUI7QUFDOUIsYUFBYTtBQUNiO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsdUVBQWlCLGtEQUFrRCwrREFBYTtBQUN2RztBQUNBO0FBQ0EsU0FBUyx1RUFBaUI7QUFDMUIsZ0ZBQWdGLGlDQUFpQztBQUNqSDtBQUNBO0FBQ0EsU0FBUyx1RUFBaUIsb0JBQW9CLHVFQUFpQjtBQUMvRCx3QkFBd0IsdUVBQWlCO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLHVFQUFp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QUFDQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CLFdBQVcsYUFBYTtBQUN4QixXQUFXLFFBQVE7QUFDbkIsV0FBVyxRQUFRO0FBQ25CLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CLGFBQWEsUUFBUTtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsUUFBUTtBQUNuQixXQUFXLFFBQVE7QUFDbkIsYUFBYSxRQUFRO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsUUFBUTtBQUNuQixhQUFhLFFBQVE7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CLFdBQVcsUUFBUTtBQUNuQixXQUFXLFFBQVE7QUFDbkIsV0FBVyxRQUFRO0FBQ25CLGFBQWEsUUFBUTtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkIsV0FBVyxRQUFRO0FBQ25CLFdBQVcsUUFBUTtBQUNuQixXQUFXLFFBQVE7QUFDbkIsYUFBYSxRQUFRO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkIsV0FBVyxhQUFhO0FBQ3hCLFdBQVcsUUFBUTtBQUNuQixhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsUUFBUTtBQUNuQixXQUFXLFFBQVE7QUFDbkIsV0FBVyxRQUFRO0FBQ25CLFdBQVcsUUFBUTtBQUNuQixhQUFhLFFBQVE7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkIsV0FBVyxRQUFRO0FBQ25CLFdBQVcsUUFBUTtBQUNuQixXQUFXLFFBQVE7QUFDbkIsV0FBVyxRQUFRO0FBQ25CLGFBQWEsUUFBUTtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkIsV0FBVyxRQUFRO0FBQ25CLFdBQVcsUUFBUTtBQUNuQixhQUFhLFFBQVE7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLGFBQWE7QUFDeEIsYUFBYTtBQUNiO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLGFBQWE7QUFDeEIsV0FBVyxTQUFTO0FBQ3BCLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IseURBQU87QUFDdkIsZ0NBQWdDLCtCQUErQjtBQUMvRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9GQUFvRiwwQ0FBMEM7QUFDOUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsdUVBQWlCO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLCtEQUFTO0FBQ3JCO0FBQ0E7QUFDQSxZQUFZLCtEQUFTO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxhQUFhO0FBQ3hCLGFBQWE7QUFDYjtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0Isd0JBQXdCLGtCQUFrQjtBQUNoRTtBQUNBO0FBQ0EsV0FBVyxnQkFBZ0I7QUFDM0IsV0FBVyxxQkFBcUI7QUFDaEMsYUFBYTtBQUNiO0FBQ0E7QUFDTztBQUNQLHVCQUF1Qix1RUFBaUIsa0RBQWtELCtEQUFhO0FBQ3ZHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLDBCQUEwQjtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CLFdBQVcsYUFBYTtBQUN4QixXQUFXLFFBQVE7QUFDbkIsV0FBVyxRQUFRO0FBQ25CLFdBQVcscUJBQXFCO0FBQ2hDLGFBQWE7QUFDYjtBQUNBO0FBQ0EsUUFBUSx1RUFBaUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSx1RUFBaUI7QUFDOUI7QUFDQTtBQUNBLGFBQWEsdUVBQWlCO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsYUFBYTtBQUN4QixXQUFXLFFBQVE7QUFDbkIsV0FBVyxRQUFRO0FBQ25CLFdBQVcscUJBQXFCO0FBQ2hDLGFBQWE7QUFDYjtBQUNBO0FBQ0EsU0FBUyx1RUFBaUI7QUFDMUI7QUFDQTtBQUNBO0FBQ0EsU0FBUyx1RUFBaUI7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haV90cmF2ZWwvLi9ub2RlX21vZHVsZXMvLnBucG0vQHN5bmNmdXNpb24rZWoyLXBvcHVwc0AyOS4xLjM3L25vZGVfbW9kdWxlcy9Ac3luY2Z1c2lvbi9lajItcG9wdXBzL3NyYy9zcGlubmVyL3NwaW5uZXIuanM/MTJkYyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBpc051bGxPclVuZGVmaW5lZCwgY2xhc3NMaXN0LCBjcmVhdGVFbGVtZW50LCBCcm93c2VyIH0gZnJvbSAnQHN5bmNmdXNpb24vZWoyLWJhc2UnO1xudmFyIGdsb2JhbFRpbWVPdXQgPSB7fTtcbnZhciBERUZUX01BVF9XSURUSCA9IDMwO1xudmFyIERFRlRfTUFUM19XSURUSCA9IDMwO1xudmFyIERFRlRfRkFCX1dJRFRIID0gMzA7XG52YXIgREVGVF9GTFVFTlRfV0lEVEggPSAzMDtcbnZhciBERUZUX0ZMVUVOVDJfV0lEVEggPSAzMDtcbnZhciBERUZUX0JPT1RfV0lEVEggPSAzMDtcbnZhciBERUZUX0JPT1Q0X1dJRFRIID0gMzY7XG52YXIgREVGVF9CT09UNV9XSURUSCA9IDM2O1xudmFyIENMU19TSE9XU1BJTiA9ICdlLXNwaW4tc2hvdyc7XG52YXIgQ0xTX0hJREVTUElOID0gJ2Utc3Bpbi1oaWRlJztcbnZhciBDTFNfTUFURVJJQUxTUElOID0gJ2Utc3Bpbi1tYXRlcmlhbCc7XG52YXIgQ0xTX01BVEVSSUFMM1NQSU4gPSAnZS1zcGluLW1hdGVyaWFsMyc7XG52YXIgQ0xTX1RBSUxXSU5EM1NQSU4gPSAnZS1zcGluLXRhaWx3aW5kMyc7XG52YXIgQ0xTX0ZBQlJJQ1NQSU4gPSAnZS1zcGluLWZhYnJpYyc7XG52YXIgQ0xTX0ZMVUVOVFNQSU4gPSAnZS1zcGluLWZsdWVudCc7XG52YXIgQ0xTX0ZMVUVOVDJTUElOID0gJ2Utc3Bpbi1mbHVlbnQyJztcbnZhciBDTFNfVEFJTFdJTkRTUElOID0gJ2Utc3Bpbi10YWlsd2luZCc7XG52YXIgQ0xTX0JPT1RTUElOID0gJ2Utc3Bpbi1ib290c3RyYXAnO1xudmFyIENMU19CT09UNFNQSU4gPSAnZS1zcGluLWJvb3RzdHJhcDQnO1xudmFyIENMU19CT09UNVNQSU4gPSAnZS1zcGluLWJvb3RzdHJhcDUnO1xudmFyIENMU19ISUdIQ09OVFJBU1RTUElOID0gJ2Utc3Bpbi1oaWdoLWNvbnRyYXN0JztcbnZhciBDTFNfU1BJTldSQVAgPSAnZS1zcGlubmVyLXBhbmUnO1xudmFyIENMU19TUElOSU5XUkFQID0gJ2Utc3Bpbm5lci1pbm5lcic7XG52YXIgQ0xTX1NQSU5DSVJDTEUgPSAnZS1wYXRoLWNpcmNsZSc7XG52YXIgQ0xTX1NQSU5BUkMgPSAnZS1wYXRoLWFyYyc7XG52YXIgQ0xTX1NQSU5MQUJFTCA9ICdlLXNwaW4tbGFiZWwnO1xudmFyIENMU19TUElOVEVNUExBVEUgPSAnZS1zcGluLXRlbXBsYXRlJztcbnZhciBzcGluVGVtcGxhdGUgPSBudWxsO1xudmFyIHNwaW5DU1NDbGFzcyA9IG51bGw7XG4vKipcbiAqIEZ1bmN0aW9uIHRvIGNoYW5nZSB0aGUgU3Bpbm5lcnMgaW4gYSBwYWdlIGdsb2JhbGx5IGZyb20gYXBwbGljYXRpb24gZW5kLlxuICogYGBgXG4gKiBFLmcgOiBibGF6b3JTcGlubmVyKHsgYWN0aW9uOiBcIkNyZWF0ZVwiLCBvcHRpb25zOiB7dGFyZ2V0OiB0YXJnZXRFbGVtZW50fSwgdHlwZTogXCJcIiB9KTtcbiAqIGBgYFxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBhY3Rpb24gLSBzcGVjaWZpZXMgdGhlIHN0cmluZ1xuICogQHBhcmFtIHtDcmVhdGVBcmdzfSBvcHRpb25zIC0gc3BlY2lmaWVzIHRoZSBhcmdzXG4gKiBAcGFyYW0ge3N0cmluZ30gdGFyZ2V0IC0gc3BlY2lmaWVzIHRoZSB0YXJnZXRcbiAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIC0gc3BlY2lmZXMgdGhlIHR5cGVcbiAqIEByZXR1cm5zIHt2b2lkfVxuICogQHByaXZhdGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIFNwaW5uZXIoYWN0aW9uLCBvcHRpb25zLCB0YXJnZXQsIHR5cGUpIHtcbiAgICBzd2l0Y2ggKGFjdGlvbikge1xuICAgICAgICBjYXNlICdDcmVhdGUnOlxuICAgICAgICAgICAgLyogZXNsaW50LWRpc2FibGUgKi9cbiAgICAgICAgICAgIHZhciBlbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihvcHRpb25zLnRhcmdldCk7XG4gICAgICAgICAgICB2YXIgYXJncyA9IHtcbiAgICAgICAgICAgICAgICB0eXBlOiB0eXBlLCB0YXJnZXQ6IGVsZW1lbnQsIGNzc0NsYXNzOiBvcHRpb25zLmNzc0NsYXNzLFxuICAgICAgICAgICAgICAgIGxhYmVsOiBvcHRpb25zLmxhYmVsLCB3aWR0aDogb3B0aW9ucy53aWR0aFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIC8qIGVzbGludC1lbmFibGUgKi9cbiAgICAgICAgICAgIGNyZWF0ZVNwaW5uZXIoYXJncyk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnU2hvdyc6XG4gICAgICAgICAgICBzaG93U3Bpbm5lcihkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRhcmdldCkpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ0hpZGUnOlxuICAgICAgICAgICAgaGlkZVNwaW5uZXIoZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0YXJnZXQpKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdTZXQnOiB7XG4gICAgICAgICAgICB2YXIgc2V0QXJncyA9IHsgY3NzQ2xhc3M6IG9wdGlvbnMuY3NzQ2xhc3MsIHR5cGU6IHR5cGUgfTtcbiAgICAgICAgICAgIHNldFNwaW5uZXIoc2V0QXJncyk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbn1cbi8qKlxuICogQ3JlYXRlIGEgc3Bpbm5lciBmb3IgdGhlIHNwZWNpZmllZCB0YXJnZXQgZWxlbWVudC5cbiAqIGBgYFxuICogRS5nIDogY3JlYXRlU3Bpbm5lcih7IHRhcmdldDogdGFyZ2V0RWxlbWVudCwgd2lkdGg6ICczNHB4JywgbGFiZWw6ICdMb2FkaW5nLi4nIH0pO1xuICogYGBgXG4gKlxuICogQHBhcmFtIHtTcGlubmVyQXJnc30gYXJncyAtIHNwZWNpZmllcyB0aGUgYXJnc1xuICogQHBhcmFtIHtDcmVhdGVFbGVtZW50QXJnc30gaW50ZXJuYWxDcmVhdGVFbGVtZW50IC0gc3BlY2lmaXMgdGhlIGVsZW1lbnQgYXJnc1xuICogQHJldHVybnMge3ZvaWR9XG4gKiBAcHJpdmF0ZVxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlU3Bpbm5lcihhcmdzLCBpbnRlcm5hbENyZWF0ZUVsZW1lbnQpIHtcbiAgICB2YXIgX2E7XG4gICAgaWYgKCFhcmdzLnRhcmdldCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciByYWRpdXM7XG4gICAgdmFyIG1ha2VFbGVtZW50ID0gIWlzTnVsbE9yVW5kZWZpbmVkKGludGVybmFsQ3JlYXRlRWxlbWVudCkgPyBpbnRlcm5hbENyZWF0ZUVsZW1lbnQgOiBjcmVhdGVFbGVtZW50O1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuICAgIHZhciBjb250YWluZXIgPSBjcmVhdGVfc3Bpbm5lcl9jb250YWluZXIoYXJncy50YXJnZXQsIG1ha2VFbGVtZW50KTtcbiAgICBpZiAoIWlzTnVsbE9yVW5kZWZpbmVkKGFyZ3MuY3NzQ2xhc3MpKSB7XG4gICAgICAgIHZhciBjbGFzc05hbWVzID0gYXJncy5jc3NDbGFzcy5zcGxpdCgnICcpLmZpbHRlcihmdW5jdGlvbiAoY2xhc3NOYW1lKSB7IHJldHVybiBjbGFzc05hbWUudHJpbSgpICE9PSAnJzsgfSk7XG4gICAgICAgIChfYSA9IGNvbnRhaW5lci53cmFwLmNsYXNzTGlzdCkuYWRkLmFwcGx5KF9hLCBjbGFzc05hbWVzKTtcbiAgICB9XG4gICAgaWYgKCFpc051bGxPclVuZGVmaW5lZChhcmdzLnRlbXBsYXRlKSB8fCAhaXNOdWxsT3JVbmRlZmluZWQoc3BpblRlbXBsYXRlKSkge1xuICAgICAgICB2YXIgdGVtcGxhdGUgPSAhaXNOdWxsT3JVbmRlZmluZWQoYXJncy50ZW1wbGF0ZSkgPyBhcmdzLnRlbXBsYXRlIDogc3BpblRlbXBsYXRlO1xuICAgICAgICBjb250YWluZXIud3JhcC5jbGFzc0xpc3QuYWRkKENMU19TUElOVEVNUExBVEUpO1xuICAgICAgICByZXBsYWNlQ29udGVudChjb250YWluZXIud3JhcCwgdGVtcGxhdGUsIHNwaW5DU1NDbGFzcyk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB2YXIgdGhlbWUgPSAhaXNOdWxsT3JVbmRlZmluZWQoYXJncy50eXBlKSA/IGFyZ3MudHlwZSA6IGdldFRoZW1lKGNvbnRhaW5lci53cmFwKTtcbiAgICAgICAgdmFyIHdpZHRoID0gIWlzTnVsbE9yVW5kZWZpbmVkKGFyZ3Mud2lkdGgpID8gYXJncy53aWR0aCA6IHVuZGVmaW5lZDtcbiAgICAgICAgcmFkaXVzID0gY2FsY3VsYXRlUmFkaXVzKHdpZHRoLCB0aGVtZSk7XG4gICAgICAgIHNldFRoZW1lKHRoZW1lLCBjb250YWluZXIud3JhcCwgcmFkaXVzLCBtYWtlRWxlbWVudCk7XG4gICAgICAgIGlmICghaXNOdWxsT3JVbmRlZmluZWQoYXJncy5sYWJlbCkpIHtcbiAgICAgICAgICAgIGNyZWF0ZUxhYmVsKGNvbnRhaW5lci5pbm5lcl93cmFwLCBhcmdzLmxhYmVsLCBtYWtlRWxlbWVudCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29udGFpbmVyLndyYXAuY2xhc3NMaXN0LmFkZChDTFNfSElERVNQSU4pO1xuICAgIGNvbnRhaW5lciA9IG51bGw7XG59XG4vKipcbiAqXG4gKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBjb250YWluZXIgLSBzcGVjaWZpZXMgdGhlIGVsZW1lbnRcbiAqIEBwYXJhbSB7c3RyaW5nfSBsYWJlbCAtIHNwZWNpZmllcyB0aGUgc3RyaW5nXG4gKiBAcGFyYW0ge2NyZWF0ZUVsZW1lbnRQYXJhbXN9IG1ha2VFbGVtZW50IC0gc3BlY2lmaWVzIHRoZSBlbGVtZW50XG4gKiBAcmV0dXJucyB7SFRNTEVsZW1lbnR9IC0gcmV0dXJucyB0aGUgZWxlbWVudFxuICovXG5mdW5jdGlvbiBjcmVhdGVMYWJlbChjb250YWluZXIsIGxhYmVsLCBtYWtlRWxlbWVudCkge1xuICAgIHZhciBsYWJlbEVsZSA9IG1ha2VFbGVtZW50KCdkaXYnLCB7fSk7XG4gICAgbGFiZWxFbGUuY2xhc3NMaXN0LmFkZChDTFNfU1BJTkxBQkVMKTtcbiAgICBsYWJlbEVsZS5pbm5lckhUTUwgPSBsYWJlbDtcbiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQobGFiZWxFbGUpO1xuICAgIHJldHVybiBsYWJlbEVsZTtcbn1cbi8qKlxuICpcbiAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGNvbnRhaW5lciAtIHNwZWNpZmllcyB0aGUgZWxlbWVudFxuICogQHBhcmFtIHtudW1iZXJ9IHJhZGl1cyAtIHNwZWNpZmllcyB0aGUgcmFkaXVzXG4gKiBAcGFyYW0ge2NyZWF0ZUVsZW1lbnRQYXJhbXN9IG1ha2VFbGVtZW50IC0gc3BlY2lmaWVzIHRoZSBlbGVtZW50XG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuZnVuY3Rpb24gY3JlYXRlTWF0ZXJpYWxTcGlubmVyKGNvbnRhaW5lciwgcmFkaXVzLCBtYWtlRWxlbWVudCkge1xuICAgIHZhciB1bmlxdWVJRCA9IHJhbmRvbV9nZW5lcmF0b3IoKTtcbiAgICBnbG9iYWxUaW1lT3V0W1wiXCIgKyB1bmlxdWVJRF0gPSB7IHRpbWVPdXQ6IDAsIHR5cGU6ICdNYXRlcmlhbCcsIHJhZGl1czogcmFkaXVzIH07XG4gICAgY3JlYXRlX21hdGVyaWFsX2VsZW1lbnQoY29udGFpbmVyLCB1bmlxdWVJRCwgbWFrZUVsZW1lbnQsIENMU19NQVRFUklBTFNQSU4pO1xuICAgIG1hdF9jYWxjdWxhdGVfYXR0cmlidXRlcyhyYWRpdXMsIGNvbnRhaW5lciwgJ01hdGVyaWFsJywgQ0xTX01BVEVSSUFMU1BJTik7XG59XG4vKipcbiAqXG4gKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBjb250YWluZXIgLSBzcGVjaWZpZXMgdGhlIGVsZW1lbnRcbiAqIEBwYXJhbSB7bnVtYmVyfSByYWRpdXMgLSBzcGVjaWZpZXMgdGhlIHJhZGl1c1xuICogQHBhcmFtIHtjcmVhdGVFbGVtZW50UGFyYW1zfSBtYWtlRWxlbWVudCAtIHNwZWNpZmllcyB0aGUgZWxlbWVudFxuICogQHJldHVybnMge3ZvaWR9XG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZVRhaWx3aW5kM1NwaW5uZXIoY29udGFpbmVyLCByYWRpdXMsIG1ha2VFbGVtZW50KSB7XG4gICAgdmFyIHVuaXF1ZUlEID0gcmFuZG9tX2dlbmVyYXRvcigpO1xuICAgIGdsb2JhbFRpbWVPdXRbXCJcIiArIHVuaXF1ZUlEXSA9IHsgdGltZU91dDogMCwgdHlwZTogJ1RhaWx3aW5kMycsIHJhZGl1czogcmFkaXVzIH07XG4gICAgY3JlYXRlX21hdGVyaWFsX2VsZW1lbnQoY29udGFpbmVyLCB1bmlxdWVJRCwgbWFrZUVsZW1lbnQsIENMU19UQUlMV0lORDNTUElOKTtcbiAgICBtYXRfY2FsY3VsYXRlX2F0dHJpYnV0ZXMocmFkaXVzLCBjb250YWluZXIsICdUYWlsd2luZDMnLCBDTFNfVEFJTFdJTkQzU1BJTik7XG59XG4vKipcbiAqXG4gKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBjb250YWluZXIgLSBzcGVjaWZpZXMgdGhlIGVsZW1lbnRcbiAqIEBwYXJhbSB7bnVtYmVyfSByYWRpdXMgLSBzcGVjaWZpZXMgdGhlIHJhZGl1c1xuICogQHBhcmFtIHtjcmVhdGVFbGVtZW50UGFyYW1zfSBtYWtlRWxlbWVudCAtIHNwZWNpZmllcyB0aGUgZWxlbWVudFxuICogQHJldHVybnMge3ZvaWR9XG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZU1hdGVyaWFsM1NwaW5uZXIoY29udGFpbmVyLCByYWRpdXMsIG1ha2VFbGVtZW50KSB7XG4gICAgdmFyIHVuaXF1ZUlEID0gcmFuZG9tX2dlbmVyYXRvcigpO1xuICAgIGdsb2JhbFRpbWVPdXRbXCJcIiArIHVuaXF1ZUlEXSA9IHsgdGltZU91dDogMCwgdHlwZTogJ01hdGVyaWFsMycsIHJhZGl1czogcmFkaXVzIH07XG4gICAgY3JlYXRlX21hdGVyaWFsX2VsZW1lbnQoY29udGFpbmVyLCB1bmlxdWVJRCwgbWFrZUVsZW1lbnQsIENMU19NQVRFUklBTDNTUElOKTtcbiAgICBtYXRfY2FsY3VsYXRlX2F0dHJpYnV0ZXMocmFkaXVzLCBjb250YWluZXIsICdNYXRlcmlhbDMnLCBDTFNfTUFURVJJQUwzU1BJTik7XG59XG4vKipcbiAqXG4gKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBjb250YWluZXIgLSBzcGVjaWZpZXMgdGhlIGVsZW1lbnRcbiAqIEBwYXJhbSB7bnVtYmVyfSByYWRpdXMgLSBzcGVjaWZpZXMgdGhlIHJhZGl1c1xuICogQHBhcmFtIHtjcmVhdGVFbGVtZW50UGFyYW1zfSBtYWtlRWxlbWVudCAtIHNwZWNpZmllcyB0aGUgZWxlbWVudFxuICogQHJldHVybnMge3ZvaWR9XG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZUJvb3RzdHJhcDRTcGlubmVyKGNvbnRhaW5lciwgcmFkaXVzLCBtYWtlRWxlbWVudCkge1xuICAgIHZhciB1bmlxdWVJRCA9IHJhbmRvbV9nZW5lcmF0b3IoKTtcbiAgICBnbG9iYWxUaW1lT3V0W1wiXCIgKyB1bmlxdWVJRF0gPSB7IHRpbWVPdXQ6IDAsIHR5cGU6ICdCb290c3RyYXA0JywgcmFkaXVzOiByYWRpdXMgfTtcbiAgICBjcmVhdGVfbWF0ZXJpYWxfZWxlbWVudChjb250YWluZXIsIHVuaXF1ZUlELCBtYWtlRWxlbWVudCwgQ0xTX0JPT1Q0U1BJTik7XG4gICAgbWF0X2NhbGN1bGF0ZV9hdHRyaWJ1dGVzKHJhZGl1cywgY29udGFpbmVyLCAnQm9vdHN0cmFwNCcsIENMU19CT09UNFNQSU4pO1xufVxuLyoqXG4gKlxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gY29udGFpbmVyIC0gc3BlY2lmaWVzIHRoZSBlbGVtZW50XG4gKiBAcGFyYW0ge251bWJlcn0gcmFkaXVzIC0gc3BlY2lmaWVzIHRoZSByYWRpdXNcbiAqIEBwYXJhbSB7Y3JlYXRlRWxlbWVudFBhcmFtc30gbWFrZUVsZW1lbnQgLSBzcGVjaWZpZXMgdGhlIGVsZW1lbnRcbiAqIEByZXR1cm5zIHt2b2lkfVxuICovXG5mdW5jdGlvbiBjcmVhdGVCb290c3RyYXA1U3Bpbm5lcihjb250YWluZXIsIHJhZGl1cywgbWFrZUVsZW1lbnQpIHtcbiAgICB2YXIgdW5pcXVlSUQgPSByYW5kb21fZ2VuZXJhdG9yKCk7XG4gICAgZ2xvYmFsVGltZU91dFtcIlwiICsgdW5pcXVlSURdID0geyB0aW1lT3V0OiAwLCB0eXBlOiAnQm9vdHN0cmFwNScsIHJhZGl1czogcmFkaXVzIH07XG4gICAgY3JlYXRlX21hdGVyaWFsX2VsZW1lbnQoY29udGFpbmVyLCB1bmlxdWVJRCwgbWFrZUVsZW1lbnQsIENMU19CT09UNVNQSU4pO1xuICAgIG1hdF9jYWxjdWxhdGVfYXR0cmlidXRlcyhyYWRpdXMsIGNvbnRhaW5lciwgJ0Jvb3RzdHJhcDUnLCBDTFNfQk9PVDVTUElOKTtcbn1cbi8qKlxuICpcbiAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGNvbnRhaW5lciAtIHNwZWNpZmllcyB0aGUgZWxlbWVudFxuICogQHBhcmFtIHtzdHJpbmd9IHVuaXF1ZUlEIC0gc3BlY2lmaWVzIHRoZSBpZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSByYWRpdXMgLSBzcGVjaWZpZXMgdGhlIHJhZGl1c1xuICogQHJldHVybnMge3ZvaWR9XG4gKi9cbmZ1bmN0aW9uIHN0YXJ0TWF0QW5pbWF0ZShjb250YWluZXIsIHVuaXF1ZUlELCByYWRpdXMpIHtcbiAgICB2YXIgZ2xvYmFsT2JqZWN0ID0ge307XG4gICAgdmFyIHRpbWVPdXRWYXIgPSAwO1xuICAgIGdsb2JhbFRpbWVPdXRbXCJcIiArIHVuaXF1ZUlEXS50aW1lT3V0ID0gMDtcbiAgICBnbG9iYWxPYmplY3RbXCJcIiArIHVuaXF1ZUlEXSA9IGdsb2JhbFZhcmlhYmxlcyh1bmlxdWVJRCwgcmFkaXVzLCAwLCAwKTtcbiAgICB2YXIgc3Bpbm5lckluZm8gPSB7IHVuaXF1ZUlEOiB1bmlxdWVJRCwgY29udGFpbmVyOiBjb250YWluZXIsIGdsb2JhbEluZm86IGdsb2JhbE9iamVjdCwgdGltZU91dFZhcjogdGltZU91dFZhciB9O1xuICAgIGFuaW1hdGVNYXRlcmlhbChzcGlubmVySW5mbyk7XG59XG4vKipcbiAqXG4gKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBjb250YWluZXIgLSBzcGVjaWZpZXMgdGhlIGVsZW1lbnRcbiAqIEBwYXJhbSB7bnVtYmVyfSByYWRpdXMgLSBzcGVjaWZpZXMgdGhlIHJhZGl1c1xuICogQHBhcmFtIHtjcmVhdGVFbGVtZW50UGFyYW1zfSBtYWtlRWxlbWVudCAtIHNwZWNpZmllcyB0aGUgZWxlbWVudFxuICogQHJldHVybnMge3ZvaWR9XG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZUZhYnJpY1NwaW5uZXIoY29udGFpbmVyLCByYWRpdXMsIG1ha2VFbGVtZW50KSB7XG4gICAgdmFyIHVuaXF1ZUlEID0gcmFuZG9tX2dlbmVyYXRvcigpO1xuICAgIGdsb2JhbFRpbWVPdXRbXCJcIiArIHVuaXF1ZUlEXSA9IHsgdGltZU91dDogMCwgdHlwZTogJ0ZhYnJpYycsIHJhZGl1czogcmFkaXVzIH07XG4gICAgY3JlYXRlX2ZhYnJpY19lbGVtZW50KGNvbnRhaW5lciwgdW5pcXVlSUQsIENMU19GQUJSSUNTUElOLCBtYWtlRWxlbWVudCk7XG4gICAgZmJfY2FsY3VsYXRlX2F0dHJpYnV0ZXMocmFkaXVzLCBjb250YWluZXIsIENMU19GQUJSSUNTUElOKTtcbn1cbi8qKlxuICpcbiAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGNvbnRhaW5lciAtIHNwZWNpZmllcyB0aGUgZWxlbWVudFxuICogQHBhcmFtIHtudW1iZXJ9IHJhZGl1cyAtIHNwZWNpZmllcyB0aGUgcmFkaXVzXG4gKiBAcGFyYW0ge2NyZWF0ZUVsZW1lbnRQYXJhbXN9IG1ha2VFbGVtZW50IC0gc3BlY2lmaWVzIHRoZSBlbGVtZW50XG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuZnVuY3Rpb24gY3JlYXRlRmx1ZW50U3Bpbm5lcihjb250YWluZXIsIHJhZGl1cywgbWFrZUVsZW1lbnQpIHtcbiAgICB2YXIgdW5pcXVlSUQgPSByYW5kb21fZ2VuZXJhdG9yKCk7XG4gICAgZ2xvYmFsVGltZU91dFtcIlwiICsgdW5pcXVlSURdID0geyB0aW1lT3V0OiAwLCB0eXBlOiAnRmx1ZW50JywgcmFkaXVzOiByYWRpdXMgfTtcbiAgICBjcmVhdGVfZmFicmljX2VsZW1lbnQoY29udGFpbmVyLCB1bmlxdWVJRCwgQ0xTX0ZMVUVOVFNQSU4sIG1ha2VFbGVtZW50KTtcbiAgICBmYl9jYWxjdWxhdGVfYXR0cmlidXRlcyhyYWRpdXMsIGNvbnRhaW5lciwgQ0xTX0ZMVUVOVFNQSU4pO1xufVxuLyoqXG4gKlxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gY29udGFpbmVyIC0gc3BlY2lmaWVzIHRoZSBlbGVtZW50XG4gKiBAcGFyYW0ge251bWJlcn0gcmFkaXVzIC0gc3BlY2lmaWVzIHRoZSByYWRpdXNcbiAqIEBwYXJhbSB7Y3JlYXRlRWxlbWVudFBhcmFtc30gbWFrZUVsZW1lbnQgLSBzcGVjaWZpZXMgdGhlIGVsZW1lbnRcbiAqIEByZXR1cm5zIHt2b2lkfVxuICovXG5mdW5jdGlvbiBjcmVhdGVGbHVlbnQyU3Bpbm5lcihjb250YWluZXIsIHJhZGl1cywgbWFrZUVsZW1lbnQpIHtcbiAgICB2YXIgdW5pcXVlSUQgPSByYW5kb21fZ2VuZXJhdG9yKCk7XG4gICAgZ2xvYmFsVGltZU91dFtcIlwiICsgdW5pcXVlSURdID0geyB0aW1lT3V0OiAwLCB0eXBlOiAnRmx1ZW50MicsIHJhZGl1czogcmFkaXVzIH07XG4gICAgY3JlYXRlX2ZhYnJpY19lbGVtZW50KGNvbnRhaW5lciwgdW5pcXVlSUQsIENMU19GTFVFTlQyU1BJTiwgbWFrZUVsZW1lbnQpO1xuICAgIGZiX2NhbGN1bGF0ZV9hdHRyaWJ1dGVzKHJhZGl1cywgY29udGFpbmVyLCBDTFNfRkxVRU5UMlNQSU4pO1xufVxuLyoqXG4gKlxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gY29udGFpbmVyIC0gc3BlY2lmaWVzIHRoZSBlbGVtZW50XG4gKiBAcGFyYW0ge251bWJlcn0gcmFkaXVzIC0gc3BlY2lmaWVzIHRoZSByYWRpdXNcbiAqIEBwYXJhbSB7Y3JlYXRlRWxlbWVudFBhcmFtc30gbWFrZUVsZW1lbnQgLSBzcGVjaWZpZXMgdGhlIGVsZW1lbnRcbiAqIEByZXR1cm5zIHt2b2lkfVxuICovXG5mdW5jdGlvbiBjcmVhdGVUYWlsd2luZFNwaW5uZXIoY29udGFpbmVyLCByYWRpdXMsIG1ha2VFbGVtZW50KSB7XG4gICAgdmFyIHVuaXF1ZUlEID0gcmFuZG9tX2dlbmVyYXRvcigpO1xuICAgIGdsb2JhbFRpbWVPdXRbXCJcIiArIHVuaXF1ZUlEXSA9IHsgdGltZU91dDogMCwgdHlwZTogJ1RhaWx3aW5kJywgcmFkaXVzOiByYWRpdXMgfTtcbiAgICBjcmVhdGVfZmFicmljX2VsZW1lbnQoY29udGFpbmVyLCB1bmlxdWVJRCwgQ0xTX1RBSUxXSU5EU1BJTiwgbWFrZUVsZW1lbnQpO1xuICAgIGZiX2NhbGN1bGF0ZV9hdHRyaWJ1dGVzKHJhZGl1cywgY29udGFpbmVyLCBDTFNfVEFJTFdJTkRTUElOKTtcbn1cbi8qKlxuICpcbiAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGNvbnRhaW5lciAtIHNwZWNpZmllcyB0aGUgZWxlbWVudFxuICogQHBhcmFtIHtudW1iZXJ9IHJhZGl1cyAtIHNwZWNpZmllcyB0aGUgcmFkaXVzXG4gKiBAcGFyYW0ge2NyZWF0ZUVsZW1lbnRQYXJhbXN9IG1ha2VFbGVtZW50IC0gc3BlY2lmaWVzIHRoZSBlbGVtZW50XG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuZnVuY3Rpb24gY3JlYXRlSGlnaENvbnRyYXN0U3Bpbm5lcihjb250YWluZXIsIHJhZGl1cywgbWFrZUVsZW1lbnQpIHtcbiAgICB2YXIgdW5pcXVlSUQgPSByYW5kb21fZ2VuZXJhdG9yKCk7XG4gICAgZ2xvYmFsVGltZU91dFtcIlwiICsgdW5pcXVlSURdID0geyB0aW1lT3V0OiAwLCB0eXBlOiAnSGlnaENvbnRyYXN0JywgcmFkaXVzOiByYWRpdXMgfTtcbiAgICBjcmVhdGVfZmFicmljX2VsZW1lbnQoY29udGFpbmVyLCB1bmlxdWVJRCwgQ0xTX0hJR0hDT05UUkFTVFNQSU4sIG1ha2VFbGVtZW50KTtcbiAgICBmYl9jYWxjdWxhdGVfYXR0cmlidXRlcyhyYWRpdXMsIGNvbnRhaW5lciwgQ0xTX0hJR0hDT05UUkFTVFNQSU4pO1xufVxuLyoqXG4gKlxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gY29udGFpbmVyIC0gc3BlY2lmaWVzIHRoZSBlbGVtZW50XG4gKiBAcmV0dXJucyB7c3RyaW5nfSAtIHJldHVybnMgdGhlIHN0cmluZ1xuICovXG5mdW5jdGlvbiBnZXRUaGVtZShjb250YWluZXIpIHtcbiAgICB2YXIgdGhlbWUgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShjb250YWluZXIsICc6YWZ0ZXInKS5nZXRQcm9wZXJ0eVZhbHVlKCdjb250ZW50Jyk7XG4gICAgcmV0dXJuIHRoZW1lLnJlcGxhY2UoL1snXCJdKy9nLCAnJyk7XG59XG4vKipcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gdGhlbWUgLSBzcGVjaWZpZXMgdGhlIHRoZW1lXG4gKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBjb250YWluZXIgLSBzcGVjaWZpZXMgdGhlIGVsZW1lbnRcbiAqIEBwYXJhbSB7bnVtYmVyfSByYWRpdXMgLSBzcGVjaWZpZXMgdGhlIHJhZGl1c1xuICogQHBhcmFtIHtjcmVhdGVFbGVtZW50UGFyYW1zfSBtYWtlRWxlbWVudCAtIHNwZWNpZmllcyB0aGUgZWxlbWVudFxuICogQHJldHVybnMge3ZvaWR9XG4gKi9cbmZ1bmN0aW9uIHNldFRoZW1lKHRoZW1lLCBjb250YWluZXIsIHJhZGl1cywgbWFrZUVsZW1lbnQpIHtcbiAgICB2YXIgaW5uZXJDb250YWluZXIgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLicgKyBDTFNfU1BJTklOV1JBUCk7XG4gICAgdmFyIHN2ZyA9IGlubmVyQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ3N2ZycpO1xuICAgIGlmICghaXNOdWxsT3JVbmRlZmluZWQoc3ZnKSkge1xuICAgICAgICBpbm5lckNvbnRhaW5lci5yZW1vdmVDaGlsZChzdmcpO1xuICAgIH1cbiAgICBzd2l0Y2ggKHRoZW1lKSB7XG4gICAgICAgIGNhc2UgJ01hdGVyaWFsJzpcbiAgICAgICAgICAgIGNyZWF0ZU1hdGVyaWFsU3Bpbm5lcihpbm5lckNvbnRhaW5lciwgcmFkaXVzLCBtYWtlRWxlbWVudCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnTWF0ZXJpYWwzJzpcbiAgICAgICAgICAgIGNyZWF0ZU1hdGVyaWFsM1NwaW5uZXIoaW5uZXJDb250YWluZXIsIHJhZGl1cywgbWFrZUVsZW1lbnQpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ0ZhYnJpYyc6XG4gICAgICAgICAgICBjcmVhdGVGYWJyaWNTcGlubmVyKGlubmVyQ29udGFpbmVyLCByYWRpdXMsIG1ha2VFbGVtZW50KTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdGbHVlbnQnOlxuICAgICAgICAgICAgY3JlYXRlRmx1ZW50U3Bpbm5lcihpbm5lckNvbnRhaW5lciwgcmFkaXVzLCBtYWtlRWxlbWVudCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnRmx1ZW50Mic6XG4gICAgICAgICAgICBjcmVhdGVGbHVlbnQyU3Bpbm5lcihpbm5lckNvbnRhaW5lciwgcmFkaXVzLCBtYWtlRWxlbWVudCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnQm9vdHN0cmFwJzpcbiAgICAgICAgICAgIGNyZWF0ZUJvb3RzdHJhcFNwaW5uZXIoaW5uZXJDb250YWluZXIsIHJhZGl1cywgbWFrZUVsZW1lbnQpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ0hpZ2hDb250cmFzdCc6XG4gICAgICAgICAgICBjcmVhdGVIaWdoQ29udHJhc3RTcGlubmVyKGlubmVyQ29udGFpbmVyLCByYWRpdXMsIG1ha2VFbGVtZW50KTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdCb290c3RyYXA0JzpcbiAgICAgICAgICAgIGNyZWF0ZUJvb3RzdHJhcDRTcGlubmVyKGlubmVyQ29udGFpbmVyLCByYWRpdXMsIG1ha2VFbGVtZW50KTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdCb290c3RyYXA1JzpcbiAgICAgICAgICAgIGNyZWF0ZUJvb3RzdHJhcDVTcGlubmVyKGlubmVyQ29udGFpbmVyLCByYWRpdXMsIG1ha2VFbGVtZW50KTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdUYWlsd2luZCc6XG4gICAgICAgIGNhc2UgJ1RhaWx3aW5kLWRhcmsnOlxuICAgICAgICAgICAgY3JlYXRlVGFpbHdpbmRTcGlubmVyKGlubmVyQ29udGFpbmVyLCByYWRpdXMsIG1ha2VFbGVtZW50KTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdUYWlsd2luZDMnOlxuICAgICAgICAgICAgY3JlYXRlVGFpbHdpbmQzU3Bpbm5lcihpbm5lckNvbnRhaW5lciwgcmFkaXVzLCBtYWtlRWxlbWVudCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICB9XG59XG4vKipcbiAqXG4gKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBpbm5lckNvbnRhaW5lciAtIHNwZWNpZmllcyB0aGUgZWxlbWVudFxuICogQHBhcmFtIHtudW1iZXJ9IHJhZGl1cyAtIHNwZWNpZmllcyB0aGUgcmFkaXVzXG4gKiBAcGFyYW0ge2NyZWF0ZUVsZW1lbnRQYXJhbXN9IG1ha2VFbGVtZW50IC0gc3BlY2lmaWVzIHRoZSBlbGVtZW50XG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuZnVuY3Rpb24gY3JlYXRlQm9vdHN0cmFwU3Bpbm5lcihpbm5lckNvbnRhaW5lciwgcmFkaXVzLCBtYWtlRWxlbWVudCkge1xuICAgIHZhciB1bmlxdWVJRCA9IHJhbmRvbV9nZW5lcmF0b3IoKTtcbiAgICBnbG9iYWxUaW1lT3V0W1wiXCIgKyB1bmlxdWVJRF0gPSB7IHRpbWVPdXQ6IDAsIHR5cGU6ICdCb290c3RyYXAnLCByYWRpdXM6IHJhZGl1cyB9O1xuICAgIGNyZWF0ZV9ib290c3RyYXBfZWxlbWVudChpbm5lckNvbnRhaW5lciwgdW5pcXVlSUQsIG1ha2VFbGVtZW50KTtcbiAgICBib290X2NhbGN1bGF0ZV9hdHRyaWJ1dGVzKGlubmVyQ29udGFpbmVyLCByYWRpdXMpO1xufVxuLyoqXG4gKlxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gaW5uZXJDb250YWluZXIgLSBzcGVjaWZpZXMgdGhlIGVsZW1lbnRcbiAqIEBwYXJhbSB7c3RyaW5nfSB1bmlxdWVJRCAtIHNwZWNpZmllcyB0aGUgaWRcbiAqIEBwYXJhbSB7Y3JlYXRlRWxlbWVudFBhcmFtc30gbWFrZUVsZW1lbnQgLSBzcGVjaWZpZXMgdGhlIGVsZW1lbnRcbiAqIEByZXR1cm5zIHt2b2lkfVxuICovXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcbmZ1bmN0aW9uIGNyZWF0ZV9ib290c3RyYXBfZWxlbWVudChpbm5lckNvbnRhaW5lciwgdW5pcXVlSUQsIG1ha2VFbGVtZW50KSB7XG4gICAgdmFyIHN2Z0Jvb3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgJ3N2ZycpO1xuICAgIHZhciB2aWV3Qm94VmFsdWUgPSA2NDtcbiAgICB2YXIgdHJhbnMgPSAzMjtcbiAgICB2YXIgZGVmYXVsdFJhZGl1cyA9IDI7XG4gICAgc3ZnQm9vdC5zZXRBdHRyaWJ1dGUoJ2lkJywgdW5pcXVlSUQpO1xuICAgIHN2Z0Jvb3Quc2V0QXR0cmlidXRlKCdjbGFzcycsIENMU19CT09UU1BJTik7XG4gICAgc3ZnQm9vdC5zZXRBdHRyaWJ1dGUoJ3ZpZXdCb3gnLCAnMCAwICcgKyB2aWV3Qm94VmFsdWUgKyAnICcgKyB2aWV3Qm94VmFsdWUpO1xuICAgIGlubmVyQ29udGFpbmVyLmluc2VydEJlZm9yZShzdmdCb290LCBpbm5lckNvbnRhaW5lci5maXJzdENoaWxkKTtcbiAgICBmb3IgKHZhciBpdGVtID0gMDsgaXRlbSA8PSA3OyBpdGVtKyspIHtcbiAgICAgICAgdmFyIGJvb3RDaXJjbGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgJ2NpcmNsZScpO1xuICAgICAgICBib290Q2lyY2xlLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCBDTFNfU1BJTkNJUkNMRSArICdfJyArIGl0ZW0pO1xuICAgICAgICBib290Q2lyY2xlLnNldEF0dHJpYnV0ZSgncicsIGRlZmF1bHRSYWRpdXMgKyAnJyk7XG4gICAgICAgIGJvb3RDaXJjbGUuc2V0QXR0cmlidXRlKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlKCcgKyB0cmFucyArICcsJyArIHRyYW5zICsgJyknKTtcbiAgICAgICAgc3ZnQm9vdC5hcHBlbmRDaGlsZChib290Q2lyY2xlKTtcbiAgICB9XG59XG4vKipcbiAqXG4gKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBpbm5lckNvbnRhaW5lciAtIHNwZWNpZmllcyB0aGUgZWxlbWVudFxuICogQHBhcmFtIHtudW1iZXJ9IHJhZGl1cyAtIHNwZWNpZmllcyB0aGUgcmFkaXVzXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lXG5mdW5jdGlvbiBib290X2NhbGN1bGF0ZV9hdHRyaWJ1dGVzKGlubmVyQ29udGFpbmVyLCByYWRpdXMpIHtcbiAgICB2YXIgc3ZnID0gaW5uZXJDb250YWluZXIucXVlcnlTZWxlY3Rvcignc3ZnLmUtc3Bpbi1ib290c3RyYXAnKTtcbiAgICB2YXIgeCA9IDA7XG4gICAgdmFyIHkgPSAwO1xuICAgIHZhciByYWQgPSAyNDtcbiAgICBzdmcuc3R5bGUud2lkdGggPSBzdmcuc3R5bGUuaGVpZ2h0ID0gcmFkaXVzICsgJ3B4JztcbiAgICB2YXIgc3RhcnRBcmMgPSA5MDtcbiAgICBmb3IgKHZhciBpdGVtID0gMDsgaXRlbSA8PSA3OyBpdGVtKyspIHtcbiAgICAgICAgdmFyIHN0YXJ0ID0gZGVmaW5lQXJjUG9pbnRzKHgsIHksIHJhZCwgc3RhcnRBcmMpO1xuICAgICAgICB2YXIgY2lyY2xlRWxlID0gc3ZnLnF1ZXJ5U2VsZWN0b3IoJy4nICsgQ0xTX1NQSU5DSVJDTEUgKyAnXycgKyBpdGVtKTtcbiAgICAgICAgY2lyY2xlRWxlLnNldEF0dHJpYnV0ZSgnY3gnLCBzdGFydC54ICsgJycpO1xuICAgICAgICBjaXJjbGVFbGUuc2V0QXR0cmlidXRlKCdjeScsIHN0YXJ0LnkgKyAnJyk7XG4gICAgICAgIHN0YXJ0QXJjID0gc3RhcnRBcmMgPj0gMzYwID8gMCA6IHN0YXJ0QXJjO1xuICAgICAgICBzdGFydEFyYyA9IHN0YXJ0QXJjICsgNDU7XG4gICAgfVxufVxuLyoqXG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IGJlZ2luIC0gc3BlY2lmaWVzIHRoZSBudW1iZXJcbiAqIEBwYXJhbSB7bnVtYmVyfSBzdG9wICAtIHNwZWNpZmlycyB0aGUgbnVtYmVyXG4gKiBAcmV0dXJucyB7bnVtYmVyW119IC0gcmV0dXJucyB0aGUgYXJyYXkgb2YgbnVtYmVyXG4gKi9cbmZ1bmN0aW9uIGdlbmVyYXRlU2VyaWVzKGJlZ2luLCBzdG9wKSB7XG4gICAgdmFyIHNlcmllcyA9IFtdO1xuICAgIHZhciBzdGFydCA9IGJlZ2luO1xuICAgIHZhciBlbmQgPSBzdG9wO1xuICAgIHZhciBpbmNyZW1lbnQgPSBmYWxzZTtcbiAgICB2YXIgY291bnQgPSAxO1xuICAgIGZvcm1TZXJpZXMoc3RhcnQpO1xuICAgIC8qKlxuICAgICAqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGkgLSBzcGVjaWZpZXMgdGhlIG51bWJlclxuICAgICAqIEByZXR1cm5zIHt2b2lkfVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGZvcm1TZXJpZXMoaSkge1xuICAgICAgICBzZXJpZXMucHVzaChpKTtcbiAgICAgICAgaWYgKGkgIT09IGVuZCB8fCBjb3VudCA9PT0gMSkge1xuICAgICAgICAgICAgaWYgKGkgPD0gc3RhcnQgJiYgaSA+IDEgJiYgIWluY3JlbWVudCkge1xuICAgICAgICAgICAgICAgIGkgPSBwYXJzZUZsb2F0KChpIC0gMC4yKS50b0ZpeGVkKDIpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGkgPT09IDEpIHtcbiAgICAgICAgICAgICAgICBpID0gNztcbiAgICAgICAgICAgICAgICBpID0gcGFyc2VGbG9hdCgoaSArIDAuMikudG9GaXhlZCgyKSk7XG4gICAgICAgICAgICAgICAgaW5jcmVtZW50ID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGkgPCA4ICYmIGluY3JlbWVudCkge1xuICAgICAgICAgICAgICAgIGkgPSBwYXJzZUZsb2F0KChpICsgMC4yKS50b0ZpeGVkKDIpKTtcbiAgICAgICAgICAgICAgICBpZiAoaSA9PT0gOCkge1xuICAgICAgICAgICAgICAgICAgICBpbmNyZW1lbnQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChpIDw9IDggJiYgIWluY3JlbWVudCkge1xuICAgICAgICAgICAgICAgIGkgPSBwYXJzZUZsb2F0KChpIC0gMC4yKS50b0ZpeGVkKDIpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICsrY291bnQ7XG4gICAgICAgICAgICBmb3JtU2VyaWVzKGkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBzZXJpZXM7XG59XG4vKipcbiAqXG4gKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBpbm5lckNvbnRhaW5lciAtIHNwZWNpZmllcyB0aGUgZWxlbWVudFxuICogQHJldHVybnMge3ZvaWR9XG4gKi9cbmZ1bmN0aW9uIGFuaW1hdGVCb290c3RyYXAoaW5uZXJDb250YWluZXIpIHtcbiAgICB2YXIgc3ZnID0gaW5uZXJDb250YWluZXIucXVlcnlTZWxlY3Rvcignc3ZnLmUtc3Bpbi1ib290c3RyYXAnKTtcbiAgICB2YXIgaWQgPSBzdmcuZ2V0QXR0cmlidXRlKCdpZCcpO1xuICAgIGZvciAodmFyIGkgPSAxOyBpIDw9IDg7IGkrKykge1xuICAgICAgICB2YXIgY2lyY2xlRWxlID0gKGlubmVyQ29udGFpbmVyLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2UtcGF0aC1jaXJjbGVfJyArXG4gICAgICAgICAgICAoaSA9PT0gOCA/IDAgOiBpKSlbMF0pO1xuICAgICAgICByb3RhdGlvbihjaXJjbGVFbGUsIGksIGksIGdlbmVyYXRlU2VyaWVzKGksIGkpLCBpZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHBhcmFtIHtTVkdDaXJjbGVFbGVtZW50fSBjaXJjbGUgLSBzcGVjaWZpZXMgdGhlIGNpcmNsIGVsZW1lbnRcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gc3RhcnQgLSBzcGVjaWZpZXMgdGhlIG51bWJlclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgLSBzcGVjaWZpZXMgdGhlIGVuZCBudW1iZXJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gc2VyaWVzIC0gc3BlY2lmaWVzIHRoZSBzZXJpZXNcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gaWQgLSBzcGVjaWZpZXMgdGhlIGlkXG4gICAgICogQHJldHVybnMge3ZvaWR9XG4gICAgICovXG4gICAgZnVuY3Rpb24gcm90YXRpb24oY2lyY2xlLCBzdGFydCwgZW5kLCBzZXJpZXMsIGlkKSB7XG4gICAgICAgIHZhciBjb3VudCA9IDA7XG4gICAgICAgIGJvb3RfYW5pbWF0ZShzdGFydCk7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuICAgICAgICBmdW5jdGlvbiBib290X2FuaW1hdGUocmFkaXVzKSB7XG4gICAgICAgICAgICBpZiAoZ2xvYmFsVGltZU91dFtcIlwiICsgaWRdLmlzQW5pbWF0ZSkge1xuICAgICAgICAgICAgICAgICsrY291bnQ7XG4gICAgICAgICAgICAgICAgY2lyY2xlLnNldEF0dHJpYnV0ZSgncicsIHJhZGl1cyArICcnKTtcbiAgICAgICAgICAgICAgICBpZiAoY291bnQgPj0gc2VyaWVzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBjb3VudCA9IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuICAgICAgICAgICAgICAgIGdsb2JhbFRpbWVPdXRbaWRdLnRpbWVPdXQgPSBzZXRUaW1lb3V0KGJvb3RfYW5pbWF0ZS5iaW5kKG51bGwsIHNlcmllc1tjb3VudF0pLCAxOCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG4vKipcbiAqXG4gKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBjb250YWluZXIgLSBzcGVjaWZpZXMgdGhlIGVsZW1lbnRcbiAqIEBwYXJhbSB7c3RyaW5nfSB0ZW1wbGF0ZSAtIHNwZWNpZmllcyB0aGUgdGVtcGxhdGVcbiAqIEBwYXJhbSB7c3RyaW5nfSBjc3NDbGFzcyAtIHNwZWNpZmllcyB0aGUgY3NzIGNsYXNzLlxuICogQHJldHVybnMge3ZvaWR9XG4gKi9cbmZ1bmN0aW9uIHJlcGxhY2VDb250ZW50KGNvbnRhaW5lciwgdGVtcGxhdGUsIGNzc0NsYXNzKSB7XG4gICAgaWYgKCFpc051bGxPclVuZGVmaW5lZChjc3NDbGFzcykpIHtcbiAgICAgICAgY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoY3NzQ2xhc3MpO1xuICAgIH1cbiAgICB2YXIgaW5uZXIgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLmUtc3Bpbm5lci1pbm5lcicpO1xuICAgIGlubmVyLmlubmVySFRNTCA9IHRlbXBsYXRlO1xufVxuLyoqXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHdpZHRoIC0gc3BlY2lmaWVzIHRoZSB3aWR0aFxuICogQHBhcmFtIHtzdHJpbmd9IHRoZW1lIC0gc3BlY2lmaWVzIHRoZSBzdHJpbmdcbiAqIEByZXR1cm5zIHtudW1iZXJ9IC0gcmV0dXJucyB0aGUgbnVtYmVyXG4gKi9cbmZ1bmN0aW9uIGNhbGN1bGF0ZVJhZGl1cyh3aWR0aCwgdGhlbWUpIHtcbiAgICB2YXIgZGVmYXVsdFNpemU7XG4gICAgc3dpdGNoICh0aGVtZSkge1xuICAgICAgICBjYXNlICdNYXRlcmlhbCc6XG4gICAgICAgICAgICBkZWZhdWx0U2l6ZSA9IERFRlRfTUFUX1dJRFRIO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ01hdGVyaWFsMyc6XG4gICAgICAgICAgICBkZWZhdWx0U2l6ZSA9IERFRlRfTUFUM19XSURUSDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdGYWJyaWMnOlxuICAgICAgICAgICAgZGVmYXVsdFNpemUgPSBERUZUX0ZBQl9XSURUSDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdUYWlsd2luZCc6XG4gICAgICAgIGNhc2UgJ1RhaWx3aW5kLWRhcmsnOlxuICAgICAgICBjYXNlICdUYWlsd2luZDMnOlxuICAgICAgICAgICAgZGVmYXVsdFNpemUgPSBERUZUX0ZBQl9XSURUSDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdGbHVlbnQnOlxuICAgICAgICAgICAgZGVmYXVsdFNpemUgPSBERUZUX0ZMVUVOVF9XSURUSDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdGbHVlbnQyJzpcbiAgICAgICAgICAgIGRlZmF1bHRTaXplID0gREVGVF9GTFVFTlQyX1dJRFRIO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ0Jvb3RzdHJhcDQnOlxuICAgICAgICAgICAgZGVmYXVsdFNpemUgPSBERUZUX0JPT1Q0X1dJRFRIO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ0Jvb3RzdHJhcDUnOlxuICAgICAgICAgICAgZGVmYXVsdFNpemUgPSBERUZUX0JPT1Q1X1dJRFRIO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBkZWZhdWx0U2l6ZSA9IERFRlRfQk9PVF9XSURUSDtcbiAgICB9XG4gICAgd2lkdGggPSB3aWR0aCA/IHBhcnNlRmxvYXQod2lkdGggKyAnJykgOiBkZWZhdWx0U2l6ZTtcbiAgICByZXR1cm4gdGhlbWUgPT09ICdCb290c3RyYXAnID8gd2lkdGggOiB3aWR0aCAvIDI7XG59XG4vKipcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gaWQgLSBzcGVjaWZpZXMgdGhlIGlkXG4gKiBAcGFyYW0ge251bWJlcn0gcmFkaXVzIC0gc3BlY2lmaWVzIHRoZSByYWRpdXNcbiAqIEBwYXJhbSB7bnVtYmVyfSBjb3VudCAtIHNwZWNpZmllcyB0aGUgbnVtYmVyIGNvdW50XG4gKiBAcGFyYW0ge251bWJlcn0gcHJldmlvdXNJZCAtIHNwZWNpZmllcyB0aGUgcHJldmlvdXMgaWRcbiAqIEByZXR1cm5zIHtHbG9iYWxWYXJpYWJsZXN9IC0gcmV0dXJucyB0aGUgdmFyaWFibGVzXG4gKi9cbmZ1bmN0aW9uIGdsb2JhbFZhcmlhYmxlcyhpZCwgcmFkaXVzLCBjb3VudCwgcHJldmlvdXNJZCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHJhZGl1czogcmFkaXVzLFxuICAgICAgICBjb3VudDogY291bnQsXG4gICAgICAgIHByZXZpb3VzSWQ6IHByZXZpb3VzSWRcbiAgICB9O1xufVxuLyoqXG4gKiBAcmV0dXJucyB7c3RyaW5nfSAtIHJldHVybnMgdGhlIHN0cmluZ1xuICovXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcbmZ1bmN0aW9uIHJhbmRvbV9nZW5lcmF0b3IoKSB7XG4gICAgdmFyIHJhbmRvbSA9ICcnO1xuICAgIHZhciBjb21iaW5lID0gJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5JztcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IDU7IGkrKykge1xuICAgICAgICByYW5kb20gKz0gY29tYmluZS5jaGFyQXQoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogY29tYmluZS5sZW5ndGgpKTtcbiAgICB9XG4gICAgcmV0dXJuIHJhbmRvbTtcbn1cbi8qKlxuICpcbiAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGlubmVyQ29uIC0gc3BlY2lmaWVzIHRoZSBlbGVtZW50XG4gKiBAcGFyYW0ge3N0cmluZ30gdW5pcXVlSUQgLSBzcGVjaWZpZXMgdGhlIHVuaXF1ZSBpZFxuICogQHBhcmFtIHtzdHJpbmd9IHRoZW1lQ2xhc3MgLSBzcGVjaWZpZXMgdGhlIHN0cmluZ1xuICogQHBhcmFtIHtjcmVhdGVFbGVtZW50UGFyYW1zfSBtYWtlRWxlbWVudCAtIHNwZWNpZmllcyB0aGUgZWxlbWVudFxuICogQHJldHVybnMge3ZvaWR9XG4gKi9cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuZnVuY3Rpb24gY3JlYXRlX2ZhYnJpY19lbGVtZW50KGlubmVyQ29uLCB1bmlxdWVJRCwgdGhlbWVDbGFzcywgbWFrZUVsZW1lbnQpIHtcbiAgICB2YXIgc3ZnRmFicmljID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsICdzdmcnKTtcbiAgICBzdmdGYWJyaWMuc2V0QXR0cmlidXRlKCdpZCcsIHVuaXF1ZUlEKTtcbiAgICBzdmdGYWJyaWMuc2V0QXR0cmlidXRlKCdjbGFzcycsIHRoZW1lQ2xhc3MpO1xuICAgIHZhciBmYWJyaWNDaXJjbGVQYXRoID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsICdwYXRoJyk7XG4gICAgZmFicmljQ2lyY2xlUGF0aC5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgQ0xTX1NQSU5DSVJDTEUpO1xuICAgIHZhciBmYWJyaWNDaXJjbGVBcmMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgJ3BhdGgnKTtcbiAgICBmYWJyaWNDaXJjbGVBcmMuc2V0QXR0cmlidXRlKCdjbGFzcycsIENMU19TUElOQVJDKTtcbiAgICBpbm5lckNvbi5pbnNlcnRCZWZvcmUoc3ZnRmFicmljLCBpbm5lckNvbi5maXJzdENoaWxkKTtcbiAgICBzdmdGYWJyaWMuYXBwZW5kQ2hpbGQoZmFicmljQ2lyY2xlUGF0aCk7XG4gICAgc3ZnRmFicmljLmFwcGVuZENoaWxkKGZhYnJpY0NpcmNsZUFyYyk7XG59XG4vKipcbiAqXG4gKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBpbm5lckNvbnRhaW5lciAtIHNwZWNpZmllcyB0aGUgZWxlbWVudFxuICogQHBhcmFtIHtzdHJpbmd9IHVuaXF1ZUlEIC0gc3BlY2lmaWVzIHRoZSB1bmlxdWUgaWRcbiAqIEBwYXJhbSB7Y3JlYXRlRWxlbWVudFBhcmFtc30gbWFrZUVsZW1lbnQgLSBzcGVjaWZpZXMgdGhlIGVsZW1lbnRcbiAqIEBwYXJhbSB7c3RyaW5nfSBjbHMgLSBzcGVjaWZpZXMgdGhlIHN0cmluZ1xuICogQHJldHVybnMge3ZvaWR9XG4gKi9cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuZnVuY3Rpb24gY3JlYXRlX21hdGVyaWFsX2VsZW1lbnQoaW5uZXJDb250YWluZXIsIHVuaXF1ZUlELCBtYWtlRWxlbWVudCwgY2xzKSB7XG4gICAgdmFyIHN2Z01hdGVyaWFsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsICdzdmcnKTtcbiAgICB2YXIgbWF0Q2lyY2xlUGF0aCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCAncGF0aCcpO1xuICAgIHN2Z01hdGVyaWFsLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCBjbHMpO1xuICAgIHN2Z01hdGVyaWFsLnNldEF0dHJpYnV0ZSgnaWQnLCB1bmlxdWVJRCk7XG4gICAgbWF0Q2lyY2xlUGF0aC5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgQ0xTX1NQSU5DSVJDTEUpO1xuICAgIGlubmVyQ29udGFpbmVyLmluc2VydEJlZm9yZShzdmdNYXRlcmlhbCwgaW5uZXJDb250YWluZXIuZmlyc3RDaGlsZCk7XG4gICAgc3ZnTWF0ZXJpYWwuYXBwZW5kQ2hpbGQobWF0Q2lyY2xlUGF0aCk7XG59XG4vKipcbiAqXG4gKiBAcGFyYW0ge0hUTUxFbGVtZW50fSB0YXJnZXQgLSBzcGVjaWZpZXMgdGhlIGVsZW1lbnRcbiAqIEBwYXJhbSB7Y3JlYXRlRWxlbWVudFBhcmFtc30gbWFrZUVsZW1lbnQgLSBzcGVjaWZpZXMgdGhlIGVsZW1lbnRcbiAqIEByZXR1cm5zIHt2b2lkfVxuICovXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcbmZ1bmN0aW9uIGNyZWF0ZV9zcGlubmVyX2NvbnRhaW5lcih0YXJnZXQsIG1ha2VFbGVtZW50KSB7XG4gICAgdmFyIHNwaW5uZXJDb250YWluZXIgPSBtYWtlRWxlbWVudCgnZGl2Jywge30pO1xuICAgIHZhciBzcGlubmVySW5uZXJDb250YWluZXIgPSBtYWtlRWxlbWVudCgnZGl2Jywge30pO1xuICAgIHNwaW5uZXJDb250YWluZXIuY2xhc3NMaXN0LmFkZChDTFNfU1BJTldSQVApO1xuICAgIHNwaW5uZXJJbm5lckNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKENMU19TUElOSU5XUkFQKTtcbiAgICBzcGlubmVySW5uZXJDb250YWluZXIuc2V0QXR0cmlidXRlKCdhcmlhLWRpc2FibGVkJywgJ3RydWUnKTtcbiAgICB0YXJnZXQuYXBwZW5kQ2hpbGQoc3Bpbm5lckNvbnRhaW5lcik7XG4gICAgc3Bpbm5lckNvbnRhaW5lci5hcHBlbmRDaGlsZChzcGlubmVySW5uZXJDb250YWluZXIpO1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuICAgIHJldHVybiB7IHdyYXA6IHNwaW5uZXJDb250YWluZXIsIGlubmVyX3dyYXA6IHNwaW5uZXJJbm5lckNvbnRhaW5lciB9O1xufVxuLyoqXG4gKlxuICogQHBhcmFtIHtTcGlubmVySW5mb30gc3Bpbm5lckluZm8gLSBzcGVjaWZpZXMgdGhlIHNwaW5uZXJcbiAqIEByZXR1cm5zIHt2b2lkfVxuICovXG5mdW5jdGlvbiBhbmltYXRlTWF0ZXJpYWwoc3Bpbm5lckluZm8pIHtcbiAgICB2YXIgc3RhcnQgPSAxO1xuICAgIHZhciBlbmQgPSAxNDk7XG4gICAgdmFyIGR1cmF0aW9uID0gMTMzMztcbiAgICB2YXIgbWF4ID0gNzU7XG4gICAgY3JlYXRlQ2lyY2xlKHN0YXJ0LCBlbmQsIGVhc2VBbmltYXRpb24sIGR1cmF0aW9uLCBzcGlubmVySW5mby5nbG9iYWxJbmZvW3NwaW5uZXJJbmZvLnVuaXF1ZUlEXS5jb3VudCwgbWF4LCBzcGlubmVySW5mbyk7XG4gICAgc3Bpbm5lckluZm8uZ2xvYmFsSW5mb1tzcGlubmVySW5mby51bmlxdWVJRF0uY291bnQgPSArK3NwaW5uZXJJbmZvLmdsb2JhbEluZm9bc3Bpbm5lckluZm8udW5pcXVlSURdLmNvdW50ICUgNDtcbn1cbi8qKlxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSBzdGFydCAtIHNwZWNpZmllcyB0aGUgbnVtYmVyXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kIC0gc3BlY2lmaWVzIHRoZSBlbmQgbnVtYmVyXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBlYXNpbmcgLSBzcGVjaWZpZXMgdGhlIGZ1bmN0aW9uXG4gKiBAcGFyYW0ge251bWJlcn0gZHVyYXRpb24gLSBzcGVjaWZpZXMgdGhlIGR1cmF0aW9uXG4gKiBAcGFyYW0ge251bWJlcn0gY291bnQgLSBzcGVjaWZpZXMgdGhlIGNvdW50XG4gKiBAcGFyYW0ge251bWJlcn0gbWF4IC0gc3BlY2lmaWVzIHRoZSBtYXggbnVtYmVyXG4gKiBAcGFyYW0ge1NwaW5uZXJJbmZvfSBzcGlubmVySW5mbyAtIHNwZWNpZmllcyB0aGUgc3Bpbm5lciBpbmZvXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuZnVuY3Rpb24gY3JlYXRlQ2lyY2xlKHN0YXJ0LCBlbmQsIGVhc2luZywgZHVyYXRpb24sIGNvdW50LCBtYXgsIHNwaW5uZXJJbmZvKSB7XG4gICAgdmFyIGlkID0gKytzcGlubmVySW5mby5nbG9iYWxJbmZvW3NwaW5uZXJJbmZvLnVuaXF1ZUlEXS5wcmV2aW91c0lkO1xuICAgIHZhciBzdGFydFRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICB2YXIgY2hhbmdlID0gZW5kIC0gc3RhcnQ7XG4gICAgdmFyIGRpYW1ldGVyID0gZ2V0U2l6ZSgoc3Bpbm5lckluZm8uZ2xvYmFsSW5mb1tzcGlubmVySW5mby51bmlxdWVJRF0ucmFkaXVzICogMikgKyAnJyk7XG4gICAgdmFyIHN0cm9rZVNpemUgPSBnZXRTdHJva2VTaXplKGRpYW1ldGVyKTtcbiAgICB2YXIgcm90YXRlID0gLTkwICogKHNwaW5uZXJJbmZvLmdsb2JhbEluZm9bc3Bpbm5lckluZm8udW5pcXVlSURdLmNvdW50IHx8IDApO1xuICAgIG1hdF9hbmltYXRpb24oc3Bpbm5lckluZm8pO1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuICAgIGZ1bmN0aW9uIG1hdF9hbmltYXRpb24oc3Bpbm5lckluZm8pIHtcbiAgICAgICAgdmFyIGN1cnJlbnRUaW1lID0gTWF0aC5tYXgoMCwgTWF0aC5taW4obmV3IERhdGUoKS5nZXRUaW1lKCkgLSBzdGFydFRpbWUsIGR1cmF0aW9uKSk7XG4gICAgICAgIHVwZGF0ZVBhdGgoZWFzaW5nKGN1cnJlbnRUaW1lLCBzdGFydCwgY2hhbmdlLCBkdXJhdGlvbiksIHNwaW5uZXJJbmZvLmNvbnRhaW5lcik7XG4gICAgICAgIGlmIChpZCA9PT0gc3Bpbm5lckluZm8uZ2xvYmFsSW5mb1tzcGlubmVySW5mby51bmlxdWVJRF0ucHJldmlvdXNJZCAmJiBjdXJyZW50VGltZSA8IGR1cmF0aW9uKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcbiAgICAgICAgICAgIGdsb2JhbFRpbWVPdXRbc3Bpbm5lckluZm8udW5pcXVlSURdLnRpbWVPdXQgPSBzZXRUaW1lb3V0KG1hdF9hbmltYXRpb24uYmluZChudWxsLCBzcGlubmVySW5mbyksIDEpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgYW5pbWF0ZU1hdGVyaWFsKHNwaW5uZXJJbmZvKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZSAtIHNwZWNpZmllcyB0aGUgbnVtYmVyIHZhbHVlXG4gICAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gY29udGFpbmVyIC0gc3BlY2lmaWVzIHRoZSBjb250YWluZXJcbiAgICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiB1cGRhdGVQYXRoKHZhbHVlLCBjb250YWluZXIpIHtcbiAgICAgICAgaWYgKCFpc051bGxPclVuZGVmaW5lZChjb250YWluZXIucXVlcnlTZWxlY3Rvcignc3ZnLmUtc3Bpbi1tYXRlcmlhbCcpKSB8fCAhaXNOdWxsT3JVbmRlZmluZWQoY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ3N2Zy5lLXNwaW4tbWF0ZXJpYWwzJykpIHx8ICFpc051bGxPclVuZGVmaW5lZChjb250YWluZXIucXVlcnlTZWxlY3Rvcignc3ZnLmUtc3Bpbi10YWlsd2luZDMnKSkpIHtcbiAgICAgICAgICAgIHZhciBzdmcgPSB2b2lkIDA7XG4gICAgICAgICAgICBpZiAoIWlzTnVsbE9yVW5kZWZpbmVkKGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCdzdmcuZS1zcGluLW1hdGVyaWFsJykpICYmXG4gICAgICAgICAgICAgICAgIWlzTnVsbE9yVW5kZWZpbmVkKGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCdzdmcuZS1zcGluLW1hdGVyaWFsJykucXVlcnlTZWxlY3RvcigncGF0aC5lLXBhdGgtY2lyY2xlJykpKSB7XG4gICAgICAgICAgICAgICAgc3ZnID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ3N2Zy5lLXNwaW4tbWF0ZXJpYWwnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKCFpc051bGxPclVuZGVmaW5lZChjb250YWluZXIucXVlcnlTZWxlY3Rvcignc3ZnLmUtc3Bpbi1tYXRlcmlhbDMnKSkgJiZcbiAgICAgICAgICAgICAgICAhaXNOdWxsT3JVbmRlZmluZWQoY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ3N2Zy5lLXNwaW4tbWF0ZXJpYWwzJykucXVlcnlTZWxlY3RvcigncGF0aC5lLXBhdGgtY2lyY2xlJykpKSB7XG4gICAgICAgICAgICAgICAgc3ZnID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ3N2Zy5lLXNwaW4tbWF0ZXJpYWwzJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICghaXNOdWxsT3JVbmRlZmluZWQoY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ3N2Zy5lLXNwaW4tdGFpbHdpbmQzJykpICYmXG4gICAgICAgICAgICAgICAgIWlzTnVsbE9yVW5kZWZpbmVkKGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCdzdmcuZS1zcGluLXRhaWx3aW5kMycpLnF1ZXJ5U2VsZWN0b3IoJ3BhdGguZS1wYXRoLWNpcmNsZScpKSkge1xuICAgICAgICAgICAgICAgIHN2ZyA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCdzdmcuZS1zcGluLXRhaWx3aW5kMycpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFpc051bGxPclVuZGVmaW5lZChzdmcpKSB7XG4gICAgICAgICAgICAgICAgdmFyIHBhdGggPSBzdmcucXVlcnlTZWxlY3RvcigncGF0aC5lLXBhdGgtY2lyY2xlJyk7XG4gICAgICAgICAgICAgICAgcGF0aC5zZXRBdHRyaWJ1dGUoJ3N0cm9rZS1kYXNob2Zmc2V0JywgZ2V0RGFzaE9mZnNldChkaWFtZXRlciwgc3Ryb2tlU2l6ZSwgdmFsdWUsIG1heCkgKyAnJyk7XG4gICAgICAgICAgICAgICAgcGF0aC5zZXRBdHRyaWJ1dGUoJ3RyYW5zZm9ybScsICdyb3RhdGUoJyArIChyb3RhdGUpICsgJyAnICsgZGlhbWV0ZXIgLyAyICsgJyAnICsgZGlhbWV0ZXIgLyAyICsgJyknKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cbi8qKlxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSByYWRpdXMgLSBzcGVjaWZpZXMgdGhlIG51bWJlclxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gY29udGFpbmVyIC0gc3BlY2lmaWVzIHRoZSBlbGVtZW50XG4gKiBAcGFyYW0ge3N0cmluZ30gdHlwZSAtIHNwZWNpZmllcyB0aGUgc3RyaW5nIHR5cGVcbiAqIEBwYXJhbSB7c3RyaW5nfSBjbHMgLSBzcGVjaWZpZXMgdGhlIHN0cmluZ1xuICogQHJldHVybnMge3ZvaWR9XG4gKi9cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuZnVuY3Rpb24gbWF0X2NhbGN1bGF0ZV9hdHRyaWJ1dGVzKHJhZGl1cywgY29udGFpbmVyLCB0eXBlLCBjbHMpIHtcbiAgICB2YXIgZGlhbWV0ZXIgPSByYWRpdXMgKiAyO1xuICAgIHZhciBzdmcgPSBjb250YWluZXIucXVlcnlTZWxlY3Rvcignc3ZnLicgKyBjbHMpO1xuICAgIHZhciBwYXRoID0gc3ZnLnF1ZXJ5U2VsZWN0b3IoJ3BhdGguZS1wYXRoLWNpcmNsZScpO1xuICAgIHZhciBzdHJva2VTaXplID0gZ2V0U3Ryb2tlU2l6ZShkaWFtZXRlcik7XG4gICAgdmFyIHRyYW5zZm9ybU9yaWdpbiA9IChkaWFtZXRlciAvIDIpICsgJ3B4JztcbiAgICBzdmcuc2V0QXR0cmlidXRlKCd2aWV3Qm94JywgJzAgMCAnICsgZGlhbWV0ZXIgKyAnICcgKyBkaWFtZXRlcik7XG4gICAgc3ZnLnN0eWxlLndpZHRoID0gc3ZnLnN0eWxlLmhlaWdodCA9IGRpYW1ldGVyICsgJ3B4JztcbiAgICBzdmcuc3R5bGUudHJhbnNmb3JtT3JpZ2luID0gdHJhbnNmb3JtT3JpZ2luICsgJyAnICsgdHJhbnNmb3JtT3JpZ2luICsgJyAnICsgdHJhbnNmb3JtT3JpZ2luO1xuICAgIHBhdGguc2V0QXR0cmlidXRlKCdkJywgZHJhd0FyYyhkaWFtZXRlciwgc3Ryb2tlU2l6ZSkpO1xuICAgIGlmICh0eXBlID09PSAnTWF0ZXJpYWwnIHx8IHR5cGUgPT09ICdNYXRlcmlhbDMnIHx8IHR5cGUgPT09ICdGbHVlbnQyJyB8fCB0eXBlID09PSAnVGFpbHdpbmQzJykge1xuICAgICAgICBwYXRoLnNldEF0dHJpYnV0ZSgnc3Ryb2tlLXdpZHRoJywgc3Ryb2tlU2l6ZSArICcnKTtcbiAgICAgICAgcGF0aC5zZXRBdHRyaWJ1dGUoJ3N0cm9rZS1kYXNoYXJyYXknLCAoKGRpYW1ldGVyIC0gc3Ryb2tlU2l6ZSkgKiBNYXRoLlBJICogMC43NSkgKyAnJyk7XG4gICAgICAgIHBhdGguc2V0QXR0cmlidXRlKCdzdHJva2UtZGFzaG9mZnNldCcsIGdldERhc2hPZmZzZXQoZGlhbWV0ZXIsIHN0cm9rZVNpemUsIDEsIDc1KSArICcnKTtcbiAgICB9XG59XG4vKipcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gdmFsdWUgLSBzcGVjaWZpZXMgdGhlIHZhbHVlXG4gKiBAcmV0dXJucyB7bnVtYmVyfSAtIHJldHVybnMgdGhlIG51bWJlclxuICovXG5mdW5jdGlvbiBnZXRTaXplKHZhbHVlKSB7XG4gICAgdmFyIHBhcnNlZCA9IHBhcnNlRmxvYXQodmFsdWUpO1xuICAgIHJldHVybiBwYXJzZWQ7XG59XG4vKipcbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gZGlhbWV0ZXIgLSBzcGVjaWZpZXMgdGhlIGRpYW1ldGVyXG4gKiBAcGFyYW0ge251bWJlcn0gc3Ryb2tlU2l6ZSAtIHNwZWNpZmllcyB0aGUgc2l6ZVxuICogQHJldHVybnMge3N0cmluZ30gLSByZXR1cm5zIHRoZSBzdHJpbmdcbiAqL1xuZnVuY3Rpb24gZHJhd0FyYyhkaWFtZXRlciwgc3Ryb2tlU2l6ZSkge1xuICAgIHZhciByYWRpdXMgPSBkaWFtZXRlciAvIDI7XG4gICAgdmFyIG9mZnNldCA9IHN0cm9rZVNpemUgLyAyO1xuICAgIHJldHVybiAnTScgKyByYWRpdXMgKyAnLCcgKyBvZmZzZXRcbiAgICAgICAgKyAnQScgKyAocmFkaXVzIC0gb2Zmc2V0KSArICcsJyArIChyYWRpdXMgLSBvZmZzZXQpICsgJyAwIDEgMSAnICsgb2Zmc2V0ICsgJywnICsgcmFkaXVzO1xufVxuLyoqXG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IGRpYW1ldGVyIC0gc3BlY2lmaWVzIHRoZSBudW1iZXJcbiAqIEByZXR1cm5zIHtudW1iZXJ9IC0gcmV0dXJucyB0aGUgbnVtYmVyXG4gKi9cbmZ1bmN0aW9uIGdldFN0cm9rZVNpemUoZGlhbWV0ZXIpIHtcbiAgICByZXR1cm4gMTAgLyAxMDAgKiBkaWFtZXRlcjtcbn1cbi8qKlxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSBkaWFtZXRlciAtIHNwZWNpZmllcyB0aGUgbnVtYmVyXG4gKiBAcGFyYW0ge251bWJlcn0gc3Ryb2tlU2l6ZSAtIHNwZWNpZmllcyB0aGUgc3Ryb2tlIHNpemVcbiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZSAtIHNwZWNpZmllcyB0aGUgdmFsdWVcbiAqIEBwYXJhbSB7bnVtYmVyfSBtYXggLSBzcGVjaWZpZXMgdGhlIG1heCBudW1iZXJcbiAqIEByZXR1cm5zIHtudW1iZXJ9IC0gcmV0dXJucyB0aGUgbnVtYmVyXG4gKi9cbmZ1bmN0aW9uIGdldERhc2hPZmZzZXQoZGlhbWV0ZXIsIHN0cm9rZVNpemUsIHZhbHVlLCBtYXgpIHtcbiAgICByZXR1cm4gKGRpYW1ldGVyIC0gc3Ryb2tlU2l6ZSkgKiBNYXRoLlBJICogKCgzICogKG1heCkgLyAxMDApIC0gKHZhbHVlIC8gMTAwKSk7XG59XG4vKipcbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gY3VycmVudCAtIHNwZWNpZmllcyB0aGUgbnVtYmVyXG4gKiBAcGFyYW0ge251bWJlcn0gc3RhcnQgLSBzcGVjaWZpZXMgdGhlIHN0cm9rZSBzaXplXG4gKiBAcGFyYW0ge251bWJlcn0gY2hhbmdlIC0gc3BlY2lmaWVzIHRoZSB2YWx1ZVxuICogQHBhcmFtIHtudW1iZXJ9IGR1cmF0aW9uIC0gc3BlY2lmaWVzIHRoZSBtYXggbnVtYmVyXG4gKiBAcmV0dXJucyB7bnVtYmVyfSAtIHJldHVybnMgdGhlIG51bWJlclxuICovXG5mdW5jdGlvbiBlYXNlQW5pbWF0aW9uKGN1cnJlbnQsIHN0YXJ0LCBjaGFuZ2UsIGR1cmF0aW9uKSB7XG4gICAgdmFyIHRpbWVzdGFtcCA9IChjdXJyZW50IC89IGR1cmF0aW9uKSAqIGN1cnJlbnQ7XG4gICAgdmFyIHRpbWVjb3VudCA9IHRpbWVzdGFtcCAqIGN1cnJlbnQ7XG4gICAgcmV0dXJuIHN0YXJ0ICsgY2hhbmdlICogKDYgKiB0aW1lY291bnQgKiB0aW1lc3RhbXAgKyAtMTUgKiB0aW1lc3RhbXAgKiB0aW1lc3RhbXAgKyAxMCAqIHRpbWVjb3VudCk7XG59XG4vKipcbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gcmFkaXVzIC0gc3BlY2lmaWVzIHRoZSBudW1iZXJcbiAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGlubmVyQ29uYWluZXIgLSBzcGVjaWZpZXMgdGhlIGVsZW1lbnRcbiAqIEBwYXJhbSB7c3RyaW5nfSB0cmdDbGFzcyAtIHNwZWNpZmllcyB0aGUgY2xhc3NcbiAqIEByZXR1cm5zIHt2b2lkfVxuICovXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcbmZ1bmN0aW9uIGZiX2NhbGN1bGF0ZV9hdHRyaWJ1dGVzKHJhZGl1cywgaW5uZXJDb25haW5lciwgdHJnQ2xhc3MpIHtcbiAgICB2YXIgY2VudGVyWCA9IHJhZGl1cztcbiAgICB2YXIgY2VudGVyWSA9IHJhZGl1cztcbiAgICB2YXIgZGlhbWV0ZXIgPSByYWRpdXMgKiAyO1xuICAgIHZhciBzdGFydEFyYyA9IDMxNTtcbiAgICB2YXIgZW5kQXJjID0gNDU7XG4gICAgdmFyIHN2ZyA9IGlubmVyQ29uYWluZXIucXVlcnlTZWxlY3RvcignLicgKyB0cmdDbGFzcyk7XG4gICAgdmFyIGNpcmNsZSA9IHN2Zy5xdWVyeVNlbGVjdG9yKCcuZS1wYXRoLWNpcmNsZScpO1xuICAgIHZhciBwYXRoID0gc3ZnLnF1ZXJ5U2VsZWN0b3IoJy5lLXBhdGgtYXJjJyk7XG4gICAgdmFyIHRyYW5zZm9ybU9yaWdpbiA9IChkaWFtZXRlciAvIDIpICsgJ3B4JztcbiAgICBjaXJjbGUuc2V0QXR0cmlidXRlKCdkJywgZGVmaW5lQ2lyY2xlKGNlbnRlclgsIGNlbnRlclksIHJhZGl1cykpO1xuICAgIHBhdGguc2V0QXR0cmlidXRlKCdkJywgZGVmaW5lQXJjKGNlbnRlclgsIGNlbnRlclksIHJhZGl1cywgc3RhcnRBcmMsIGVuZEFyYykpO1xuICAgIHN2Zy5zZXRBdHRyaWJ1dGUoJ3ZpZXdCb3gnLCAnMCAwICcgKyBkaWFtZXRlciArICcgJyArIGRpYW1ldGVyKTtcbiAgICBzdmcuc3R5bGUudHJhbnNmb3JtT3JpZ2luID0gdHJhbnNmb3JtT3JpZ2luICsgJyAnICsgdHJhbnNmb3JtT3JpZ2luICsgJyAnICsgdHJhbnNmb3JtT3JpZ2luO1xuICAgIHN2Zy5zdHlsZS53aWR0aCA9IHN2Zy5zdHlsZS5oZWlnaHQgPSBkaWFtZXRlciArICdweCc7XG59XG4vKipcbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gY2VudGVyWCAtIHNwZWNpZmllcyB0aGUgbnVtYmVyXG4gKiBAcGFyYW0ge251bWJlcn0gY2VudGVyWSAtIHNwZWNpZmllcyB0aGUgc3Ryb2tlIHNpemVcbiAqIEBwYXJhbSB7bnVtYmVyfSByYWRpdXMgLSBzcGVjaWZpZXMgdGhlIHZhbHVlXG4gKiBAcGFyYW0ge251bWJlcn0gYW5nbGUgLSBzcGVjaWZpZXMgdGhlIG1heCBudW1iZXJcbiAqIEByZXR1cm5zIHtudW1iZXJ9IC0gcmV0dXJucyB0aGUgbnVtYmVyXG4gKi9cbmZ1bmN0aW9uIGRlZmluZUFyY1BvaW50cyhjZW50ZXJYLCBjZW50ZXJZLCByYWRpdXMsIGFuZ2xlKSB7XG4gICAgdmFyIHJhZGlhbnMgPSAoYW5nbGUgLSA5MCkgKiBNYXRoLlBJIC8gMTgwLjA7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgeDogY2VudGVyWCArIChyYWRpdXMgKiBNYXRoLmNvcyhyYWRpYW5zKSksXG4gICAgICAgIHk6IGNlbnRlclkgKyAocmFkaXVzICogTWF0aC5zaW4ocmFkaWFucykpXG4gICAgfTtcbn1cbi8qKlxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSB4IC0gc3BlY2lmaWVzIHRoZSBudW1iZXJcbiAqIEBwYXJhbSB7bnVtYmVyfSB5IC0gc3BlY2lmaWVzIHRoZSBzdHJva2Ugc2l6ZVxuICogQHBhcmFtIHtudW1iZXJ9IHJhZGl1cyAtIHNwZWNpZmllcyB0aGUgcmFkaXVzXG4gKiBAcGFyYW0ge251bWJlcn0gc3RhcnRBcmMgLSBzcGVjaWZpZXMgdGhlIHZhbHVlXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kQXJjIC0gc3BlY2lmaWVzIHRoZSBtYXggbnVtYmVyXG4gKiBAcmV0dXJucyB7bnVtYmVyfSAtIHJldHVybnMgdGhlIG51bWJlclxuICovXG5mdW5jdGlvbiBkZWZpbmVBcmMoeCwgeSwgcmFkaXVzLCBzdGFydEFyYywgZW5kQXJjKSB7XG4gICAgdmFyIHN0YXJ0ID0gZGVmaW5lQXJjUG9pbnRzKHgsIHksIHJhZGl1cywgZW5kQXJjKTtcbiAgICB2YXIgZW5kID0gZGVmaW5lQXJjUG9pbnRzKHgsIHksIHJhZGl1cywgc3RhcnRBcmMpO1xuICAgIHZhciBkID0gW1xuICAgICAgICAnTScsIHN0YXJ0LngsIHN0YXJ0LnksXG4gICAgICAgICdBJywgcmFkaXVzLCByYWRpdXMsIDAsIDAsIDAsIGVuZC54LCBlbmQueVxuICAgIF0uam9pbignICcpO1xuICAgIHJldHVybiBkO1xufVxuLyoqXG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IHggLSBzcGVjaWZpZXMgdGhlIG51bWJlclxuICogQHBhcmFtIHtudW1iZXJ9IHkgLSBzcGVjaWZpZXMgdGhlIHN0cm9rZSBzaXplXG4gKiBAcGFyYW0ge251bWJlcn0gcmFkaXVzIC0gc3BlY2lmaWVzIHRoZSB2YWx1ZVxuICogQHJldHVybnMge3N0cmluZ30gLSByZXR1cm5zIHRoZSBzdHJpbmdcbiAqL1xuZnVuY3Rpb24gZGVmaW5lQ2lyY2xlKHgsIHksIHJhZGl1cykge1xuICAgIHZhciBkID0gW1xuICAgICAgICAnTScsIHgsIHksXG4gICAgICAgICdtJywgLXJhZGl1cywgMCxcbiAgICAgICAgJ2EnLCByYWRpdXMsIHJhZGl1cywgMCwgMSwgMCwgcmFkaXVzICogMiwgMCxcbiAgICAgICAgJ2EnLCByYWRpdXMsIHJhZGl1cywgMCwgMSwgMCwgLXJhZGl1cyAqIDIsIDBcbiAgICBdLmpvaW4oJyAnKTtcbiAgICByZXR1cm4gZDtcbn1cbi8qKlxuICogRnVuY3Rpb24gdG8gc2hvdyB0aGUgU3Bpbm5lci5cbiAqXG4gKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBjb250YWluZXIgLSBTcGVjaWZ5IHRoZSB0YXJnZXQgb2YgdGhlIFNwaW5uZXIuXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqIEBwcml2YXRlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzaG93U3Bpbm5lcihjb250YWluZXIpIHtcbiAgICBzaG93SGlkZVNwaW5uZXIoY29udGFpbmVyLCBmYWxzZSk7XG4gICAgY29udGFpbmVyID0gbnVsbDtcbn1cbi8qKlxuICpcbiAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGNvbnRhaW5lciAtIHNwZWNpZmllcyB0aGUgZWxlbWVudFxuICogQHBhcmFtIHtib29sZWFufSBpc0hpZGUgLSBzcGVjaWZpZXMgdGhlIGJvb2xlYW5cbiAqIEByZXR1cm5zIHt2b2lkfVxuICovXG5mdW5jdGlvbiBzaG93SGlkZVNwaW5uZXIoY29udGFpbmVyLCBpc0hpZGUpIHtcbiAgICB2YXIgc3Bpbm5lcldyYXA7XG4gICAgaWYgKGNvbnRhaW5lcikge1xuICAgICAgICBpZiAoY29udGFpbmVyLmNsYXNzTGlzdC5jb250YWlucyhDTFNfU1BJTldSQVApKSB7XG4gICAgICAgICAgICBzcGlubmVyV3JhcCA9IGNvbnRhaW5lcjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZhciBzcGluV3JhcENvbGxlY3Rpb24gPSBjb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLicgKyBDTFNfU1BJTldSQVApO1xuICAgICAgICAgICAgaWYgKEJyb3dzZXIuaXNJRSkge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3BpbldyYXBDb2xsZWN0aW9uLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzcGluV3JhcENvbGxlY3Rpb25baV0ucGFyZW50RWxlbWVudCAmJiBzcGluV3JhcENvbGxlY3Rpb25baV0ucGFyZW50RWxlbWVudCA9PT0gY29udGFpbmVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzcGlubmVyV3JhcCA9IHNwaW5XcmFwQ29sbGVjdGlvbltpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgc3Bpbm5lcldyYXAgPSBBcnJheS5mcm9tKHNwaW5XcmFwQ29sbGVjdGlvbikuZmluZChmdW5jdGlvbiAod3JhcCkgeyByZXR1cm4gd3JhcC5wYXJlbnRFbGVtZW50ID09PSBjb250YWluZXI7IH0pIHx8IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKGNvbnRhaW5lciAmJiBzcGlubmVyV3JhcCkge1xuICAgICAgICB2YXIgaW5uZXIgPSBzcGlubmVyV3JhcC5xdWVyeVNlbGVjdG9yKCcuJyArIENMU19TUElOSU5XUkFQKTtcbiAgICAgICAgdmFyIHNwaW5DaGVjayA9IGlzSGlkZSA/ICFzcGlubmVyV3JhcC5jbGFzc0xpc3QuY29udGFpbnMoQ0xTX1NQSU5URU1QTEFURSkgJiZcbiAgICAgICAgICAgICFzcGlubmVyV3JhcC5jbGFzc0xpc3QuY29udGFpbnMoQ0xTX0hJREVTUElOKSA6XG4gICAgICAgICAgICAhc3Bpbm5lcldyYXAuY2xhc3NMaXN0LmNvbnRhaW5zKENMU19TUElOVEVNUExBVEUpICYmICFzcGlubmVyV3JhcC5jbGFzc0xpc3QuY29udGFpbnMoQ0xTX1NIT1dTUElOKTtcbiAgICAgICAgaWYgKHNwaW5DaGVjaykge1xuICAgICAgICAgICAgdmFyIHN2Z0VsZSA9IHNwaW5uZXJXcmFwLnF1ZXJ5U2VsZWN0b3IoJ3N2ZycpO1xuICAgICAgICAgICAgaWYgKGlzTnVsbE9yVW5kZWZpbmVkKHN2Z0VsZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgaWQgPSBzdmdFbGUuZ2V0QXR0cmlidXRlKCdpZCcpO1xuICAgICAgICAgICAgZ2xvYmFsVGltZU91dFtcIlwiICsgaWRdLmlzQW5pbWF0ZSA9ICFpc0hpZGU7XG4gICAgICAgICAgICBzd2l0Y2ggKGdsb2JhbFRpbWVPdXRbXCJcIiArIGlkXS50eXBlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnTWF0ZXJpYWwnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ01hdGVyaWFsMyc6XG4gICAgICAgICAgICAgICAgY2FzZSAnVGFpbHdpbmQzJzpcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzSGlkZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGdsb2JhbFRpbWVPdXRbaWRdLnRpbWVPdXQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRNYXRBbmltYXRlKGlubmVyLCBpZCwgZ2xvYmFsVGltZU91dFtpZF0ucmFkaXVzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdCb290c3RyYXAnOlxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNIaWRlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoZ2xvYmFsVGltZU91dFtpZF0udGltZU91dCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhbmltYXRlQm9vdHN0cmFwKGlubmVyKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNIaWRlKSB7XG4gICAgICAgICAgICBjbGFzc0xpc3Qoc3Bpbm5lcldyYXAsIFtDTFNfSElERVNQSU5dLCBbQ0xTX1NIT1dTUElOXSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjbGFzc0xpc3Qoc3Bpbm5lcldyYXAsIFtDTFNfU0hPV1NQSU5dLCBbQ0xTX0hJREVTUElOXSk7XG4gICAgICAgIH1cbiAgICAgICAgY29udGFpbmVyID0gbnVsbDtcbiAgICB9XG59XG4vKipcbiAqIEZ1bmN0aW9uIHRvIGhpZGUgdGhlIFNwaW5uZXIuXG4gKlxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gY29udGFpbmVyIC0gU3BlY2lmeSB0aGUgdGFyZ2V0IG9mIHRoZSBTcGlubmVyLlxuICogQHJldHVybnMge3ZvaWR9XG4gKiBAcHJpdmF0ZVxuICovXG5leHBvcnQgZnVuY3Rpb24gaGlkZVNwaW5uZXIoY29udGFpbmVyKSB7XG4gICAgc2hvd0hpZGVTcGlubmVyKGNvbnRhaW5lciwgdHJ1ZSk7XG4gICAgY29udGFpbmVyID0gbnVsbDtcbn1cbi8qKlxuICogRnVuY3Rpb24gdG8gY2hhbmdlIHRoZSBTcGlubmVycyBpbiBhIHBhZ2UgZ2xvYmFsbHkgZnJvbSBhcHBsaWNhdGlvbiBlbmQuXG4gKiBgYGBcbiAqIEUuZyA6IHNldFNwaW5uZXIoeyBjc3NDbGFzczogJ2N1c3RvbS1jc3MnOyB0eXBlOiAnTWF0ZXJpYWwnIH0pO1xuICogYGBgXG4gKlxuICogQHBhcmFtIHtTZXRTcGlubmVyQXJnc30gYXJncyAtIHNwZWNpZmllcyB0aGUgYXJnc1xuICogQHBhcmFtIHtjcmVhdGVFbGVtZW50UGFyYW1zfSBpbnRlcm5hbENyZWF0ZUVsZW1lbnQgLSBzcGVjaWZpZXMgdGhlIGVsZW1lbnQgcGFyYW1zXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqIEBwcml2YXRlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXRTcGlubmVyKGFyZ3MsIGludGVybmFsQ3JlYXRlRWxlbWVudCkge1xuICAgIHZhciBtYWtlRWxlbWVudCA9ICFpc051bGxPclVuZGVmaW5lZChpbnRlcm5hbENyZWF0ZUVsZW1lbnQpID8gaW50ZXJuYWxDcmVhdGVFbGVtZW50IDogY3JlYXRlRWxlbWVudDtcbiAgICBpZiAoYXJncy50ZW1wbGF0ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHNwaW5UZW1wbGF0ZSA9IGFyZ3MudGVtcGxhdGU7XG4gICAgICAgIGlmIChhcmdzLnRlbXBsYXRlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHNwaW5DU1NDbGFzcyA9IGFyZ3MuY3NzQ2xhc3M7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdmFyIGNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy4nICsgQ0xTX1NQSU5XUkFQKTtcbiAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgY29udGFpbmVyLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICBlbnN1cmVUZW1wbGF0ZShhcmdzLnRlbXBsYXRlLCBjb250YWluZXJbaW5kZXhdLCBhcmdzLnR5cGUsIGFyZ3MuY3NzQ2xhc3MsIG1ha2VFbGVtZW50KTtcbiAgICB9XG59XG4vKipcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gdGVtcGxhdGUgLSBzcGVjaWZpZXMgdGhlIHN0cmluZ1xuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gY29udGFpbmVyIC0gc3BlY2lmaWVzIHRoZSBjb250YWluZXJcbiAqIEBwYXJhbSB7c3RyaW5nfSB0aGVtZSAtIHNwZWNpZmllcyB0aGUgdGhlbWVcbiAqIEBwYXJhbSB7c3RyaW5nfSBjc3NDbGFzcyAtIHNwZWNpZmllcyB0aGUgc3RyaW5nIGNsYXNzXG4gKiBAcGFyYW0ge2NyZWF0ZUVsZW1lbnRQYXJhbXN9IG1ha2VFbGUgLSBzcGVjaWZpZXMgdGhlIHBhcmFtc1xuICogQHJldHVybnMge3ZvaWR9XG4gKi9cbmZ1bmN0aW9uIGVuc3VyZVRlbXBsYXRlKHRlbXBsYXRlLCBjb250YWluZXIsIHRoZW1lLCBjc3NDbGFzcywgbWFrZUVsZSkge1xuICAgIGlmIChpc051bGxPclVuZGVmaW5lZCh0ZW1wbGF0ZSkgJiYgIWNvbnRhaW5lci5jbGFzc0xpc3QuY29udGFpbnMoQ0xTX1NQSU5URU1QTEFURSkpIHtcbiAgICAgICAgcmVwbGFjZVRoZW1lKGNvbnRhaW5lciwgdGhlbWUsIGNzc0NsYXNzLCBtYWtlRWxlKTtcbiAgICAgICAgaWYgKGNvbnRhaW5lci5jbGFzc0xpc3QuY29udGFpbnMoQ0xTX1NIT1dTUElOKSkge1xuICAgICAgICAgICAgY29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoQ0xTX1NIT1dTUElOKTtcbiAgICAgICAgICAgIHNob3dTcGlubmVyKGNvbnRhaW5lcik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZShDTFNfSElERVNQSU4pO1xuICAgICAgICAgICAgaGlkZVNwaW5uZXIoY29udGFpbmVyKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgc3BpblRlbXBsYXRlID0gdGVtcGxhdGU7XG4gICAgICAgIGlmICghaXNOdWxsT3JVbmRlZmluZWQoY3NzQ2xhc3MpKSB7XG4gICAgICAgICAgICBzcGluQ1NTQ2xhc3MgPSBjc3NDbGFzcztcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWlzTnVsbE9yVW5kZWZpbmVkKHNwaW5UZW1wbGF0ZSkpIHtcbiAgICAgICAgICAgIHJlcGxhY2VDb250ZW50KGNvbnRhaW5lciwgc3BpblRlbXBsYXRlLCBzcGluQ1NTQ2xhc3MpO1xuICAgICAgICB9XG4gICAgfVxufVxuLyoqXG4gKlxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gY29udGFpbmVyIC0gc3BlY2lmaWVzIHRoZSBjb250YWluZXJcbiAqIEBwYXJhbSB7c3RyaW5nfSB0aGVtZSAtIHNwZWNpZmllcyB0aGUgdGhlbWVcbiAqIEBwYXJhbSB7c3RyaW5nfSBjc3NDbGFzcyAtIHNwZWNpZmllcyB0aGUgc3RyaW5nIGNsYXNzXG4gKiBAcGFyYW0ge2NyZWF0ZUVsZW1lbnRQYXJhbXN9IG1ha2VFbGUgLSBzcGVjaWZpZXMgdGhlIHBhcmFtc1xuICogQHJldHVybnMge3ZvaWR9XG4gKi9cbmZ1bmN0aW9uIHJlcGxhY2VUaGVtZShjb250YWluZXIsIHRoZW1lLCBjc3NDbGFzcywgbWFrZUVsZSkge1xuICAgIGlmICghaXNOdWxsT3JVbmRlZmluZWQoY3NzQ2xhc3MpKSB7XG4gICAgICAgIGNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKGNzc0NsYXNzKTtcbiAgICB9XG4gICAgdmFyIHN2Z0VsZW1lbnQgPSBjb250YWluZXIucXVlcnlTZWxlY3Rvcignc3ZnJyk7XG4gICAgaWYgKCFpc051bGxPclVuZGVmaW5lZChzdmdFbGVtZW50KSkge1xuICAgICAgICB2YXIgcmFkaXVzID0gdGhlbWUgPT09ICdCb290c3RyYXAnID8gcGFyc2VGbG9hdChzdmdFbGVtZW50LnN0eWxlLmhlaWdodCkgOiBwYXJzZUZsb2F0KHN2Z0VsZW1lbnQuc3R5bGUuaGVpZ2h0KSAvIDI7XG4gICAgICAgIHZhciBjbGFzc05hbWVzID0gc3ZnRWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2NsYXNzJyk7XG4gICAgICAgIHZhciBzdmdDbGFzc0xpc3QgPSBjbGFzc05hbWVzLnNwbGl0KC9cXHMvKTtcbiAgICAgICAgaWYgKHN2Z0NsYXNzTGlzdC5pbmRleE9mKCdlLXNwaW4tbWF0ZXJpYWwnKSA+PSAwKSB7XG4gICAgICAgICAgICB2YXIgaWQgPSBzdmdFbGVtZW50LmdldEF0dHJpYnV0ZSgnaWQnKTtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dChnbG9iYWxUaW1lT3V0W1wiXCIgKyBpZF0udGltZU91dCk7XG4gICAgICAgIH1cbiAgICAgICAgc2V0VGhlbWUodGhlbWUsIGNvbnRhaW5lciwgcmFkaXVzLCBtYWtlRWxlKTtcbiAgICB9XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@syncfusion+ej2-popups@29.1.37/node_modules/@syncfusion/ej2-popups/src/spinner/spinner.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@syncfusion+ej2-popups@29.1.37/node_modules/@syncfusion/ej2-popups/src/tooltip/tooltip.js":
/*!**********************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@syncfusion+ej2-popups@29.1.37/node_modules/@syncfusion/ej2-popups/src/tooltip/tooltip.js ***!
  \**********************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Animation: () => (/* binding */ Animation),\n/* harmony export */   Tooltip: () => (/* binding */ Tooltip)\n/* harmony export */ });\n/* harmony import */ var _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @syncfusion/ej2-base */ \"(ssr)/./node_modules/.pnpm/@syncfusion+ej2-base@29.1.36/node_modules/@syncfusion/ej2-base/index.js\");\n/* harmony import */ var _popup_popup__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../popup/popup */ \"(ssr)/./node_modules/.pnpm/@syncfusion+ej2-popups@29.1.37/node_modules/@syncfusion/ej2-popups/src/popup/popup.js\");\n/* harmony import */ var _common_position__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../common/position */ \"(ssr)/./node_modules/.pnpm/@syncfusion+ej2-popups@29.1.37/node_modules/@syncfusion/ej2-popups/src/common/position.js\");\n/* harmony import */ var _common_collision__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../common/collision */ \"(ssr)/./node_modules/.pnpm/@syncfusion+ej2-popups@29.1.37/node_modules/@syncfusion/ej2-popups/src/common/collision.js\");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\n\n\n\n\n\n\n\nvar TOUCHEND_HIDE_DELAY = 1500;\nvar TAPHOLD_THRESHOLD = 500;\nvar SHOW_POINTER_TIP_GAP = 0;\nvar HIDE_POINTER_TIP_GAP = 8;\nvar MOUSE_TRAIL_GAP = 2;\nvar POINTER_ADJUST = 2;\nvar ROOT = 'e-tooltip';\nvar RTL = 'e-rtl';\nvar DEVICE = 'e-bigger';\nvar ICON = 'e-icons';\nvar CLOSE = 'e-tooltip-close';\nvar TOOLTIP_WRAP = 'e-tooltip-wrap';\nvar CONTENT = 'e-tip-content';\nvar ARROW_TIP = 'e-arrow-tip';\nvar ARROW_TIP_OUTER = 'e-arrow-tip-outer';\nvar ARROW_TIP_INNER = 'e-arrow-tip-inner';\nvar TIP_BOTTOM = 'e-tip-bottom';\nvar TIP_TOP = 'e-tip-top';\nvar TIP_LEFT = 'e-tip-left';\nvar TIP_RIGHT = 'e-tip-right';\nvar POPUP_ROOT = 'e-popup';\nvar POPUP_OPEN = 'e-popup-open';\nvar POPUP_CLOSE = 'e-popup-close';\nvar POPUP_LIB = 'e-lib';\nvar HIDE_POPUP = 'e-hidden';\nvar POPUP_CONTAINER = 'e-tooltip-popup-container';\nvar Animation = /** @class */ (function (_super) {\n    __extends(Animation, _super);\n    function Animation() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Property)({ effect: 'FadeIn', duration: 150, delay: 0 })\n    ], Animation.prototype, \"open\", void 0);\n    __decorate([\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Property)({ effect: 'FadeOut', duration: 150, delay: 0 })\n    ], Animation.prototype, \"close\", void 0);\n    return Animation;\n}(_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.ChildProperty));\n\n/**\n * Represents the Tooltip component that displays a piece of information about the target element on mouse hover.\n * ```html\n * <div id=\"tooltip\">Show Tooltip</div>\n * ```\n * ```typescript\n * <script>\n *   var tooltipObj = new Tooltip({ content: 'Tooltip text' });\n *   tooltipObj.appendTo(\"#tooltip\");\n * </script>\n * ```\n */\nvar Tooltip = /** @class */ (function (_super) {\n    __extends(Tooltip, _super);\n    /**\n     * Constructor for creating the Tooltip Component\n     *\n     * @param {TooltipModel} options - specifies the options for the constructor\n     * @param {string| HTMLElement} element - specifies the element for the constructor\n     *\n     */\n    function Tooltip(options, element) {\n        var _this = _super.call(this, options, element) || this;\n        _this.mouseMoveEvent = null;\n        _this.mouseMoveTarget = null;\n        _this.containerElement = null;\n        _this.isBodyContainer = true;\n        return _this;\n    }\n    Tooltip.prototype.initialize = function () {\n        this.formatPosition();\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.addClass)([this.element], ROOT);\n    };\n    Tooltip.prototype.formatPosition = function () {\n        var _a, _b;\n        if (!this.position) {\n            return;\n        }\n        if (this.position.indexOf('Top') === 0 || this.position.indexOf('Bottom') === 0) {\n            _a = this.position.split(/(?=[A-Z])/), this.tooltipPositionY = _a[0], this.tooltipPositionX = _a[1];\n        }\n        else {\n            _b = this.position.split(/(?=[A-Z])/), this.tooltipPositionX = _b[0], this.tooltipPositionY = _b[1];\n        }\n    };\n    Tooltip.prototype.renderArrow = function () {\n        this.setTipClass(this.position);\n        var tip = this.createElement('div', { className: ARROW_TIP + ' ' + this.tipClass });\n        tip.appendChild(this.createElement('div', { className: ARROW_TIP_OUTER + ' ' + this.tipClass }));\n        tip.appendChild(this.createElement('div', { className: ARROW_TIP_INNER + ' ' + this.tipClass }));\n        this.tooltipEle.appendChild(tip);\n    };\n    Tooltip.prototype.setTipClass = function (position) {\n        if (position.indexOf('Right') === 0) {\n            this.tipClass = TIP_LEFT;\n        }\n        else if (position.indexOf('Bottom') === 0) {\n            this.tipClass = TIP_TOP;\n        }\n        else if (position.indexOf('Left') === 0) {\n            this.tipClass = TIP_RIGHT;\n        }\n        else {\n            this.tipClass = TIP_BOTTOM;\n        }\n    };\n    Tooltip.prototype.renderPopup = function (target) {\n        var elePos = this.mouseTrail ? { top: 0, left: 0 } : this.getTooltipPosition(target);\n        this.tooltipEle.classList.remove(POPUP_LIB);\n        this.popupObj = new _popup_popup__WEBPACK_IMPORTED_MODULE_1__.Popup(this.tooltipEle, {\n            height: this.height,\n            width: this.width,\n            position: { X: elePos.left, Y: elePos.top },\n            enableRtl: this.enableRtl,\n            open: this.openPopupHandler.bind(this),\n            close: this.closePopupHandler.bind(this)\n        });\n    };\n    Tooltip.prototype.getScalingFactor = function (target) {\n        if (!target) {\n            return { x: 1, y: 1 };\n        }\n        var scalingFactors = { x: 1, y: 1 };\n        var elementsWithTransform = target.closest('[style*=\"transform: scale\"]');\n        if (elementsWithTransform && elementsWithTransform !== this.tooltipEle && elementsWithTransform.contains(this.tooltipEle)) {\n            var computedStyle = window.getComputedStyle(elementsWithTransform);\n            var transformValue = computedStyle.getPropertyValue('transform');\n            var matrixValues = transformValue.match(/matrix\\(([^)]+)\\)/)[1].split(',').map(parseFloat);\n            scalingFactors.x = matrixValues[0];\n            scalingFactors.y = matrixValues[3];\n        }\n        return scalingFactors;\n    };\n    Tooltip.prototype.getTooltipPosition = function (target) {\n        this.tooltipEle.style.display = 'block';\n        var parentWithZoomStyle = this.element.closest('[style*=\"zoom\"]');\n        if (parentWithZoomStyle) {\n            if (!parentWithZoomStyle.contains(this.tooltipEle)) {\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                this.tooltipEle.style.zoom = getComputedStyle(parentWithZoomStyle).zoom;\n            }\n        }\n        var pos = (0,_common_position__WEBPACK_IMPORTED_MODULE_2__.calculatePosition)(target, this.tooltipPositionX, this.tooltipPositionY, !this.isBodyContainer, this.isBodyContainer ? null : this.containerElement.getBoundingClientRect());\n        var scalingFactors = this.getScalingFactor(target);\n        var offsetPos = this.calculateTooltipOffset(this.position, scalingFactors.x, scalingFactors.y);\n        var collisionPosition = this.calculateElementPosition(pos, offsetPos);\n        var collisionLeft = collisionPosition[0];\n        var collisionTop = collisionPosition[1];\n        var elePos = this.collisionFlipFit(target, collisionLeft, collisionTop);\n        elePos.left = elePos.left / scalingFactors.x;\n        elePos.top = elePos.top / scalingFactors.y;\n        this.tooltipEle.style.display = '';\n        return elePos;\n    };\n    Tooltip.prototype.windowResize = function () {\n        this.reposition(this.findTarget());\n    };\n    Tooltip.prototype.reposition = function (target) {\n        if (this.popupObj && target) {\n            var elePos = this.getTooltipPosition(target);\n            this.popupObj.position = { X: elePos.left, Y: elePos.top };\n            this.popupObj.dataBind();\n        }\n    };\n    Tooltip.prototype.openPopupHandler = function () {\n        if (!this.mouseTrail && this.needTemplateReposition()) {\n            this.reposition(this.findTarget());\n        }\n        this.trigger('afterOpen', this.tooltipEventArgs);\n        this.tooltipEventArgs = null;\n    };\n    Tooltip.prototype.closePopupHandler = function () {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if (this.isReact && !(this.opensOn === 'Click' || typeof (this.content) === 'function')) {\n            this.clearTemplate(['content']);\n        }\n        this.clear();\n        var tooltipAfterCloseEventArgs = {\n            type: this.tooltipEventArgs.event ? this.tooltipEventArgs.event.type : null, cancel: false,\n            target: this.tooltipEventArgs.target, event: this.tooltipEventArgs.event ? this.tooltipEventArgs.event : null,\n            element: this.tooltipEle, isInteracted: !(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(this.tooltipEventArgs.event)\n        };\n        this.trigger('afterClose', tooltipAfterCloseEventArgs);\n        tooltipAfterCloseEventArgs = null;\n    };\n    Tooltip.prototype.calculateTooltipOffset = function (position, xScalingFactor, yScalingFactor) {\n        if (xScalingFactor === void 0) { xScalingFactor = 1; }\n        if (yScalingFactor === void 0) { yScalingFactor = 1; }\n        var pos = { top: 0, left: 0 };\n        var tipWidth;\n        var tipHeight;\n        var tooltipEleWidth;\n        var tooltipEleHeight;\n        var arrowEle;\n        var tipAdjust;\n        var tipHeightAdjust;\n        var tipWidthAdjust;\n        if (xScalingFactor !== 1 || yScalingFactor !== 1) {\n            var tooltipEleRect = this.tooltipEle.getBoundingClientRect();\n            var arrowEleRect = void 0;\n            tooltipEleWidth = Math.round(tooltipEleRect.width);\n            tooltipEleHeight = Math.round(tooltipEleRect.height);\n            arrowEle = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.select)('.' + ARROW_TIP, this.tooltipEle);\n            if (arrowEle) {\n                arrowEleRect = arrowEle.getBoundingClientRect();\n            }\n            tipWidth = arrowEle ? Math.round(arrowEleRect.width) : 0;\n            tipHeight = arrowEle ? Math.round(arrowEleRect.height) : 0;\n            tipAdjust = (this.showTipPointer ? SHOW_POINTER_TIP_GAP : HIDE_POINTER_TIP_GAP);\n            tipHeightAdjust = (tipHeight / 2) + POINTER_ADJUST + (tooltipEleHeight - (this.tooltipEle.clientHeight * yScalingFactor));\n            tipWidthAdjust = (tipWidth / 2) + POINTER_ADJUST + (tooltipEleWidth - (this.tooltipEle.clientWidth * xScalingFactor));\n        }\n        else {\n            tooltipEleWidth = this.tooltipEle.offsetWidth;\n            tooltipEleHeight = this.tooltipEle.offsetHeight;\n            arrowEle = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.select)('.' + ARROW_TIP, this.tooltipEle);\n            tipWidth = arrowEle ? arrowEle.offsetWidth : 0;\n            tipHeight = arrowEle ? arrowEle.offsetHeight : 0;\n            tipAdjust = (this.showTipPointer ? SHOW_POINTER_TIP_GAP : HIDE_POINTER_TIP_GAP);\n            tipHeightAdjust = (tipHeight / 2) + POINTER_ADJUST + (this.tooltipEle.offsetHeight - this.tooltipEle.clientHeight);\n            tipWidthAdjust = (tipWidth / 2) + POINTER_ADJUST + (this.tooltipEle.offsetWidth - this.tooltipEle.clientWidth);\n        }\n        if (this.mouseTrail) {\n            tipAdjust += MOUSE_TRAIL_GAP;\n        }\n        switch (position) {\n            case 'RightTop':\n                pos.left += tipWidth + tipAdjust;\n                pos.top -= tooltipEleHeight - tipHeightAdjust;\n                break;\n            case 'RightCenter':\n                pos.left += tipWidth + tipAdjust;\n                pos.top -= (tooltipEleHeight / 2);\n                break;\n            case 'RightBottom':\n                pos.left += tipWidth + tipAdjust;\n                pos.top -= (tipHeightAdjust);\n                break;\n            case 'BottomRight':\n                pos.top += (tipHeight + tipAdjust);\n                pos.left -= (tipWidthAdjust);\n                break;\n            case 'BottomCenter':\n                pos.top += (tipHeight + tipAdjust);\n                pos.left -= (tooltipEleWidth / 2);\n                break;\n            case 'BottomLeft':\n                pos.top += (tipHeight + tipAdjust);\n                pos.left -= (tooltipEleWidth - tipWidthAdjust);\n                break;\n            case 'LeftBottom':\n                pos.left -= (tipWidth + tooltipEleWidth + tipAdjust);\n                pos.top -= (tipHeightAdjust);\n                break;\n            case 'LeftCenter':\n                pos.left -= (tipWidth + tooltipEleWidth + tipAdjust);\n                pos.top -= (tooltipEleHeight / 2);\n                break;\n            case 'LeftTop':\n                pos.left -= (tipWidth + tooltipEleWidth + tipAdjust);\n                pos.top -= (tooltipEleHeight - tipHeightAdjust);\n                break;\n            case 'TopLeft':\n                pos.top -= (tooltipEleHeight + tipHeight + tipAdjust);\n                pos.left -= (tooltipEleWidth - tipWidthAdjust);\n                break;\n            case 'TopRight':\n                pos.top -= (tooltipEleHeight + tipHeight + tipAdjust);\n                pos.left -= (tipWidthAdjust);\n                break;\n            default:\n                pos.top -= (tooltipEleHeight + tipHeight + tipAdjust);\n                pos.left -= (tooltipEleWidth / 2);\n                break;\n        }\n        pos.left += this.offsetX;\n        pos.top += this.offsetY;\n        return pos;\n    };\n    Tooltip.prototype.updateTipPosition = function (position) {\n        var selEle = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.selectAll)('.' + ARROW_TIP + ',.' + ARROW_TIP_OUTER + ',.' + ARROW_TIP_INNER, this.tooltipEle);\n        var removeList = [TIP_BOTTOM, TIP_TOP, TIP_LEFT, TIP_RIGHT];\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.removeClass)(selEle, removeList);\n        this.setTipClass(position);\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.addClass)(selEle, this.tipClass);\n    };\n    Tooltip.prototype.adjustArrow = function (target, position, tooltipPositionX, tooltipPositionY) {\n        var arrowEle = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.select)('.' + ARROW_TIP, this.tooltipEle);\n        if (this.showTipPointer === false || arrowEle === null) {\n            return;\n        }\n        this.updateTipPosition(position);\n        var leftValue;\n        var topValue;\n        this.tooltipEle.style.display = 'block';\n        var tooltipWidth = this.tooltipEle.clientWidth;\n        var tooltipHeight = this.tooltipEle.clientHeight;\n        var arrowInnerELe = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.select)('.' + ARROW_TIP_INNER, this.tooltipEle);\n        var tipWidth = arrowEle.offsetWidth;\n        var tipHeight = arrowEle.offsetHeight;\n        this.tooltipEle.style.display = '';\n        if (this.tipClass === TIP_BOTTOM || this.tipClass === TIP_TOP) {\n            if (this.tipClass === TIP_BOTTOM) {\n                topValue = '99.9%';\n                // Arrow icon aligned -2px height from ArrowOuterTip div\n                arrowInnerELe.style.top = '-' + (tipHeight - 2) + 'px';\n            }\n            else {\n                topValue = -(tipHeight - 1) + 'px';\n                // Arrow icon aligned -6px height from ArrowOuterTip div\n                arrowInnerELe.style.top = '-' + (tipHeight - 6) + 'px';\n            }\n            if (target) {\n                var tipPosExclude = tooltipPositionX !== 'Center' || (tooltipWidth > target.offsetWidth) || this.mouseTrail;\n                if ((tipPosExclude && tooltipPositionX === 'Left') || (!tipPosExclude && this.tipPointerPosition === 'End')) {\n                    leftValue = (tooltipWidth - tipWidth - POINTER_ADJUST) + 'px';\n                }\n                else if ((tipPosExclude && tooltipPositionX === 'Right') || (!tipPosExclude && this.tipPointerPosition === 'Start')) {\n                    leftValue = POINTER_ADJUST + 'px';\n                }\n                else if ((tipPosExclude) && (this.tipPointerPosition === 'End' || this.tipPointerPosition === 'Start')) {\n                    leftValue = (this.tipPointerPosition === 'End') ? ((target.offsetWidth + ((this.tooltipEle.offsetWidth - target.offsetWidth) / 2)) - (tipWidth / 2)) - POINTER_ADJUST + 'px'\n                        : ((this.tooltipEle.offsetWidth - target.offsetWidth) / 2) - (tipWidth / 2) + POINTER_ADJUST + 'px';\n                }\n                else {\n                    leftValue = ((tooltipWidth / 2) - (tipWidth / 2)) + 'px';\n                }\n            }\n        }\n        else {\n            if (this.tipClass === TIP_RIGHT) {\n                leftValue = '99.9%';\n                // Arrow icon aligned -2px left from ArrowOuterTip div\n                arrowInnerELe.style.left = '-' + (tipWidth - 2) + 'px';\n            }\n            else {\n                leftValue = -(tipWidth - 1) + 'px';\n                // Arrow icon aligned -2px from ArrowOuterTip width\n                arrowInnerELe.style.left = (-(tipWidth) + (tipWidth - 2)) + 'px';\n            }\n            var tipPosExclude = tooltipPositionY !== 'Center' || (tooltipHeight > target.offsetHeight) || this.mouseTrail;\n            if ((tipPosExclude && tooltipPositionY === 'Top') || (!tipPosExclude && this.tipPointerPosition === 'End')) {\n                topValue = (tooltipHeight - tipHeight - POINTER_ADJUST) + 'px';\n            }\n            else if ((tipPosExclude && tooltipPositionY === 'Bottom') || (!tipPosExclude && this.tipPointerPosition === 'Start')) {\n                topValue = POINTER_ADJUST + 'px';\n            }\n            else {\n                topValue = ((tooltipHeight / 2) - (tipHeight / 2)) + 'px';\n            }\n        }\n        arrowEle.style.top = topValue;\n        arrowEle.style.left = leftValue;\n    };\n    Tooltip.prototype.renderContent = function (target) {\n        var _this = this;\n        var tooltipContent = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.select)('.' + CONTENT, this.tooltipEle);\n        if (this.cssClass) {\n            (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.addClass)([this.tooltipEle], this.cssClass.split(' '));\n        }\n        if (target && !(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(target.getAttribute('title'))) {\n            target.setAttribute('data-content', target.getAttribute('title'));\n            target.removeAttribute('title');\n        }\n        if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(this.content)) {\n            tooltipContent.innerHTML = '';\n            if (this.content instanceof HTMLElement) {\n                tooltipContent.appendChild(this.content);\n            }\n            else if (typeof this.content === 'string') {\n                if (this.isAngular) {\n                    this.setProperties({ content: _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.SanitizeHtmlHelper.sanitize(this.content) }, true);\n                }\n                else {\n                    this.content = (this.enableHtmlSanitizer) ? _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.SanitizeHtmlHelper.sanitize(this.content) : this.content;\n                }\n                if (this.enableHtmlParse) {\n                    var tempFunction = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.compile)(this.content);\n                    var tempArr = tempFunction({}, this, 'content', this.element.id + 'content', undefined, undefined, tooltipContent, this.root);\n                    if (tempArr) {\n                        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.append)(tempArr, tooltipContent);\n                    }\n                }\n                else {\n                    tooltipContent['textContent'] = this.content;\n                }\n            }\n            else {\n                var templateFunction = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.compile)(this.content);\n                var tempArr = templateFunction({}, this, 'content', this.element.id + 'content', undefined, undefined, tooltipContent);\n                if (tempArr) {\n                    if (this.isAngular) {\n                        setTimeout(function () {\n                            _this.reposition(target);\n                        }, 1);\n                    }\n                    (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.append)(tempArr, tooltipContent);\n                }\n                this.renderReactTemplates();\n            }\n        }\n        else {\n            if (target && !(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(target.getAttribute('data-content'))) {\n                tooltipContent.innerHTML = target.getAttribute('data-content');\n            }\n        }\n    };\n    Tooltip.prototype.renderCloseIcon = function () {\n        if (!this.isSticky) {\n            var existingCloseIcon = this.tooltipEle.querySelector('.' + ICON + '.' + CLOSE);\n            if (existingCloseIcon) {\n                (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.remove)(existingCloseIcon);\n            }\n            return;\n        }\n        var tipClose = this.createElement('div', { className: ICON + ' ' + CLOSE, attrs: { role: 'button', 'aria-label': 'Press escape to close the Tooltip' } });\n        this.tooltipEle.appendChild(tipClose);\n        _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.EventHandler.add(tipClose, _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Browser.touchStartEvent, this.onStickyClose, this);\n    };\n    Tooltip.prototype.addDescribedBy = function (target, id) {\n        var describedby = (target.getAttribute('aria-describedby') || '').split(/\\s+/);\n        if (describedby.indexOf(id) < 0) {\n            describedby.push(id);\n        }\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.attributes)(target, { 'aria-describedby': describedby.join(' ').trim(), 'data-tooltip-id': id });\n    };\n    Tooltip.prototype.removeDescribedBy = function (target) {\n        var id = target.getAttribute('data-tooltip-id');\n        var describedby = (target.getAttribute('aria-describedby') || '').split(/\\s+/);\n        var index = describedby.indexOf(id);\n        if (index !== -1) {\n            describedby.splice(index, 1);\n        }\n        target.removeAttribute('data-tooltip-id');\n        var orgdescribedby = describedby.join(' ').trim();\n        if (orgdescribedby) {\n            target.setAttribute('aria-describedby', orgdescribedby);\n        }\n        else {\n            target.removeAttribute('aria-describedby');\n        }\n    };\n    Tooltip.prototype.tapHoldHandler = function (evt) {\n        clearTimeout(this.autoCloseTimer);\n        this.targetHover(evt.originalEvent);\n    };\n    Tooltip.prototype.touchEndHandler = function () {\n        var _this = this;\n        if (this.isSticky) {\n            return;\n        }\n        var close = function () {\n            _this.close();\n        };\n        this.autoCloseTimer = setTimeout(close, TOUCHEND_HIDE_DELAY);\n    };\n    Tooltip.prototype.targetClick = function (e) {\n        var target;\n        if (this.target) {\n            target = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.closest)(e.target, this.target);\n        }\n        else {\n            target = this.element;\n        }\n        if ((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(target)) {\n            return;\n        }\n        var mouseEvent = e;\n        if (target.getAttribute('data-tooltip-id') === null) {\n            if (!(mouseEvent.type === 'mousedown' && mouseEvent.button === 2)) {\n                this.targetHover(e);\n            }\n        }\n        else if (!this.isSticky) {\n            this.hideTooltip(this.animation.close, e, target);\n        }\n    };\n    Tooltip.prototype.targetHover = function (e) {\n        var target;\n        if (this.target) {\n            target = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.closest)(e.target, this.target);\n        }\n        else {\n            target = this.element;\n        }\n        if ((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(target) || (target.getAttribute('data-tooltip-id') !== null && this.closeDelay === 0)) {\n            return;\n        }\n        if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(this.tooltipEle) && this.tooltipEle.getAttribute('e-animation-id')) {\n            _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Animation.stop(this.tooltipEle);\n            this.clear();\n        }\n        var targetList = [].slice.call((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.selectAll)('[data-tooltip-id= \"' + this.ctrlId + '_content\"]', document));\n        for (var _i = 0, targetList_1 = targetList; _i < targetList_1.length; _i++) {\n            var target_1 = targetList_1[_i];\n            this.restoreElement(target_1);\n        }\n        this.showTooltip(target, this.animation.open, e);\n    };\n    Tooltip.prototype.mouseMoveBeforeOpen = function (e) {\n        this.mouseMoveEvent = e;\n    };\n    Tooltip.prototype.mouseMoveBeforeRemove = function () {\n        if (this.mouseMoveTarget) {\n            _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.EventHandler.remove(this.mouseMoveTarget, 'mousemove touchstart', this.mouseMoveBeforeOpen);\n        }\n    };\n    Tooltip.prototype.showTooltip = function (target, showAnimation, e) {\n        var _this = this;\n        clearTimeout(this.showTimer);\n        clearTimeout(this.hideTimer);\n        if (this.openDelay && this.mouseTrail) {\n            this.mouseMoveBeforeRemove();\n            this.mouseMoveTarget = target;\n            _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.EventHandler.add(this.mouseMoveTarget, 'mousemove touchstart', this.mouseMoveBeforeOpen, this);\n        }\n        this.tooltipEventArgs = {\n            type: e ? e.type : null, cancel: false, target: target, event: e ? e : null,\n            element: this.tooltipEle, isInteracted: !(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(e)\n        };\n        var observeCallback = function (beforeRenderArgs) {\n            _this.beforeRenderCallback(beforeRenderArgs, target, e, showAnimation);\n        };\n        this.trigger('beforeRender', this.tooltipEventArgs, observeCallback.bind(this));\n    };\n    Tooltip.prototype.beforeRenderCallback = function (beforeRenderArgs, target, e, showAnimation) {\n        if (beforeRenderArgs.cancel) {\n            this.isHidden = true;\n            this.clear();\n            this.mouseMoveBeforeRemove();\n        }\n        else {\n            this.isHidden = false;\n            if ((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(this.tooltipEle)) {\n                this.ctrlId = this.element.getAttribute('id') ?\n                    (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.getUniqueID)(this.element.getAttribute('id')) : (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.getUniqueID)('tooltip');\n                this.tooltipEle = this.createElement('div', {\n                    className: TOOLTIP_WRAP + ' ' + POPUP_ROOT + ' ' + POPUP_LIB, attrs: {\n                        role: 'tooltip', 'aria-hidden': 'false', 'id': this.ctrlId + '_content'\n                    }\n                });\n                this.tooltipEle.style.width = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.formatUnit)(this.width);\n                this.tooltipEle.style.height = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.formatUnit)(this.height);\n                this.tooltipEle.style.position = 'absolute';\n                this.tooltipBeforeRender(target, this);\n                this.tooltipAfterRender(target, e, showAnimation, this);\n            }\n            else {\n                if (target) {\n                    this.adjustArrow(target, this.position, this.tooltipPositionX, this.tooltipPositionY);\n                    this.addDescribedBy(target, this.ctrlId + '_content');\n                    this.renderContent(target);\n                    _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Animation.stop(this.tooltipEle);\n                    this.reposition(target);\n                    this.tooltipAfterRender(target, e, showAnimation, this);\n                }\n            }\n        }\n    };\n    Tooltip.prototype.appendContainer = function (ctrlObj) {\n        if (typeof this.container == 'string') {\n            if (this.container === 'body') {\n                this.containerElement = document.body;\n            }\n            else {\n                this.isBodyContainer = false;\n                this.containerElement = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.select)(this.container, document);\n            }\n        }\n        else if (this.container instanceof HTMLElement) {\n            this.containerElement = this.container;\n            this.isBodyContainer = this.containerElement.tagName === 'BODY';\n        }\n        if (!this.isBodyContainer) {\n            (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.addClass)([this.containerElement], POPUP_CONTAINER);\n        }\n        this.containerElement.appendChild(ctrlObj.tooltipEle);\n    };\n    Tooltip.prototype.tooltipBeforeRender = function (target, ctrlObj) {\n        if (target) {\n            if (_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Browser.isDevice) {\n                (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.addClass)([ctrlObj.tooltipEle], DEVICE);\n            }\n            if (ctrlObj.width !== 'auto') {\n                ctrlObj.tooltipEle.style.maxWidth = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.formatUnit)(ctrlObj.width);\n            }\n            ctrlObj.tooltipEle.appendChild(ctrlObj.createElement('div', { className: CONTENT }));\n            this.appendContainer(ctrlObj);\n            (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.removeClass)([ctrlObj.tooltipEle], HIDE_POPUP);\n            ctrlObj.addDescribedBy(target, ctrlObj.ctrlId + '_content');\n            ctrlObj.renderContent(target);\n            (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.addClass)([ctrlObj.tooltipEle], POPUP_OPEN);\n            if (ctrlObj.showTipPointer) {\n                ctrlObj.renderArrow();\n            }\n            ctrlObj.renderCloseIcon();\n            ctrlObj.renderPopup(target);\n            ctrlObj.adjustArrow(target, ctrlObj.position, ctrlObj.tooltipPositionX, ctrlObj.tooltipPositionY);\n            _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Animation.stop(ctrlObj.tooltipEle);\n            ctrlObj.reposition(target);\n        }\n    };\n    Tooltip.prototype.tooltipAfterRender = function (target, e, showAnimation, ctrlObj) {\n        if (target) {\n            (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.removeClass)([ctrlObj.tooltipEle], POPUP_OPEN);\n            (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.addClass)([ctrlObj.tooltipEle], POPUP_CLOSE);\n            ctrlObj.tooltipEventArgs = {\n                type: e ? e.type : null, cancel: false, target: target, event: e ? e : null,\n                element: ctrlObj.tooltipEle, isInteracted: !(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(e)\n            };\n            if (ctrlObj.needTemplateReposition() && !ctrlObj.mouseTrail && (showAnimation.effect === 'None' || showAnimation.effect === 'FadeIn' ||\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                (this.isReact && typeof ctrlObj.content != 'string'))) {\n                ctrlObj.tooltipEle.style.display = 'none';\n            }\n            var observeCallback = function (observedArgs) {\n                ctrlObj.beforeOpenCallback(observedArgs, target, showAnimation, e);\n            };\n            ctrlObj.trigger('beforeOpen', ctrlObj.tooltipEventArgs, observeCallback.bind(ctrlObj));\n        }\n    };\n    Tooltip.prototype.beforeOpenCallback = function (observedArgs, target, showAnimation, e) {\n        var _this = this;\n        if (observedArgs.cancel) {\n            this.isHidden = true;\n            this.clear();\n            this.mouseMoveBeforeRemove();\n            this.restoreElement(target);\n        }\n        else {\n            var openAnimation_1 = {\n                name: (showAnimation.effect === 'None' && _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.animationMode === 'Enable') ? 'FadeIn' : this.animation.open.effect,\n                duration: showAnimation.duration,\n                delay: showAnimation.delay,\n                timingFunction: 'easeOut'\n            };\n            if (showAnimation.effect === 'None') {\n                openAnimation_1 = undefined;\n            }\n            if (this.openDelay > 0) {\n                var show = function () {\n                    if (_this.mouseTrail) {\n                        _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.EventHandler.add(target, 'mousemove touchstart mouseenter', _this.onMouseMove, _this);\n                    }\n                    if (_this.popupObj) {\n                        _this.popupObj.show(openAnimation_1, target);\n                        if (_this.mouseMoveEvent && _this.mouseTrail) {\n                            _this.onMouseMove(_this.mouseMoveEvent);\n                        }\n                    }\n                };\n                this.showTimer = setTimeout(show, this.openDelay);\n            }\n            else {\n                if (this.popupObj) {\n                    this.popupObj.show(openAnimation_1, target);\n                }\n            }\n        }\n        if (e) {\n            this.wireMouseEvents(e, target);\n        }\n    };\n    Tooltip.prototype.needTemplateReposition = function () {\n        // eslint-disable-next-line\n        var tooltip = this;\n        return !(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(tooltip.viewContainerRef)\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            && typeof tooltip.viewContainerRef !== 'string' || this.isReact;\n    };\n    Tooltip.prototype.checkCollision = function (target, x, y) {\n        var elePos = {\n            left: x, top: y, position: this.position,\n            horizontal: this.tooltipPositionX, vertical: this.tooltipPositionY\n        };\n        var affectedPos = (0,_common_collision__WEBPACK_IMPORTED_MODULE_3__.isCollide)(this.tooltipEle, this.checkCollideTarget(), x, y);\n        if (affectedPos.length > 0) {\n            elePos.horizontal = affectedPos.indexOf('left') >= 0 ? 'Right' : affectedPos.indexOf('right') >= 0 ? 'Left' :\n                this.tooltipPositionX;\n            elePos.vertical = affectedPos.indexOf('top') >= 0 ? 'Bottom' : affectedPos.indexOf('bottom') >= 0 ? 'Top' :\n                this.tooltipPositionY;\n        }\n        return elePos;\n    };\n    Tooltip.prototype.calculateElementPosition = function (pos, offsetPos) {\n        return [this.isBodyContainer ? pos.left + offsetPos.left :\n                (pos.left - this.containerElement.getBoundingClientRect().left) +\n                    offsetPos.left + window.pageXOffset + this.containerElement.scrollLeft,\n            this.isBodyContainer ? pos.top + offsetPos.top :\n                (pos.top - this.containerElement.getBoundingClientRect().top) +\n                    offsetPos.top + window.pageYOffset + this.containerElement.scrollTop];\n    };\n    Tooltip.prototype.collisionFlipFit = function (target, x, y) {\n        var elePos = this.checkCollision(target, x, y);\n        var newpos = elePos.position;\n        if (this.tooltipPositionY !== elePos.vertical) {\n            newpos = ((this.position.indexOf('Bottom') === 0 || this.position.indexOf('Top') === 0) ?\n                elePos.vertical + this.tooltipPositionX : this.tooltipPositionX + elePos.vertical);\n        }\n        if (this.tooltipPositionX !== elePos.horizontal) {\n            if (newpos.indexOf('Left') === 0) {\n                elePos.vertical = (newpos === 'LeftTop' || newpos === 'LeftCenter') ? 'Top' : 'Bottom';\n                newpos = (elePos.vertical + 'Left');\n            }\n            if (newpos.indexOf('Right') === 0) {\n                elePos.vertical = (newpos === 'RightTop' || newpos === 'RightCenter') ? 'Top' : 'Bottom';\n                newpos = (elePos.vertical + 'Right');\n            }\n            elePos.horizontal = this.tooltipPositionX;\n        }\n        this.tooltipEventArgs = {\n            type: null, cancel: false, target: target, event: null,\n            element: this.tooltipEle, collidedPosition: newpos\n        };\n        this.trigger('beforeCollision', this.tooltipEventArgs);\n        if (this.tooltipEventArgs.cancel) {\n            newpos = this.position;\n        }\n        else {\n            var elePosVertical = elePos.vertical;\n            var elePosHorizontal = elePos.horizontal;\n            if (elePos.position !== newpos) {\n                var pos = (0,_common_position__WEBPACK_IMPORTED_MODULE_2__.calculatePosition)(target, elePosHorizontal, elePosVertical, !this.isBodyContainer, this.isBodyContainer ? null : this.containerElement.getBoundingClientRect());\n                this.adjustArrow(target, newpos, elePosHorizontal, elePosVertical);\n                var scalingFactors = this.getScalingFactor(target);\n                var offsetPos = this.calculateTooltipOffset(newpos, scalingFactors.x, scalingFactors.y);\n                offsetPos.top -= this.getOffSetPosition('TopBottom', newpos, this.offsetY);\n                offsetPos.left -= this.getOffSetPosition('RightLeft', newpos, this.offsetX);\n                elePos.position = newpos;\n                var elePosition = this.calculateElementPosition(pos, offsetPos);\n                elePos.left = elePosition[0];\n                elePos.top = elePosition[1];\n            }\n            else {\n                this.adjustArrow(target, newpos, elePosHorizontal, elePosVertical);\n            }\n        }\n        var eleOffset = { left: elePos.left, top: elePos.top };\n        var position = this.isBodyContainer ?\n            (0,_common_collision__WEBPACK_IMPORTED_MODULE_3__.fit)(this.tooltipEle, this.checkCollideTarget(), { X: true, Y: this.windowCollision }, eleOffset) : eleOffset;\n        this.tooltipEle.style.display = 'block';\n        var arrowEle = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.select)('.' + ARROW_TIP, this.tooltipEle);\n        if (this.showTipPointer && arrowEle != null && (newpos.indexOf('Bottom') === 0 || newpos.indexOf('Top') === 0)) {\n            var arrowleft = parseInt(arrowEle.style.left, 10) - (position.left - elePos.left);\n            if (arrowleft < 0) {\n                arrowleft = 0;\n            }\n            else if ((arrowleft + arrowEle.offsetWidth) > this.tooltipEle.clientWidth) {\n                arrowleft = this.tooltipEle.clientWidth - arrowEle.offsetWidth;\n            }\n            arrowEle.style.left = arrowleft.toString() + 'px';\n        }\n        this.tooltipEle.style.display = '';\n        eleOffset.left = position.left;\n        eleOffset.top = position.top;\n        return eleOffset;\n    };\n    Tooltip.prototype.getOffSetPosition = function (positionString, newPos, offsetType) {\n        return ((positionString.indexOf(this.position.split(/(?=[A-Z])/)[0]) !== -1) &&\n            (positionString.indexOf(newPos.split(/(?=[A-Z])/)[0]) !== -1)) ? (2 * offsetType) : 0;\n    };\n    Tooltip.prototype.checkCollideTarget = function () {\n        return !this.windowCollision && this.target ? this.element : null;\n    };\n    Tooltip.prototype.hideTooltip = function (hideAnimation, e, targetElement) {\n        var _this = this;\n        if (this.closeDelay > 0) {\n            clearTimeout(this.hideTimer);\n            clearTimeout(this.showTimer);\n            var hide = function () {\n                if (_this.closeDelay && _this.tooltipEle && _this.isTooltipOpen) {\n                    return;\n                }\n                _this.tooltipHide(hideAnimation, e, targetElement);\n            };\n            this.hideTimer = setTimeout(hide, this.closeDelay);\n        }\n        else {\n            this.tooltipHide(hideAnimation, e, targetElement);\n        }\n    };\n    Tooltip.prototype.tooltipHide = function (hideAnimation, e, targetElement) {\n        var _this = this;\n        var target;\n        if (e) {\n            target = this.target ? (targetElement || e.target) : this.element;\n        }\n        else {\n            target = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.select)('[data-tooltip-id= \"' + this.ctrlId + '_content\"]', document);\n        }\n        this.tooltipEventArgs = {\n            type: e ? e.type : null, cancel: false, target: target, event: e ? e : null,\n            element: this.tooltipEle, isInteracted: !(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(e)\n        };\n        // this line commented for close the tooltip popup element even the target element destroyed in a page.\n        //if (isNullOrUndefined(target)) { return; }\n        this.trigger('beforeClose', this.tooltipEventArgs, function (observedArgs) {\n            if (!observedArgs.cancel) {\n                _this.mouseMoveBeforeRemove();\n                _this.popupHide(hideAnimation, target, e);\n            }\n            else {\n                _this.isHidden = false;\n            }\n        });\n    };\n    Tooltip.prototype.popupHide = function (hideAnimation, target, e) {\n        if (target && e) {\n            this.restoreElement(target);\n        }\n        this.isHidden = true;\n        var closeAnimation = {\n            name: (hideAnimation.effect === 'None' && _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.animationMode === 'Enable') ? 'FadeOut' : this.animation.close.effect,\n            duration: hideAnimation.duration,\n            delay: hideAnimation.delay,\n            timingFunction: 'easeIn'\n        };\n        if (hideAnimation.effect === 'None') {\n            closeAnimation = undefined;\n        }\n        if (this.popupObj) {\n            this.popupObj.hide(closeAnimation);\n        }\n    };\n    Tooltip.prototype.restoreElement = function (target) {\n        this.unwireMouseEvents(target);\n        if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(target.getAttribute('data-content'))) {\n            target.setAttribute('title', target.getAttribute('data-content'));\n            target.removeAttribute('data-content');\n        }\n        this.removeDescribedBy(target);\n    };\n    Tooltip.prototype.clear = function () {\n        var target = this.findTarget();\n        if (target) {\n            this.restoreElement(target);\n        }\n        if (this.tooltipEle) {\n            (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.removeClass)([this.tooltipEle], POPUP_CLOSE);\n            (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.addClass)([this.tooltipEle], POPUP_OPEN);\n        }\n        if (this.isHidden) {\n            if (this.popupObj) {\n                this.popupObj.destroy();\n            }\n            if (this.tooltipEle) {\n                (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.remove)(this.tooltipEle);\n            }\n            this.tooltipEle = null;\n            this.popupObj = null;\n        }\n    };\n    Tooltip.prototype.tooltipHover = function () {\n        if (this.tooltipEle) {\n            this.isTooltipOpen = true;\n        }\n    };\n    Tooltip.prototype.tooltipMouseOut = function (e) {\n        this.isTooltipOpen = false;\n        this.hideTooltip(this.animation.close, e, this.findTarget());\n    };\n    Tooltip.prototype.onMouseOut = function (e) {\n        var enteredElement = e.relatedTarget;\n        // don't close the tooltip only if it is tooltip content element\n        if (enteredElement && !this.mouseTrail) {\n            var checkForTooltipElement = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.closest)(enteredElement, \".\" + TOOLTIP_WRAP + \".\" + POPUP_LIB + \".\" + POPUP_ROOT);\n            if (checkForTooltipElement) {\n                _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.EventHandler.add(checkForTooltipElement, 'mouseleave', this.tooltipElementMouseOut, this);\n            }\n            else {\n                this.hideTooltip(this.animation.close, e, this.findTarget());\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                if (this.closeDelay === 0 && (this.animation.close.effect === 'None' || (this.isReact && typeof this.content != 'string'))) {\n                    this.clear();\n                }\n            }\n        }\n        else {\n            this.hideTooltip(this.animation.close, e, this.findTarget());\n            this.clear();\n        }\n        if (this.popupObj && !this.popupObj.element.classList.contains(POPUP_OPEN)) {\n            this.clear();\n        }\n    };\n    Tooltip.prototype.tooltipElementMouseOut = function (e) {\n        this.hideTooltip(this.animation.close, e, this.findTarget());\n        _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.EventHandler.remove(this.element, 'mouseleave', this.tooltipElementMouseOut);\n        this.clear();\n    };\n    Tooltip.prototype.onStickyClose = function () {\n        this.close();\n    };\n    Tooltip.prototype.onMouseMove = function (event) {\n        var eventPageX = 0;\n        var eventPageY = 0;\n        if (event.type.indexOf('touch') > -1) {\n            event.preventDefault();\n            eventPageX = event.touches[0].pageX;\n            eventPageY = event.touches[0].pageY;\n        }\n        else {\n            eventPageX = event.pageX;\n            eventPageY = event.pageY;\n        }\n        if ((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(this.tooltipEle)) {\n            return;\n        }\n        _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Animation.stop(this.tooltipEle);\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.removeClass)([this.tooltipEle], POPUP_CLOSE);\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.addClass)([this.tooltipEle], POPUP_OPEN);\n        this.adjustArrow(event.target, this.position, this.tooltipPositionX, this.tooltipPositionY);\n        var scalingFactors = this.getScalingFactor(event.target);\n        var pos = this.calculateTooltipOffset(this.position, scalingFactors.x, scalingFactors.y);\n        var x = eventPageX + pos.left + this.offsetX;\n        var y = eventPageY + pos.top + this.offsetY;\n        var elePos = this.checkCollision(event.target, x, y);\n        if (this.tooltipPositionX !== elePos.horizontal || this.tooltipPositionY !== elePos.vertical) {\n            var newpos = (this.position.indexOf('Bottom') === 0 || this.position.indexOf('Top') === 0) ?\n                elePos.vertical + elePos.horizontal : elePos.horizontal + elePos.vertical;\n            elePos.position = newpos;\n            this.adjustArrow(event.target, elePos.position, elePos.horizontal, elePos.vertical);\n            var colpos = this.calculateTooltipOffset(elePos.position, scalingFactors.x, scalingFactors.y);\n            elePos.left = eventPageX + colpos.left - this.offsetX;\n            elePos.top = eventPageY + colpos.top - this.offsetY;\n        }\n        this.tooltipEle.style.left = elePos.left + 'px';\n        this.tooltipEle.style.top = elePos.top + 'px';\n    };\n    Tooltip.prototype.keyDown = function (event) {\n        if (this.tooltipEle && event.keyCode === 27) {\n            this.close();\n        }\n    };\n    Tooltip.prototype.touchEnd = function (e) {\n        if (this.tooltipEle && (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.closest)(e.target, '.' + ROOT) === null && !this.isSticky) {\n            this.close();\n        }\n    };\n    Tooltip.prototype.scrollHandler = function (e) {\n        if (this.tooltipEle && !this.isSticky) {\n            if (!((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.closest)(e.target, \".\" + TOOLTIP_WRAP + \".\" + POPUP_LIB + \".\" + POPUP_ROOT))\n                && !this.isSticky) {\n                this.close();\n            }\n        }\n    };\n    /**\n     * Core method that initializes the control rendering.\n     *\n     * @private\n     * @returns {void}\n     */\n    Tooltip.prototype.render = function () {\n        this.initialize();\n        this.wireEvents(this.opensOn);\n        this.renderComplete();\n    };\n    /**\n     * Initializes the values of private members.\n     *\n     * @private\n     * @returns {void}\n     */\n    Tooltip.prototype.preRender = function () {\n        this.tipClass = TIP_BOTTOM;\n        this.tooltipPositionX = 'Center';\n        this.tooltipPositionY = 'Top';\n        this.isHidden = true;\n    };\n    /**\n     * Binding events to the Tooltip element.\n     *\n     * @hidden\n     * @param {string} trigger - specify the trigger string to the function\n     * @returns {void}\n     *\n     */\n    Tooltip.prototype.wireEvents = function (trigger) {\n        var triggerList = this.getTriggerList(trigger);\n        for (var _i = 0, triggerList_1 = triggerList; _i < triggerList_1.length; _i++) {\n            var opensOn = triggerList_1[_i];\n            if (opensOn === 'Custom') {\n                return;\n            }\n            if (opensOn === 'Focus') {\n                this.wireFocusEvents();\n            }\n            if (opensOn === 'Click') {\n                _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.EventHandler.add(this.element, _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Browser.touchStartEvent, this.targetClick, this);\n            }\n            if (opensOn === 'Hover') {\n                if (_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Browser.isDevice) {\n                    this.touchModule = new _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Touch(this.element, {\n                        tapHoldThreshold: TAPHOLD_THRESHOLD,\n                        tapHold: this.tapHoldHandler.bind(this)\n                    });\n                    _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.EventHandler.add(this.element, _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Browser.touchEndEvent, this.touchEndHandler, this);\n                }\n                else {\n                    _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.EventHandler.add(this.element, 'mouseover', this.targetHover, this);\n                }\n            }\n        }\n        this.windowResizeBound = this.windowResize.bind(this);\n        this.keyDownBound = this.keyDown.bind(this);\n        this.touchEndBound = this.touchEnd.bind(this);\n        this.scrollWheelBound = this.scrollHandler.bind(this);\n        document.addEventListener('wheel', this.scrollWheelBound);\n        document.addEventListener('scroll', this.scrollWheelBound);\n        document.addEventListener('touchend', this.touchEndBound);\n        document.addEventListener('keydown', this.keyDownBound);\n        window.addEventListener('resize', this.windowResizeBound);\n    };\n    Tooltip.prototype.getTriggerList = function (trigger) {\n        if (!trigger) {\n            return [];\n        }\n        if (trigger === 'Auto') {\n            trigger = (_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Browser.isDevice) ? 'Hover' : 'Hover Focus';\n        }\n        return trigger.split(' ');\n    };\n    Tooltip.prototype.wireFocusEvents = function () {\n        if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(this.target)) {\n            var targetList = [].slice.call((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.selectAll)(this.target, this.element));\n            this.targetsList = targetList;\n            if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(this.targetsList) && this.targetsList.length > 0) {\n                for (var _i = 0, targetList_2 = targetList; _i < targetList_2.length; _i++) {\n                    var target = targetList_2[_i];\n                    _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.EventHandler.add(target, 'focus', this.targetHover, this);\n                }\n            }\n            else {\n                _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.EventHandler.add(this.element, 'focusin', this.targetHover, this);\n            }\n        }\n        else {\n            _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.EventHandler.add(this.element, 'focusin', this.targetHover, this);\n        }\n    };\n    Tooltip.prototype.wireMouseEvents = function (e, target) {\n        if (this.tooltipEle) {\n            if (!this.isSticky) {\n                if (e.type === 'focus') {\n                    _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.EventHandler.add(target, 'blur', this.onMouseOut, this);\n                }\n                if (e.type === 'focusin') {\n                    _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.EventHandler.add(target, 'focusout', this.onMouseOut, this);\n                }\n                if (e.type === 'mouseover') {\n                    _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.EventHandler.add(target, 'mouseleave', this.onMouseOut, this);\n                }\n                if (this.closeDelay) {\n                    _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.EventHandler.add(this.tooltipEle, 'mouseenter', this.tooltipHover, this);\n                    _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.EventHandler.add(this.tooltipEle, 'mouseleave', this.tooltipMouseOut, this);\n                }\n            }\n            if (this.mouseTrail && this.openDelay === 0) {\n                _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.EventHandler.add(target, 'mousemove touchstart mouseenter', this.onMouseMove, this);\n            }\n        }\n    };\n    /**\n     * Unbinding events from the element on widget destroy.\n     *\n     * @hidden\n     *\n     * @param {string} trigger - specify the trigger string to the function\n     * @returns {void}\n     *\n     */\n    Tooltip.prototype.unwireEvents = function (trigger) {\n        var triggerList = this.getTriggerList(trigger);\n        for (var _i = 0, triggerList_2 = triggerList; _i < triggerList_2.length; _i++) {\n            var opensOn = triggerList_2[_i];\n            if (opensOn === 'Custom') {\n                return;\n            }\n            if (opensOn === 'Focus') {\n                this.unwireFocusEvents();\n            }\n            if (opensOn === 'Click') {\n                _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.EventHandler.remove(this.element, _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Browser.touchStartEvent, this.targetClick);\n            }\n            if (opensOn === 'Hover') {\n                if (_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Browser.isDevice) {\n                    if (this.touchModule) {\n                        this.touchModule.destroy();\n                    }\n                    _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.EventHandler.remove(this.element, _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Browser.touchEndEvent, this.touchEndHandler);\n                }\n                else {\n                    _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.EventHandler.remove(this.element, 'mouseover', this.targetHover);\n                }\n            }\n        }\n        document.removeEventListener('touchend', this.touchEndBound);\n        this.touchEndBound = null;\n        document.removeEventListener('wheel', this.scrollWheelBound);\n        document.removeEventListener('scroll', this.scrollWheelBound);\n        this.scrollWheelBound = null;\n        window.removeEventListener('resize', this.windowResizeBound);\n        this.windowResizeBound = null;\n        document.removeEventListener('keydown', this.keyDownBound);\n        this.keyDownBound = null;\n    };\n    Tooltip.prototype.unwireFocusEvents = function () {\n        if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(this.target)) {\n            var targetList = [].slice.call((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.selectAll)(this.target, this.element));\n            if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(this.targetsList) && this.targetsList.length > 0) {\n                for (var _i = 0, targetList_3 = targetList; _i < targetList_3.length; _i++) {\n                    var target = targetList_3[_i];\n                    _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.EventHandler.remove(target, 'focus', this.targetHover);\n                }\n            }\n            else {\n                _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.EventHandler.remove(this.element, 'focusin', this.targetHover);\n            }\n        }\n        else {\n            _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.EventHandler.remove(this.element, 'focusin', this.targetHover);\n        }\n    };\n    Tooltip.prototype.unwireMouseEvents = function (target) {\n        if (!this.isSticky) {\n            var triggerList = this.getTriggerList(this.opensOn);\n            for (var _i = 0, triggerList_3 = triggerList; _i < triggerList_3.length; _i++) {\n                var opensOn = triggerList_3[_i];\n                if (opensOn === 'Focus') {\n                    _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.EventHandler.remove(target, 'blur', this.onMouseOut);\n                    _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.EventHandler.remove(target, 'focusout', this.onMouseOut);\n                }\n                if (opensOn === 'Hover' && !_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Browser.isDevice) {\n                    _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.EventHandler.remove(target, 'mouseleave', this.onMouseOut);\n                }\n            }\n            if (this.closeDelay) {\n                _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.EventHandler.remove(target, 'mouseenter', this.tooltipHover);\n                _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.EventHandler.remove(target, 'mouseleave', this.tooltipMouseOut);\n            }\n        }\n        if (this.mouseTrail) {\n            _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.EventHandler.remove(target, 'mousemove touchstart mouseenter', this.onMouseMove);\n        }\n    };\n    Tooltip.prototype.findTarget = function () {\n        var target = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.select)('[data-tooltip-id= \"' + this.ctrlId + '_content\"]', document);\n        return target;\n    };\n    /**\n     * Core method to return the component name.\n     *\n     * @private\n     *\n     * @returns {string} - this method returns module name.\n     */\n    Tooltip.prototype.getModuleName = function () {\n        return 'tooltip';\n    };\n    /**\n     * Returns the properties to be maintained in the persisted state.\n     *\n     * @private\n     *\n     * @returns {string} - this method returns persisted data.\n     */\n    Tooltip.prototype.getPersistData = function () {\n        return this.addOnPersist([]);\n    };\n    /**\n     * Called internally, if any of the property value changed.\n     *\n     * @private\n     *\n     * @param {TooltipModel} newProp - this param gives new property values to the method\n     * @param {TooltipModel} oldProp - this param gives old property values to the method\n     * @returns {void}\n     *\n     */\n    Tooltip.prototype.onPropertyChanged = function (newProp, oldProp) {\n        var targetElement = this.findTarget();\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'width':\n                    if (this.tooltipEle && targetElement) {\n                        this.tooltipEle.style.width = this.tooltipEle.style.maxWidth = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.formatUnit)(newProp.width);\n                        this.reposition(targetElement);\n                    }\n                    break;\n                case 'height':\n                    if (this.tooltipEle && targetElement) {\n                        this.tooltipEle.style.height = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.formatUnit)(newProp.height);\n                        this.reposition(targetElement);\n                    }\n                    break;\n                case 'content':\n                    if (this.tooltipEle) {\n                        this.renderContent();\n                    }\n                    break;\n                case 'opensOn':\n                    this.unwireEvents(oldProp.opensOn);\n                    this.wireEvents(newProp.opensOn);\n                    break;\n                case 'position':\n                    this.formatPosition();\n                    if (this.tooltipEle && targetElement) {\n                        var arrowInnerELe = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.select)('.' + ARROW_TIP_INNER, this.tooltipEle);\n                        if (arrowInnerELe) {\n                            arrowInnerELe.style.top = arrowInnerELe.style.left = null;\n                        }\n                        this.reposition(targetElement);\n                    }\n                    break;\n                case 'tipPointerPosition':\n                    if (this.tooltipEle && targetElement) {\n                        this.reposition(targetElement);\n                    }\n                    break;\n                case 'offsetX':\n                    if (this.tooltipEle) {\n                        var x = newProp.offsetX - oldProp.offsetX;\n                        this.tooltipEle.style.left = (parseInt(this.tooltipEle.style.left, 10) + (x)).toString() + 'px';\n                    }\n                    break;\n                case 'offsetY':\n                    if (this.tooltipEle) {\n                        var y = newProp.offsetY - oldProp.offsetY;\n                        this.tooltipEle.style.top = (parseInt(this.tooltipEle.style.top, 10) + (y)).toString() + 'px';\n                    }\n                    break;\n                case 'cssClass':\n                    if (this.tooltipEle) {\n                        if (oldProp.cssClass) {\n                            (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.removeClass)([this.tooltipEle], oldProp.cssClass.split(' '));\n                        }\n                        if (newProp.cssClass) {\n                            (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.addClass)([this.tooltipEle], newProp.cssClass.split(' '));\n                        }\n                    }\n                    break;\n                case 'enableRtl':\n                    if (this.tooltipEle) {\n                        if (this.enableRtl) {\n                            (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.addClass)([this.tooltipEle], RTL);\n                        }\n                        else {\n                            (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.removeClass)([this.tooltipEle], RTL);\n                        }\n                    }\n                    break;\n                case 'isSticky':\n                    if (this.tooltipEle && targetElement) {\n                        this.renderCloseIcon();\n                        this.reposition(targetElement);\n                    }\n                    break;\n                case 'container':\n                    if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(this.containerElement)) {\n                        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.removeClass)([this.containerElement], POPUP_CONTAINER);\n                    }\n                    this.container = newProp.container;\n                    if (this.tooltipEle && targetElement) {\n                        this.appendContainer(this);\n                        this.reposition(targetElement);\n                    }\n            }\n        }\n    };\n    /**\n     * It is used to show the Tooltip on the specified target with specific animation settings.\n     *\n     * @param {HTMLElement} element - Target element where the Tooltip is to be displayed. (It is an optional parameter)\n     * @param {TooltipAnimationSettings} animation - Sets the specific animation, while showing the Tooltip on the screen. (It is an optional parameter)\n     * @returns {void}\n     */\n    Tooltip.prototype.open = function (element, animation) {\n        if ((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(animation)) {\n            animation = this.animation.open;\n        }\n        if ((0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(element)) {\n            element = this.element;\n        }\n        if (element.style.display === 'none') {\n            return;\n        }\n        this.showTooltip(element, animation);\n    };\n    /**\n     * It is used to hide the Tooltip with specific animation effect.\n     *\n     * @param {TooltipAnimationSettings} animation - Sets the specific animation when hiding Tooltip from the screen. (It is an optional parameter)\n     * @returns {void}\n     */\n    Tooltip.prototype.close = function (animation) {\n        if (!animation) {\n            animation = this.animation.close;\n        }\n        this.hideTooltip(animation);\n    };\n    /**\n     * It is used to refresh the Tooltip content and its position.\n     *\n     * @param {HTMLElement} target - Target element where the Tooltip content or position needs to be refreshed.\n     * @returns {void}\n     */\n    Tooltip.prototype.refresh = function (target) {\n        if (this.tooltipEle) {\n            this.renderContent(target);\n        }\n        if (this.popupObj && target) {\n            this.reposition(target);\n        }\n        if (!(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(this.targetsList) && !(0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined)(this.target)) {\n            var target_2 = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.selectAll)(this.target, this.element);\n            if (target_2.length !== this.targetsList.length) {\n                this.unwireEvents(this.opensOn);\n                this.wireEvents(this.opensOn);\n            }\n        }\n    };\n    /**\n     *\n     * It is used to destroy the Tooltip component.\n     *\n     * @method destroy\n     * @returns {void}\n     * @memberof Tooltip\n     */\n    Tooltip.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        if (this.tooltipEle) {\n            (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.remove)(this.tooltipEle);\n        }\n        if (this.popupObj) {\n            this.popupObj.destroy();\n        }\n        (0,_common_collision__WEBPACK_IMPORTED_MODULE_3__.destroy)();\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.removeClass)([this.element], ROOT);\n        this.unwireEvents(this.opensOn);\n        this.unwireMouseEvents(this.element);\n        this.tooltipEle = null;\n        this.popupObj = null;\n        var currentTarget = (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.selectAll)('[data-tooltip-id= \"' + this.ctrlId + '_content\"]', this.element);\n        for (var _i = 0, currentTarget_1 = currentTarget; _i < currentTarget_1.length; _i++) {\n            var target = currentTarget_1[_i];\n            this.restoreElement(target);\n        }\n        this.containerElement = null;\n        this.tipClass = null;\n        this.tooltipPositionX = null;\n        this.tooltipPositionY = null;\n        this.ctrlId = null;\n        this.tooltipEventArgs = null;\n        this.touchModule = null;\n        this.mouseMoveEvent = null;\n        this.mouseMoveTarget = null;\n        this.containerElement = null;\n        this.targetsList = null;\n    };\n    __decorate([\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Property)('auto')\n    ], Tooltip.prototype, \"width\", void 0);\n    __decorate([\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Property)('auto')\n    ], Tooltip.prototype, \"height\", void 0);\n    __decorate([\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Property)()\n    ], Tooltip.prototype, \"content\", void 0);\n    __decorate([\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Property)('body')\n    ], Tooltip.prototype, \"container\", void 0);\n    __decorate([\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Property)()\n    ], Tooltip.prototype, \"target\", void 0);\n    __decorate([\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Property)('TopCenter')\n    ], Tooltip.prototype, \"position\", void 0);\n    __decorate([\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Property)(0)\n    ], Tooltip.prototype, \"offsetX\", void 0);\n    __decorate([\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Property)(0)\n    ], Tooltip.prototype, \"offsetY\", void 0);\n    __decorate([\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Property)(true)\n    ], Tooltip.prototype, \"showTipPointer\", void 0);\n    __decorate([\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Property)(true)\n    ], Tooltip.prototype, \"enableHtmlParse\", void 0);\n    __decorate([\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Property)(false)\n    ], Tooltip.prototype, \"windowCollision\", void 0);\n    __decorate([\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Property)('Auto')\n    ], Tooltip.prototype, \"tipPointerPosition\", void 0);\n    __decorate([\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Property)('Auto')\n    ], Tooltip.prototype, \"opensOn\", void 0);\n    __decorate([\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Property)(false)\n    ], Tooltip.prototype, \"mouseTrail\", void 0);\n    __decorate([\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Property)(false)\n    ], Tooltip.prototype, \"isSticky\", void 0);\n    __decorate([\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Complex)({}, Animation)\n    ], Tooltip.prototype, \"animation\", void 0);\n    __decorate([\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Property)(0)\n    ], Tooltip.prototype, \"openDelay\", void 0);\n    __decorate([\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Property)(0)\n    ], Tooltip.prototype, \"closeDelay\", void 0);\n    __decorate([\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Property)()\n    ], Tooltip.prototype, \"cssClass\", void 0);\n    __decorate([\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Property)(true)\n    ], Tooltip.prototype, \"enableHtmlSanitizer\", void 0);\n    __decorate([\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Property)('')\n    ], Tooltip.prototype, \"htmlAttributes\", void 0);\n    __decorate([\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Event)()\n    ], Tooltip.prototype, \"beforeRender\", void 0);\n    __decorate([\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Event)()\n    ], Tooltip.prototype, \"beforeOpen\", void 0);\n    __decorate([\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Event)()\n    ], Tooltip.prototype, \"afterOpen\", void 0);\n    __decorate([\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Event)()\n    ], Tooltip.prototype, \"beforeClose\", void 0);\n    __decorate([\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Event)()\n    ], Tooltip.prototype, \"afterClose\", void 0);\n    __decorate([\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Event)()\n    ], Tooltip.prototype, \"beforeCollision\", void 0);\n    __decorate([\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Event)()\n    ], Tooltip.prototype, \"created\", void 0);\n    __decorate([\n        (0,_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Event)()\n    ], Tooltip.prototype, \"destroyed\", void 0);\n    Tooltip = __decorate([\n        _syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.NotifyPropertyChanges\n    ], Tooltip);\n    return Tooltip;\n}(_syncfusion_ej2_base__WEBPACK_IMPORTED_MODULE_0__.Component));\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHN5bmNmdXNpb24rZWoyLXBvcHVwc0AyOS4xLjM3L25vZGVfbW9kdWxlcy9Ac3luY2Z1c2lvbi9lajItcG9wdXBzL3NyYy90b29sdGlwL3Rvb2x0aXAuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUEsaUJBQWlCLFNBQUksSUFBSSxTQUFJO0FBQzdCO0FBQ0E7QUFDQSxlQUFlLGdCQUFnQixzQ0FBc0Msa0JBQWtCO0FBQ3ZGLDhCQUE4QjtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QjtBQUN4QjtBQUNBO0FBQ0EsQ0FBQztBQUNELGtCQUFrQixTQUFJLElBQUksU0FBSTtBQUM5QjtBQUNBO0FBQ0EsNkNBQTZDLFFBQVE7QUFDckQ7QUFDQTtBQUNrRztBQUNjO0FBQ1g7QUFDWDtBQUNBO0FBQ25EO0FBQ2dCO0FBQzJCO0FBQ2xGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLDhEQUFRLEdBQUcsMkNBQTJDO0FBQzlEO0FBQ0E7QUFDQSxRQUFRLDhEQUFRLEdBQUcsNENBQTRDO0FBQy9EO0FBQ0E7QUFDQSxDQUFDLENBQUMsK0RBQWE7QUFDTTtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQyx5QkFBeUI7QUFDN0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxjQUFjO0FBQzdCLGVBQWUscUJBQXFCO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsOERBQVE7QUFDaEI7QUFDQTtBQUNBO0FB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O0FBQ0E7QUFDQSxRQUFRLDhEQUFRO0FBQ2hCO0FBQ0E7QUFDQSxRQUFRLDhEQUFRO0FBQ2hCO0FBQ0E7QUFDQSxRQUFRLDhEQUFRO0FBQ2hCO0FBQ0E7QUFDQSxRQUFRLDhEQUFRO0FBQ2hCO0FBQ0E7QUFDQSxRQUFRLDhEQUFRO0FBQ2hCO0FBQ0E7QUFDQSxRQUFRLDhEQUFRO0FBQ2hCO0FBQ0E7QUFDQSxRQUFRLDhEQUFRO0FBQ2hCO0FBQ0E7QUFDQSxRQUFRLDhEQUFRO0FBQ2hCO0FBQ0E7QUFDQSxRQUFRLDZEQUFPLEdBQUc7QUFDbEI7QUFDQTtBQUNBLFFBQVEsOERBQVE7QUFDaEI7QUFDQTtBQUNBLFFBQVEsOERBQVE7QUFDaEI7QUFDQTtBQUNBLFFBQVEsOERBQVE7QUFDaEI7QUFDQTtBQUNBLFFBQVEsOERBQVE7QUFDaEI7QUFDQTtBQUNBLFFBQVEsOERBQVE7QUFDaEI7QUFDQTtBQUNBLFFBQVEsMkRBQUs7QUFDYjtBQUNBO0FBQ0EsUUFBUSwyREFBSztBQUNiO0FBQ0E7QUFDQSxRQUFRLDJEQUFLO0FBQ2I7QUFDQTtBQUNBLFFBQVEsMkRBQUs7QUFDYjtBQUNBO0FBQ0EsUUFBUSwyREFBSztBQUNiO0FBQ0E7QUFDQSxRQUFRLDJEQUFLO0FBQ2I7QUFDQTtBQUNBLFFBQVEsMkRBQUs7QUFDYjtBQUNBO0FBQ0EsUUFBUSwyREFBSztBQUNiO0FBQ0E7QUFDQSxRQUFRLHVFQUFxQjtBQUM3QjtBQUNBO0FBQ0EsQ0FBQyxDQUFDLDJEQUFTO0FBQ1EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haV90cmF2ZWwvLi9ub2RlX21vZHVsZXMvLnBucG0vQHN5bmNmdXNpb24rZWoyLXBvcHVwc0AyOS4xLjM3L25vZGVfbW9kdWxlcy9Ac3luY2Z1c2lvbi9lajItcG9wdXBzL3NyYy90b29sdGlwL3Rvb2x0aXAuanM/NjgzMiJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbnZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xufTtcbmltcG9ydCB7IENvbXBvbmVudCwgUHJvcGVydHksIENoaWxkUHJvcGVydHksIEV2ZW50LCBhcHBlbmQsIGNvbXBpbGUgfSBmcm9tICdAc3luY2Z1c2lvbi9lajItYmFzZSc7XG5pbXBvcnQgeyBFdmVudEhhbmRsZXIsIFRvdWNoLCBCcm93c2VyLCBBbmltYXRpb24gYXMgUG9wdXBBbmltYXRpb24sIGFuaW1hdGlvbk1vZGUgfSBmcm9tICdAc3luY2Z1c2lvbi9lajItYmFzZSc7XG5pbXBvcnQgeyBpc051bGxPclVuZGVmaW5lZCwgZ2V0VW5pcXVlSUQsIGZvcm1hdFVuaXQsIHNlbGVjdCwgc2VsZWN0QWxsIH0gZnJvbSAnQHN5bmNmdXNpb24vZWoyLWJhc2UnO1xuaW1wb3J0IHsgYXR0cmlidXRlcywgY2xvc2VzdCwgcmVtb3ZlQ2xhc3MsIGFkZENsYXNzLCByZW1vdmUgfSBmcm9tICdAc3luY2Z1c2lvbi9lajItYmFzZSc7XG5pbXBvcnQgeyBOb3RpZnlQcm9wZXJ0eUNoYW5nZXMsIENvbXBsZXgsIFNhbml0aXplSHRtbEhlbHBlciB9IGZyb20gJ0BzeW5jZnVzaW9uL2VqMi1iYXNlJztcbmltcG9ydCB7IFBvcHVwIH0gZnJvbSAnLi4vcG9wdXAvcG9wdXAnO1xuaW1wb3J0IHsgY2FsY3VsYXRlUG9zaXRpb24gfSBmcm9tICcuLi9jb21tb24vcG9zaXRpb24nO1xuaW1wb3J0IHsgaXNDb2xsaWRlLCBmaXQsIGRlc3Ryb3kgYXMgY29sbGlzaW9uRGVzdHJveSB9IGZyb20gJy4uL2NvbW1vbi9jb2xsaXNpb24nO1xudmFyIFRPVUNIRU5EX0hJREVfREVMQVkgPSAxNTAwO1xudmFyIFRBUEhPTERfVEhSRVNIT0xEID0gNTAwO1xudmFyIFNIT1dfUE9JTlRFUl9USVBfR0FQID0gMDtcbnZhciBISURFX1BPSU5URVJfVElQX0dBUCA9IDg7XG52YXIgTU9VU0VfVFJBSUxfR0FQID0gMjtcbnZhciBQT0lOVEVSX0FESlVTVCA9IDI7XG52YXIgUk9PVCA9ICdlLXRvb2x0aXAnO1xudmFyIFJUTCA9ICdlLXJ0bCc7XG52YXIgREVWSUNFID0gJ2UtYmlnZ2VyJztcbnZhciBJQ09OID0gJ2UtaWNvbnMnO1xudmFyIENMT1NFID0gJ2UtdG9vbHRpcC1jbG9zZSc7XG52YXIgVE9PTFRJUF9XUkFQID0gJ2UtdG9vbHRpcC13cmFwJztcbnZhciBDT05URU5UID0gJ2UtdGlwLWNvbnRlbnQnO1xudmFyIEFSUk9XX1RJUCA9ICdlLWFycm93LXRpcCc7XG52YXIgQVJST1dfVElQX09VVEVSID0gJ2UtYXJyb3ctdGlwLW91dGVyJztcbnZhciBBUlJPV19USVBfSU5ORVIgPSAnZS1hcnJvdy10aXAtaW5uZXInO1xudmFyIFRJUF9CT1RUT00gPSAnZS10aXAtYm90dG9tJztcbnZhciBUSVBfVE9QID0gJ2UtdGlwLXRvcCc7XG52YXIgVElQX0xFRlQgPSAnZS10aXAtbGVmdCc7XG52YXIgVElQX1JJR0hUID0gJ2UtdGlwLXJpZ2h0JztcbnZhciBQT1BVUF9ST09UID0gJ2UtcG9wdXAnO1xudmFyIFBPUFVQX09QRU4gPSAnZS1wb3B1cC1vcGVuJztcbnZhciBQT1BVUF9DTE9TRSA9ICdlLXBvcHVwLWNsb3NlJztcbnZhciBQT1BVUF9MSUIgPSAnZS1saWInO1xudmFyIEhJREVfUE9QVVAgPSAnZS1oaWRkZW4nO1xudmFyIFBPUFVQX0NPTlRBSU5FUiA9ICdlLXRvb2x0aXAtcG9wdXAtY29udGFpbmVyJztcbnZhciBBbmltYXRpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEFuaW1hdGlvbiwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBBbmltYXRpb24oKSB7XG4gICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICB9XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIFByb3BlcnR5KHsgZWZmZWN0OiAnRmFkZUluJywgZHVyYXRpb246IDE1MCwgZGVsYXk6IDAgfSlcbiAgICBdLCBBbmltYXRpb24ucHJvdG90eXBlLCBcIm9wZW5cIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgUHJvcGVydHkoeyBlZmZlY3Q6ICdGYWRlT3V0JywgZHVyYXRpb246IDE1MCwgZGVsYXk6IDAgfSlcbiAgICBdLCBBbmltYXRpb24ucHJvdG90eXBlLCBcImNsb3NlXCIsIHZvaWQgMCk7XG4gICAgcmV0dXJuIEFuaW1hdGlvbjtcbn0oQ2hpbGRQcm9wZXJ0eSkpO1xuZXhwb3J0IHsgQW5pbWF0aW9uIH07XG4vKipcbiAqIFJlcHJlc2VudHMgdGhlIFRvb2x0aXAgY29tcG9uZW50IHRoYXQgZGlzcGxheXMgYSBwaWVjZSBvZiBpbmZvcm1hdGlvbiBhYm91dCB0aGUgdGFyZ2V0IGVsZW1lbnQgb24gbW91c2UgaG92ZXIuXG4gKiBgYGBodG1sXG4gKiA8ZGl2IGlkPVwidG9vbHRpcFwiPlNob3cgVG9vbHRpcDwvZGl2PlxuICogYGBgXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiA8c2NyaXB0PlxuICogICB2YXIgdG9vbHRpcE9iaiA9IG5ldyBUb29sdGlwKHsgY29udGVudDogJ1Rvb2x0aXAgdGV4dCcgfSk7XG4gKiAgIHRvb2x0aXBPYmouYXBwZW5kVG8oXCIjdG9vbHRpcFwiKTtcbiAqIDwvc2NyaXB0PlxuICogYGBgXG4gKi9cbnZhciBUb29sdGlwID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhUb29sdGlwLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIENvbnN0cnVjdG9yIGZvciBjcmVhdGluZyB0aGUgVG9vbHRpcCBDb21wb25lbnRcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7VG9vbHRpcE1vZGVsfSBvcHRpb25zIC0gc3BlY2lmaWVzIHRoZSBvcHRpb25zIGZvciB0aGUgY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge3N0cmluZ3wgSFRNTEVsZW1lbnR9IGVsZW1lbnQgLSBzcGVjaWZpZXMgdGhlIGVsZW1lbnQgZm9yIHRoZSBjb25zdHJ1Y3RvclxuICAgICAqXG4gICAgICovXG4gICAgZnVuY3Rpb24gVG9vbHRpcChvcHRpb25zLCBlbGVtZW50KSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIG9wdGlvbnMsIGVsZW1lbnQpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLm1vdXNlTW92ZUV2ZW50ID0gbnVsbDtcbiAgICAgICAgX3RoaXMubW91c2VNb3ZlVGFyZ2V0ID0gbnVsbDtcbiAgICAgICAgX3RoaXMuY29udGFpbmVyRWxlbWVudCA9IG51bGw7XG4gICAgICAgIF90aGlzLmlzQm9keUNvbnRhaW5lciA9IHRydWU7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgVG9vbHRpcC5wcm90b3R5cGUuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5mb3JtYXRQb3NpdGlvbigpO1xuICAgICAgICBhZGRDbGFzcyhbdGhpcy5lbGVtZW50XSwgUk9PVCk7XG4gICAgfTtcbiAgICBUb29sdGlwLnByb3RvdHlwZS5mb3JtYXRQb3NpdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgaWYgKCF0aGlzLnBvc2l0aW9uKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMucG9zaXRpb24uaW5kZXhPZignVG9wJykgPT09IDAgfHwgdGhpcy5wb3NpdGlvbi5pbmRleE9mKCdCb3R0b20nKSA9PT0gMCkge1xuICAgICAgICAgICAgX2EgPSB0aGlzLnBvc2l0aW9uLnNwbGl0KC8oPz1bQS1aXSkvKSwgdGhpcy50b29sdGlwUG9zaXRpb25ZID0gX2FbMF0sIHRoaXMudG9vbHRpcFBvc2l0aW9uWCA9IF9hWzFdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgX2IgPSB0aGlzLnBvc2l0aW9uLnNwbGl0KC8oPz1bQS1aXSkvKSwgdGhpcy50b29sdGlwUG9zaXRpb25YID0gX2JbMF0sIHRoaXMudG9vbHRpcFBvc2l0aW9uWSA9IF9iWzFdO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBUb29sdGlwLnByb3RvdHlwZS5yZW5kZXJBcnJvdyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5zZXRUaXBDbGFzcyh0aGlzLnBvc2l0aW9uKTtcbiAgICAgICAgdmFyIHRpcCA9IHRoaXMuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6IEFSUk9XX1RJUCArICcgJyArIHRoaXMudGlwQ2xhc3MgfSk7XG4gICAgICAgIHRpcC5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiBBUlJPV19USVBfT1VURVIgKyAnICcgKyB0aGlzLnRpcENsYXNzIH0pKTtcbiAgICAgICAgdGlwLmFwcGVuZENoaWxkKHRoaXMuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6IEFSUk9XX1RJUF9JTk5FUiArICcgJyArIHRoaXMudGlwQ2xhc3MgfSkpO1xuICAgICAgICB0aGlzLnRvb2x0aXBFbGUuYXBwZW5kQ2hpbGQodGlwKTtcbiAgICB9O1xuICAgIFRvb2x0aXAucHJvdG90eXBlLnNldFRpcENsYXNzID0gZnVuY3Rpb24gKHBvc2l0aW9uKSB7XG4gICAgICAgIGlmIChwb3NpdGlvbi5pbmRleE9mKCdSaWdodCcpID09PSAwKSB7XG4gICAgICAgICAgICB0aGlzLnRpcENsYXNzID0gVElQX0xFRlQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocG9zaXRpb24uaW5kZXhPZignQm90dG9tJykgPT09IDApIHtcbiAgICAgICAgICAgIHRoaXMudGlwQ2xhc3MgPSBUSVBfVE9QO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHBvc2l0aW9uLmluZGV4T2YoJ0xlZnQnKSA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy50aXBDbGFzcyA9IFRJUF9SSUdIVDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMudGlwQ2xhc3MgPSBUSVBfQk9UVE9NO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBUb29sdGlwLnByb3RvdHlwZS5yZW5kZXJQb3B1cCA9IGZ1bmN0aW9uICh0YXJnZXQpIHtcbiAgICAgICAgdmFyIGVsZVBvcyA9IHRoaXMubW91c2VUcmFpbCA/IHsgdG9wOiAwLCBsZWZ0OiAwIH0gOiB0aGlzLmdldFRvb2x0aXBQb3NpdGlvbih0YXJnZXQpO1xuICAgICAgICB0aGlzLnRvb2x0aXBFbGUuY2xhc3NMaXN0LnJlbW92ZShQT1BVUF9MSUIpO1xuICAgICAgICB0aGlzLnBvcHVwT2JqID0gbmV3IFBvcHVwKHRoaXMudG9vbHRpcEVsZSwge1xuICAgICAgICAgICAgaGVpZ2h0OiB0aGlzLmhlaWdodCxcbiAgICAgICAgICAgIHdpZHRoOiB0aGlzLndpZHRoLFxuICAgICAgICAgICAgcG9zaXRpb246IHsgWDogZWxlUG9zLmxlZnQsIFk6IGVsZVBvcy50b3AgfSxcbiAgICAgICAgICAgIGVuYWJsZVJ0bDogdGhpcy5lbmFibGVSdGwsXG4gICAgICAgICAgICBvcGVuOiB0aGlzLm9wZW5Qb3B1cEhhbmRsZXIuYmluZCh0aGlzKSxcbiAgICAgICAgICAgIGNsb3NlOiB0aGlzLmNsb3NlUG9wdXBIYW5kbGVyLmJpbmQodGhpcylcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBUb29sdGlwLnByb3RvdHlwZS5nZXRTY2FsaW5nRmFjdG9yID0gZnVuY3Rpb24gKHRhcmdldCkge1xuICAgICAgICBpZiAoIXRhcmdldCkge1xuICAgICAgICAgICAgcmV0dXJuIHsgeDogMSwgeTogMSB9O1xuICAgICAgICB9XG4gICAgICAgIHZhciBzY2FsaW5nRmFjdG9ycyA9IHsgeDogMSwgeTogMSB9O1xuICAgICAgICB2YXIgZWxlbWVudHNXaXRoVHJhbnNmb3JtID0gdGFyZ2V0LmNsb3Nlc3QoJ1tzdHlsZSo9XCJ0cmFuc2Zvcm06IHNjYWxlXCJdJyk7XG4gICAgICAgIGlmIChlbGVtZW50c1dpdGhUcmFuc2Zvcm0gJiYgZWxlbWVudHNXaXRoVHJhbnNmb3JtICE9PSB0aGlzLnRvb2x0aXBFbGUgJiYgZWxlbWVudHNXaXRoVHJhbnNmb3JtLmNvbnRhaW5zKHRoaXMudG9vbHRpcEVsZSkpIHtcbiAgICAgICAgICAgIHZhciBjb21wdXRlZFN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoZWxlbWVudHNXaXRoVHJhbnNmb3JtKTtcbiAgICAgICAgICAgIHZhciB0cmFuc2Zvcm1WYWx1ZSA9IGNvbXB1dGVkU3R5bGUuZ2V0UHJvcGVydHlWYWx1ZSgndHJhbnNmb3JtJyk7XG4gICAgICAgICAgICB2YXIgbWF0cml4VmFsdWVzID0gdHJhbnNmb3JtVmFsdWUubWF0Y2goL21hdHJpeFxcKChbXildKylcXCkvKVsxXS5zcGxpdCgnLCcpLm1hcChwYXJzZUZsb2F0KTtcbiAgICAgICAgICAgIHNjYWxpbmdGYWN0b3JzLnggPSBtYXRyaXhWYWx1ZXNbMF07XG4gICAgICAgICAgICBzY2FsaW5nRmFjdG9ycy55ID0gbWF0cml4VmFsdWVzWzNdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzY2FsaW5nRmFjdG9ycztcbiAgICB9O1xuICAgIFRvb2x0aXAucHJvdG90eXBlLmdldFRvb2x0aXBQb3NpdGlvbiA9IGZ1bmN0aW9uICh0YXJnZXQpIHtcbiAgICAgICAgdGhpcy50b29sdGlwRWxlLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICB2YXIgcGFyZW50V2l0aFpvb21TdHlsZSA9IHRoaXMuZWxlbWVudC5jbG9zZXN0KCdbc3R5bGUqPVwiem9vbVwiXScpO1xuICAgICAgICBpZiAocGFyZW50V2l0aFpvb21TdHlsZSkge1xuICAgICAgICAgICAgaWYgKCFwYXJlbnRXaXRoWm9vbVN0eWxlLmNvbnRhaW5zKHRoaXMudG9vbHRpcEVsZSkpIHtcbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICAgICAgICAgIHRoaXMudG9vbHRpcEVsZS5zdHlsZS56b29tID0gZ2V0Q29tcHV0ZWRTdHlsZShwYXJlbnRXaXRoWm9vbVN0eWxlKS56b29tO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZhciBwb3MgPSBjYWxjdWxhdGVQb3NpdGlvbih0YXJnZXQsIHRoaXMudG9vbHRpcFBvc2l0aW9uWCwgdGhpcy50b29sdGlwUG9zaXRpb25ZLCAhdGhpcy5pc0JvZHlDb250YWluZXIsIHRoaXMuaXNCb2R5Q29udGFpbmVyID8gbnVsbCA6IHRoaXMuY29udGFpbmVyRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSk7XG4gICAgICAgIHZhciBzY2FsaW5nRmFjdG9ycyA9IHRoaXMuZ2V0U2NhbGluZ0ZhY3Rvcih0YXJnZXQpO1xuICAgICAgICB2YXIgb2Zmc2V0UG9zID0gdGhpcy5jYWxjdWxhdGVUb29sdGlwT2Zmc2V0KHRoaXMucG9zaXRpb24sIHNjYWxpbmdGYWN0b3JzLngsIHNjYWxpbmdGYWN0b3JzLnkpO1xuICAgICAgICB2YXIgY29sbGlzaW9uUG9zaXRpb24gPSB0aGlzLmNhbGN1bGF0ZUVsZW1lbnRQb3NpdGlvbihwb3MsIG9mZnNldFBvcyk7XG4gICAgICAgIHZhciBjb2xsaXNpb25MZWZ0ID0gY29sbGlzaW9uUG9zaXRpb25bMF07XG4gICAgICAgIHZhciBjb2xsaXNpb25Ub3AgPSBjb2xsaXNpb25Qb3NpdGlvblsxXTtcbiAgICAgICAgdmFyIGVsZVBvcyA9IHRoaXMuY29sbGlzaW9uRmxpcEZpdCh0YXJnZXQsIGNvbGxpc2lvbkxlZnQsIGNvbGxpc2lvblRvcCk7XG4gICAgICAgIGVsZVBvcy5sZWZ0ID0gZWxlUG9zLmxlZnQgLyBzY2FsaW5nRmFjdG9ycy54O1xuICAgICAgICBlbGVQb3MudG9wID0gZWxlUG9zLnRvcCAvIHNjYWxpbmdGYWN0b3JzLnk7XG4gICAgICAgIHRoaXMudG9vbHRpcEVsZS5zdHlsZS5kaXNwbGF5ID0gJyc7XG4gICAgICAgIHJldHVybiBlbGVQb3M7XG4gICAgfTtcbiAgICBUb29sdGlwLnByb3RvdHlwZS53aW5kb3dSZXNpemUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMucmVwb3NpdGlvbih0aGlzLmZpbmRUYXJnZXQoKSk7XG4gICAgfTtcbiAgICBUb29sdGlwLnByb3RvdHlwZS5yZXBvc2l0aW9uID0gZnVuY3Rpb24gKHRhcmdldCkge1xuICAgICAgICBpZiAodGhpcy5wb3B1cE9iaiAmJiB0YXJnZXQpIHtcbiAgICAgICAgICAgIHZhciBlbGVQb3MgPSB0aGlzLmdldFRvb2x0aXBQb3NpdGlvbih0YXJnZXQpO1xuICAgICAgICAgICAgdGhpcy5wb3B1cE9iai5wb3NpdGlvbiA9IHsgWDogZWxlUG9zLmxlZnQsIFk6IGVsZVBvcy50b3AgfTtcbiAgICAgICAgICAgIHRoaXMucG9wdXBPYmouZGF0YUJpbmQoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgVG9vbHRpcC5wcm90b3R5cGUub3BlblBvcHVwSGFuZGxlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCF0aGlzLm1vdXNlVHJhaWwgJiYgdGhpcy5uZWVkVGVtcGxhdGVSZXBvc2l0aW9uKCkpIHtcbiAgICAgICAgICAgIHRoaXMucmVwb3NpdGlvbih0aGlzLmZpbmRUYXJnZXQoKSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50cmlnZ2VyKCdhZnRlck9wZW4nLCB0aGlzLnRvb2x0aXBFdmVudEFyZ3MpO1xuICAgICAgICB0aGlzLnRvb2x0aXBFdmVudEFyZ3MgPSBudWxsO1xuICAgIH07XG4gICAgVG9vbHRpcC5wcm90b3R5cGUuY2xvc2VQb3B1cEhhbmRsZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIGlmICh0aGlzLmlzUmVhY3QgJiYgISh0aGlzLm9wZW5zT24gPT09ICdDbGljaycgfHwgdHlwZW9mICh0aGlzLmNvbnRlbnQpID09PSAnZnVuY3Rpb24nKSkge1xuICAgICAgICAgICAgdGhpcy5jbGVhclRlbXBsYXRlKFsnY29udGVudCddKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNsZWFyKCk7XG4gICAgICAgIHZhciB0b29sdGlwQWZ0ZXJDbG9zZUV2ZW50QXJncyA9IHtcbiAgICAgICAgICAgIHR5cGU6IHRoaXMudG9vbHRpcEV2ZW50QXJncy5ldmVudCA/IHRoaXMudG9vbHRpcEV2ZW50QXJncy5ldmVudC50eXBlIDogbnVsbCwgY2FuY2VsOiBmYWxzZSxcbiAgICAgICAgICAgIHRhcmdldDogdGhpcy50b29sdGlwRXZlbnRBcmdzLnRhcmdldCwgZXZlbnQ6IHRoaXMudG9vbHRpcEV2ZW50QXJncy5ldmVudCA/IHRoaXMudG9vbHRpcEV2ZW50QXJncy5ldmVudCA6IG51bGwsXG4gICAgICAgICAgICBlbGVtZW50OiB0aGlzLnRvb2x0aXBFbGUsIGlzSW50ZXJhY3RlZDogIWlzTnVsbE9yVW5kZWZpbmVkKHRoaXMudG9vbHRpcEV2ZW50QXJncy5ldmVudClcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy50cmlnZ2VyKCdhZnRlckNsb3NlJywgdG9vbHRpcEFmdGVyQ2xvc2VFdmVudEFyZ3MpO1xuICAgICAgICB0b29sdGlwQWZ0ZXJDbG9zZUV2ZW50QXJncyA9IG51bGw7XG4gICAgfTtcbiAgICBUb29sdGlwLnByb3RvdHlwZS5jYWxjdWxhdGVUb29sdGlwT2Zmc2V0ID0gZnVuY3Rpb24gKHBvc2l0aW9uLCB4U2NhbGluZ0ZhY3RvciwgeVNjYWxpbmdGYWN0b3IpIHtcbiAgICAgICAgaWYgKHhTY2FsaW5nRmFjdG9yID09PSB2b2lkIDApIHsgeFNjYWxpbmdGYWN0b3IgPSAxOyB9XG4gICAgICAgIGlmICh5U2NhbGluZ0ZhY3RvciA9PT0gdm9pZCAwKSB7IHlTY2FsaW5nRmFjdG9yID0gMTsgfVxuICAgICAgICB2YXIgcG9zID0geyB0b3A6IDAsIGxlZnQ6IDAgfTtcbiAgICAgICAgdmFyIHRpcFdpZHRoO1xuICAgICAgICB2YXIgdGlwSGVpZ2h0O1xuICAgICAgICB2YXIgdG9vbHRpcEVsZVdpZHRoO1xuICAgICAgICB2YXIgdG9vbHRpcEVsZUhlaWdodDtcbiAgICAgICAgdmFyIGFycm93RWxlO1xuICAgICAgICB2YXIgdGlwQWRqdXN0O1xuICAgICAgICB2YXIgdGlwSGVpZ2h0QWRqdXN0O1xuICAgICAgICB2YXIgdGlwV2lkdGhBZGp1c3Q7XG4gICAgICAgIGlmICh4U2NhbGluZ0ZhY3RvciAhPT0gMSB8fCB5U2NhbGluZ0ZhY3RvciAhPT0gMSkge1xuICAgICAgICAgICAgdmFyIHRvb2x0aXBFbGVSZWN0ID0gdGhpcy50b29sdGlwRWxlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAgICAgdmFyIGFycm93RWxlUmVjdCA9IHZvaWQgMDtcbiAgICAgICAgICAgIHRvb2x0aXBFbGVXaWR0aCA9IE1hdGgucm91bmQodG9vbHRpcEVsZVJlY3Qud2lkdGgpO1xuICAgICAgICAgICAgdG9vbHRpcEVsZUhlaWdodCA9IE1hdGgucm91bmQodG9vbHRpcEVsZVJlY3QuaGVpZ2h0KTtcbiAgICAgICAgICAgIGFycm93RWxlID0gc2VsZWN0KCcuJyArIEFSUk9XX1RJUCwgdGhpcy50b29sdGlwRWxlKTtcbiAgICAgICAgICAgIGlmIChhcnJvd0VsZSkge1xuICAgICAgICAgICAgICAgIGFycm93RWxlUmVjdCA9IGFycm93RWxlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGlwV2lkdGggPSBhcnJvd0VsZSA/IE1hdGgucm91bmQoYXJyb3dFbGVSZWN0LndpZHRoKSA6IDA7XG4gICAgICAgICAgICB0aXBIZWlnaHQgPSBhcnJvd0VsZSA/IE1hdGgucm91bmQoYXJyb3dFbGVSZWN0LmhlaWdodCkgOiAwO1xuICAgICAgICAgICAgdGlwQWRqdXN0ID0gKHRoaXMuc2hvd1RpcFBvaW50ZXIgPyBTSE9XX1BPSU5URVJfVElQX0dBUCA6IEhJREVfUE9JTlRFUl9USVBfR0FQKTtcbiAgICAgICAgICAgIHRpcEhlaWdodEFkanVzdCA9ICh0aXBIZWlnaHQgLyAyKSArIFBPSU5URVJfQURKVVNUICsgKHRvb2x0aXBFbGVIZWlnaHQgLSAodGhpcy50b29sdGlwRWxlLmNsaWVudEhlaWdodCAqIHlTY2FsaW5nRmFjdG9yKSk7XG4gICAgICAgICAgICB0aXBXaWR0aEFkanVzdCA9ICh0aXBXaWR0aCAvIDIpICsgUE9JTlRFUl9BREpVU1QgKyAodG9vbHRpcEVsZVdpZHRoIC0gKHRoaXMudG9vbHRpcEVsZS5jbGllbnRXaWR0aCAqIHhTY2FsaW5nRmFjdG9yKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0b29sdGlwRWxlV2lkdGggPSB0aGlzLnRvb2x0aXBFbGUub2Zmc2V0V2lkdGg7XG4gICAgICAgICAgICB0b29sdGlwRWxlSGVpZ2h0ID0gdGhpcy50b29sdGlwRWxlLm9mZnNldEhlaWdodDtcbiAgICAgICAgICAgIGFycm93RWxlID0gc2VsZWN0KCcuJyArIEFSUk9XX1RJUCwgdGhpcy50b29sdGlwRWxlKTtcbiAgICAgICAgICAgIHRpcFdpZHRoID0gYXJyb3dFbGUgPyBhcnJvd0VsZS5vZmZzZXRXaWR0aCA6IDA7XG4gICAgICAgICAgICB0aXBIZWlnaHQgPSBhcnJvd0VsZSA/IGFycm93RWxlLm9mZnNldEhlaWdodCA6IDA7XG4gICAgICAgICAgICB0aXBBZGp1c3QgPSAodGhpcy5zaG93VGlwUG9pbnRlciA/IFNIT1dfUE9JTlRFUl9USVBfR0FQIDogSElERV9QT0lOVEVSX1RJUF9HQVApO1xuICAgICAgICAgICAgdGlwSGVpZ2h0QWRqdXN0ID0gKHRpcEhlaWdodCAvIDIpICsgUE9JTlRFUl9BREpVU1QgKyAodGhpcy50b29sdGlwRWxlLm9mZnNldEhlaWdodCAtIHRoaXMudG9vbHRpcEVsZS5jbGllbnRIZWlnaHQpO1xuICAgICAgICAgICAgdGlwV2lkdGhBZGp1c3QgPSAodGlwV2lkdGggLyAyKSArIFBPSU5URVJfQURKVVNUICsgKHRoaXMudG9vbHRpcEVsZS5vZmZzZXRXaWR0aCAtIHRoaXMudG9vbHRpcEVsZS5jbGllbnRXaWR0aCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMubW91c2VUcmFpbCkge1xuICAgICAgICAgICAgdGlwQWRqdXN0ICs9IE1PVVNFX1RSQUlMX0dBUDtcbiAgICAgICAgfVxuICAgICAgICBzd2l0Y2ggKHBvc2l0aW9uKSB7XG4gICAgICAgICAgICBjYXNlICdSaWdodFRvcCc6XG4gICAgICAgICAgICAgICAgcG9zLmxlZnQgKz0gdGlwV2lkdGggKyB0aXBBZGp1c3Q7XG4gICAgICAgICAgICAgICAgcG9zLnRvcCAtPSB0b29sdGlwRWxlSGVpZ2h0IC0gdGlwSGVpZ2h0QWRqdXN0O1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnUmlnaHRDZW50ZXInOlxuICAgICAgICAgICAgICAgIHBvcy5sZWZ0ICs9IHRpcFdpZHRoICsgdGlwQWRqdXN0O1xuICAgICAgICAgICAgICAgIHBvcy50b3AgLT0gKHRvb2x0aXBFbGVIZWlnaHQgLyAyKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ1JpZ2h0Qm90dG9tJzpcbiAgICAgICAgICAgICAgICBwb3MubGVmdCArPSB0aXBXaWR0aCArIHRpcEFkanVzdDtcbiAgICAgICAgICAgICAgICBwb3MudG9wIC09ICh0aXBIZWlnaHRBZGp1c3QpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnQm90dG9tUmlnaHQnOlxuICAgICAgICAgICAgICAgIHBvcy50b3AgKz0gKHRpcEhlaWdodCArIHRpcEFkanVzdCk7XG4gICAgICAgICAgICAgICAgcG9zLmxlZnQgLT0gKHRpcFdpZHRoQWRqdXN0KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ0JvdHRvbUNlbnRlcic6XG4gICAgICAgICAgICAgICAgcG9zLnRvcCArPSAodGlwSGVpZ2h0ICsgdGlwQWRqdXN0KTtcbiAgICAgICAgICAgICAgICBwb3MubGVmdCAtPSAodG9vbHRpcEVsZVdpZHRoIC8gMik7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdCb3R0b21MZWZ0JzpcbiAgICAgICAgICAgICAgICBwb3MudG9wICs9ICh0aXBIZWlnaHQgKyB0aXBBZGp1c3QpO1xuICAgICAgICAgICAgICAgIHBvcy5sZWZ0IC09ICh0b29sdGlwRWxlV2lkdGggLSB0aXBXaWR0aEFkanVzdCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdMZWZ0Qm90dG9tJzpcbiAgICAgICAgICAgICAgICBwb3MubGVmdCAtPSAodGlwV2lkdGggKyB0b29sdGlwRWxlV2lkdGggKyB0aXBBZGp1c3QpO1xuICAgICAgICAgICAgICAgIHBvcy50b3AgLT0gKHRpcEhlaWdodEFkanVzdCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdMZWZ0Q2VudGVyJzpcbiAgICAgICAgICAgICAgICBwb3MubGVmdCAtPSAodGlwV2lkdGggKyB0b29sdGlwRWxlV2lkdGggKyB0aXBBZGp1c3QpO1xuICAgICAgICAgICAgICAgIHBvcy50b3AgLT0gKHRvb2x0aXBFbGVIZWlnaHQgLyAyKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ0xlZnRUb3AnOlxuICAgICAgICAgICAgICAgIHBvcy5sZWZ0IC09ICh0aXBXaWR0aCArIHRvb2x0aXBFbGVXaWR0aCArIHRpcEFkanVzdCk7XG4gICAgICAgICAgICAgICAgcG9zLnRvcCAtPSAodG9vbHRpcEVsZUhlaWdodCAtIHRpcEhlaWdodEFkanVzdCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdUb3BMZWZ0JzpcbiAgICAgICAgICAgICAgICBwb3MudG9wIC09ICh0b29sdGlwRWxlSGVpZ2h0ICsgdGlwSGVpZ2h0ICsgdGlwQWRqdXN0KTtcbiAgICAgICAgICAgICAgICBwb3MubGVmdCAtPSAodG9vbHRpcEVsZVdpZHRoIC0gdGlwV2lkdGhBZGp1c3QpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnVG9wUmlnaHQnOlxuICAgICAgICAgICAgICAgIHBvcy50b3AgLT0gKHRvb2x0aXBFbGVIZWlnaHQgKyB0aXBIZWlnaHQgKyB0aXBBZGp1c3QpO1xuICAgICAgICAgICAgICAgIHBvcy5sZWZ0IC09ICh0aXBXaWR0aEFkanVzdCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHBvcy50b3AgLT0gKHRvb2x0aXBFbGVIZWlnaHQgKyB0aXBIZWlnaHQgKyB0aXBBZGp1c3QpO1xuICAgICAgICAgICAgICAgIHBvcy5sZWZ0IC09ICh0b29sdGlwRWxlV2lkdGggLyAyKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBwb3MubGVmdCArPSB0aGlzLm9mZnNldFg7XG4gICAgICAgIHBvcy50b3AgKz0gdGhpcy5vZmZzZXRZO1xuICAgICAgICByZXR1cm4gcG9zO1xuICAgIH07XG4gICAgVG9vbHRpcC5wcm90b3R5cGUudXBkYXRlVGlwUG9zaXRpb24gPSBmdW5jdGlvbiAocG9zaXRpb24pIHtcbiAgICAgICAgdmFyIHNlbEVsZSA9IHNlbGVjdEFsbCgnLicgKyBBUlJPV19USVAgKyAnLC4nICsgQVJST1dfVElQX09VVEVSICsgJywuJyArIEFSUk9XX1RJUF9JTk5FUiwgdGhpcy50b29sdGlwRWxlKTtcbiAgICAgICAgdmFyIHJlbW92ZUxpc3QgPSBbVElQX0JPVFRPTSwgVElQX1RPUCwgVElQX0xFRlQsIFRJUF9SSUdIVF07XG4gICAgICAgIHJlbW92ZUNsYXNzKHNlbEVsZSwgcmVtb3ZlTGlzdCk7XG4gICAgICAgIHRoaXMuc2V0VGlwQ2xhc3MocG9zaXRpb24pO1xuICAgICAgICBhZGRDbGFzcyhzZWxFbGUsIHRoaXMudGlwQ2xhc3MpO1xuICAgIH07XG4gICAgVG9vbHRpcC5wcm90b3R5cGUuYWRqdXN0QXJyb3cgPSBmdW5jdGlvbiAodGFyZ2V0LCBwb3NpdGlvbiwgdG9vbHRpcFBvc2l0aW9uWCwgdG9vbHRpcFBvc2l0aW9uWSkge1xuICAgICAgICB2YXIgYXJyb3dFbGUgPSBzZWxlY3QoJy4nICsgQVJST1dfVElQLCB0aGlzLnRvb2x0aXBFbGUpO1xuICAgICAgICBpZiAodGhpcy5zaG93VGlwUG9pbnRlciA9PT0gZmFsc2UgfHwgYXJyb3dFbGUgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnVwZGF0ZVRpcFBvc2l0aW9uKHBvc2l0aW9uKTtcbiAgICAgICAgdmFyIGxlZnRWYWx1ZTtcbiAgICAgICAgdmFyIHRvcFZhbHVlO1xuICAgICAgICB0aGlzLnRvb2x0aXBFbGUuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgIHZhciB0b29sdGlwV2lkdGggPSB0aGlzLnRvb2x0aXBFbGUuY2xpZW50V2lkdGg7XG4gICAgICAgIHZhciB0b29sdGlwSGVpZ2h0ID0gdGhpcy50b29sdGlwRWxlLmNsaWVudEhlaWdodDtcbiAgICAgICAgdmFyIGFycm93SW5uZXJFTGUgPSBzZWxlY3QoJy4nICsgQVJST1dfVElQX0lOTkVSLCB0aGlzLnRvb2x0aXBFbGUpO1xuICAgICAgICB2YXIgdGlwV2lkdGggPSBhcnJvd0VsZS5vZmZzZXRXaWR0aDtcbiAgICAgICAgdmFyIHRpcEhlaWdodCA9IGFycm93RWxlLm9mZnNldEhlaWdodDtcbiAgICAgICAgdGhpcy50b29sdGlwRWxlLnN0eWxlLmRpc3BsYXkgPSAnJztcbiAgICAgICAgaWYgKHRoaXMudGlwQ2xhc3MgPT09IFRJUF9CT1RUT00gfHwgdGhpcy50aXBDbGFzcyA9PT0gVElQX1RPUCkge1xuICAgICAgICAgICAgaWYgKHRoaXMudGlwQ2xhc3MgPT09IFRJUF9CT1RUT00pIHtcbiAgICAgICAgICAgICAgICB0b3BWYWx1ZSA9ICc5OS45JSc7XG4gICAgICAgICAgICAgICAgLy8gQXJyb3cgaWNvbiBhbGlnbmVkIC0ycHggaGVpZ2h0IGZyb20gQXJyb3dPdXRlclRpcCBkaXZcbiAgICAgICAgICAgICAgICBhcnJvd0lubmVyRUxlLnN0eWxlLnRvcCA9ICctJyArICh0aXBIZWlnaHQgLSAyKSArICdweCc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0b3BWYWx1ZSA9IC0odGlwSGVpZ2h0IC0gMSkgKyAncHgnO1xuICAgICAgICAgICAgICAgIC8vIEFycm93IGljb24gYWxpZ25lZCAtNnB4IGhlaWdodCBmcm9tIEFycm93T3V0ZXJUaXAgZGl2XG4gICAgICAgICAgICAgICAgYXJyb3dJbm5lckVMZS5zdHlsZS50b3AgPSAnLScgKyAodGlwSGVpZ2h0IC0gNikgKyAncHgnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRhcmdldCkge1xuICAgICAgICAgICAgICAgIHZhciB0aXBQb3NFeGNsdWRlID0gdG9vbHRpcFBvc2l0aW9uWCAhPT0gJ0NlbnRlcicgfHwgKHRvb2x0aXBXaWR0aCA+IHRhcmdldC5vZmZzZXRXaWR0aCkgfHwgdGhpcy5tb3VzZVRyYWlsO1xuICAgICAgICAgICAgICAgIGlmICgodGlwUG9zRXhjbHVkZSAmJiB0b29sdGlwUG9zaXRpb25YID09PSAnTGVmdCcpIHx8ICghdGlwUG9zRXhjbHVkZSAmJiB0aGlzLnRpcFBvaW50ZXJQb3NpdGlvbiA9PT0gJ0VuZCcpKSB7XG4gICAgICAgICAgICAgICAgICAgIGxlZnRWYWx1ZSA9ICh0b29sdGlwV2lkdGggLSB0aXBXaWR0aCAtIFBPSU5URVJfQURKVVNUKSArICdweCc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKCh0aXBQb3NFeGNsdWRlICYmIHRvb2x0aXBQb3NpdGlvblggPT09ICdSaWdodCcpIHx8ICghdGlwUG9zRXhjbHVkZSAmJiB0aGlzLnRpcFBvaW50ZXJQb3NpdGlvbiA9PT0gJ1N0YXJ0JykpIHtcbiAgICAgICAgICAgICAgICAgICAgbGVmdFZhbHVlID0gUE9JTlRFUl9BREpVU1QgKyAncHgnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICgodGlwUG9zRXhjbHVkZSkgJiYgKHRoaXMudGlwUG9pbnRlclBvc2l0aW9uID09PSAnRW5kJyB8fCB0aGlzLnRpcFBvaW50ZXJQb3NpdGlvbiA9PT0gJ1N0YXJ0JykpIHtcbiAgICAgICAgICAgICAgICAgICAgbGVmdFZhbHVlID0gKHRoaXMudGlwUG9pbnRlclBvc2l0aW9uID09PSAnRW5kJykgPyAoKHRhcmdldC5vZmZzZXRXaWR0aCArICgodGhpcy50b29sdGlwRWxlLm9mZnNldFdpZHRoIC0gdGFyZ2V0Lm9mZnNldFdpZHRoKSAvIDIpKSAtICh0aXBXaWR0aCAvIDIpKSAtIFBPSU5URVJfQURKVVNUICsgJ3B4J1xuICAgICAgICAgICAgICAgICAgICAgICAgOiAoKHRoaXMudG9vbHRpcEVsZS5vZmZzZXRXaWR0aCAtIHRhcmdldC5vZmZzZXRXaWR0aCkgLyAyKSAtICh0aXBXaWR0aCAvIDIpICsgUE9JTlRFUl9BREpVU1QgKyAncHgnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbGVmdFZhbHVlID0gKCh0b29sdGlwV2lkdGggLyAyKSAtICh0aXBXaWR0aCAvIDIpKSArICdweCc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKHRoaXMudGlwQ2xhc3MgPT09IFRJUF9SSUdIVCkge1xuICAgICAgICAgICAgICAgIGxlZnRWYWx1ZSA9ICc5OS45JSc7XG4gICAgICAgICAgICAgICAgLy8gQXJyb3cgaWNvbiBhbGlnbmVkIC0ycHggbGVmdCBmcm9tIEFycm93T3V0ZXJUaXAgZGl2XG4gICAgICAgICAgICAgICAgYXJyb3dJbm5lckVMZS5zdHlsZS5sZWZ0ID0gJy0nICsgKHRpcFdpZHRoIC0gMikgKyAncHgnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbGVmdFZhbHVlID0gLSh0aXBXaWR0aCAtIDEpICsgJ3B4JztcbiAgICAgICAgICAgICAgICAvLyBBcnJvdyBpY29uIGFsaWduZWQgLTJweCBmcm9tIEFycm93T3V0ZXJUaXAgd2lkdGhcbiAgICAgICAgICAgICAgICBhcnJvd0lubmVyRUxlLnN0eWxlLmxlZnQgPSAoLSh0aXBXaWR0aCkgKyAodGlwV2lkdGggLSAyKSkgKyAncHgnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHRpcFBvc0V4Y2x1ZGUgPSB0b29sdGlwUG9zaXRpb25ZICE9PSAnQ2VudGVyJyB8fCAodG9vbHRpcEhlaWdodCA+IHRhcmdldC5vZmZzZXRIZWlnaHQpIHx8IHRoaXMubW91c2VUcmFpbDtcbiAgICAgICAgICAgIGlmICgodGlwUG9zRXhjbHVkZSAmJiB0b29sdGlwUG9zaXRpb25ZID09PSAnVG9wJykgfHwgKCF0aXBQb3NFeGNsdWRlICYmIHRoaXMudGlwUG9pbnRlclBvc2l0aW9uID09PSAnRW5kJykpIHtcbiAgICAgICAgICAgICAgICB0b3BWYWx1ZSA9ICh0b29sdGlwSGVpZ2h0IC0gdGlwSGVpZ2h0IC0gUE9JTlRFUl9BREpVU1QpICsgJ3B4JztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKCh0aXBQb3NFeGNsdWRlICYmIHRvb2x0aXBQb3NpdGlvblkgPT09ICdCb3R0b20nKSB8fCAoIXRpcFBvc0V4Y2x1ZGUgJiYgdGhpcy50aXBQb2ludGVyUG9zaXRpb24gPT09ICdTdGFydCcpKSB7XG4gICAgICAgICAgICAgICAgdG9wVmFsdWUgPSBQT0lOVEVSX0FESlVTVCArICdweCc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0b3BWYWx1ZSA9ICgodG9vbHRpcEhlaWdodCAvIDIpIC0gKHRpcEhlaWdodCAvIDIpKSArICdweCc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYXJyb3dFbGUuc3R5bGUudG9wID0gdG9wVmFsdWU7XG4gICAgICAgIGFycm93RWxlLnN0eWxlLmxlZnQgPSBsZWZ0VmFsdWU7XG4gICAgfTtcbiAgICBUb29sdGlwLnByb3RvdHlwZS5yZW5kZXJDb250ZW50ID0gZnVuY3Rpb24gKHRhcmdldCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgdG9vbHRpcENvbnRlbnQgPSBzZWxlY3QoJy4nICsgQ09OVEVOVCwgdGhpcy50b29sdGlwRWxlKTtcbiAgICAgICAgaWYgKHRoaXMuY3NzQ2xhc3MpIHtcbiAgICAgICAgICAgIGFkZENsYXNzKFt0aGlzLnRvb2x0aXBFbGVdLCB0aGlzLmNzc0NsYXNzLnNwbGl0KCcgJykpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0YXJnZXQgJiYgIWlzTnVsbE9yVW5kZWZpbmVkKHRhcmdldC5nZXRBdHRyaWJ1dGUoJ3RpdGxlJykpKSB7XG4gICAgICAgICAgICB0YXJnZXQuc2V0QXR0cmlidXRlKCdkYXRhLWNvbnRlbnQnLCB0YXJnZXQuZ2V0QXR0cmlidXRlKCd0aXRsZScpKTtcbiAgICAgICAgICAgIHRhcmdldC5yZW1vdmVBdHRyaWJ1dGUoJ3RpdGxlJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFpc051bGxPclVuZGVmaW5lZCh0aGlzLmNvbnRlbnQpKSB7XG4gICAgICAgICAgICB0b29sdGlwQ29udGVudC5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbnRlbnQgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkge1xuICAgICAgICAgICAgICAgIHRvb2x0aXBDb250ZW50LmFwcGVuZENoaWxkKHRoaXMuY29udGVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgdGhpcy5jb250ZW50ID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzQW5ndWxhcikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFByb3BlcnRpZXMoeyBjb250ZW50OiBTYW5pdGl6ZUh0bWxIZWxwZXIuc2FuaXRpemUodGhpcy5jb250ZW50KSB9LCB0cnVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29udGVudCA9ICh0aGlzLmVuYWJsZUh0bWxTYW5pdGl6ZXIpID8gU2FuaXRpemVIdG1sSGVscGVyLnNhbml0aXplKHRoaXMuY29udGVudCkgOiB0aGlzLmNvbnRlbnQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmVuYWJsZUh0bWxQYXJzZSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcEZ1bmN0aW9uID0gY29tcGlsZSh0aGlzLmNvbnRlbnQpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcEFyciA9IHRlbXBGdW5jdGlvbih7fSwgdGhpcywgJ2NvbnRlbnQnLCB0aGlzLmVsZW1lbnQuaWQgKyAnY29udGVudCcsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB0b29sdGlwQ29udGVudCwgdGhpcy5yb290KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRlbXBBcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFwcGVuZCh0ZW1wQXJyLCB0b29sdGlwQ29udGVudCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRvb2x0aXBDb250ZW50Wyd0ZXh0Q29udGVudCddID0gdGhpcy5jb250ZW50O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciB0ZW1wbGF0ZUZ1bmN0aW9uID0gY29tcGlsZSh0aGlzLmNvbnRlbnQpO1xuICAgICAgICAgICAgICAgIHZhciB0ZW1wQXJyID0gdGVtcGxhdGVGdW5jdGlvbih7fSwgdGhpcywgJ2NvbnRlbnQnLCB0aGlzLmVsZW1lbnQuaWQgKyAnY29udGVudCcsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB0b29sdGlwQ29udGVudCk7XG4gICAgICAgICAgICAgICAgaWYgKHRlbXBBcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNBbmd1bGFyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5yZXBvc2l0aW9uKHRhcmdldCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LCAxKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBhcHBlbmQodGVtcEFyciwgdG9vbHRpcENvbnRlbnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlclJlYWN0VGVtcGxhdGVzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAodGFyZ2V0ICYmICFpc051bGxPclVuZGVmaW5lZCh0YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLWNvbnRlbnQnKSkpIHtcbiAgICAgICAgICAgICAgICB0b29sdGlwQ29udGVudC5pbm5lckhUTUwgPSB0YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLWNvbnRlbnQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgVG9vbHRpcC5wcm90b3R5cGUucmVuZGVyQ2xvc2VJY29uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIXRoaXMuaXNTdGlja3kpIHtcbiAgICAgICAgICAgIHZhciBleGlzdGluZ0Nsb3NlSWNvbiA9IHRoaXMudG9vbHRpcEVsZS5xdWVyeVNlbGVjdG9yKCcuJyArIElDT04gKyAnLicgKyBDTE9TRSk7XG4gICAgICAgICAgICBpZiAoZXhpc3RpbmdDbG9zZUljb24pIHtcbiAgICAgICAgICAgICAgICByZW1vdmUoZXhpc3RpbmdDbG9zZUljb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciB0aXBDbG9zZSA9IHRoaXMuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6IElDT04gKyAnICcgKyBDTE9TRSwgYXR0cnM6IHsgcm9sZTogJ2J1dHRvbicsICdhcmlhLWxhYmVsJzogJ1ByZXNzIGVzY2FwZSB0byBjbG9zZSB0aGUgVG9vbHRpcCcgfSB9KTtcbiAgICAgICAgdGhpcy50b29sdGlwRWxlLmFwcGVuZENoaWxkKHRpcENsb3NlKTtcbiAgICAgICAgRXZlbnRIYW5kbGVyLmFkZCh0aXBDbG9zZSwgQnJvd3Nlci50b3VjaFN0YXJ0RXZlbnQsIHRoaXMub25TdGlja3lDbG9zZSwgdGhpcyk7XG4gICAgfTtcbiAgICBUb29sdGlwLnByb3RvdHlwZS5hZGREZXNjcmliZWRCeSA9IGZ1bmN0aW9uICh0YXJnZXQsIGlkKSB7XG4gICAgICAgIHZhciBkZXNjcmliZWRieSA9ICh0YXJnZXQuZ2V0QXR0cmlidXRlKCdhcmlhLWRlc2NyaWJlZGJ5JykgfHwgJycpLnNwbGl0KC9cXHMrLyk7XG4gICAgICAgIGlmIChkZXNjcmliZWRieS5pbmRleE9mKGlkKSA8IDApIHtcbiAgICAgICAgICAgIGRlc2NyaWJlZGJ5LnB1c2goaWQpO1xuICAgICAgICB9XG4gICAgICAgIGF0dHJpYnV0ZXModGFyZ2V0LCB7ICdhcmlhLWRlc2NyaWJlZGJ5JzogZGVzY3JpYmVkYnkuam9pbignICcpLnRyaW0oKSwgJ2RhdGEtdG9vbHRpcC1pZCc6IGlkIH0pO1xuICAgIH07XG4gICAgVG9vbHRpcC5wcm90b3R5cGUucmVtb3ZlRGVzY3JpYmVkQnkgPSBmdW5jdGlvbiAodGFyZ2V0KSB7XG4gICAgICAgIHZhciBpZCA9IHRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtdG9vbHRpcC1pZCcpO1xuICAgICAgICB2YXIgZGVzY3JpYmVkYnkgPSAodGFyZ2V0LmdldEF0dHJpYnV0ZSgnYXJpYS1kZXNjcmliZWRieScpIHx8ICcnKS5zcGxpdCgvXFxzKy8pO1xuICAgICAgICB2YXIgaW5kZXggPSBkZXNjcmliZWRieS5pbmRleE9mKGlkKTtcbiAgICAgICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgICAgICAgZGVzY3JpYmVkYnkuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgfVxuICAgICAgICB0YXJnZXQucmVtb3ZlQXR0cmlidXRlKCdkYXRhLXRvb2x0aXAtaWQnKTtcbiAgICAgICAgdmFyIG9yZ2Rlc2NyaWJlZGJ5ID0gZGVzY3JpYmVkYnkuam9pbignICcpLnRyaW0oKTtcbiAgICAgICAgaWYgKG9yZ2Rlc2NyaWJlZGJ5KSB7XG4gICAgICAgICAgICB0YXJnZXQuc2V0QXR0cmlidXRlKCdhcmlhLWRlc2NyaWJlZGJ5Jywgb3JnZGVzY3JpYmVkYnkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGFyZ2V0LnJlbW92ZUF0dHJpYnV0ZSgnYXJpYS1kZXNjcmliZWRieScpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBUb29sdGlwLnByb3RvdHlwZS50YXBIb2xkSGFuZGxlciA9IGZ1bmN0aW9uIChldnQpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuYXV0b0Nsb3NlVGltZXIpO1xuICAgICAgICB0aGlzLnRhcmdldEhvdmVyKGV2dC5vcmlnaW5hbEV2ZW50KTtcbiAgICB9O1xuICAgIFRvb2x0aXAucHJvdG90eXBlLnRvdWNoRW5kSGFuZGxlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgaWYgKHRoaXMuaXNTdGlja3kpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgY2xvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBfdGhpcy5jbG9zZSgpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmF1dG9DbG9zZVRpbWVyID0gc2V0VGltZW91dChjbG9zZSwgVE9VQ0hFTkRfSElERV9ERUxBWSk7XG4gICAgfTtcbiAgICBUb29sdGlwLnByb3RvdHlwZS50YXJnZXRDbGljayA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHZhciB0YXJnZXQ7XG4gICAgICAgIGlmICh0aGlzLnRhcmdldCkge1xuICAgICAgICAgICAgdGFyZ2V0ID0gY2xvc2VzdChlLnRhcmdldCwgdGhpcy50YXJnZXQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGFyZ2V0ID0gdGhpcy5lbGVtZW50O1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc051bGxPclVuZGVmaW5lZCh0YXJnZXQpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG1vdXNlRXZlbnQgPSBlO1xuICAgICAgICBpZiAodGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS10b29sdGlwLWlkJykgPT09IG51bGwpIHtcbiAgICAgICAgICAgIGlmICghKG1vdXNlRXZlbnQudHlwZSA9PT0gJ21vdXNlZG93bicgJiYgbW91c2VFdmVudC5idXR0b24gPT09IDIpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50YXJnZXRIb3ZlcihlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICghdGhpcy5pc1N0aWNreSkge1xuICAgICAgICAgICAgdGhpcy5oaWRlVG9vbHRpcCh0aGlzLmFuaW1hdGlvbi5jbG9zZSwgZSwgdGFyZ2V0KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgVG9vbHRpcC5wcm90b3R5cGUudGFyZ2V0SG92ZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICB2YXIgdGFyZ2V0O1xuICAgICAgICBpZiAodGhpcy50YXJnZXQpIHtcbiAgICAgICAgICAgIHRhcmdldCA9IGNsb3Nlc3QoZS50YXJnZXQsIHRoaXMudGFyZ2V0KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRhcmdldCA9IHRoaXMuZWxlbWVudDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNOdWxsT3JVbmRlZmluZWQodGFyZ2V0KSB8fCAodGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS10b29sdGlwLWlkJykgIT09IG51bGwgJiYgdGhpcy5jbG9zZURlbGF5ID09PSAwKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICghaXNOdWxsT3JVbmRlZmluZWQodGhpcy50b29sdGlwRWxlKSAmJiB0aGlzLnRvb2x0aXBFbGUuZ2V0QXR0cmlidXRlKCdlLWFuaW1hdGlvbi1pZCcpKSB7XG4gICAgICAgICAgICBQb3B1cEFuaW1hdGlvbi5zdG9wKHRoaXMudG9vbHRpcEVsZSk7XG4gICAgICAgICAgICB0aGlzLmNsZWFyKCk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHRhcmdldExpc3QgPSBbXS5zbGljZS5jYWxsKHNlbGVjdEFsbCgnW2RhdGEtdG9vbHRpcC1pZD0gXCInICsgdGhpcy5jdHJsSWQgKyAnX2NvbnRlbnRcIl0nLCBkb2N1bWVudCkpO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIHRhcmdldExpc3RfMSA9IHRhcmdldExpc3Q7IF9pIDwgdGFyZ2V0TGlzdF8xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgdmFyIHRhcmdldF8xID0gdGFyZ2V0TGlzdF8xW19pXTtcbiAgICAgICAgICAgIHRoaXMucmVzdG9yZUVsZW1lbnQodGFyZ2V0XzEpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2hvd1Rvb2x0aXAodGFyZ2V0LCB0aGlzLmFuaW1hdGlvbi5vcGVuLCBlKTtcbiAgICB9O1xuICAgIFRvb2x0aXAucHJvdG90eXBlLm1vdXNlTW92ZUJlZm9yZU9wZW4gPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICB0aGlzLm1vdXNlTW92ZUV2ZW50ID0gZTtcbiAgICB9O1xuICAgIFRvb2x0aXAucHJvdG90eXBlLm1vdXNlTW92ZUJlZm9yZVJlbW92ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMubW91c2VNb3ZlVGFyZ2V0KSB7XG4gICAgICAgICAgICBFdmVudEhhbmRsZXIucmVtb3ZlKHRoaXMubW91c2VNb3ZlVGFyZ2V0LCAnbW91c2Vtb3ZlIHRvdWNoc3RhcnQnLCB0aGlzLm1vdXNlTW92ZUJlZm9yZU9wZW4pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBUb29sdGlwLnByb3RvdHlwZS5zaG93VG9vbHRpcCA9IGZ1bmN0aW9uICh0YXJnZXQsIHNob3dBbmltYXRpb24sIGUpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuc2hvd1RpbWVyKTtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuaGlkZVRpbWVyKTtcbiAgICAgICAgaWYgKHRoaXMub3BlbkRlbGF5ICYmIHRoaXMubW91c2VUcmFpbCkge1xuICAgICAgICAgICAgdGhpcy5tb3VzZU1vdmVCZWZvcmVSZW1vdmUoKTtcbiAgICAgICAgICAgIHRoaXMubW91c2VNb3ZlVGFyZ2V0ID0gdGFyZ2V0O1xuICAgICAgICAgICAgRXZlbnRIYW5kbGVyLmFkZCh0aGlzLm1vdXNlTW92ZVRhcmdldCwgJ21vdXNlbW92ZSB0b3VjaHN0YXJ0JywgdGhpcy5tb3VzZU1vdmVCZWZvcmVPcGVuLCB0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnRvb2x0aXBFdmVudEFyZ3MgPSB7XG4gICAgICAgICAgICB0eXBlOiBlID8gZS50eXBlIDogbnVsbCwgY2FuY2VsOiBmYWxzZSwgdGFyZ2V0OiB0YXJnZXQsIGV2ZW50OiBlID8gZSA6IG51bGwsXG4gICAgICAgICAgICBlbGVtZW50OiB0aGlzLnRvb2x0aXBFbGUsIGlzSW50ZXJhY3RlZDogIWlzTnVsbE9yVW5kZWZpbmVkKGUpXG4gICAgICAgIH07XG4gICAgICAgIHZhciBvYnNlcnZlQ2FsbGJhY2sgPSBmdW5jdGlvbiAoYmVmb3JlUmVuZGVyQXJncykge1xuICAgICAgICAgICAgX3RoaXMuYmVmb3JlUmVuZGVyQ2FsbGJhY2soYmVmb3JlUmVuZGVyQXJncywgdGFyZ2V0LCBlLCBzaG93QW5pbWF0aW9uKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy50cmlnZ2VyKCdiZWZvcmVSZW5kZXInLCB0aGlzLnRvb2x0aXBFdmVudEFyZ3MsIG9ic2VydmVDYWxsYmFjay5iaW5kKHRoaXMpKTtcbiAgICB9O1xuICAgIFRvb2x0aXAucHJvdG90eXBlLmJlZm9yZVJlbmRlckNhbGxiYWNrID0gZnVuY3Rpb24gKGJlZm9yZVJlbmRlckFyZ3MsIHRhcmdldCwgZSwgc2hvd0FuaW1hdGlvbikge1xuICAgICAgICBpZiAoYmVmb3JlUmVuZGVyQXJncy5jYW5jZWwpIHtcbiAgICAgICAgICAgIHRoaXMuaXNIaWRkZW4gPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5jbGVhcigpO1xuICAgICAgICAgICAgdGhpcy5tb3VzZU1vdmVCZWZvcmVSZW1vdmUoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuaXNIaWRkZW4gPSBmYWxzZTtcbiAgICAgICAgICAgIGlmIChpc051bGxPclVuZGVmaW5lZCh0aGlzLnRvb2x0aXBFbGUpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jdHJsSWQgPSB0aGlzLmVsZW1lbnQuZ2V0QXR0cmlidXRlKCdpZCcpID9cbiAgICAgICAgICAgICAgICAgICAgZ2V0VW5pcXVlSUQodGhpcy5lbGVtZW50LmdldEF0dHJpYnV0ZSgnaWQnKSkgOiBnZXRVbmlxdWVJRCgndG9vbHRpcCcpO1xuICAgICAgICAgICAgICAgIHRoaXMudG9vbHRpcEVsZSA9IHRoaXMuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFRPT0xUSVBfV1JBUCArICcgJyArIFBPUFVQX1JPT1QgKyAnICcgKyBQT1BVUF9MSUIsIGF0dHJzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICByb2xlOiAndG9vbHRpcCcsICdhcmlhLWhpZGRlbic6ICdmYWxzZScsICdpZCc6IHRoaXMuY3RybElkICsgJ19jb250ZW50J1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy50b29sdGlwRWxlLnN0eWxlLndpZHRoID0gZm9ybWF0VW5pdCh0aGlzLndpZHRoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnRvb2x0aXBFbGUuc3R5bGUuaGVpZ2h0ID0gZm9ybWF0VW5pdCh0aGlzLmhlaWdodCk7XG4gICAgICAgICAgICAgICAgdGhpcy50b29sdGlwRWxlLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICAgICAgICAgICAgICB0aGlzLnRvb2x0aXBCZWZvcmVSZW5kZXIodGFyZ2V0LCB0aGlzKTtcbiAgICAgICAgICAgICAgICB0aGlzLnRvb2x0aXBBZnRlclJlbmRlcih0YXJnZXQsIGUsIHNob3dBbmltYXRpb24sIHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKHRhcmdldCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFkanVzdEFycm93KHRhcmdldCwgdGhpcy5wb3NpdGlvbiwgdGhpcy50b29sdGlwUG9zaXRpb25YLCB0aGlzLnRvb2x0aXBQb3NpdGlvblkpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZERlc2NyaWJlZEJ5KHRhcmdldCwgdGhpcy5jdHJsSWQgKyAnX2NvbnRlbnQnKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJDb250ZW50KHRhcmdldCk7XG4gICAgICAgICAgICAgICAgICAgIFBvcHVwQW5pbWF0aW9uLnN0b3AodGhpcy50b29sdGlwRWxlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXBvc2l0aW9uKHRhcmdldCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudG9vbHRpcEFmdGVyUmVuZGVyKHRhcmdldCwgZSwgc2hvd0FuaW1hdGlvbiwgdGhpcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBUb29sdGlwLnByb3RvdHlwZS5hcHBlbmRDb250YWluZXIgPSBmdW5jdGlvbiAoY3RybE9iaikge1xuICAgICAgICBpZiAodHlwZW9mIHRoaXMuY29udGFpbmVyID09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5jb250YWluZXIgPT09ICdib2R5Jykge1xuICAgICAgICAgICAgICAgIHRoaXMuY29udGFpbmVyRWxlbWVudCA9IGRvY3VtZW50LmJvZHk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmlzQm9keUNvbnRhaW5lciA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMuY29udGFpbmVyRWxlbWVudCA9IHNlbGVjdCh0aGlzLmNvbnRhaW5lciwgZG9jdW1lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuY29udGFpbmVyIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyRWxlbWVudCA9IHRoaXMuY29udGFpbmVyO1xuICAgICAgICAgICAgdGhpcy5pc0JvZHlDb250YWluZXIgPSB0aGlzLmNvbnRhaW5lckVsZW1lbnQudGFnTmFtZSA9PT0gJ0JPRFknO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5pc0JvZHlDb250YWluZXIpIHtcbiAgICAgICAgICAgIGFkZENsYXNzKFt0aGlzLmNvbnRhaW5lckVsZW1lbnRdLCBQT1BVUF9DT05UQUlORVIpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY29udGFpbmVyRWxlbWVudC5hcHBlbmRDaGlsZChjdHJsT2JqLnRvb2x0aXBFbGUpO1xuICAgIH07XG4gICAgVG9vbHRpcC5wcm90b3R5cGUudG9vbHRpcEJlZm9yZVJlbmRlciA9IGZ1bmN0aW9uICh0YXJnZXQsIGN0cmxPYmopIHtcbiAgICAgICAgaWYgKHRhcmdldCkge1xuICAgICAgICAgICAgaWYgKEJyb3dzZXIuaXNEZXZpY2UpIHtcbiAgICAgICAgICAgICAgICBhZGRDbGFzcyhbY3RybE9iai50b29sdGlwRWxlXSwgREVWSUNFKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjdHJsT2JqLndpZHRoICE9PSAnYXV0bycpIHtcbiAgICAgICAgICAgICAgICBjdHJsT2JqLnRvb2x0aXBFbGUuc3R5bGUubWF4V2lkdGggPSBmb3JtYXRVbml0KGN0cmxPYmoud2lkdGgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY3RybE9iai50b29sdGlwRWxlLmFwcGVuZENoaWxkKGN0cmxPYmouY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6IENPTlRFTlQgfSkpO1xuICAgICAgICAgICAgdGhpcy5hcHBlbmRDb250YWluZXIoY3RybE9iaik7XG4gICAgICAgICAgICByZW1vdmVDbGFzcyhbY3RybE9iai50b29sdGlwRWxlXSwgSElERV9QT1BVUCk7XG4gICAgICAgICAgICBjdHJsT2JqLmFkZERlc2NyaWJlZEJ5KHRhcmdldCwgY3RybE9iai5jdHJsSWQgKyAnX2NvbnRlbnQnKTtcbiAgICAgICAgICAgIGN0cmxPYmoucmVuZGVyQ29udGVudCh0YXJnZXQpO1xuICAgICAgICAgICAgYWRkQ2xhc3MoW2N0cmxPYmoudG9vbHRpcEVsZV0sIFBPUFVQX09QRU4pO1xuICAgICAgICAgICAgaWYgKGN0cmxPYmouc2hvd1RpcFBvaW50ZXIpIHtcbiAgICAgICAgICAgICAgICBjdHJsT2JqLnJlbmRlckFycm93KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjdHJsT2JqLnJlbmRlckNsb3NlSWNvbigpO1xuICAgICAgICAgICAgY3RybE9iai5yZW5kZXJQb3B1cCh0YXJnZXQpO1xuICAgICAgICAgICAgY3RybE9iai5hZGp1c3RBcnJvdyh0YXJnZXQsIGN0cmxPYmoucG9zaXRpb24sIGN0cmxPYmoudG9vbHRpcFBvc2l0aW9uWCwgY3RybE9iai50b29sdGlwUG9zaXRpb25ZKTtcbiAgICAgICAgICAgIFBvcHVwQW5pbWF0aW9uLnN0b3AoY3RybE9iai50b29sdGlwRWxlKTtcbiAgICAgICAgICAgIGN0cmxPYmoucmVwb3NpdGlvbih0YXJnZXQpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBUb29sdGlwLnByb3RvdHlwZS50b29sdGlwQWZ0ZXJSZW5kZXIgPSBmdW5jdGlvbiAodGFyZ2V0LCBlLCBzaG93QW5pbWF0aW9uLCBjdHJsT2JqKSB7XG4gICAgICAgIGlmICh0YXJnZXQpIHtcbiAgICAgICAgICAgIHJlbW92ZUNsYXNzKFtjdHJsT2JqLnRvb2x0aXBFbGVdLCBQT1BVUF9PUEVOKTtcbiAgICAgICAgICAgIGFkZENsYXNzKFtjdHJsT2JqLnRvb2x0aXBFbGVdLCBQT1BVUF9DTE9TRSk7XG4gICAgICAgICAgICBjdHJsT2JqLnRvb2x0aXBFdmVudEFyZ3MgPSB7XG4gICAgICAgICAgICAgICAgdHlwZTogZSA/IGUudHlwZSA6IG51bGwsIGNhbmNlbDogZmFsc2UsIHRhcmdldDogdGFyZ2V0LCBldmVudDogZSA/IGUgOiBudWxsLFxuICAgICAgICAgICAgICAgIGVsZW1lbnQ6IGN0cmxPYmoudG9vbHRpcEVsZSwgaXNJbnRlcmFjdGVkOiAhaXNOdWxsT3JVbmRlZmluZWQoZSlcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAoY3RybE9iai5uZWVkVGVtcGxhdGVSZXBvc2l0aW9uKCkgJiYgIWN0cmxPYmoubW91c2VUcmFpbCAmJiAoc2hvd0FuaW1hdGlvbi5lZmZlY3QgPT09ICdOb25lJyB8fCBzaG93QW5pbWF0aW9uLmVmZmVjdCA9PT0gJ0ZhZGVJbicgfHxcbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICAgICAgICAgICh0aGlzLmlzUmVhY3QgJiYgdHlwZW9mIGN0cmxPYmouY29udGVudCAhPSAnc3RyaW5nJykpKSB7XG4gICAgICAgICAgICAgICAgY3RybE9iai50b29sdGlwRWxlLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgb2JzZXJ2ZUNhbGxiYWNrID0gZnVuY3Rpb24gKG9ic2VydmVkQXJncykge1xuICAgICAgICAgICAgICAgIGN0cmxPYmouYmVmb3JlT3BlbkNhbGxiYWNrKG9ic2VydmVkQXJncywgdGFyZ2V0LCBzaG93QW5pbWF0aW9uLCBlKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjdHJsT2JqLnRyaWdnZXIoJ2JlZm9yZU9wZW4nLCBjdHJsT2JqLnRvb2x0aXBFdmVudEFyZ3MsIG9ic2VydmVDYWxsYmFjay5iaW5kKGN0cmxPYmopKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgVG9vbHRpcC5wcm90b3R5cGUuYmVmb3JlT3BlbkNhbGxiYWNrID0gZnVuY3Rpb24gKG9ic2VydmVkQXJncywgdGFyZ2V0LCBzaG93QW5pbWF0aW9uLCBlKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmIChvYnNlcnZlZEFyZ3MuY2FuY2VsKSB7XG4gICAgICAgICAgICB0aGlzLmlzSGlkZGVuID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuY2xlYXIoKTtcbiAgICAgICAgICAgIHRoaXMubW91c2VNb3ZlQmVmb3JlUmVtb3ZlKCk7XG4gICAgICAgICAgICB0aGlzLnJlc3RvcmVFbGVtZW50KHRhcmdldCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB2YXIgb3BlbkFuaW1hdGlvbl8xID0ge1xuICAgICAgICAgICAgICAgIG5hbWU6IChzaG93QW5pbWF0aW9uLmVmZmVjdCA9PT0gJ05vbmUnICYmIGFuaW1hdGlvbk1vZGUgPT09ICdFbmFibGUnKSA/ICdGYWRlSW4nIDogdGhpcy5hbmltYXRpb24ub3Blbi5lZmZlY3QsXG4gICAgICAgICAgICAgICAgZHVyYXRpb246IHNob3dBbmltYXRpb24uZHVyYXRpb24sXG4gICAgICAgICAgICAgICAgZGVsYXk6IHNob3dBbmltYXRpb24uZGVsYXksXG4gICAgICAgICAgICAgICAgdGltaW5nRnVuY3Rpb246ICdlYXNlT3V0J1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmIChzaG93QW5pbWF0aW9uLmVmZmVjdCA9PT0gJ05vbmUnKSB7XG4gICAgICAgICAgICAgICAgb3BlbkFuaW1hdGlvbl8xID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMub3BlbkRlbGF5ID4gMCkge1xuICAgICAgICAgICAgICAgIHZhciBzaG93ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMubW91c2VUcmFpbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgRXZlbnRIYW5kbGVyLmFkZCh0YXJnZXQsICdtb3VzZW1vdmUgdG91Y2hzdGFydCBtb3VzZWVudGVyJywgX3RoaXMub25Nb3VzZU1vdmUsIF90aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMucG9wdXBPYmopIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnBvcHVwT2JqLnNob3cob3BlbkFuaW1hdGlvbl8xLCB0YXJnZXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLm1vdXNlTW92ZUV2ZW50ICYmIF90aGlzLm1vdXNlVHJhaWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5vbk1vdXNlTW92ZShfdGhpcy5tb3VzZU1vdmVFdmVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHRoaXMuc2hvd1RpbWVyID0gc2V0VGltZW91dChzaG93LCB0aGlzLm9wZW5EZWxheSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wb3B1cE9iaikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBvcHVwT2JqLnNob3cob3BlbkFuaW1hdGlvbl8xLCB0YXJnZXQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoZSkge1xuICAgICAgICAgICAgdGhpcy53aXJlTW91c2VFdmVudHMoZSwgdGFyZ2V0KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgVG9vbHRpcC5wcm90b3R5cGUubmVlZFRlbXBsYXRlUmVwb3NpdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lXG4gICAgICAgIHZhciB0b29sdGlwID0gdGhpcztcbiAgICAgICAgcmV0dXJuICFpc051bGxPclVuZGVmaW5lZCh0b29sdGlwLnZpZXdDb250YWluZXJSZWYpXG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICAgICAgJiYgdHlwZW9mIHRvb2x0aXAudmlld0NvbnRhaW5lclJlZiAhPT0gJ3N0cmluZycgfHwgdGhpcy5pc1JlYWN0O1xuICAgIH07XG4gICAgVG9vbHRpcC5wcm90b3R5cGUuY2hlY2tDb2xsaXNpb24gPSBmdW5jdGlvbiAodGFyZ2V0LCB4LCB5KSB7XG4gICAgICAgIHZhciBlbGVQb3MgPSB7XG4gICAgICAgICAgICBsZWZ0OiB4LCB0b3A6IHksIHBvc2l0aW9uOiB0aGlzLnBvc2l0aW9uLFxuICAgICAgICAgICAgaG9yaXpvbnRhbDogdGhpcy50b29sdGlwUG9zaXRpb25YLCB2ZXJ0aWNhbDogdGhpcy50b29sdGlwUG9zaXRpb25ZXG4gICAgICAgIH07XG4gICAgICAgIHZhciBhZmZlY3RlZFBvcyA9IGlzQ29sbGlkZSh0aGlzLnRvb2x0aXBFbGUsIHRoaXMuY2hlY2tDb2xsaWRlVGFyZ2V0KCksIHgsIHkpO1xuICAgICAgICBpZiAoYWZmZWN0ZWRQb3MubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgZWxlUG9zLmhvcml6b250YWwgPSBhZmZlY3RlZFBvcy5pbmRleE9mKCdsZWZ0JykgPj0gMCA/ICdSaWdodCcgOiBhZmZlY3RlZFBvcy5pbmRleE9mKCdyaWdodCcpID49IDAgPyAnTGVmdCcgOlxuICAgICAgICAgICAgICAgIHRoaXMudG9vbHRpcFBvc2l0aW9uWDtcbiAgICAgICAgICAgIGVsZVBvcy52ZXJ0aWNhbCA9IGFmZmVjdGVkUG9zLmluZGV4T2YoJ3RvcCcpID49IDAgPyAnQm90dG9tJyA6IGFmZmVjdGVkUG9zLmluZGV4T2YoJ2JvdHRvbScpID49IDAgPyAnVG9wJyA6XG4gICAgICAgICAgICAgICAgdGhpcy50b29sdGlwUG9zaXRpb25ZO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlbGVQb3M7XG4gICAgfTtcbiAgICBUb29sdGlwLnByb3RvdHlwZS5jYWxjdWxhdGVFbGVtZW50UG9zaXRpb24gPSBmdW5jdGlvbiAocG9zLCBvZmZzZXRQb3MpIHtcbiAgICAgICAgcmV0dXJuIFt0aGlzLmlzQm9keUNvbnRhaW5lciA/IHBvcy5sZWZ0ICsgb2Zmc2V0UG9zLmxlZnQgOlxuICAgICAgICAgICAgICAgIChwb3MubGVmdCAtIHRoaXMuY29udGFpbmVyRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0KSArXG4gICAgICAgICAgICAgICAgICAgIG9mZnNldFBvcy5sZWZ0ICsgd2luZG93LnBhZ2VYT2Zmc2V0ICsgdGhpcy5jb250YWluZXJFbGVtZW50LnNjcm9sbExlZnQsXG4gICAgICAgICAgICB0aGlzLmlzQm9keUNvbnRhaW5lciA/IHBvcy50b3AgKyBvZmZzZXRQb3MudG9wIDpcbiAgICAgICAgICAgICAgICAocG9zLnRvcCAtIHRoaXMuY29udGFpbmVyRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3ApICtcbiAgICAgICAgICAgICAgICAgICAgb2Zmc2V0UG9zLnRvcCArIHdpbmRvdy5wYWdlWU9mZnNldCArIHRoaXMuY29udGFpbmVyRWxlbWVudC5zY3JvbGxUb3BdO1xuICAgIH07XG4gICAgVG9vbHRpcC5wcm90b3R5cGUuY29sbGlzaW9uRmxpcEZpdCA9IGZ1bmN0aW9uICh0YXJnZXQsIHgsIHkpIHtcbiAgICAgICAgdmFyIGVsZVBvcyA9IHRoaXMuY2hlY2tDb2xsaXNpb24odGFyZ2V0LCB4LCB5KTtcbiAgICAgICAgdmFyIG5ld3BvcyA9IGVsZVBvcy5wb3NpdGlvbjtcbiAgICAgICAgaWYgKHRoaXMudG9vbHRpcFBvc2l0aW9uWSAhPT0gZWxlUG9zLnZlcnRpY2FsKSB7XG4gICAgICAgICAgICBuZXdwb3MgPSAoKHRoaXMucG9zaXRpb24uaW5kZXhPZignQm90dG9tJykgPT09IDAgfHwgdGhpcy5wb3NpdGlvbi5pbmRleE9mKCdUb3AnKSA9PT0gMCkgP1xuICAgICAgICAgICAgICAgIGVsZVBvcy52ZXJ0aWNhbCArIHRoaXMudG9vbHRpcFBvc2l0aW9uWCA6IHRoaXMudG9vbHRpcFBvc2l0aW9uWCArIGVsZVBvcy52ZXJ0aWNhbCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMudG9vbHRpcFBvc2l0aW9uWCAhPT0gZWxlUG9zLmhvcml6b250YWwpIHtcbiAgICAgICAgICAgIGlmIChuZXdwb3MuaW5kZXhPZignTGVmdCcpID09PSAwKSB7XG4gICAgICAgICAgICAgICAgZWxlUG9zLnZlcnRpY2FsID0gKG5ld3BvcyA9PT0gJ0xlZnRUb3AnIHx8IG5ld3BvcyA9PT0gJ0xlZnRDZW50ZXInKSA/ICdUb3AnIDogJ0JvdHRvbSc7XG4gICAgICAgICAgICAgICAgbmV3cG9zID0gKGVsZVBvcy52ZXJ0aWNhbCArICdMZWZ0Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobmV3cG9zLmluZGV4T2YoJ1JpZ2h0JykgPT09IDApIHtcbiAgICAgICAgICAgICAgICBlbGVQb3MudmVydGljYWwgPSAobmV3cG9zID09PSAnUmlnaHRUb3AnIHx8IG5ld3BvcyA9PT0gJ1JpZ2h0Q2VudGVyJykgPyAnVG9wJyA6ICdCb3R0b20nO1xuICAgICAgICAgICAgICAgIG5ld3BvcyA9IChlbGVQb3MudmVydGljYWwgKyAnUmlnaHQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsZVBvcy5ob3Jpem9udGFsID0gdGhpcy50b29sdGlwUG9zaXRpb25YO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudG9vbHRpcEV2ZW50QXJncyA9IHtcbiAgICAgICAgICAgIHR5cGU6IG51bGwsIGNhbmNlbDogZmFsc2UsIHRhcmdldDogdGFyZ2V0LCBldmVudDogbnVsbCxcbiAgICAgICAgICAgIGVsZW1lbnQ6IHRoaXMudG9vbHRpcEVsZSwgY29sbGlkZWRQb3NpdGlvbjogbmV3cG9zXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMudHJpZ2dlcignYmVmb3JlQ29sbGlzaW9uJywgdGhpcy50b29sdGlwRXZlbnRBcmdzKTtcbiAgICAgICAgaWYgKHRoaXMudG9vbHRpcEV2ZW50QXJncy5jYW5jZWwpIHtcbiAgICAgICAgICAgIG5ld3BvcyA9IHRoaXMucG9zaXRpb247XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB2YXIgZWxlUG9zVmVydGljYWwgPSBlbGVQb3MudmVydGljYWw7XG4gICAgICAgICAgICB2YXIgZWxlUG9zSG9yaXpvbnRhbCA9IGVsZVBvcy5ob3Jpem9udGFsO1xuICAgICAgICAgICAgaWYgKGVsZVBvcy5wb3NpdGlvbiAhPT0gbmV3cG9zKSB7XG4gICAgICAgICAgICAgICAgdmFyIHBvcyA9IGNhbGN1bGF0ZVBvc2l0aW9uKHRhcmdldCwgZWxlUG9zSG9yaXpvbnRhbCwgZWxlUG9zVmVydGljYWwsICF0aGlzLmlzQm9keUNvbnRhaW5lciwgdGhpcy5pc0JvZHlDb250YWluZXIgPyBudWxsIDogdGhpcy5jb250YWluZXJFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpKTtcbiAgICAgICAgICAgICAgICB0aGlzLmFkanVzdEFycm93KHRhcmdldCwgbmV3cG9zLCBlbGVQb3NIb3Jpem9udGFsLCBlbGVQb3NWZXJ0aWNhbCk7XG4gICAgICAgICAgICAgICAgdmFyIHNjYWxpbmdGYWN0b3JzID0gdGhpcy5nZXRTY2FsaW5nRmFjdG9yKHRhcmdldCk7XG4gICAgICAgICAgICAgICAgdmFyIG9mZnNldFBvcyA9IHRoaXMuY2FsY3VsYXRlVG9vbHRpcE9mZnNldChuZXdwb3MsIHNjYWxpbmdGYWN0b3JzLngsIHNjYWxpbmdGYWN0b3JzLnkpO1xuICAgICAgICAgICAgICAgIG9mZnNldFBvcy50b3AgLT0gdGhpcy5nZXRPZmZTZXRQb3NpdGlvbignVG9wQm90dG9tJywgbmV3cG9zLCB0aGlzLm9mZnNldFkpO1xuICAgICAgICAgICAgICAgIG9mZnNldFBvcy5sZWZ0IC09IHRoaXMuZ2V0T2ZmU2V0UG9zaXRpb24oJ1JpZ2h0TGVmdCcsIG5ld3BvcywgdGhpcy5vZmZzZXRYKTtcbiAgICAgICAgICAgICAgICBlbGVQb3MucG9zaXRpb24gPSBuZXdwb3M7XG4gICAgICAgICAgICAgICAgdmFyIGVsZVBvc2l0aW9uID0gdGhpcy5jYWxjdWxhdGVFbGVtZW50UG9zaXRpb24ocG9zLCBvZmZzZXRQb3MpO1xuICAgICAgICAgICAgICAgIGVsZVBvcy5sZWZ0ID0gZWxlUG9zaXRpb25bMF07XG4gICAgICAgICAgICAgICAgZWxlUG9zLnRvcCA9IGVsZVBvc2l0aW9uWzFdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGp1c3RBcnJvdyh0YXJnZXQsIG5ld3BvcywgZWxlUG9zSG9yaXpvbnRhbCwgZWxlUG9zVmVydGljYWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZhciBlbGVPZmZzZXQgPSB7IGxlZnQ6IGVsZVBvcy5sZWZ0LCB0b3A6IGVsZVBvcy50b3AgfTtcbiAgICAgICAgdmFyIHBvc2l0aW9uID0gdGhpcy5pc0JvZHlDb250YWluZXIgP1xuICAgICAgICAgICAgZml0KHRoaXMudG9vbHRpcEVsZSwgdGhpcy5jaGVja0NvbGxpZGVUYXJnZXQoKSwgeyBYOiB0cnVlLCBZOiB0aGlzLndpbmRvd0NvbGxpc2lvbiB9LCBlbGVPZmZzZXQpIDogZWxlT2Zmc2V0O1xuICAgICAgICB0aGlzLnRvb2x0aXBFbGUuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgIHZhciBhcnJvd0VsZSA9IHNlbGVjdCgnLicgKyBBUlJPV19USVAsIHRoaXMudG9vbHRpcEVsZSk7XG4gICAgICAgIGlmICh0aGlzLnNob3dUaXBQb2ludGVyICYmIGFycm93RWxlICE9IG51bGwgJiYgKG5ld3Bvcy5pbmRleE9mKCdCb3R0b20nKSA9PT0gMCB8fCBuZXdwb3MuaW5kZXhPZignVG9wJykgPT09IDApKSB7XG4gICAgICAgICAgICB2YXIgYXJyb3dsZWZ0ID0gcGFyc2VJbnQoYXJyb3dFbGUuc3R5bGUubGVmdCwgMTApIC0gKHBvc2l0aW9uLmxlZnQgLSBlbGVQb3MubGVmdCk7XG4gICAgICAgICAgICBpZiAoYXJyb3dsZWZ0IDwgMCkge1xuICAgICAgICAgICAgICAgIGFycm93bGVmdCA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICgoYXJyb3dsZWZ0ICsgYXJyb3dFbGUub2Zmc2V0V2lkdGgpID4gdGhpcy50b29sdGlwRWxlLmNsaWVudFdpZHRoKSB7XG4gICAgICAgICAgICAgICAgYXJyb3dsZWZ0ID0gdGhpcy50b29sdGlwRWxlLmNsaWVudFdpZHRoIC0gYXJyb3dFbGUub2Zmc2V0V2lkdGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhcnJvd0VsZS5zdHlsZS5sZWZ0ID0gYXJyb3dsZWZ0LnRvU3RyaW5nKCkgKyAncHgnO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudG9vbHRpcEVsZS5zdHlsZS5kaXNwbGF5ID0gJyc7XG4gICAgICAgIGVsZU9mZnNldC5sZWZ0ID0gcG9zaXRpb24ubGVmdDtcbiAgICAgICAgZWxlT2Zmc2V0LnRvcCA9IHBvc2l0aW9uLnRvcDtcbiAgICAgICAgcmV0dXJuIGVsZU9mZnNldDtcbiAgICB9O1xuICAgIFRvb2x0aXAucHJvdG90eXBlLmdldE9mZlNldFBvc2l0aW9uID0gZnVuY3Rpb24gKHBvc2l0aW9uU3RyaW5nLCBuZXdQb3MsIG9mZnNldFR5cGUpIHtcbiAgICAgICAgcmV0dXJuICgocG9zaXRpb25TdHJpbmcuaW5kZXhPZih0aGlzLnBvc2l0aW9uLnNwbGl0KC8oPz1bQS1aXSkvKVswXSkgIT09IC0xKSAmJlxuICAgICAgICAgICAgKHBvc2l0aW9uU3RyaW5nLmluZGV4T2YobmV3UG9zLnNwbGl0KC8oPz1bQS1aXSkvKVswXSkgIT09IC0xKSkgPyAoMiAqIG9mZnNldFR5cGUpIDogMDtcbiAgICB9O1xuICAgIFRvb2x0aXAucHJvdG90eXBlLmNoZWNrQ29sbGlkZVRhcmdldCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuICF0aGlzLndpbmRvd0NvbGxpc2lvbiAmJiB0aGlzLnRhcmdldCA/IHRoaXMuZWxlbWVudCA6IG51bGw7XG4gICAgfTtcbiAgICBUb29sdGlwLnByb3RvdHlwZS5oaWRlVG9vbHRpcCA9IGZ1bmN0aW9uIChoaWRlQW5pbWF0aW9uLCBlLCB0YXJnZXRFbGVtZW50KSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmICh0aGlzLmNsb3NlRGVsYXkgPiAwKSB7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5oaWRlVGltZXIpO1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuc2hvd1RpbWVyKTtcbiAgICAgICAgICAgIHZhciBoaWRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGlmIChfdGhpcy5jbG9zZURlbGF5ICYmIF90aGlzLnRvb2x0aXBFbGUgJiYgX3RoaXMuaXNUb29sdGlwT3Blbikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIF90aGlzLnRvb2x0aXBIaWRlKGhpZGVBbmltYXRpb24sIGUsIHRhcmdldEVsZW1lbnQpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuaGlkZVRpbWVyID0gc2V0VGltZW91dChoaWRlLCB0aGlzLmNsb3NlRGVsYXkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy50b29sdGlwSGlkZShoaWRlQW5pbWF0aW9uLCBlLCB0YXJnZXRFbGVtZW50KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgVG9vbHRpcC5wcm90b3R5cGUudG9vbHRpcEhpZGUgPSBmdW5jdGlvbiAoaGlkZUFuaW1hdGlvbiwgZSwgdGFyZ2V0RWxlbWVudCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgdGFyZ2V0O1xuICAgICAgICBpZiAoZSkge1xuICAgICAgICAgICAgdGFyZ2V0ID0gdGhpcy50YXJnZXQgPyAodGFyZ2V0RWxlbWVudCB8fCBlLnRhcmdldCkgOiB0aGlzLmVsZW1lbnQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0YXJnZXQgPSBzZWxlY3QoJ1tkYXRhLXRvb2x0aXAtaWQ9IFwiJyArIHRoaXMuY3RybElkICsgJ19jb250ZW50XCJdJywgZG9jdW1lbnQpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudG9vbHRpcEV2ZW50QXJncyA9IHtcbiAgICAgICAgICAgIHR5cGU6IGUgPyBlLnR5cGUgOiBudWxsLCBjYW5jZWw6IGZhbHNlLCB0YXJnZXQ6IHRhcmdldCwgZXZlbnQ6IGUgPyBlIDogbnVsbCxcbiAgICAgICAgICAgIGVsZW1lbnQ6IHRoaXMudG9vbHRpcEVsZSwgaXNJbnRlcmFjdGVkOiAhaXNOdWxsT3JVbmRlZmluZWQoZSlcbiAgICAgICAgfTtcbiAgICAgICAgLy8gdGhpcyBsaW5lIGNvbW1lbnRlZCBmb3IgY2xvc2UgdGhlIHRvb2x0aXAgcG9wdXAgZWxlbWVudCBldmVuIHRoZSB0YXJnZXQgZWxlbWVudCBkZXN0cm95ZWQgaW4gYSBwYWdlLlxuICAgICAgICAvL2lmIChpc051bGxPclVuZGVmaW5lZCh0YXJnZXQpKSB7IHJldHVybjsgfVxuICAgICAgICB0aGlzLnRyaWdnZXIoJ2JlZm9yZUNsb3NlJywgdGhpcy50b29sdGlwRXZlbnRBcmdzLCBmdW5jdGlvbiAob2JzZXJ2ZWRBcmdzKSB7XG4gICAgICAgICAgICBpZiAoIW9ic2VydmVkQXJncy5jYW5jZWwpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5tb3VzZU1vdmVCZWZvcmVSZW1vdmUoKTtcbiAgICAgICAgICAgICAgICBfdGhpcy5wb3B1cEhpZGUoaGlkZUFuaW1hdGlvbiwgdGFyZ2V0LCBlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIF90aGlzLmlzSGlkZGVuID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgVG9vbHRpcC5wcm90b3R5cGUucG9wdXBIaWRlID0gZnVuY3Rpb24gKGhpZGVBbmltYXRpb24sIHRhcmdldCwgZSkge1xuICAgICAgICBpZiAodGFyZ2V0ICYmIGUpIHtcbiAgICAgICAgICAgIHRoaXMucmVzdG9yZUVsZW1lbnQodGFyZ2V0KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmlzSGlkZGVuID0gdHJ1ZTtcbiAgICAgICAgdmFyIGNsb3NlQW5pbWF0aW9uID0ge1xuICAgICAgICAgICAgbmFtZTogKGhpZGVBbmltYXRpb24uZWZmZWN0ID09PSAnTm9uZScgJiYgYW5pbWF0aW9uTW9kZSA9PT0gJ0VuYWJsZScpID8gJ0ZhZGVPdXQnIDogdGhpcy5hbmltYXRpb24uY2xvc2UuZWZmZWN0LFxuICAgICAgICAgICAgZHVyYXRpb246IGhpZGVBbmltYXRpb24uZHVyYXRpb24sXG4gICAgICAgICAgICBkZWxheTogaGlkZUFuaW1hdGlvbi5kZWxheSxcbiAgICAgICAgICAgIHRpbWluZ0Z1bmN0aW9uOiAnZWFzZUluJ1xuICAgICAgICB9O1xuICAgICAgICBpZiAoaGlkZUFuaW1hdGlvbi5lZmZlY3QgPT09ICdOb25lJykge1xuICAgICAgICAgICAgY2xvc2VBbmltYXRpb24gPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMucG9wdXBPYmopIHtcbiAgICAgICAgICAgIHRoaXMucG9wdXBPYmouaGlkZShjbG9zZUFuaW1hdGlvbik7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFRvb2x0aXAucHJvdG90eXBlLnJlc3RvcmVFbGVtZW50ID0gZnVuY3Rpb24gKHRhcmdldCkge1xuICAgICAgICB0aGlzLnVud2lyZU1vdXNlRXZlbnRzKHRhcmdldCk7XG4gICAgICAgIGlmICghaXNOdWxsT3JVbmRlZmluZWQodGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1jb250ZW50JykpKSB7XG4gICAgICAgICAgICB0YXJnZXQuc2V0QXR0cmlidXRlKCd0aXRsZScsIHRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtY29udGVudCcpKTtcbiAgICAgICAgICAgIHRhcmdldC5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtY29udGVudCcpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVtb3ZlRGVzY3JpYmVkQnkodGFyZ2V0KTtcbiAgICB9O1xuICAgIFRvb2x0aXAucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgdGFyZ2V0ID0gdGhpcy5maW5kVGFyZ2V0KCk7XG4gICAgICAgIGlmICh0YXJnZXQpIHtcbiAgICAgICAgICAgIHRoaXMucmVzdG9yZUVsZW1lbnQodGFyZ2V0KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy50b29sdGlwRWxlKSB7XG4gICAgICAgICAgICByZW1vdmVDbGFzcyhbdGhpcy50b29sdGlwRWxlXSwgUE9QVVBfQ0xPU0UpO1xuICAgICAgICAgICAgYWRkQ2xhc3MoW3RoaXMudG9vbHRpcEVsZV0sIFBPUFVQX09QRU4pO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmlzSGlkZGVuKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wb3B1cE9iaikge1xuICAgICAgICAgICAgICAgIHRoaXMucG9wdXBPYmouZGVzdHJveSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMudG9vbHRpcEVsZSkge1xuICAgICAgICAgICAgICAgIHJlbW92ZSh0aGlzLnRvb2x0aXBFbGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy50b29sdGlwRWxlID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMucG9wdXBPYmogPSBudWxsO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBUb29sdGlwLnByb3RvdHlwZS50b29sdGlwSG92ZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLnRvb2x0aXBFbGUpIHtcbiAgICAgICAgICAgIHRoaXMuaXNUb29sdGlwT3BlbiA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFRvb2x0aXAucHJvdG90eXBlLnRvb2x0aXBNb3VzZU91dCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHRoaXMuaXNUb29sdGlwT3BlbiA9IGZhbHNlO1xuICAgICAgICB0aGlzLmhpZGVUb29sdGlwKHRoaXMuYW5pbWF0aW9uLmNsb3NlLCBlLCB0aGlzLmZpbmRUYXJnZXQoKSk7XG4gICAgfTtcbiAgICBUb29sdGlwLnByb3RvdHlwZS5vbk1vdXNlT3V0ID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgdmFyIGVudGVyZWRFbGVtZW50ID0gZS5yZWxhdGVkVGFyZ2V0O1xuICAgICAgICAvLyBkb24ndCBjbG9zZSB0aGUgdG9vbHRpcCBvbmx5IGlmIGl0IGlzIHRvb2x0aXAgY29udGVudCBlbGVtZW50XG4gICAgICAgIGlmIChlbnRlcmVkRWxlbWVudCAmJiAhdGhpcy5tb3VzZVRyYWlsKSB7XG4gICAgICAgICAgICB2YXIgY2hlY2tGb3JUb29sdGlwRWxlbWVudCA9IGNsb3Nlc3QoZW50ZXJlZEVsZW1lbnQsIFwiLlwiICsgVE9PTFRJUF9XUkFQICsgXCIuXCIgKyBQT1BVUF9MSUIgKyBcIi5cIiArIFBPUFVQX1JPT1QpO1xuICAgICAgICAgICAgaWYgKGNoZWNrRm9yVG9vbHRpcEVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICBFdmVudEhhbmRsZXIuYWRkKGNoZWNrRm9yVG9vbHRpcEVsZW1lbnQsICdtb3VzZWxlYXZlJywgdGhpcy50b29sdGlwRWxlbWVudE1vdXNlT3V0LCB0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuaGlkZVRvb2x0aXAodGhpcy5hbmltYXRpb24uY2xvc2UsIGUsIHRoaXMuZmluZFRhcmdldCgpKTtcbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmNsb3NlRGVsYXkgPT09IDAgJiYgKHRoaXMuYW5pbWF0aW9uLmNsb3NlLmVmZmVjdCA9PT0gJ05vbmUnIHx8ICh0aGlzLmlzUmVhY3QgJiYgdHlwZW9mIHRoaXMuY29udGVudCAhPSAnc3RyaW5nJykpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xlYXIoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmhpZGVUb29sdGlwKHRoaXMuYW5pbWF0aW9uLmNsb3NlLCBlLCB0aGlzLmZpbmRUYXJnZXQoKSk7XG4gICAgICAgICAgICB0aGlzLmNsZWFyKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMucG9wdXBPYmogJiYgIXRoaXMucG9wdXBPYmouZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoUE9QVVBfT1BFTikpIHtcbiAgICAgICAgICAgIHRoaXMuY2xlYXIoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgVG9vbHRpcC5wcm90b3R5cGUudG9vbHRpcEVsZW1lbnRNb3VzZU91dCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHRoaXMuaGlkZVRvb2x0aXAodGhpcy5hbmltYXRpb24uY2xvc2UsIGUsIHRoaXMuZmluZFRhcmdldCgpKTtcbiAgICAgICAgRXZlbnRIYW5kbGVyLnJlbW92ZSh0aGlzLmVsZW1lbnQsICdtb3VzZWxlYXZlJywgdGhpcy50b29sdGlwRWxlbWVudE1vdXNlT3V0KTtcbiAgICAgICAgdGhpcy5jbGVhcigpO1xuICAgIH07XG4gICAgVG9vbHRpcC5wcm90b3R5cGUub25TdGlja3lDbG9zZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH07XG4gICAgVG9vbHRpcC5wcm90b3R5cGUub25Nb3VzZU1vdmUgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgdmFyIGV2ZW50UGFnZVggPSAwO1xuICAgICAgICB2YXIgZXZlbnRQYWdlWSA9IDA7XG4gICAgICAgIGlmIChldmVudC50eXBlLmluZGV4T2YoJ3RvdWNoJykgPiAtMSkge1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGV2ZW50UGFnZVggPSBldmVudC50b3VjaGVzWzBdLnBhZ2VYO1xuICAgICAgICAgICAgZXZlbnRQYWdlWSA9IGV2ZW50LnRvdWNoZXNbMF0ucGFnZVk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBldmVudFBhZ2VYID0gZXZlbnQucGFnZVg7XG4gICAgICAgICAgICBldmVudFBhZ2VZID0gZXZlbnQucGFnZVk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzTnVsbE9yVW5kZWZpbmVkKHRoaXMudG9vbHRpcEVsZSkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBQb3B1cEFuaW1hdGlvbi5zdG9wKHRoaXMudG9vbHRpcEVsZSk7XG4gICAgICAgIHJlbW92ZUNsYXNzKFt0aGlzLnRvb2x0aXBFbGVdLCBQT1BVUF9DTE9TRSk7XG4gICAgICAgIGFkZENsYXNzKFt0aGlzLnRvb2x0aXBFbGVdLCBQT1BVUF9PUEVOKTtcbiAgICAgICAgdGhpcy5hZGp1c3RBcnJvdyhldmVudC50YXJnZXQsIHRoaXMucG9zaXRpb24sIHRoaXMudG9vbHRpcFBvc2l0aW9uWCwgdGhpcy50b29sdGlwUG9zaXRpb25ZKTtcbiAgICAgICAgdmFyIHNjYWxpbmdGYWN0b3JzID0gdGhpcy5nZXRTY2FsaW5nRmFjdG9yKGV2ZW50LnRhcmdldCk7XG4gICAgICAgIHZhciBwb3MgPSB0aGlzLmNhbGN1bGF0ZVRvb2x0aXBPZmZzZXQodGhpcy5wb3NpdGlvbiwgc2NhbGluZ0ZhY3RvcnMueCwgc2NhbGluZ0ZhY3RvcnMueSk7XG4gICAgICAgIHZhciB4ID0gZXZlbnRQYWdlWCArIHBvcy5sZWZ0ICsgdGhpcy5vZmZzZXRYO1xuICAgICAgICB2YXIgeSA9IGV2ZW50UGFnZVkgKyBwb3MudG9wICsgdGhpcy5vZmZzZXRZO1xuICAgICAgICB2YXIgZWxlUG9zID0gdGhpcy5jaGVja0NvbGxpc2lvbihldmVudC50YXJnZXQsIHgsIHkpO1xuICAgICAgICBpZiAodGhpcy50b29sdGlwUG9zaXRpb25YICE9PSBlbGVQb3MuaG9yaXpvbnRhbCB8fCB0aGlzLnRvb2x0aXBQb3NpdGlvblkgIT09IGVsZVBvcy52ZXJ0aWNhbCkge1xuICAgICAgICAgICAgdmFyIG5ld3BvcyA9ICh0aGlzLnBvc2l0aW9uLmluZGV4T2YoJ0JvdHRvbScpID09PSAwIHx8IHRoaXMucG9zaXRpb24uaW5kZXhPZignVG9wJykgPT09IDApID9cbiAgICAgICAgICAgICAgICBlbGVQb3MudmVydGljYWwgKyBlbGVQb3MuaG9yaXpvbnRhbCA6IGVsZVBvcy5ob3Jpem9udGFsICsgZWxlUG9zLnZlcnRpY2FsO1xuICAgICAgICAgICAgZWxlUG9zLnBvc2l0aW9uID0gbmV3cG9zO1xuICAgICAgICAgICAgdGhpcy5hZGp1c3RBcnJvdyhldmVudC50YXJnZXQsIGVsZVBvcy5wb3NpdGlvbiwgZWxlUG9zLmhvcml6b250YWwsIGVsZVBvcy52ZXJ0aWNhbCk7XG4gICAgICAgICAgICB2YXIgY29scG9zID0gdGhpcy5jYWxjdWxhdGVUb29sdGlwT2Zmc2V0KGVsZVBvcy5wb3NpdGlvbiwgc2NhbGluZ0ZhY3RvcnMueCwgc2NhbGluZ0ZhY3RvcnMueSk7XG4gICAgICAgICAgICBlbGVQb3MubGVmdCA9IGV2ZW50UGFnZVggKyBjb2xwb3MubGVmdCAtIHRoaXMub2Zmc2V0WDtcbiAgICAgICAgICAgIGVsZVBvcy50b3AgPSBldmVudFBhZ2VZICsgY29scG9zLnRvcCAtIHRoaXMub2Zmc2V0WTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnRvb2x0aXBFbGUuc3R5bGUubGVmdCA9IGVsZVBvcy5sZWZ0ICsgJ3B4JztcbiAgICAgICAgdGhpcy50b29sdGlwRWxlLnN0eWxlLnRvcCA9IGVsZVBvcy50b3AgKyAncHgnO1xuICAgIH07XG4gICAgVG9vbHRpcC5wcm90b3R5cGUua2V5RG93biA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICBpZiAodGhpcy50b29sdGlwRWxlICYmIGV2ZW50LmtleUNvZGUgPT09IDI3KSB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFRvb2x0aXAucHJvdG90eXBlLnRvdWNoRW5kID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgaWYgKHRoaXMudG9vbHRpcEVsZSAmJiBjbG9zZXN0KGUudGFyZ2V0LCAnLicgKyBST09UKSA9PT0gbnVsbCAmJiAhdGhpcy5pc1N0aWNreSkge1xuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBUb29sdGlwLnByb3RvdHlwZS5zY3JvbGxIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgaWYgKHRoaXMudG9vbHRpcEVsZSAmJiAhdGhpcy5pc1N0aWNreSkge1xuICAgICAgICAgICAgaWYgKCEoY2xvc2VzdChlLnRhcmdldCwgXCIuXCIgKyBUT09MVElQX1dSQVAgKyBcIi5cIiArIFBPUFVQX0xJQiArIFwiLlwiICsgUE9QVVBfUk9PVCkpXG4gICAgICAgICAgICAgICAgJiYgIXRoaXMuaXNTdGlja3kpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENvcmUgbWV0aG9kIHRoYXQgaW5pdGlhbGl6ZXMgdGhlIGNvbnRyb2wgcmVuZGVyaW5nLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICAgKi9cbiAgICBUb29sdGlwLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZSgpO1xuICAgICAgICB0aGlzLndpcmVFdmVudHModGhpcy5vcGVuc09uKTtcbiAgICAgICAgdGhpcy5yZW5kZXJDb21wbGV0ZSgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogSW5pdGlhbGl6ZXMgdGhlIHZhbHVlcyBvZiBwcml2YXRlIG1lbWJlcnMuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEByZXR1cm5zIHt2b2lkfVxuICAgICAqL1xuICAgIFRvb2x0aXAucHJvdG90eXBlLnByZVJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy50aXBDbGFzcyA9IFRJUF9CT1RUT007XG4gICAgICAgIHRoaXMudG9vbHRpcFBvc2l0aW9uWCA9ICdDZW50ZXInO1xuICAgICAgICB0aGlzLnRvb2x0aXBQb3NpdGlvblkgPSAnVG9wJztcbiAgICAgICAgdGhpcy5pc0hpZGRlbiA9IHRydWU7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBCaW5kaW5nIGV2ZW50cyB0byB0aGUgVG9vbHRpcCBlbGVtZW50LlxuICAgICAqXG4gICAgICogQGhpZGRlblxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0cmlnZ2VyIC0gc3BlY2lmeSB0aGUgdHJpZ2dlciBzdHJpbmcgdG8gdGhlIGZ1bmN0aW9uXG4gICAgICogQHJldHVybnMge3ZvaWR9XG4gICAgICpcbiAgICAgKi9cbiAgICBUb29sdGlwLnByb3RvdHlwZS53aXJlRXZlbnRzID0gZnVuY3Rpb24gKHRyaWdnZXIpIHtcbiAgICAgICAgdmFyIHRyaWdnZXJMaXN0ID0gdGhpcy5nZXRUcmlnZ2VyTGlzdCh0cmlnZ2VyKTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCB0cmlnZ2VyTGlzdF8xID0gdHJpZ2dlckxpc3Q7IF9pIDwgdHJpZ2dlckxpc3RfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIHZhciBvcGVuc09uID0gdHJpZ2dlckxpc3RfMVtfaV07XG4gICAgICAgICAgICBpZiAob3BlbnNPbiA9PT0gJ0N1c3RvbScpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAob3BlbnNPbiA9PT0gJ0ZvY3VzJykge1xuICAgICAgICAgICAgICAgIHRoaXMud2lyZUZvY3VzRXZlbnRzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAob3BlbnNPbiA9PT0gJ0NsaWNrJykge1xuICAgICAgICAgICAgICAgIEV2ZW50SGFuZGxlci5hZGQodGhpcy5lbGVtZW50LCBCcm93c2VyLnRvdWNoU3RhcnRFdmVudCwgdGhpcy50YXJnZXRDbGljaywgdGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAob3BlbnNPbiA9PT0gJ0hvdmVyJykge1xuICAgICAgICAgICAgICAgIGlmIChCcm93c2VyLmlzRGV2aWNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudG91Y2hNb2R1bGUgPSBuZXcgVG91Y2godGhpcy5lbGVtZW50LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YXBIb2xkVGhyZXNob2xkOiBUQVBIT0xEX1RIUkVTSE9MRCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcEhvbGQ6IHRoaXMudGFwSG9sZEhhbmRsZXIuYmluZCh0aGlzKVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgRXZlbnRIYW5kbGVyLmFkZCh0aGlzLmVsZW1lbnQsIEJyb3dzZXIudG91Y2hFbmRFdmVudCwgdGhpcy50b3VjaEVuZEhhbmRsZXIsIHRoaXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgRXZlbnRIYW5kbGVyLmFkZCh0aGlzLmVsZW1lbnQsICdtb3VzZW92ZXInLCB0aGlzLnRhcmdldEhvdmVyLCB0aGlzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy53aW5kb3dSZXNpemVCb3VuZCA9IHRoaXMud2luZG93UmVzaXplLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMua2V5RG93bkJvdW5kID0gdGhpcy5rZXlEb3duLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMudG91Y2hFbmRCb3VuZCA9IHRoaXMudG91Y2hFbmQuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5zY3JvbGxXaGVlbEJvdW5kID0gdGhpcy5zY3JvbGxIYW5kbGVyLmJpbmQodGhpcyk7XG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3doZWVsJywgdGhpcy5zY3JvbGxXaGVlbEJvdW5kKTtcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgdGhpcy5zY3JvbGxXaGVlbEJvdW5kKTtcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCB0aGlzLnRvdWNoRW5kQm91bmQpO1xuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5rZXlEb3duQm91bmQpO1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy53aW5kb3dSZXNpemVCb3VuZCk7XG4gICAgfTtcbiAgICBUb29sdGlwLnByb3RvdHlwZS5nZXRUcmlnZ2VyTGlzdCA9IGZ1bmN0aW9uICh0cmlnZ2VyKSB7XG4gICAgICAgIGlmICghdHJpZ2dlcikge1xuICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0cmlnZ2VyID09PSAnQXV0bycpIHtcbiAgICAgICAgICAgIHRyaWdnZXIgPSAoQnJvd3Nlci5pc0RldmljZSkgPyAnSG92ZXInIDogJ0hvdmVyIEZvY3VzJztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJpZ2dlci5zcGxpdCgnICcpO1xuICAgIH07XG4gICAgVG9vbHRpcC5wcm90b3R5cGUud2lyZUZvY3VzRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIWlzTnVsbE9yVW5kZWZpbmVkKHRoaXMudGFyZ2V0KSkge1xuICAgICAgICAgICAgdmFyIHRhcmdldExpc3QgPSBbXS5zbGljZS5jYWxsKHNlbGVjdEFsbCh0aGlzLnRhcmdldCwgdGhpcy5lbGVtZW50KSk7XG4gICAgICAgICAgICB0aGlzLnRhcmdldHNMaXN0ID0gdGFyZ2V0TGlzdDtcbiAgICAgICAgICAgIGlmICghaXNOdWxsT3JVbmRlZmluZWQodGhpcy50YXJnZXRzTGlzdCkgJiYgdGhpcy50YXJnZXRzTGlzdC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCB0YXJnZXRMaXN0XzIgPSB0YXJnZXRMaXN0OyBfaSA8IHRhcmdldExpc3RfMi5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRhcmdldCA9IHRhcmdldExpc3RfMltfaV07XG4gICAgICAgICAgICAgICAgICAgIEV2ZW50SGFuZGxlci5hZGQodGFyZ2V0LCAnZm9jdXMnLCB0aGlzLnRhcmdldEhvdmVyLCB0aGlzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBFdmVudEhhbmRsZXIuYWRkKHRoaXMuZWxlbWVudCwgJ2ZvY3VzaW4nLCB0aGlzLnRhcmdldEhvdmVyLCB0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIEV2ZW50SGFuZGxlci5hZGQodGhpcy5lbGVtZW50LCAnZm9jdXNpbicsIHRoaXMudGFyZ2V0SG92ZXIsIHRoaXMpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBUb29sdGlwLnByb3RvdHlwZS53aXJlTW91c2VFdmVudHMgPSBmdW5jdGlvbiAoZSwgdGFyZ2V0KSB7XG4gICAgICAgIGlmICh0aGlzLnRvb2x0aXBFbGUpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5pc1N0aWNreSkge1xuICAgICAgICAgICAgICAgIGlmIChlLnR5cGUgPT09ICdmb2N1cycpIHtcbiAgICAgICAgICAgICAgICAgICAgRXZlbnRIYW5kbGVyLmFkZCh0YXJnZXQsICdibHVyJywgdGhpcy5vbk1vdXNlT3V0LCB0aGlzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGUudHlwZSA9PT0gJ2ZvY3VzaW4nKSB7XG4gICAgICAgICAgICAgICAgICAgIEV2ZW50SGFuZGxlci5hZGQodGFyZ2V0LCAnZm9jdXNvdXQnLCB0aGlzLm9uTW91c2VPdXQsIHRoaXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZS50eXBlID09PSAnbW91c2VvdmVyJykge1xuICAgICAgICAgICAgICAgICAgICBFdmVudEhhbmRsZXIuYWRkKHRhcmdldCwgJ21vdXNlbGVhdmUnLCB0aGlzLm9uTW91c2VPdXQsIHRoaXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jbG9zZURlbGF5KSB7XG4gICAgICAgICAgICAgICAgICAgIEV2ZW50SGFuZGxlci5hZGQodGhpcy50b29sdGlwRWxlLCAnbW91c2VlbnRlcicsIHRoaXMudG9vbHRpcEhvdmVyLCB0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgRXZlbnRIYW5kbGVyLmFkZCh0aGlzLnRvb2x0aXBFbGUsICdtb3VzZWxlYXZlJywgdGhpcy50b29sdGlwTW91c2VPdXQsIHRoaXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLm1vdXNlVHJhaWwgJiYgdGhpcy5vcGVuRGVsYXkgPT09IDApIHtcbiAgICAgICAgICAgICAgICBFdmVudEhhbmRsZXIuYWRkKHRhcmdldCwgJ21vdXNlbW92ZSB0b3VjaHN0YXJ0IG1vdXNlZW50ZXInLCB0aGlzLm9uTW91c2VNb3ZlLCB0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogVW5iaW5kaW5nIGV2ZW50cyBmcm9tIHRoZSBlbGVtZW50IG9uIHdpZGdldCBkZXN0cm95LlxuICAgICAqXG4gICAgICogQGhpZGRlblxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHRyaWdnZXIgLSBzcGVjaWZ5IHRoZSB0cmlnZ2VyIHN0cmluZyB0byB0aGUgZnVuY3Rpb25cbiAgICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICAgKlxuICAgICAqL1xuICAgIFRvb2x0aXAucHJvdG90eXBlLnVud2lyZUV2ZW50cyA9IGZ1bmN0aW9uICh0cmlnZ2VyKSB7XG4gICAgICAgIHZhciB0cmlnZ2VyTGlzdCA9IHRoaXMuZ2V0VHJpZ2dlckxpc3QodHJpZ2dlcik7XG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgdHJpZ2dlckxpc3RfMiA9IHRyaWdnZXJMaXN0OyBfaSA8IHRyaWdnZXJMaXN0XzIubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICB2YXIgb3BlbnNPbiA9IHRyaWdnZXJMaXN0XzJbX2ldO1xuICAgICAgICAgICAgaWYgKG9wZW5zT24gPT09ICdDdXN0b20nKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG9wZW5zT24gPT09ICdGb2N1cycpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVud2lyZUZvY3VzRXZlbnRzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAob3BlbnNPbiA9PT0gJ0NsaWNrJykge1xuICAgICAgICAgICAgICAgIEV2ZW50SGFuZGxlci5yZW1vdmUodGhpcy5lbGVtZW50LCBCcm93c2VyLnRvdWNoU3RhcnRFdmVudCwgdGhpcy50YXJnZXRDbGljayk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAob3BlbnNPbiA9PT0gJ0hvdmVyJykge1xuICAgICAgICAgICAgICAgIGlmIChCcm93c2VyLmlzRGV2aWNlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnRvdWNoTW9kdWxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRvdWNoTW9kdWxlLmRlc3Ryb3koKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBFdmVudEhhbmRsZXIucmVtb3ZlKHRoaXMuZWxlbWVudCwgQnJvd3Nlci50b3VjaEVuZEV2ZW50LCB0aGlzLnRvdWNoRW5kSGFuZGxlcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBFdmVudEhhbmRsZXIucmVtb3ZlKHRoaXMuZWxlbWVudCwgJ21vdXNlb3ZlcicsIHRoaXMudGFyZ2V0SG92ZXIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIHRoaXMudG91Y2hFbmRCb3VuZCk7XG4gICAgICAgIHRoaXMudG91Y2hFbmRCb3VuZCA9IG51bGw7XG4gICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3doZWVsJywgdGhpcy5zY3JvbGxXaGVlbEJvdW5kKTtcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgdGhpcy5zY3JvbGxXaGVlbEJvdW5kKTtcbiAgICAgICAgdGhpcy5zY3JvbGxXaGVlbEJvdW5kID0gbnVsbDtcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMud2luZG93UmVzaXplQm91bmQpO1xuICAgICAgICB0aGlzLndpbmRvd1Jlc2l6ZUJvdW5kID0gbnVsbDtcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMua2V5RG93bkJvdW5kKTtcbiAgICAgICAgdGhpcy5rZXlEb3duQm91bmQgPSBudWxsO1xuICAgIH07XG4gICAgVG9vbHRpcC5wcm90b3R5cGUudW53aXJlRm9jdXNFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghaXNOdWxsT3JVbmRlZmluZWQodGhpcy50YXJnZXQpKSB7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0TGlzdCA9IFtdLnNsaWNlLmNhbGwoc2VsZWN0QWxsKHRoaXMudGFyZ2V0LCB0aGlzLmVsZW1lbnQpKTtcbiAgICAgICAgICAgIGlmICghaXNOdWxsT3JVbmRlZmluZWQodGhpcy50YXJnZXRzTGlzdCkgJiYgdGhpcy50YXJnZXRzTGlzdC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCB0YXJnZXRMaXN0XzMgPSB0YXJnZXRMaXN0OyBfaSA8IHRhcmdldExpc3RfMy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRhcmdldCA9IHRhcmdldExpc3RfM1tfaV07XG4gICAgICAgICAgICAgICAgICAgIEV2ZW50SGFuZGxlci5yZW1vdmUodGFyZ2V0LCAnZm9jdXMnLCB0aGlzLnRhcmdldEhvdmVyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBFdmVudEhhbmRsZXIucmVtb3ZlKHRoaXMuZWxlbWVudCwgJ2ZvY3VzaW4nLCB0aGlzLnRhcmdldEhvdmVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIEV2ZW50SGFuZGxlci5yZW1vdmUodGhpcy5lbGVtZW50LCAnZm9jdXNpbicsIHRoaXMudGFyZ2V0SG92ZXIpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBUb29sdGlwLnByb3RvdHlwZS51bndpcmVNb3VzZUV2ZW50cyA9IGZ1bmN0aW9uICh0YXJnZXQpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzU3RpY2t5KSB7XG4gICAgICAgICAgICB2YXIgdHJpZ2dlckxpc3QgPSB0aGlzLmdldFRyaWdnZXJMaXN0KHRoaXMub3BlbnNPbik7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIHRyaWdnZXJMaXN0XzMgPSB0cmlnZ2VyTGlzdDsgX2kgPCB0cmlnZ2VyTGlzdF8zLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBvcGVuc09uID0gdHJpZ2dlckxpc3RfM1tfaV07XG4gICAgICAgICAgICAgICAgaWYgKG9wZW5zT24gPT09ICdGb2N1cycpIHtcbiAgICAgICAgICAgICAgICAgICAgRXZlbnRIYW5kbGVyLnJlbW92ZSh0YXJnZXQsICdibHVyJywgdGhpcy5vbk1vdXNlT3V0KTtcbiAgICAgICAgICAgICAgICAgICAgRXZlbnRIYW5kbGVyLnJlbW92ZSh0YXJnZXQsICdmb2N1c291dCcsIHRoaXMub25Nb3VzZU91dCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChvcGVuc09uID09PSAnSG92ZXInICYmICFCcm93c2VyLmlzRGV2aWNlKSB7XG4gICAgICAgICAgICAgICAgICAgIEV2ZW50SGFuZGxlci5yZW1vdmUodGFyZ2V0LCAnbW91c2VsZWF2ZScsIHRoaXMub25Nb3VzZU91dCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY2xvc2VEZWxheSkge1xuICAgICAgICAgICAgICAgIEV2ZW50SGFuZGxlci5yZW1vdmUodGFyZ2V0LCAnbW91c2VlbnRlcicsIHRoaXMudG9vbHRpcEhvdmVyKTtcbiAgICAgICAgICAgICAgICBFdmVudEhhbmRsZXIucmVtb3ZlKHRhcmdldCwgJ21vdXNlbGVhdmUnLCB0aGlzLnRvb2x0aXBNb3VzZU91dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMubW91c2VUcmFpbCkge1xuICAgICAgICAgICAgRXZlbnRIYW5kbGVyLnJlbW92ZSh0YXJnZXQsICdtb3VzZW1vdmUgdG91Y2hzdGFydCBtb3VzZWVudGVyJywgdGhpcy5vbk1vdXNlTW92ZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFRvb2x0aXAucHJvdG90eXBlLmZpbmRUYXJnZXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB0YXJnZXQgPSBzZWxlY3QoJ1tkYXRhLXRvb2x0aXAtaWQ9IFwiJyArIHRoaXMuY3RybElkICsgJ19jb250ZW50XCJdJywgZG9jdW1lbnQpO1xuICAgICAgICByZXR1cm4gdGFyZ2V0O1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQ29yZSBtZXRob2QgdG8gcmV0dXJuIHRoZSBjb21wb25lbnQgbmFtZS5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSAtIHRoaXMgbWV0aG9kIHJldHVybnMgbW9kdWxlIG5hbWUuXG4gICAgICovXG4gICAgVG9vbHRpcC5wcm90b3R5cGUuZ2V0TW9kdWxlTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuICd0b29sdGlwJztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHByb3BlcnRpZXMgdG8gYmUgbWFpbnRhaW5lZCBpbiB0aGUgcGVyc2lzdGVkIHN0YXRlLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IC0gdGhpcyBtZXRob2QgcmV0dXJucyBwZXJzaXN0ZWQgZGF0YS5cbiAgICAgKi9cbiAgICBUb29sdGlwLnByb3RvdHlwZS5nZXRQZXJzaXN0RGF0YSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYWRkT25QZXJzaXN0KFtdKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENhbGxlZCBpbnRlcm5hbGx5LCBpZiBhbnkgb2YgdGhlIHByb3BlcnR5IHZhbHVlIGNoYW5nZWQuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqXG4gICAgICogQHBhcmFtIHtUb29sdGlwTW9kZWx9IG5ld1Byb3AgLSB0aGlzIHBhcmFtIGdpdmVzIG5ldyBwcm9wZXJ0eSB2YWx1ZXMgdG8gdGhlIG1ldGhvZFxuICAgICAqIEBwYXJhbSB7VG9vbHRpcE1vZGVsfSBvbGRQcm9wIC0gdGhpcyBwYXJhbSBnaXZlcyBvbGQgcHJvcGVydHkgdmFsdWVzIHRvIHRoZSBtZXRob2RcbiAgICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICAgKlxuICAgICAqL1xuICAgIFRvb2x0aXAucHJvdG90eXBlLm9uUHJvcGVydHlDaGFuZ2VkID0gZnVuY3Rpb24gKG5ld1Byb3AsIG9sZFByb3ApIHtcbiAgICAgICAgdmFyIHRhcmdldEVsZW1lbnQgPSB0aGlzLmZpbmRUYXJnZXQoKTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IE9iamVjdC5rZXlzKG5ld1Byb3ApOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgdmFyIHByb3AgPSBfYVtfaV07XG4gICAgICAgICAgICBzd2l0Y2ggKHByb3ApIHtcbiAgICAgICAgICAgICAgICBjYXNlICd3aWR0aCc6XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnRvb2x0aXBFbGUgJiYgdGFyZ2V0RWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50b29sdGlwRWxlLnN0eWxlLndpZHRoID0gdGhpcy50b29sdGlwRWxlLnN0eWxlLm1heFdpZHRoID0gZm9ybWF0VW5pdChuZXdQcm9wLndpZHRoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVwb3NpdGlvbih0YXJnZXRFbGVtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdoZWlnaHQnOlxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy50b29sdGlwRWxlICYmIHRhcmdldEVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudG9vbHRpcEVsZS5zdHlsZS5oZWlnaHQgPSBmb3JtYXRVbml0KG5ld1Byb3AuaGVpZ2h0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVwb3NpdGlvbih0YXJnZXRFbGVtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdjb250ZW50JzpcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudG9vbHRpcEVsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJDb250ZW50KCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnb3BlbnNPbic6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudW53aXJlRXZlbnRzKG9sZFByb3Aub3BlbnNPbik7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMud2lyZUV2ZW50cyhuZXdQcm9wLm9wZW5zT24pO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdwb3NpdGlvbic6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZm9ybWF0UG9zaXRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudG9vbHRpcEVsZSAmJiB0YXJnZXRFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYXJyb3dJbm5lckVMZSA9IHNlbGVjdCgnLicgKyBBUlJPV19USVBfSU5ORVIsIHRoaXMudG9vbHRpcEVsZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXJyb3dJbm5lckVMZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFycm93SW5uZXJFTGUuc3R5bGUudG9wID0gYXJyb3dJbm5lckVMZS5zdHlsZS5sZWZ0ID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVwb3NpdGlvbih0YXJnZXRFbGVtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICd0aXBQb2ludGVyUG9zaXRpb24nOlxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy50b29sdGlwRWxlICYmIHRhcmdldEVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVwb3NpdGlvbih0YXJnZXRFbGVtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdvZmZzZXRYJzpcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudG9vbHRpcEVsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHggPSBuZXdQcm9wLm9mZnNldFggLSBvbGRQcm9wLm9mZnNldFg7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRvb2x0aXBFbGUuc3R5bGUubGVmdCA9IChwYXJzZUludCh0aGlzLnRvb2x0aXBFbGUuc3R5bGUubGVmdCwgMTApICsgKHgpKS50b1N0cmluZygpICsgJ3B4JztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdvZmZzZXRZJzpcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudG9vbHRpcEVsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHkgPSBuZXdQcm9wLm9mZnNldFkgLSBvbGRQcm9wLm9mZnNldFk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRvb2x0aXBFbGUuc3R5bGUudG9wID0gKHBhcnNlSW50KHRoaXMudG9vbHRpcEVsZS5zdHlsZS50b3AsIDEwKSArICh5KSkudG9TdHJpbmcoKSArICdweCc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnY3NzQ2xhc3MnOlxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy50b29sdGlwRWxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob2xkUHJvcC5jc3NDbGFzcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZUNsYXNzKFt0aGlzLnRvb2x0aXBFbGVdLCBvbGRQcm9wLmNzc0NsYXNzLnNwbGl0KCcgJykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5ld1Byb3AuY3NzQ2xhc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRDbGFzcyhbdGhpcy50b29sdGlwRWxlXSwgbmV3UHJvcC5jc3NDbGFzcy5zcGxpdCgnICcpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdlbmFibGVSdGwnOlxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy50b29sdGlwRWxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5lbmFibGVSdGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRDbGFzcyhbdGhpcy50b29sdGlwRWxlXSwgUlRMKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZUNsYXNzKFt0aGlzLnRvb2x0aXBFbGVdLCBSVEwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2lzU3RpY2t5JzpcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudG9vbHRpcEVsZSAmJiB0YXJnZXRFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlckNsb3NlSWNvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXBvc2l0aW9uKHRhcmdldEVsZW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2NvbnRhaW5lcic6XG4gICAgICAgICAgICAgICAgICAgIGlmICghaXNOdWxsT3JVbmRlZmluZWQodGhpcy5jb250YWluZXJFbGVtZW50KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlQ2xhc3MoW3RoaXMuY29udGFpbmVyRWxlbWVudF0sIFBPUFVQX0NPTlRBSU5FUik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb250YWluZXIgPSBuZXdQcm9wLmNvbnRhaW5lcjtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudG9vbHRpcEVsZSAmJiB0YXJnZXRFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFwcGVuZENvbnRhaW5lcih0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVwb3NpdGlvbih0YXJnZXRFbGVtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBJdCBpcyB1c2VkIHRvIHNob3cgdGhlIFRvb2x0aXAgb24gdGhlIHNwZWNpZmllZCB0YXJnZXQgd2l0aCBzcGVjaWZpYyBhbmltYXRpb24gc2V0dGluZ3MuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbGVtZW50IC0gVGFyZ2V0IGVsZW1lbnQgd2hlcmUgdGhlIFRvb2x0aXAgaXMgdG8gYmUgZGlzcGxheWVkLiAoSXQgaXMgYW4gb3B0aW9uYWwgcGFyYW1ldGVyKVxuICAgICAqIEBwYXJhbSB7VG9vbHRpcEFuaW1hdGlvblNldHRpbmdzfSBhbmltYXRpb24gLSBTZXRzIHRoZSBzcGVjaWZpYyBhbmltYXRpb24sIHdoaWxlIHNob3dpbmcgdGhlIFRvb2x0aXAgb24gdGhlIHNjcmVlbi4gKEl0IGlzIGFuIG9wdGlvbmFsIHBhcmFtZXRlcilcbiAgICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICAgKi9cbiAgICBUb29sdGlwLnByb3RvdHlwZS5vcGVuID0gZnVuY3Rpb24gKGVsZW1lbnQsIGFuaW1hdGlvbikge1xuICAgICAgICBpZiAoaXNOdWxsT3JVbmRlZmluZWQoYW5pbWF0aW9uKSkge1xuICAgICAgICAgICAgYW5pbWF0aW9uID0gdGhpcy5hbmltYXRpb24ub3BlbjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNOdWxsT3JVbmRlZmluZWQoZWxlbWVudCkpIHtcbiAgICAgICAgICAgIGVsZW1lbnQgPSB0aGlzLmVsZW1lbnQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9PT0gJ25vbmUnKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zaG93VG9vbHRpcChlbGVtZW50LCBhbmltYXRpb24pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogSXQgaXMgdXNlZCB0byBoaWRlIHRoZSBUb29sdGlwIHdpdGggc3BlY2lmaWMgYW5pbWF0aW9uIGVmZmVjdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7VG9vbHRpcEFuaW1hdGlvblNldHRpbmdzfSBhbmltYXRpb24gLSBTZXRzIHRoZSBzcGVjaWZpYyBhbmltYXRpb24gd2hlbiBoaWRpbmcgVG9vbHRpcCBmcm9tIHRoZSBzY3JlZW4uIChJdCBpcyBhbiBvcHRpb25hbCBwYXJhbWV0ZXIpXG4gICAgICogQHJldHVybnMge3ZvaWR9XG4gICAgICovXG4gICAgVG9vbHRpcC5wcm90b3R5cGUuY2xvc2UgPSBmdW5jdGlvbiAoYW5pbWF0aW9uKSB7XG4gICAgICAgIGlmICghYW5pbWF0aW9uKSB7XG4gICAgICAgICAgICBhbmltYXRpb24gPSB0aGlzLmFuaW1hdGlvbi5jbG9zZTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmhpZGVUb29sdGlwKGFuaW1hdGlvbik7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBJdCBpcyB1c2VkIHRvIHJlZnJlc2ggdGhlIFRvb2x0aXAgY29udGVudCBhbmQgaXRzIHBvc2l0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gdGFyZ2V0IC0gVGFyZ2V0IGVsZW1lbnQgd2hlcmUgdGhlIFRvb2x0aXAgY29udGVudCBvciBwb3NpdGlvbiBuZWVkcyB0byBiZSByZWZyZXNoZWQuXG4gICAgICogQHJldHVybnMge3ZvaWR9XG4gICAgICovXG4gICAgVG9vbHRpcC5wcm90b3R5cGUucmVmcmVzaCA9IGZ1bmN0aW9uICh0YXJnZXQpIHtcbiAgICAgICAgaWYgKHRoaXMudG9vbHRpcEVsZSkge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJDb250ZW50KHRhcmdldCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMucG9wdXBPYmogJiYgdGFyZ2V0KSB7XG4gICAgICAgICAgICB0aGlzLnJlcG9zaXRpb24odGFyZ2V0KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWlzTnVsbE9yVW5kZWZpbmVkKHRoaXMudGFyZ2V0c0xpc3QpICYmICFpc051bGxPclVuZGVmaW5lZCh0aGlzLnRhcmdldCkpIHtcbiAgICAgICAgICAgIHZhciB0YXJnZXRfMiA9IHNlbGVjdEFsbCh0aGlzLnRhcmdldCwgdGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgIGlmICh0YXJnZXRfMi5sZW5ndGggIT09IHRoaXMudGFyZ2V0c0xpc3QubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy51bndpcmVFdmVudHModGhpcy5vcGVuc09uKTtcbiAgICAgICAgICAgICAgICB0aGlzLndpcmVFdmVudHModGhpcy5vcGVuc09uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBJdCBpcyB1c2VkIHRvIGRlc3Ryb3kgdGhlIFRvb2x0aXAgY29tcG9uZW50LlxuICAgICAqXG4gICAgICogQG1ldGhvZCBkZXN0cm95XG4gICAgICogQHJldHVybnMge3ZvaWR9XG4gICAgICogQG1lbWJlcm9mIFRvb2x0aXBcbiAgICAgKi9cbiAgICBUb29sdGlwLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBfc3VwZXIucHJvdG90eXBlLmRlc3Ryb3kuY2FsbCh0aGlzKTtcbiAgICAgICAgaWYgKHRoaXMudG9vbHRpcEVsZSkge1xuICAgICAgICAgICAgcmVtb3ZlKHRoaXMudG9vbHRpcEVsZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMucG9wdXBPYmopIHtcbiAgICAgICAgICAgIHRoaXMucG9wdXBPYmouZGVzdHJveSgpO1xuICAgICAgICB9XG4gICAgICAgIGNvbGxpc2lvbkRlc3Ryb3koKTtcbiAgICAgICAgcmVtb3ZlQ2xhc3MoW3RoaXMuZWxlbWVudF0sIFJPT1QpO1xuICAgICAgICB0aGlzLnVud2lyZUV2ZW50cyh0aGlzLm9wZW5zT24pO1xuICAgICAgICB0aGlzLnVud2lyZU1vdXNlRXZlbnRzKHRoaXMuZWxlbWVudCk7XG4gICAgICAgIHRoaXMudG9vbHRpcEVsZSA9IG51bGw7XG4gICAgICAgIHRoaXMucG9wdXBPYmogPSBudWxsO1xuICAgICAgICB2YXIgY3VycmVudFRhcmdldCA9IHNlbGVjdEFsbCgnW2RhdGEtdG9vbHRpcC1pZD0gXCInICsgdGhpcy5jdHJsSWQgKyAnX2NvbnRlbnRcIl0nLCB0aGlzLmVsZW1lbnQpO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGN1cnJlbnRUYXJnZXRfMSA9IGN1cnJlbnRUYXJnZXQ7IF9pIDwgY3VycmVudFRhcmdldF8xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9IGN1cnJlbnRUYXJnZXRfMVtfaV07XG4gICAgICAgICAgICB0aGlzLnJlc3RvcmVFbGVtZW50KHRhcmdldCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jb250YWluZXJFbGVtZW50ID0gbnVsbDtcbiAgICAgICAgdGhpcy50aXBDbGFzcyA9IG51bGw7XG4gICAgICAgIHRoaXMudG9vbHRpcFBvc2l0aW9uWCA9IG51bGw7XG4gICAgICAgIHRoaXMudG9vbHRpcFBvc2l0aW9uWSA9IG51bGw7XG4gICAgICAgIHRoaXMuY3RybElkID0gbnVsbDtcbiAgICAgICAgdGhpcy50b29sdGlwRXZlbnRBcmdzID0gbnVsbDtcbiAgICAgICAgdGhpcy50b3VjaE1vZHVsZSA9IG51bGw7XG4gICAgICAgIHRoaXMubW91c2VNb3ZlRXZlbnQgPSBudWxsO1xuICAgICAgICB0aGlzLm1vdXNlTW92ZVRhcmdldCA9IG51bGw7XG4gICAgICAgIHRoaXMuY29udGFpbmVyRWxlbWVudCA9IG51bGw7XG4gICAgICAgIHRoaXMudGFyZ2V0c0xpc3QgPSBudWxsO1xuICAgIH07XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIFByb3BlcnR5KCdhdXRvJylcbiAgICBdLCBUb29sdGlwLnByb3RvdHlwZSwgXCJ3aWR0aFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBQcm9wZXJ0eSgnYXV0bycpXG4gICAgXSwgVG9vbHRpcC5wcm90b3R5cGUsIFwiaGVpZ2h0XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIFByb3BlcnR5KClcbiAgICBdLCBUb29sdGlwLnByb3RvdHlwZSwgXCJjb250ZW50XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIFByb3BlcnR5KCdib2R5JylcbiAgICBdLCBUb29sdGlwLnByb3RvdHlwZSwgXCJjb250YWluZXJcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgUHJvcGVydHkoKVxuICAgIF0sIFRvb2x0aXAucHJvdG90eXBlLCBcInRhcmdldFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBQcm9wZXJ0eSgnVG9wQ2VudGVyJylcbiAgICBdLCBUb29sdGlwLnByb3RvdHlwZSwgXCJwb3NpdGlvblwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBQcm9wZXJ0eSgwKVxuICAgIF0sIFRvb2x0aXAucHJvdG90eXBlLCBcIm9mZnNldFhcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgUHJvcGVydHkoMClcbiAgICBdLCBUb29sdGlwLnByb3RvdHlwZSwgXCJvZmZzZXRZXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIFByb3BlcnR5KHRydWUpXG4gICAgXSwgVG9vbHRpcC5wcm90b3R5cGUsIFwic2hvd1RpcFBvaW50ZXJcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgUHJvcGVydHkodHJ1ZSlcbiAgICBdLCBUb29sdGlwLnByb3RvdHlwZSwgXCJlbmFibGVIdG1sUGFyc2VcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgUHJvcGVydHkoZmFsc2UpXG4gICAgXSwgVG9vbHRpcC5wcm90b3R5cGUsIFwid2luZG93Q29sbGlzaW9uXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIFByb3BlcnR5KCdBdXRvJylcbiAgICBdLCBUb29sdGlwLnByb3RvdHlwZSwgXCJ0aXBQb2ludGVyUG9zaXRpb25cIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgUHJvcGVydHkoJ0F1dG8nKVxuICAgIF0sIFRvb2x0aXAucHJvdG90eXBlLCBcIm9wZW5zT25cIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgUHJvcGVydHkoZmFsc2UpXG4gICAgXSwgVG9vbHRpcC5wcm90b3R5cGUsIFwibW91c2VUcmFpbFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBQcm9wZXJ0eShmYWxzZSlcbiAgICBdLCBUb29sdGlwLnByb3RvdHlwZSwgXCJpc1N0aWNreVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBDb21wbGV4KHt9LCBBbmltYXRpb24pXG4gICAgXSwgVG9vbHRpcC5wcm90b3R5cGUsIFwiYW5pbWF0aW9uXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIFByb3BlcnR5KDApXG4gICAgXSwgVG9vbHRpcC5wcm90b3R5cGUsIFwib3BlbkRlbGF5XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIFByb3BlcnR5KDApXG4gICAgXSwgVG9vbHRpcC5wcm90b3R5cGUsIFwiY2xvc2VEZWxheVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBQcm9wZXJ0eSgpXG4gICAgXSwgVG9vbHRpcC5wcm90b3R5cGUsIFwiY3NzQ2xhc3NcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgUHJvcGVydHkodHJ1ZSlcbiAgICBdLCBUb29sdGlwLnByb3RvdHlwZSwgXCJlbmFibGVIdG1sU2FuaXRpemVyXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIFByb3BlcnR5KCcnKVxuICAgIF0sIFRvb2x0aXAucHJvdG90eXBlLCBcImh0bWxBdHRyaWJ1dGVzXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIEV2ZW50KClcbiAgICBdLCBUb29sdGlwLnByb3RvdHlwZSwgXCJiZWZvcmVSZW5kZXJcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgRXZlbnQoKVxuICAgIF0sIFRvb2x0aXAucHJvdG90eXBlLCBcImJlZm9yZU9wZW5cIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgRXZlbnQoKVxuICAgIF0sIFRvb2x0aXAucHJvdG90eXBlLCBcImFmdGVyT3BlblwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBFdmVudCgpXG4gICAgXSwgVG9vbHRpcC5wcm90b3R5cGUsIFwiYmVmb3JlQ2xvc2VcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgRXZlbnQoKVxuICAgIF0sIFRvb2x0aXAucHJvdG90eXBlLCBcImFmdGVyQ2xvc2VcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgRXZlbnQoKVxuICAgIF0sIFRvb2x0aXAucHJvdG90eXBlLCBcImJlZm9yZUNvbGxpc2lvblwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBFdmVudCgpXG4gICAgXSwgVG9vbHRpcC5wcm90b3R5cGUsIFwiY3JlYXRlZFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBFdmVudCgpXG4gICAgXSwgVG9vbHRpcC5wcm90b3R5cGUsIFwiZGVzdHJveWVkXCIsIHZvaWQgMCk7XG4gICAgVG9vbHRpcCA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBOb3RpZnlQcm9wZXJ0eUNoYW5nZXNcbiAgICBdLCBUb29sdGlwKTtcbiAgICByZXR1cm4gVG9vbHRpcDtcbn0oQ29tcG9uZW50KSk7XG5leHBvcnQgeyBUb29sdGlwIH07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@syncfusion+ej2-popups@29.1.37/node_modules/@syncfusion/ej2-popups/src/tooltip/tooltip.js\n");

/***/ })

};
;