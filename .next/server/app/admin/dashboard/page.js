(()=>{var e={};e.id=427,e.ids=[427],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5315:e=>{"use strict";e.exports=require("path")},7360:e=>{"use strict";e.exports=require("url")},6551:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>h,pages:()=>d,routeModule:()=>u,tree:()=>c}),s(309),s(5595),s(9499),s(3186);var a=s(786),r=s(6216),i=s(7979),n=s.n(i),l=s(41),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let c=["",{children:["admin",{children:["dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,309)),"C:\\Users\\Kidus\\Desktop\\web\\nextjs\\ai_travel\\app\\admin\\dashboard\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,5595)),"C:\\Users\\Kidus\\Desktop\\web\\nextjs\\ai_travel\\app\\admin\\layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,8330))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,9499)),"C:\\Users\\Kidus\\Desktop\\web\\nextjs\\ai_travel\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,3186,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,8330))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["C:\\Users\\Kidus\\Desktop\\web\\nextjs\\ai_travel\\app\\admin\\dashboard\\page.tsx"],h="/admin/dashboard/page",p={require:s,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/admin/dashboard/page",pathname:"/admin/dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},4693:(e,t,s)=>{Promise.resolve().then(s.bind(s,9450))},9450:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>g});var a=s(951),r=s(4092),i=s(8393);s(9656);var n=s(4107),l=s(5661);let o=({headerTitle:e,total:t,lastMonthCount:s,currentMonthCount:r})=>{let{trend:i,percentage:o}=(0,n.jd)(r,s),c="decrement"===i;return(0,a.jsxs)("article",{className:"stats-card",children:[a.jsx("h3",{className:"text-base font-medium",children:e}),(0,a.jsxs)("div",{className:"content",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[a.jsx("h2",{className:"text-4xl font-semibold",children:t}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("figure",{className:"flex items-center gap-1",children:[a.jsx(l.default,{src:`/assets/icons/${c?"arrow-down-red.svg":"arrow-up-green.svg"}`,className:"size-5",alt:"arrow",width:20,height:20}),(0,a.jsxs)("figcaption",{className:(0,n.cn)("text-sm font-medium",c?"text-red-500":"text-success-700"),children:[Math.round(o),"%"]})]}),a.jsx("p",{className:"text-sm font-medium text-gray-100 truncate",children:"vs last month"})]})]}),a.jsx(l.default,{width:100,height:100,src:`/assets/icons/${c?"decrement.svg":"increment.svg"}`,className:"xl:w-32 w-full h-full md:h-32 xl:h-full",alt:"trend graph"})]})]})};var c=s(6314),d=s(3504),h=s(4327),p=s(3201);let u=async()=>{let e,t,s,a,r,i,n,l,o,c,d,p,u,m,x;let f=new Date,g=new Date(f.getFullYear(),f.getMonth(),1).toISOString(),v=new Date(f.getFullYear(),f.getMonth()-1,1).toISOString(),b=new Date(f.getFullYear(),f.getMonth(),0).toISOString(),[j,y]=await Promise.all([h.Fs.listDocuments(h.qA.databaseId,h.qA.userCollectionId),h.Fs.listDocuments(h.qA.databaseId,h.qA.tripCollectionId)]),w=e=>j.documents.filter(t=>t.status===e);return{totalUsers:j.total,usersJoined:{currentMonth:(e=j.documents,t="joinedAt",s=void 0,e.filter(e=>e[t]>=g&&(!s||e[t]<=s)).length),lastMonth:(a=j.documents,r="joinedAt",a.filter(e=>e[r]>=v&&(!b||e[r]<=b)).length)},userRole:{total:w("user").length,currentMonth:(i=w("user"),n="joinedAt",l=void 0,i.filter(e=>e[n]>=g&&(!l||e[n]<=l)).length),lastMonth:(o=w("user"),c="joinedAt",o.filter(e=>e[c]>=v&&(!b||e[c]<=b)).length)},totalTrips:y.total,tripsCreated:{currentMonth:(d=y.documents,p="createdAt",u=void 0,d.filter(e=>e[p]>=g&&(!u||e[p]<=u)).length),lastMonth:(m=w("user"),x="joinedAt",m.filter(e=>e[x]>=v&&(!b||e[x]<=b)).length)}}},m=async()=>Object.entries((await h.Fs.listDocuments(h.qA.databaseId,h.qA.userCollectionId)).documents.reduce((e,t)=>{let s=new Date(t.joinedAt).toLocaleDateString("en-US",{month:"short",day:"numeric"});return e[s]=(e[s]||0)+1,e},{})).map(([e,t])=>({count:Number(t),day:e})),x=async()=>Object.entries((await h.Fs.listDocuments(h.qA.databaseId,h.qA.tripCollectionId)).documents.reduce((e,t)=>{let s=(0,n.c_)(t.tripDetails);if(s&&s.travelStyle){let t=s.travelStyle;e[t]=(e[t]||0)+1}return e},{})).map(([e,t])=>({count:Number(t),travelStyle:e}));var f=s(2435);let g=()=>{let[e,t]=(0,i.useState)(null),[s,l]=(0,i.useState)([]),[g,v]=(0,i.useState)({totalUsers:0,usersJoined:{currentMonth:0,lastMonth:0},totalTrips:0,tripsCreated:{currentMonth:0,lastMonth:0},userRole:{total:0,currentMonth:0,lastMonth:0}}),[b,j]=(0,i.useState)(!0),y=async()=>{try{j(!0);let e=await h.JT.get(),s=await (0,d.Lo)(e.$id);s&&t({id:s.$id,name:s.name,email:s.email,imageUrl:s.imageUrl||"",dateJoined:s.joinedAt});let[a,,,,r]=await Promise.all([u(),m(),x(),(0,d.AW)(4,0),(0,p.B)(4,0)]);v({totalUsers:a.totalUsers,usersJoined:a.usersJoined,totalTrips:a.totalTrips,tripsCreated:a.tripsCreated,userRole:a.userRole});let i=r.allTrips.filter(e=>"tripDetails"in e).map(e=>{let t=(0,n.c_)(e.tripDetails);return t?{id:e.$id,name:t.name||"",imageUrls:e.imageUrls||[],itinerary:t.itinerary,interests:t.interests,travelStyle:t.travelStyle,estimatedPrice:t.estimatedPrice}:null}).filter(e=>null!==e);l(i),j(!1)}catch(e){console.error("Error fetching data:",e)}};return(0,i.useEffect)(()=>{y()},[]),(0,a.jsxs)("main",{className:"dashboard wrapper",children:[a.jsx(r.Z,{title:`Welcome ${e?.name??"Guest"} ðŸ‘‹`,description:"Track activities, trends and popular destinations in real time"}),a.jsx("section",{className:"flex flex-col gap-6",children:(0,a.jsxs)("div",{className:"grid grid-col-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[a.jsx(o,{headerTitle:"Total Users",total:g.totalUsers,currentMonthCount:g.usersJoined.currentMonth,lastMonthCount:g.usersJoined.lastMonth}),a.jsx(o,{headerTitle:"Total Trips",total:g.totalTrips,currentMonthCount:g.tripsCreated.currentMonth,lastMonthCount:g.tripsCreated.lastMonth}),a.jsx(o,{headerTitle:"Active Users",total:g.userRole.total,currentMonthCount:g.userRole.currentMonth,lastMonthCount:g.userRole.lastMonth})]})}),(0,a.jsxs)("section",{className:"container",children:[a.jsx("h1",{className:"text-xl font-semibold text-dark-100",children:"Created Trips"}),a.jsx("div",{className:"trip-grid",children:b?a.jsx(f.Z,{length:4}):s.map(e=>a.jsx(c.Z,{id:e.id,name:e.name,imageUrl:e.imageUrls[0],location:e.itinerary?.[0]?.location??"",tags:[e.interests||"",e.travelStyle||""],price:e.estimatedPrice||""},e.id))})]})]})}},3201:(e,t,s)=>{"use strict";s.d(t,{B:()=>i});var a=s(4327),r=s(1997);let i=async(e,t)=>{let s=await a.Fs.listDocuments(a.qA.databaseId,a.qA.tripCollectionId,[r.AE.limit(e),r.AE.offset(t),r.AE.orderDesc("createdAt")]);return 0===s.total?(console.error("No trips found"),{allTrips:[],total:0}):{allTrips:s.documents,total:s.total}}},4092:(e,t,s)=>{"use strict";s.d(t,{Z:()=>c});var a=s(951),r=s(1838),i=s(4107),n=s(490),l=s(7814),o=s(5661);let c=({title:e,description:t,ctaText:s,ctaUrl:c})=>{let d=(0,l.usePathname)();return(0,a.jsxs)("header",{className:"header",children:[(0,a.jsxs)("article",{children:[a.jsx("h1",{className:(0,i.cn)("text-dark-100","/admin"===d?"text-2xl md:text-4xl font-bold":"text-xl md:text-2xl font-semibold"),children:e}),a.jsx("p",{className:(0,i.cn)("text-gray-600 font-normal","/"===d?"text-base md:text-lg":"text-sm md:text-lg"),children:t})]}),s&&c&&a.jsx(n.default,{href:c,children:(0,a.jsxs)(r.r,{type:"button",className:"button-class !h-11 !w-full md:w-[240px]",children:[a.jsx(o.default,{src:"/assets/icons/plus.svg",alt:"plus",className:"size-5",width:100,height:100}),a.jsx("span",{className:"p-16-semibold text-white",children:s})]})})]})}},6314:(e,t,s)=>{"use strict";s.d(t,{Z:()=>d});var a=s(951),r=s(8785),i=s(1424),n=s(4107),l=s(490),o=s(7814),c=s(5661);let d=({id:e,name:t,location:s,imageUrl:d,tags:h,price:p})=>{let u=(0,o.usePathname)();return(0,a.jsxs)(l.default,{href:"/"===u||u.startsWith("/travel")?`/travel/${e}`:`/admin/trips/${e}`,className:"trip-card",children:[a.jsx(c.default,{src:d,width:600,height:600,alt:t}),(0,a.jsxs)("article",{children:[a.jsx("h2",{children:t}),(0,a.jsxs)("figure",{children:[a.jsx(c.default,{src:"/assets/icons/location-mark.svg",alt:"location",className:"size-4 !w-3 !h-3",width:20,height:20}),a.jsx("figcaption",{className:"!text-gray-600",children:s})]})]}),a.jsx("div",{className:"mt-2 pl-[18px] pr-3.5 pb-5",children:a.jsx(r.r,{id:"travel-chip",children:a.jsx(i.U,{children:h?.map((e,t)=>a.jsx(i.g,{text:n.gr(e),cssClass:n.cn(1===t?"!bg-pink-50 !text-pink-500":"!bg-success-50 !text-success-700")},t))})})}),a.jsx("article",{className:"tripCard-pill",children:p})]})}},2435:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var a=s(951),r=s(9159);s(8393);let i=({length:e})=>a.jsx(a.Fragment,{children:Array.from({length:e}).map((e,t)=>(0,a.jsxs)("div",{className:"trip-card",children:[a.jsx(r._,{width:"100%",height:"100px",shape:"Rectangle",className:"mb-2 bg-gray-300"}),(0,a.jsxs)("article",{className:"p-4",children:[a.jsx(r._,{width:"100%",height:"20px",shape:"Text",className:"mb-2 bg-gray-300"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(r._,{width:"16px",height:"16px",shape:"Circle",className:"mb-2 bg-gray-300"}),a.jsx(r._,{width:"40%",height:"14px",shape:"Text",className:"mb-2 bg-gray-300"})]})]}),(0,a.jsxs)("div",{className:"mt-2 pl-[18px] pr-3.5 pb-5 flex gap-2 flex-wrap",children:[a.jsx(r._,{width:"60px",height:"28px",shape:"Text",className:" bg-gray-300"}),a.jsx(r._,{width:"50px",height:"28px",shape:"Text",className:" bg-gray-300"})]}),a.jsx("div",{className:"tripCard-pill",children:a.jsx(r._,{width:"80px",height:"24px",shape:"Text"})})]},t))})},8382:(e,t,s)=>{"use strict";s.d(t,{Od:()=>c});var a,r,i=s(5883),n=function(){var e=function(t,s){return(e=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s])})(t,s)};return function(t,s){function a(){this.constructor=t}e(t,s),t.prototype=null===s?Object.create(s):(a.prototype=s.prototype,new a)}}(),l=function(e,t,s,a){var r,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,s):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,s,a);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(n=(i<3?r(n):i>3?r(t,s,n):r(t,s))||n);return i>3&&n&&Object.defineProperty(t,s,n),n},o={TEXTSHAPE:"e-skeleton-text",CIRCLESHAPE:"e-skeleton-circle",SQUARESHAPE:"e-skeleton-square",RECTANGLESHAPE:"e-skeleton-rectangle",WAVEEFFECT:"e-shimmer-wave",PULSEEFFECT:"e-shimmer-pulse",FADEEFFECT:"e-shimmer-fade",VISIBLENONE:"e-visible-none"};(function(e){e.Text="Text",e.Circle="Circle",e.Square="Square",e.Rectangle="Rectangle"})(a||(a={})),function(e){e.Wave="Wave",e.Fade="Fade",e.Pulse="Pulse",e.None="None"}(r||(r={}));var c=function(e){function t(t,s){return e.call(this,t,s)||this}return n(t,e),t.prototype.getModuleName=function(){return"skeleton"},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.prototype.preRender=function(){this.element.id||(this.element.id=(0,i.QI)("e-"+this.getModuleName())),this.updateCssClass(),(0,i.Y4)(this.element,{role:"alert","aria-busy":"true","aria-live":"polite","aria-label":this.label})},t.prototype.render=function(){this.initialize()},t.prototype.onPropertyChanged=function(e,t){for(var s=0,a=Object.keys(e);s<a.length;s++)switch(a[s]){case"width":case"height":this.updateDimension();break;case"shape":this.updateShape();break;case"shimmerEffect":this.updateEffect();break;case"visible":this.updateVisibility();break;case"label":this.element.setAttribute("aria-label",this.label);break;case"cssClass":t.cssClass&&(0,i.IV)([this.element],t.cssClass.split(" ")),this.updateCssClass()}},t.prototype.destroy=function(){e.prototype.destroy.call(this);var t=["role","aria-live","aria-busy","aria-label"],s=[];this.cssClass&&(s=s.concat(this.cssClass.split(" ")));for(var a=0;a<t.length;a++)this.element.removeAttribute(t[parseInt(a.toString(),10)]);s=(s=s.concat(this.element.classList.value.match(/(e-skeleton-[^\s]+)/g)||[])).concat(this.element.classList.value.match(/(e-shimmer-[^\s]+)/g)||[]),(0,i.IV)([this.element],s)},t.prototype.initialize=function(){this.updateShape(),this.updateEffect(),this.updateVisibility()},t.prototype.updateShape=function(){if(!(0,i.le)(this.shape)){var e=o[this.shape.toUpperCase()+"SHAPE"],t=this.element.classList.value.match(/(e-skeleton-[^\s]+)/g)||[];this.updateDimension(),t&&(0,i.IV)([this.element],t),(0,i.cn)([this.element],[e])}},t.prototype.updateDimension=function(){var e=!this.width&&["Text","Rectangle"].indexOf(this.shape)>-1?"100%":(0,i.Ac)(this.width),t=["Circle","Square"].indexOf(this.shape)>-1?e:(0,i.Ac)(this.height);this.element.style.width=e,this.element.style.height=t},t.prototype.updateEffect=function(){var e=this.element.classList.value.match(/(e-shimmer-[^\s]+)/g)||[];e&&(0,i.IV)([this.element],e),(0,i.le)(this.shimmerEffect)||(0,i.cn)([this.element],[o[this.shimmerEffect.toUpperCase()+"EFFECT"]])},t.prototype.updateVisibility=function(){this.element.classList[this.visible?"remove":"add"](o.VISIBLENONE)},t.prototype.updateCssClass=function(){this.cssClass&&(0,i.cn)([this.element],this.cssClass.split(" "))},l([(0,i.Z9)("")],t.prototype,"width",void 0),l([(0,i.Z9)("")],t.prototype,"height",void 0),l([(0,i.Z9)(!0)],t.prototype,"visible",void 0),l([(0,i.Z9)("Text")],t.prototype,"shape",void 0),l([(0,i.Z9)("Wave")],t.prototype,"shimmerEffect",void 0),l([(0,i.Z9)("Loading...")],t.prototype,"label",void 0),l([(0,i.Z9)("")],t.prototype,"cssClass",void 0),t=l([i.Zl],t)}(i.wA)},9159:(e,t,s)=>{"use strict";s.d(t,{_:()=>l});var a=s(8393),r=s(8382),i=s(5093),n=function(){var e=function(t,s){return(e=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s])})(t,s)};return function(t,s){function a(){this.constructor=t}e(t,s),t.prototype=null===s?Object.create(s):(a.prototype=s.prototype,new a)}}(),l=function(e){function t(t){var s=e.call(this,t)||this;return s.initRenderCalled=!1,s.checkInjectedModules=!1,s.statelessTemplateProps=null,s.templateProps=null,s.immediateRender=!0,s.isReactMock=!0,s.portals=[],s}return n(t,e),t.prototype.render=function(){if(this.isReactMock=!1,(!this.element||this.initRenderCalled)&&!this.refreshing||this.isReactForeceUpdate)return a.createElement("div",this.getDefaultAttributes(),[].concat(this.props.children,this.portals));e.prototype.render.call(this),this.initRenderCalled=!0},t}(r.Od);(0,i.ef)(l,[i.VZ,a.Component])},309:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(3233).createProxy)(String.raw`C:\Users\Kidus\Desktop\web\nextjs\ai_travel\app\admin\dashboard\page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[638,172,354,93,838,280,165,407],()=>s(6551));module.exports=a})();