"use strict";(()=>{var e={};e.id=973,e.ids=[973],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},1282:e=>{e.exports=require("child_process")},4770:e=>{e.exports=require("crypto")},7702:e=>{e.exports=require("events")},2615:e=>{e.exports=require("http")},5240:e=>{e.exports=require("https")},1764:e=>{e.exports=require("util")},1495:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>x,patchFetch:()=>y,requestAsyncStorage:()=>l,routeModule:()=>c,serverHooks:()=>m,staticGenerationAsyncStorage:()=>d});var a={};r.r(a),r.d(a,{POST:()=>u});var i=r(7375),n=r(6216),s=r(8553),o=r(4061),p=r(8461);async function u(e){try{let{name:t,description:r,images:a,price:i,tripId:n}=await e.json(),s=await p.A.paymentLinks.create({line_items:[{price:(await p.A.prices.create({product:(await p.A.products.create({name:t,description:r,images:a})).id,unit_amount:100*i,currency:"usd"})).id,quantity:1}],metadata:{tripId:n},after_completion:{type:"redirect",redirect:{url:`http://localhost:3000/travel/${n}/success`}}});return o.NextResponse.json({url:s.url})}catch(e){return console.log("Error creating payment link:",e),o.NextResponse.json({error:"Failed to create payment link"},{status:500})}}let c=new i.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/create-payment-link/route",pathname:"/api/create-payment-link",filename:"route",bundlePath:"app/api/create-payment-link/route"},resolvedPagePath:"C:\\Users\\Kidus\\Desktop\\web\\nextjs\\ai_travel\\app\\api\\create-payment-link\\route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:l,staticGenerationAsyncStorage:d,serverHooks:m}=c,x="/api/create-payment-link/route";function y(){return(0,s.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:d})}},8461:(e,t,r)=>{r.d(t,{A:()=>a});let a=new(r(6557)).Z(process.env.PUBLIC_NEXT_STRIPE_SECRET_KEY,{apiVersion:"2025-04-30.basil"})}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[638,496,61],()=>r(1495));module.exports=a})();