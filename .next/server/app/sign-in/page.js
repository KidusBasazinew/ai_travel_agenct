(()=>{var e={};e.id=253,e.ids=[253],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5315:e=>{"use strict";e.exports=require("path")},7360:e=>{"use strict";e.exports=require("url")},311:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>d,routeModule:()=>h,tree:()=>c}),r(4252),r(9499),r(3186);var s=r(786),a=r(6216),n=r(7979),i=r.n(n),o=r(41),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let c=["",{children:["sign-in",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,4252)),"C:\\Users\\Kidus\\Desktop\\web\\nextjs\\ai_travel\\app\\sign-in\\page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,8330))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,9499)),"C:\\Users\\Kidus\\Desktop\\web\\nextjs\\ai_travel\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,3186,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,8330))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["C:\\Users\\Kidus\\Desktop\\web\\nextjs\\ai_travel\\app\\sign-in\\page.tsx"],u="/sign-in/page",p={require:r,loadChunk:()=>Promise.resolve()},h=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/sign-in/page",pathname:"/sign-in",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},3044:(e,t,r)=>{Promise.resolve().then(r.bind(r,8541))},5850:(e,t,r)=>{Promise.resolve().then(r.bind(r,873))},7520:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,2362,23)),Promise.resolve().then(r.t.bind(r,5727,23)),Promise.resolve().then(r.t.bind(r,8010,23)),Promise.resolve().then(r.t.bind(r,7684,23)),Promise.resolve().then(r.t.bind(r,7441,23)),Promise.resolve().then(r.t.bind(r,9295,23))},8541:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u});var s=r(951),a=r(1838),n=r(3504),i=r(4327),o=r(490),l=r(5661);r(9656);var c=r(8393),d=r(7814);let u=()=>{let e=(0,d.useRouter)();return(0,c.useEffect)(()=>{(async()=>{try{let t=await i.JT.get();t?.$id&&e.push("/")}catch(e){console.log("No user logged in",e)}})()},[e]),s.jsx("main",{className:"auth",children:s.jsx("section",{className:"size-full glassmorphism flex-center px-6",children:(0,s.jsxs)("div",{className:"sign-in-card",children:[(0,s.jsxs)("header",{className:"header",children:[s.jsx(o.default,{href:"/",children:s.jsx(l.default,{src:"/assets/icons/logo.svg",alt:"logo",width:100,height:100,className:"size-[30px]"})}),s.jsx("h1",{className:"p-28-bold text-dark-100",children:"Tourvisto"})]}),(0,s.jsxs)("article",{children:[s.jsx("h2",{className:"p-28-semibold text-dark-100 text-center",children:"Start Your Travel Journey"}),s.jsx("p",{className:"p-18-regular text-center text-gray-600 !leading-7",children:"Sign in with Google to manage destinations, itineraries, and user activity with ease."})]}),(0,s.jsxs)(a.r,{type:"button",iconCss:"e-search-icon",className:"button-class !h-11 !w-full",onClick:n.Cb,children:[s.jsx(l.default,{src:"/assets/icons/google.svg",className:"size-5",width:100,height:100,alt:"google"}),s.jsx("span",{className:"p-18-semibold text-white",children:"Sign in with Google"})]})]})})})}},3504:(e,t,r)=>{"use strict";r.d(t,{AW:()=>p,Cb:()=>d,Lo:()=>o,TX:()=>u,aC:()=>h,cm:()=>l});var s=r(1997),a=r(4327),n=r(7814),i=r(8393);let o=async e=>{try{let{documents:t,total:r}=await a.Fs.listDocuments(a.qA.databaseId,a.qA.userCollectionId,[s.AE.equal("accountId",e)]);return r>0?t[0]:null}catch(e){return console.error("Error fetching user:",e),null}},l=async()=>{try{let e=await a.JT.get();if(!e)throw Error("User not found");let{providerAccessToken:t}=await a.JT.getSession("current")||{},r=t?await c(t):null;(await a.Fs.createDocument(a.qA.databaseId,a.qA.userCollectionId,s.ID.unique(),{accountId:e.$id,email:e.email,name:e.name,imageUrl:r,joinedAt:new Date().toISOString()})).$id||(0,n.redirect)("/sign-in")}catch(e){console.error("Error storing user data:",e)}},c=async e=>{try{let t=await fetch("https://people.googleapis.com/v1/people/me?personFields=photos",{headers:{Authorization:`Bearer ${e}`}});if(!t.ok)throw Error("Failed to fetch Google profile picture");let{photos:r}=await t.json();return r?.[0]?.url||null}catch(e){return console.error("Error fetching Google picture:",e),null}},d=async()=>{try{a.JT.createOAuth2Session(s.O4.Google,`${window.location.origin}/`,`${window.location.origin}/404`)}catch(e){console.error("Error during OAuth2 session creation:",e)}},u=async()=>{try{await a.JT.deleteSession("current")}catch(e){console.error("Error during logout:",e)}},p=async(e,t)=>{try{let{documents:r,total:n}=await a.Fs.listDocuments(a.qA.databaseId,a.qA.userCollectionId,[s.AE.limit(e),s.AE.offset(t)]);if(0===n)return{users:[],total:n};return{users:r,total:n}}catch(e){return console.log("Error fetching users"),{users:[],total:0}}};function h(){let[e,t]=(0,i.useState)(null),[r,s]=(0,i.useState)(!0);return{user:e,loading:r,logout:async()=>{try{await a.JT.deleteSession("current"),t(null)}catch(e){throw console.error("Logout failed:",e),e}}}}},4327:(e,t,r)=>{"use strict";r.d(t,{Fs:()=>o,JT:()=>i,qA:()=>a});var s=r(1997);let a={endpointUrl:"https://fra.cloud.appwrite.io/v1",projectId:"6814b4380013a9b2410d",apiKey:"6814b4380013a9b2410d",databaseId:"6814b52c000b72ebe3de",userCollectionId:"6814b5420024dcd92e84",tripCollectionId:"6814b56000150e453129"},n=new s.KU().setEndpoint(a.endpointUrl).setProject(a.projectId),i=new s.mR(n),o=new s.Lg(n);new s.Ke(n)},873:(e,t,r)=>{"use strict";r.d(t,{default:()=>d});var s=r(951),a=r(7814),n=r(490),i=r(5661),o=r(4107),l=r(3504),c=r(8393);function d(){let e=(0,a.usePathname)(),{logout:t}=(0,l.aC)(),r=(0,a.useRouter)(),[d,u]=(0,c.useState)(null),[p,h]=(0,c.useState)(!1),m=async()=>{try{await t(),r.push("/sign-in")}catch(e){console.error("Logout failed:",e)}};return e.startsWith("/sign-in")||e.startsWith("/admin")||e.startsWith("/payment")?null:(0,s.jsxs)("nav",{className:(0,o.cn)(p||e.startsWith("/travel")?"bg-white shadow-gray-100 shadow-md":"glassmorphism","flex py-2 justify-between w-full items-center fixed z-50"),children:[s.jsx("div",{className:"flex items-center space-x-4 ml-10",children:(0,s.jsxs)(n.default,{href:"/",className:"flex items-center space-x-2",children:[s.jsx(i.default,{src:"/assets/icons/logo.svg",alt:"Logo",width:32,height:32,className:"size-8"}),s.jsx("span",{className:"font-semibold text-lg",children:"Tourvisto"})]})}),(0,s.jsxs)("div",{className:"flex items-center space-x-4 mr-10",children:[s.jsx(n.default,{href:"/admin",className:(0,o.cn)(p||e.startsWith("/travel")?"text-gray-800":"text-white","font-base font-normal"),children:"Admin Panel"}),s.jsx(n.default,{href:"/",className:(0,o.cn)("text-base font-normal",{"text-white":!p,"text-black":p,"text-dark-100":e.startsWith("/travel")})}),s.jsx(i.default,{src:d?.imageUrl||"/assets/images/david.wepb",alt:"user",referrerPolicy:"no-referrer",width:100,height:100,className:"w-10 h-10 rounded-full overflow-hidden"}),s.jsx("button",{onClick:m,className:"cursor-pointer rounded-full bg-white opacity-70 p-1 transition-all duration-300 hover:opacity-100",children:s.jsx(i.default,{width:100,height:100,src:"/assets/icons/logout.svg",alt:"logout",className:"size-10 rotate-180 transition-all duration-300"})})]})]})}r(4327)},9656:(e,t,r)=>{"use strict";(0,r(5883).GG)("Ngo9BigBOggjHTQxAR8/V1NNaF5cWWJCf1FpRmJGdld5fUVHYVZUTXxaS00DNHVRdkdmWXpednRQQmNdVUdzW0pWYUA=")},4107:(e,t,r)=>{"use strict";r.d(t,{Ew:()=>p,c_:()=>c,cn:()=>o,gr:()=>d,jd:()=>u,p6:()=>l});var s=r(769),a=r(2753),n=r(1244),i=r.n(n);function o(...e){return(0,a.m6)((0,s.W)(e))}let l=e=>i()(e).format("MMMM DD, YYYY");function c(e){try{return JSON.parse(e)}catch(e){return console.error("Failed to parse trip data:",e),null}}function d(e=""){return e.trim().split(/\s+/)[0]||""}let u=(e,t)=>{if(0===t)return 0===e?{trend:"no change",percentage:0}:{trend:"increment",percentage:100};let r=e-t,s=Math.abs(r/t*100);return r>0?{trend:"increment",percentage:s}:r<0?{trend:"decrement",percentage:s}:{trend:"no change",percentage:0}},p=e=>e.replace(/([A-Z])/g," $1").replace(/^./,e=>e.toUpperCase())},9499:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d,metadata:()=>c});var s=r(7161),a=r(2040),n=r.n(a),i=r(216),o=r.n(i);r(5359);let l=(0,r(3233).createProxy)(String.raw`C:\Users\Kidus\Desktop\web\nextjs\ai_travel\components\Navbar.tsx#default`),c={title:"Create Next App",description:"Generated by create next app"};function d({children:e}){return s.jsx("html",{lang:"en",children:(0,s.jsxs)("body",{className:`${n().variable} ${o().variable} antialiased`,children:[s.jsx(l,{}),e]})})}},4252:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(3233).createProxy)(String.raw`C:\Users\Kidus\Desktop\web\nextjs\ai_travel\app\sign-in\page.tsx#default`)},8330:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var s=r(2354);let a=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,s.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]},5359:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[638,172,354,93,838],()=>r(311));module.exports=s})();