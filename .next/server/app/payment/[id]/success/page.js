(()=>{var e={};e.id=810,e.ids=[810],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5315:e=>{"use strict";e.exports=require("path")},7360:e=>{"use strict";e.exports=require("url")},6460:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>d,routeModule:()=>p,tree:()=>c}),s(801),s(9499),s(3186);var r=s(786),a=s(6216),n=s(7979),i=s.n(n),l=s(41),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let c=["",{children:["payment",{children:["[id]",{children:["success",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,801)),"C:\\Users\\Kidus\\Desktop\\web\\nextjs\\ai_travel\\app\\payment\\[id]\\success\\page.tsx"]}]},{}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,8330))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,9499)),"C:\\Users\\Kidus\\Desktop\\web\\nextjs\\ai_travel\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,3186,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,8330))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["C:\\Users\\Kidus\\Desktop\\web\\nextjs\\ai_travel\\app\\payment\\[id]\\success\\page.tsx"],u="/payment/[id]/success/page",m={require:s,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/payment/[id]/success/page",pathname:"/payment/[id]/success",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},9783:(e,t,s)=>{Promise.resolve().then(s.bind(s,1230))},5850:(e,t,s)=>{Promise.resolve().then(s.bind(s,873))},7520:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2362,23)),Promise.resolve().then(s.t.bind(s,5727,23)),Promise.resolve().then(s.t.bind(s,8010,23)),Promise.resolve().then(s.t.bind(s,7684,23)),Promise.resolve().then(s.t.bind(s,7441,23)),Promise.resolve().then(s.t.bind(s,9295,23))},1230:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var r=s(951);s(3201);var a=s(4107),n=s(5661),i=s(8393);function l({params:e}){let[t,s]=(0,i.useState)(null),[l,o]=(0,i.useState)(!0),[c,d]=(0,i.useState)(null);if(l)return r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsx("p",{children:"Loading..."})});if(c||!t)return r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsx("p",{className:"text-red-500",children:c||"Trip not found"})});let u=(0,a.c_)(t.tripDetails);return u?r.jsx("div",{className:"min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:r.jsx("div",{className:"max-w-3xl mx-auto",children:r.jsx("div",{className:"bg-white shadow-lg rounded-lg overflow-hidden",children:(0,r.jsxs)("div",{className:"px-6 py-8",children:[r.jsx("div",{className:"flex items-center justify-center mb-8",children:r.jsx("div",{className:"bg-green-100 rounded-full p-3",children:r.jsx("svg",{className:"h-8 w-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})})}),r.jsx("h2",{className:"text-2xl font-bold text-center text-gray-900 mb-4",children:"Payment Successful!"}),r.jsx("p",{className:"text-center text-gray-600 mb-8",children:"Thank you for your booking. Your payment has been processed successfully."}),(0,r.jsxs)("div",{className:"border-t border-gray-200 pt-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Booking Details"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Trip Name:"}),r.jsx("span",{className:"text-gray-900 font-medium",children:u.name})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Amount Paid:"}),(0,r.jsxs)("span",{className:"text-gray-900 font-medium",children:["$",u.estimatedPrice]})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Booking Date:"}),r.jsx("span",{className:"text-gray-900 font-medium",children:new Date().toLocaleDateString()})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Booking ID:"}),r.jsx("span",{className:"text-gray-900 font-medium",children:t.$id})]})]})]}),r.jsx("div",{className:"mt-8",children:r.jsx(n.default,{src:t.imageUrls[0],alt:u.name,width:400,height:300,className:"rounded-lg object-cover w-full"})}),r.jsx("div",{className:"mt-8 text-center",children:r.jsx("a",{href:"/travel",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700",children:"View All Trips"})})]})})})}):r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsx("p",{className:"text-red-500",children:"Failed to parse trip details"})})}},3504:(e,t,s)=>{"use strict";s.d(t,{AW:()=>m,Cb:()=>d,Lo:()=>l,TX:()=>u,aC:()=>p,cm:()=>o});var r=s(1997),a=s(4327),n=s(7814),i=s(8393);let l=async e=>{try{let{documents:t,total:s}=await a.Fs.listDocuments(a.qA.databaseId,a.qA.userCollectionId,[r.AE.equal("accountId",e)]);return s>0?t[0]:null}catch(e){return console.error("Error fetching user:",e),null}},o=async()=>{try{let e=await a.JT.get();if(!e)throw Error("User not found");let{providerAccessToken:t}=await a.JT.getSession("current")||{},s=t?await c(t):null;(await a.Fs.createDocument(a.qA.databaseId,a.qA.userCollectionId,r.ID.unique(),{accountId:e.$id,email:e.email,name:e.name,imageUrl:s,joinedAt:new Date().toISOString()})).$id||(0,n.redirect)("/sign-in")}catch(e){console.error("Error storing user data:",e)}},c=async e=>{try{let t=await fetch("https://people.googleapis.com/v1/people/me?personFields=photos",{headers:{Authorization:`Bearer ${e}`}});if(!t.ok)throw Error("Failed to fetch Google profile picture");let{photos:s}=await t.json();return s?.[0]?.url||null}catch(e){return console.error("Error fetching Google picture:",e),null}},d=async()=>{try{a.JT.createOAuth2Session(r.O4.Google,`${window.location.origin}/`,`${window.location.origin}/404`)}catch(e){console.error("Error during OAuth2 session creation:",e)}},u=async()=>{try{await a.JT.deleteSession("current")}catch(e){console.error("Error during logout:",e)}},m=async(e,t)=>{try{let{documents:s,total:n}=await a.Fs.listDocuments(a.qA.databaseId,a.qA.userCollectionId,[r.AE.limit(e),r.AE.offset(t)]);if(0===n)return{users:[],total:n};return{users:s,total:n}}catch(e){return console.log("Error fetching users"),{users:[],total:0}}};function p(){let[e,t]=(0,i.useState)(null),[s,r]=(0,i.useState)(!0);return{user:e,loading:s,logout:async()=>{try{await a.JT.deleteSession("current"),t(null)}catch(e){throw console.error("Logout failed:",e),e}}}}},4327:(e,t,s)=>{"use strict";s.d(t,{Fs:()=>l,JT:()=>i,qA:()=>a});var r=s(1997);let a={endpointUrl:"https://fra.cloud.appwrite.io/v1",projectId:"6814b4380013a9b2410d",apiKey:"6814b4380013a9b2410d",databaseId:"6814b52c000b72ebe3de",userCollectionId:"6814b5420024dcd92e84",tripCollectionId:"6814b56000150e453129"},n=new r.KU().setEndpoint(a.endpointUrl).setProject(a.projectId),i=new r.mR(n),l=new r.Lg(n);new r.Ke(n)},3201:(e,t,s)=>{"use strict";s.d(t,{B:()=>n});var r=s(4327),a=s(1997);let n=async(e,t)=>{let s=await r.Fs.listDocuments(r.qA.databaseId,r.qA.tripCollectionId,[a.AE.limit(e),a.AE.offset(t),a.AE.orderDesc("createdAt")]);return 0===s.total?(console.error("No trips found"),{allTrips:[],total:0}):{allTrips:s.documents,total:s.total}}},873:(e,t,s)=>{"use strict";s.d(t,{default:()=>d});var r=s(951),a=s(7814),n=s(490),i=s(5661),l=s(4107),o=s(3504),c=s(8393);function d(){let e=(0,a.usePathname)(),{logout:t}=(0,o.aC)(),s=(0,a.useRouter)(),[d,u]=(0,c.useState)(null),[m,p]=(0,c.useState)(!1),h=async()=>{try{await t(),s.push("/sign-in")}catch(e){console.error("Logout failed:",e)}};return e.startsWith("/sign-in")||e.startsWith("/admin")||e.startsWith("/payment")?null:(0,r.jsxs)("nav",{className:(0,l.cn)(m||e.startsWith("/travel")?"bg-white shadow-gray-100 shadow-md":"glassmorphism","flex py-2 justify-between w-full items-center fixed z-50"),children:[r.jsx("div",{className:"flex items-center space-x-4 ml-10",children:(0,r.jsxs)(n.default,{href:"/",className:"flex items-center space-x-2",children:[r.jsx(i.default,{src:"/assets/icons/logo.svg",alt:"Logo",width:32,height:32,className:"size-8"}),r.jsx("span",{className:"font-semibold text-lg",children:"Tourvisto"})]})}),(0,r.jsxs)("div",{className:"flex items-center space-x-4 mr-10",children:[r.jsx(n.default,{href:"/admin",className:(0,l.cn)(m||e.startsWith("/travel")?"text-gray-800":"text-white","font-base font-normal"),children:"Admin Panel"}),r.jsx(n.default,{href:"/",className:(0,l.cn)("text-base font-normal",{"text-white":!m,"text-black":m,"text-dark-100":e.startsWith("/travel")})}),r.jsx(i.default,{src:d?.imageUrl||"/assets/images/david.wepb",alt:"user",referrerPolicy:"no-referrer",width:100,height:100,className:"w-10 h-10 rounded-full overflow-hidden"}),r.jsx("button",{onClick:h,className:"cursor-pointer rounded-full bg-white opacity-70 p-1 transition-all duration-300 hover:opacity-100",children:r.jsx(i.default,{width:100,height:100,src:"/assets/icons/logout.svg",alt:"logout",className:"size-10 rotate-180 transition-all duration-300"})})]})]})}s(4327)},4107:(e,t,s)=>{"use strict";s.d(t,{Ew:()=>m,c_:()=>c,cn:()=>l,gr:()=>d,jd:()=>u,p6:()=>o});var r=s(769),a=s(2753),n=s(1244),i=s.n(n);function l(...e){return(0,a.m6)((0,r.W)(e))}let o=e=>i()(e).format("MMMM DD, YYYY");function c(e){try{return JSON.parse(e)}catch(e){return console.error("Failed to parse trip data:",e),null}}function d(e=""){return e.trim().split(/\s+/)[0]||""}let u=(e,t)=>{if(0===t)return 0===e?{trend:"no change",percentage:0}:{trend:"increment",percentage:100};let s=e-t,r=Math.abs(s/t*100);return s>0?{trend:"increment",percentage:r}:s<0?{trend:"decrement",percentage:r}:{trend:"no change",percentage:0}},m=e=>e.replace(/([A-Z])/g," $1").replace(/^./,e=>e.toUpperCase())},9499:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d,metadata:()=>c});var r=s(7161),a=s(2040),n=s.n(a),i=s(216),l=s.n(i);s(5359);let o=(0,s(3233).createProxy)(String.raw`C:\Users\Kidus\Desktop\web\nextjs\ai_travel\components\Navbar.tsx#default`),c={title:"Create Next App",description:"Generated by create next app"};function d({children:e}){return r.jsx("html",{lang:"en",children:(0,r.jsxs)("body",{className:`${n().variable} ${l().variable} antialiased`,children:[r.jsx(o,{}),e]})})}},801:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(3233).createProxy)(String.raw`C:\Users\Kidus\Desktop\web\nextjs\ai_travel\app\payment\[id]\success\page.tsx#default`)},8330:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s(2354);let a=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,r.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]},5359:()=>{}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[638,172,354],()=>s(6460));module.exports=r})();